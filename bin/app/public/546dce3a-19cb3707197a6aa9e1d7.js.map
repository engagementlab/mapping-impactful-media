{"version":3,"file":"546dce3a-19cb3707197a6aa9e1d7.js","mappings":"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","sources":["webpack://mapping-impactful-media/./node_modules/paper/dist/paper-full.js"],"sourcesContent":["/*!\n * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey\n * http://juerglehni.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n *\n * Date: Thu Nov 3 21:15:36 2022 +0100\n *\n ***\n *\n * Straps.js - Class inheritance library with support for bean-style accessors\n *\n * Copyright (c) 2006 - 2020 Jrg Lehni\n * http://juerglehni.com/\n *\n * Distributed under the MIT license.\n *\n ***\n *\n * Acorn.js\n * https://marijnhaverbeke.nl/acorn/\n *\n * Acorn is a tiny, fast JavaScript parser written in JavaScript,\n * created by Marijn Haverbeke and released under an MIT license.\n *\n */\n\nvar paper = function (self, undefined) {\n  self = self || require('./node/self.js');\n  var window = self.window,\n    document = self.document;\n  var Base = new function () {\n    var hidden = /^(statics|enumerable|beans|preserve)$/,\n      array = [],\n      slice = array.slice,\n      create = Object.create,\n      describe = Object.getOwnPropertyDescriptor,\n      define = Object.defineProperty,\n      forEach = array.forEach || function (iter, bind) {\n        for (var i = 0, l = this.length; i < l; i++) {\n          iter.call(bind, this[i], i, this);\n        }\n      },\n      forIn = function (iter, bind) {\n        for (var i in this) {\n          if (this.hasOwnProperty(i)) iter.call(bind, this[i], i, this);\n        }\n      },\n      set = Object.assign || function (dst) {\n        for (var i = 1, l = arguments.length; i < l; i++) {\n          var src = arguments[i];\n          for (var key in src) {\n            if (src.hasOwnProperty(key)) dst[key] = src[key];\n          }\n        }\n        return dst;\n      },\n      each = function (obj, iter, bind) {\n        if (obj) {\n          var desc = describe(obj, 'length');\n          (desc && typeof desc.value === 'number' ? forEach : forIn).call(obj, iter, bind = bind || obj);\n        }\n        return bind;\n      };\n    function inject(dest, src, enumerable, beans, preserve) {\n      var beansNames = {};\n      function field(name, val) {\n        val = val || (val = describe(src, name)) && (val.get ? val : val.value);\n        if (typeof val === 'string' && val[0] === '#') val = dest[val.substring(1)] || val;\n        var isFunc = typeof val === 'function',\n          res = val,\n          prev = preserve || isFunc && !val.base ? val && val.get ? name in dest : dest[name] : null,\n          bean;\n        if (!preserve || !prev) {\n          if (isFunc && prev) val.base = prev;\n          if (isFunc && beans !== false && (bean = name.match(/^([gs]et|is)(([A-Z])(.*))$/))) beansNames[bean[3].toLowerCase() + bean[4]] = bean[2];\n          if (!res || isFunc || !res.get || typeof res.get !== 'function' || !Base.isPlainObject(res)) {\n            res = {\n              value: res,\n              writable: true\n            };\n          }\n          if ((describe(dest, name) || {\n            configurable: true\n          }).configurable) {\n            res.configurable = true;\n            res.enumerable = enumerable != null ? enumerable : !bean;\n          }\n          define(dest, name, res);\n        }\n      }\n      if (src) {\n        for (var name in src) {\n          if (src.hasOwnProperty(name) && !hidden.test(name)) field(name);\n        }\n        for (var name in beansNames) {\n          var part = beansNames[name],\n            set = dest['set' + part],\n            get = dest['get' + part] || set && dest['is' + part];\n          if (get && (beans === true || get.length === 0)) field(name, {\n            get: get,\n            set: set\n          });\n        }\n      }\n      return dest;\n    }\n    function Base() {\n      for (var i = 0, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n        if (src) set(this, src);\n      }\n      return this;\n    }\n    return inject(Base, {\n      inject: function (src) {\n        if (src) {\n          var statics = src.statics === true ? src : src.statics,\n            beans = src.beans,\n            preserve = src.preserve;\n          if (statics !== src) inject(this.prototype, src, src.enumerable, beans, preserve);\n          inject(this, statics, null, beans, preserve);\n        }\n        for (var i = 1, l = arguments.length; i < l; i++) this.inject(arguments[i]);\n        return this;\n      },\n      extend: function () {\n        var base = this,\n          ctor,\n          proto;\n        for (var i = 0, obj, l = arguments.length; i < l && !(ctor && proto); i++) {\n          obj = arguments[i];\n          ctor = ctor || obj.initialize;\n          proto = proto || obj.prototype;\n        }\n        ctor = ctor || function () {\n          base.apply(this, arguments);\n        };\n        proto = ctor.prototype = proto || create(this.prototype);\n        define(proto, 'constructor', {\n          value: ctor,\n          writable: true,\n          configurable: true\n        });\n        inject(ctor, this);\n        if (arguments.length) this.inject.apply(ctor, arguments);\n        ctor.base = base;\n        return ctor;\n      }\n    }).inject({\n      enumerable: false,\n      initialize: Base,\n      set: Base,\n      inject: function () {\n        for (var i = 0, l = arguments.length; i < l; i++) {\n          var src = arguments[i];\n          if (src) {\n            inject(this, src, src.enumerable, src.beans, src.preserve);\n          }\n        }\n        return this;\n      },\n      extend: function () {\n        var res = create(this);\n        return res.inject.apply(res, arguments);\n      },\n      each: function (iter, bind) {\n        return each(this, iter, bind);\n      },\n      clone: function () {\n        return new this.constructor(this);\n      },\n      statics: {\n        set: set,\n        each: each,\n        create: create,\n        define: define,\n        describe: describe,\n        clone: function (obj) {\n          return set(new obj.constructor(), obj);\n        },\n        isPlainObject: function (obj) {\n          var ctor = obj != null && obj.constructor;\n          return ctor && (ctor === Object || ctor === Base || ctor.name === 'Object');\n        },\n        pick: function (a, b) {\n          return a !== undefined ? a : b;\n        },\n        slice: function (list, begin, end) {\n          return slice.call(list, begin, end);\n        }\n      }\n    });\n  }();\n  if (typeof module !== 'undefined') module.exports = Base;\n  Base.inject({\n    enumerable: false,\n    toString: function () {\n      return this._id != null ? (this._class || 'Object') + (this._name ? \" '\" + this._name + \"'\" : ' @' + this._id) : '{ ' + Base.each(this, function (value, key) {\n        if (!/^_/.test(key)) {\n          var type = typeof value;\n          this.push(key + ': ' + (type === 'number' ? Formatter.instance.number(value) : type === 'string' ? \"'\" + value + \"'\" : value));\n        }\n      }, []).join(', ') + ' }';\n    },\n    getClassName: function () {\n      return this._class || '';\n    },\n    importJSON: function (json) {\n      return Base.importJSON(json, this);\n    },\n    exportJSON: function (options) {\n      return Base.exportJSON(this, options);\n    },\n    toJSON: function () {\n      return Base.serialize(this);\n    },\n    set: function (props, exclude) {\n      if (props) Base.filter(this, props, exclude, this._prioritize);\n      return this;\n    }\n  }, {\n    beans: false,\n    statics: {\n      exports: {},\n      extend: function extend() {\n        var res = extend.base.apply(this, arguments),\n          name = res.prototype._class;\n        if (name && !Base.exports[name]) Base.exports[name] = res;\n        return res;\n      },\n      equals: function (obj1, obj2) {\n        if (obj1 === obj2) return true;\n        if (obj1 && obj1.equals) return obj1.equals(obj2);\n        if (obj2 && obj2.equals) return obj2.equals(obj1);\n        if (obj1 && obj2 && typeof obj1 === 'object' && typeof obj2 === 'object') {\n          if (Array.isArray(obj1) && Array.isArray(obj2)) {\n            var length = obj1.length;\n            if (length !== obj2.length) return false;\n            while (length--) {\n              if (!Base.equals(obj1[length], obj2[length])) return false;\n            }\n          } else {\n            var keys = Object.keys(obj1),\n              length = keys.length;\n            if (length !== Object.keys(obj2).length) return false;\n            while (length--) {\n              var key = keys[length];\n              if (!(obj2.hasOwnProperty(key) && Base.equals(obj1[key], obj2[key]))) return false;\n            }\n          }\n          return true;\n        }\n        return false;\n      },\n      read: function (list, start, options, amount) {\n        if (this === Base) {\n          var value = this.peek(list, start);\n          list.__index++;\n          return value;\n        }\n        var proto = this.prototype,\n          readIndex = proto._readIndex,\n          begin = start || readIndex && list.__index || 0,\n          length = list.length,\n          obj = list[begin];\n        amount = amount || length - begin;\n        if (obj instanceof this || options && options.readNull && obj == null && amount <= 1) {\n          if (readIndex) list.__index = begin + 1;\n          return obj && options && options.clone ? obj.clone() : obj;\n        }\n        obj = Base.create(proto);\n        if (readIndex) obj.__read = true;\n        obj = obj.initialize.apply(obj, begin > 0 || begin + amount < length ? Base.slice(list, begin, begin + amount) : list) || obj;\n        if (readIndex) {\n          list.__index = begin + obj.__read;\n          var filtered = obj.__filtered;\n          if (filtered) {\n            list.__filtered = filtered;\n            obj.__filtered = undefined;\n          }\n          obj.__read = undefined;\n        }\n        return obj;\n      },\n      peek: function (list, start) {\n        return list[list.__index = start || list.__index || 0];\n      },\n      remain: function (list) {\n        return list.length - (list.__index || 0);\n      },\n      readList: function (list, start, options, amount) {\n        var res = [],\n          entry,\n          begin = start || 0,\n          end = amount ? begin + amount : list.length;\n        for (var i = begin; i < end; i++) {\n          res.push(Array.isArray(entry = list[i]) ? this.read(entry, 0, options) : this.read(list, i, options, 1));\n        }\n        return res;\n      },\n      readNamed: function (list, name, start, options, amount) {\n        var value = this.getNamed(list, name),\n          hasValue = value !== undefined;\n        if (hasValue) {\n          var filtered = list.__filtered;\n          if (!filtered) {\n            var source = this.getSource(list);\n            filtered = list.__filtered = Base.create(source);\n            filtered.__unfiltered = source;\n          }\n          filtered[name] = undefined;\n        }\n        return this.read(hasValue ? [value] : list, start, options, amount);\n      },\n      readSupported: function (list, dest) {\n        var source = this.getSource(list),\n          that = this,\n          read = false;\n        if (source) {\n          Object.keys(source).forEach(function (key) {\n            if (key in dest) {\n              var value = that.readNamed(list, key);\n              if (value !== undefined) {\n                dest[key] = value;\n              }\n              read = true;\n            }\n          });\n        }\n        return read;\n      },\n      getSource: function (list) {\n        var source = list.__source;\n        if (source === undefined) {\n          var arg = list.length === 1 && list[0];\n          source = list.__source = arg && Base.isPlainObject(arg) ? arg : null;\n        }\n        return source;\n      },\n      getNamed: function (list, name) {\n        var source = this.getSource(list);\n        if (source) {\n          return name ? source[name] : list.__filtered || source;\n        }\n      },\n      hasNamed: function (list, name) {\n        return !!this.getNamed(list, name);\n      },\n      filter: function (dest, source, exclude, prioritize) {\n        var processed;\n        function handleKey(key) {\n          if (!(exclude && key in exclude) && !(processed && key in processed)) {\n            var value = source[key];\n            if (value !== undefined) dest[key] = value;\n          }\n        }\n        if (prioritize) {\n          var keys = {};\n          for (var i = 0, key, l = prioritize.length; i < l; i++) {\n            if ((key = prioritize[i]) in source) {\n              handleKey(key);\n              keys[key] = true;\n            }\n          }\n          processed = keys;\n        }\n        Object.keys(source.__unfiltered || source).forEach(handleKey);\n        return dest;\n      },\n      isPlainValue: function (obj, asString) {\n        return Base.isPlainObject(obj) || Array.isArray(obj) || asString && typeof obj === 'string';\n      },\n      serialize: function (obj, options, compact, dictionary) {\n        options = options || {};\n        var isRoot = !dictionary,\n          res;\n        if (isRoot) {\n          options.formatter = new Formatter(options.precision);\n          dictionary = {\n            length: 0,\n            definitions: {},\n            references: {},\n            add: function (item, create) {\n              var id = '#' + item._id,\n                ref = this.references[id];\n              if (!ref) {\n                this.length++;\n                var res = create.call(item),\n                  name = item._class;\n                if (name && res[0] !== name) res.unshift(name);\n                this.definitions[id] = res;\n                ref = this.references[id] = [id];\n              }\n              return ref;\n            }\n          };\n        }\n        if (obj && obj._serialize) {\n          res = obj._serialize(options, dictionary);\n          var name = obj._class;\n          if (name && !obj._compactSerialize && (isRoot || !compact) && res[0] !== name) {\n            res.unshift(name);\n          }\n        } else if (Array.isArray(obj)) {\n          res = [];\n          for (var i = 0, l = obj.length; i < l; i++) res[i] = Base.serialize(obj[i], options, compact, dictionary);\n        } else if (Base.isPlainObject(obj)) {\n          res = {};\n          var keys = Object.keys(obj);\n          for (var i = 0, l = keys.length; i < l; i++) {\n            var key = keys[i];\n            res[key] = Base.serialize(obj[key], options, compact, dictionary);\n          }\n        } else if (typeof obj === 'number') {\n          res = options.formatter.number(obj, options.precision);\n        } else {\n          res = obj;\n        }\n        return isRoot && dictionary.length > 0 ? [['dictionary', dictionary.definitions], res] : res;\n      },\n      deserialize: function (json, create, _data, _setDictionary, _isRoot) {\n        var res = json,\n          isFirst = !_data,\n          hasDictionary = isFirst && json && json.length && json[0][0] === 'dictionary';\n        _data = _data || {};\n        if (Array.isArray(json)) {\n          var type = json[0],\n            isDictionary = type === 'dictionary';\n          if (json.length == 1 && /^#/.test(type)) {\n            return _data.dictionary[type];\n          }\n          type = Base.exports[type];\n          res = [];\n          for (var i = type ? 1 : 0, l = json.length; i < l; i++) {\n            res.push(Base.deserialize(json[i], create, _data, isDictionary, hasDictionary));\n          }\n          if (type) {\n            var args = res;\n            if (create) {\n              res = create(type, args, isFirst || _isRoot);\n            } else {\n              res = new type(args);\n            }\n          }\n        } else if (Base.isPlainObject(json)) {\n          res = {};\n          if (_setDictionary) _data.dictionary = res;\n          for (var key in json) res[key] = Base.deserialize(json[key], create, _data);\n        }\n        return hasDictionary ? res[1] : res;\n      },\n      exportJSON: function (obj, options) {\n        var json = Base.serialize(obj, options);\n        return options && options.asString == false ? json : JSON.stringify(json);\n      },\n      importJSON: function (json, target) {\n        return Base.deserialize(typeof json === 'string' ? JSON.parse(json) : json, function (ctor, args, isRoot) {\n          var useTarget = isRoot && target && target.constructor === ctor,\n            obj = useTarget ? target : Base.create(ctor.prototype);\n          if (args.length === 1 && obj instanceof Item && (useTarget || !(obj instanceof Layer))) {\n            var arg = args[0];\n            if (Base.isPlainObject(arg)) {\n              arg.insert = false;\n              if (useTarget) {\n                args = args.concat([Item.INSERT]);\n              }\n            }\n          }\n          (useTarget ? obj.set : ctor).apply(obj, args);\n          if (useTarget) target = null;\n          return obj;\n        });\n      },\n      push: function (list, items) {\n        var itemsLength = items.length;\n        if (itemsLength < 4096) {\n          list.push.apply(list, items);\n        } else {\n          var startLength = list.length;\n          list.length += itemsLength;\n          for (var i = 0; i < itemsLength; i++) {\n            list[startLength + i] = items[i];\n          }\n        }\n        return list;\n      },\n      splice: function (list, items, index, remove) {\n        var amount = items && items.length,\n          append = index === undefined;\n        index = append ? list.length : index;\n        if (index > list.length) index = list.length;\n        for (var i = 0; i < amount; i++) items[i]._index = index + i;\n        if (append) {\n          Base.push(list, items);\n          return [];\n        } else {\n          var args = [index, remove];\n          if (items) Base.push(args, items);\n          var removed = list.splice.apply(list, args);\n          for (var i = 0, l = removed.length; i < l; i++) removed[i]._index = undefined;\n          for (var i = index + amount, l = list.length; i < l; i++) list[i]._index = i;\n          return removed;\n        }\n      },\n      capitalize: function (str) {\n        return str.replace(/\\b[a-z]/g, function (match) {\n          return match.toUpperCase();\n        });\n      },\n      camelize: function (str) {\n        return str.replace(/-(.)/g, function (match, chr) {\n          return chr.toUpperCase();\n        });\n      },\n      hyphenate: function (str) {\n        return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n      }\n    }\n  });\n  var Emitter = {\n    on: function (type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.on(key, value);\n        }, this);\n      } else {\n        var types = this._eventTypes,\n          entry = types && types[type],\n          handlers = this._callbacks = this._callbacks || {};\n        handlers = handlers[type] = handlers[type] || [];\n        if (handlers.indexOf(func) === -1) {\n          handlers.push(func);\n          if (entry && entry.install && handlers.length === 1) entry.install.call(this, type);\n        }\n      }\n      return this;\n    },\n    off: function (type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.off(key, value);\n        }, this);\n        return;\n      }\n      var types = this._eventTypes,\n        entry = types && types[type],\n        handlers = this._callbacks && this._callbacks[type],\n        index;\n      if (handlers) {\n        if (!func || (index = handlers.indexOf(func)) !== -1 && handlers.length === 1) {\n          if (entry && entry.uninstall) entry.uninstall.call(this, type);\n          delete this._callbacks[type];\n        } else if (index !== -1) {\n          handlers.splice(index, 1);\n        }\n      }\n      return this;\n    },\n    once: function (type, func) {\n      return this.on(type, function handler() {\n        func.apply(this, arguments);\n        this.off(type, handler);\n      });\n    },\n    emit: function (type, event) {\n      var handlers = this._callbacks && this._callbacks[type];\n      if (!handlers) return false;\n      var args = Base.slice(arguments, 1),\n        setTarget = event && event.target && !event.currentTarget;\n      handlers = handlers.slice();\n      if (setTarget) event.currentTarget = this;\n      for (var i = 0, l = handlers.length; i < l; i++) {\n        if (handlers[i].apply(this, args) == false) {\n          if (event && event.stop) event.stop();\n          break;\n        }\n      }\n      if (setTarget) delete event.currentTarget;\n      return true;\n    },\n    responds: function (type) {\n      return !!(this._callbacks && this._callbacks[type]);\n    },\n    attach: '#on',\n    detach: '#off',\n    fire: '#emit',\n    _installEvents: function (install) {\n      var types = this._eventTypes,\n        handlers = this._callbacks,\n        key = install ? 'install' : 'uninstall';\n      if (types) {\n        for (var type in handlers) {\n          if (handlers[type].length > 0) {\n            var entry = types[type],\n              func = entry && entry[key];\n            if (func) func.call(this, type);\n          }\n        }\n      }\n    },\n    statics: {\n      inject: function inject(src) {\n        var events = src._events;\n        if (events) {\n          var types = {};\n          Base.each(events, function (entry, key) {\n            var isString = typeof entry === 'string',\n              name = isString ? entry : key,\n              part = Base.capitalize(name),\n              type = name.substring(2).toLowerCase();\n            types[type] = isString ? {} : entry;\n            name = '_' + name;\n            src['get' + part] = function () {\n              return this[name];\n            };\n            src['set' + part] = function (func) {\n              var prev = this[name];\n              if (prev) this.off(type, prev);\n              if (func) this.on(type, func);\n              this[name] = func;\n            };\n          });\n          src._eventTypes = types;\n        }\n        return inject.base.apply(this, arguments);\n      }\n    }\n  };\n  var PaperScope = Base.extend({\n    _class: 'PaperScope',\n    initialize: function PaperScope() {\n      paper = this;\n      this.settings = new Base({\n        applyMatrix: true,\n        insertItems: true,\n        handleSize: 4,\n        hitTolerance: 0\n      });\n      this.project = null;\n      this.projects = [];\n      this.tools = [];\n      this._id = PaperScope._id++;\n      PaperScope._scopes[this._id] = this;\n      var proto = PaperScope.prototype;\n      if (!this.support) {\n        var ctx = CanvasProvider.getContext(1, 1) || {};\n        proto.support = {\n          nativeDash: 'setLineDash' in ctx || 'mozDash' in ctx,\n          nativeBlendModes: BlendMode.nativeModes\n        };\n        CanvasProvider.release(ctx);\n      }\n      if (!this.agent) {\n        var user = self.navigator.userAgent.toLowerCase(),\n          os = (/(darwin|win|mac|linux|freebsd|sunos)/.exec(user) || [])[0],\n          platform = os === 'darwin' ? 'mac' : os,\n          agent = proto.agent = proto.browser = {\n            platform: platform\n          };\n        if (platform) agent[platform] = true;\n        user.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g, function (match, n, v1, v2, rv) {\n          if (!agent.chrome) {\n            var v = n === 'opera' ? v2 : /^(node|trident)$/.test(n) ? rv : v1;\n            agent.version = v;\n            agent.versionNumber = parseFloat(v);\n            n = {\n              trident: 'msie',\n              jsdom: 'node'\n            }[n] || n;\n            agent.name = n;\n            agent[n] = true;\n          }\n        });\n        if (agent.chrome) delete agent.webkit;\n        if (agent.atom) delete agent.chrome;\n      }\n    },\n    version: \"0.12.17\",\n    getView: function () {\n      var project = this.project;\n      return project && project._view;\n    },\n    getPaper: function () {\n      return this;\n    },\n    execute: function (code, options) {\n      var exports = paper.PaperScript.execute(code, this, options);\n      View.updateFocus();\n      return exports;\n    },\n    install: function (scope) {\n      var that = this;\n      Base.each(['project', 'view', 'tool'], function (key) {\n        Base.define(scope, key, {\n          configurable: true,\n          get: function () {\n            return that[key];\n          }\n        });\n      });\n      for (var key in this) if (!/^_/.test(key) && this[key]) scope[key] = this[key];\n    },\n    setup: function (element) {\n      paper = this;\n      this.project = new Project(element);\n      return this;\n    },\n    createCanvas: function (width, height) {\n      return CanvasProvider.getCanvas(width, height);\n    },\n    activate: function () {\n      paper = this;\n    },\n    clear: function () {\n      var projects = this.projects,\n        tools = this.tools;\n      for (var i = projects.length - 1; i >= 0; i--) projects[i].remove();\n      for (var i = tools.length - 1; i >= 0; i--) tools[i].remove();\n    },\n    remove: function () {\n      this.clear();\n      delete PaperScope._scopes[this._id];\n    },\n    statics: new function () {\n      function handleAttribute(name) {\n        name += 'Attribute';\n        return function (el, attr) {\n          return el[name](attr) || el[name]('data-paper-' + attr);\n        };\n      }\n      return {\n        _scopes: {},\n        _id: 0,\n        get: function (id) {\n          return this._scopes[id] || null;\n        },\n        getAttribute: handleAttribute('get'),\n        hasAttribute: handleAttribute('has')\n      };\n    }()\n  });\n  var PaperScopeItem = Base.extend(Emitter, {\n    initialize: function (activate) {\n      this._scope = paper;\n      this._index = this._scope[this._list].push(this) - 1;\n      if (activate || !this._scope[this._reference]) this.activate();\n    },\n    activate: function () {\n      if (!this._scope) return false;\n      var prev = this._scope[this._reference];\n      if (prev && prev !== this) prev.emit('deactivate');\n      this._scope[this._reference] = this;\n      this.emit('activate', prev);\n      return true;\n    },\n    isActive: function () {\n      return this._scope[this._reference] === this;\n    },\n    remove: function () {\n      if (this._index == null) return false;\n      Base.splice(this._scope[this._list], null, this._index, 1);\n      if (this._scope[this._reference] == this) this._scope[this._reference] = null;\n      this._scope = null;\n      return true;\n    },\n    getView: function () {\n      return this._scope.getView();\n    }\n  });\n  var CollisionDetection = {\n    findItemBoundsCollisions: function (items1, items2, tolerance) {\n      function getBounds(items) {\n        var bounds = new Array(items.length);\n        for (var i = 0; i < items.length; i++) {\n          var rect = items[i].getBounds();\n          bounds[i] = [rect.left, rect.top, rect.right, rect.bottom];\n        }\n        return bounds;\n      }\n      var bounds1 = getBounds(items1),\n        bounds2 = !items2 || items2 === items1 ? bounds1 : getBounds(items2);\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findCurveBoundsCollisions: function (curves1, curves2, tolerance, bothAxis) {\n      function getBounds(curves) {\n        var min = Math.min,\n          max = Math.max,\n          bounds = new Array(curves.length);\n        for (var i = 0; i < curves.length; i++) {\n          var v = curves[i];\n          bounds[i] = [min(v[0], v[2], v[4], v[6]), min(v[1], v[3], v[5], v[7]), max(v[0], v[2], v[4], v[6]), max(v[1], v[3], v[5], v[7])];\n        }\n        return bounds;\n      }\n      var bounds1 = getBounds(curves1),\n        bounds2 = !curves2 || curves2 === curves1 ? bounds1 : getBounds(curves2);\n      if (bothAxis) {\n        var hor = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, false, true),\n          ver = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, true, true),\n          list = [];\n        for (var i = 0, l = hor.length; i < l; i++) {\n          list[i] = {\n            hor: hor[i],\n            ver: ver[i]\n          };\n        }\n        return list;\n      }\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findBoundsCollisions: function (boundsA, boundsB, tolerance, sweepVertical, onlySweepAxisCollisions) {\n      var self = !boundsB || boundsA === boundsB,\n        allBounds = self ? boundsA : boundsA.concat(boundsB),\n        lengthA = boundsA.length,\n        lengthAll = allBounds.length;\n      function binarySearch(indices, coord, value) {\n        var lo = 0,\n          hi = indices.length;\n        while (lo < hi) {\n          var mid = hi + lo >>> 1;\n          if (allBounds[indices[mid]][coord] < value) {\n            lo = mid + 1;\n          } else {\n            hi = mid;\n          }\n        }\n        return lo - 1;\n      }\n      var pri0 = sweepVertical ? 1 : 0,\n        pri1 = pri0 + 2,\n        sec0 = sweepVertical ? 0 : 1,\n        sec1 = sec0 + 2;\n      var allIndicesByPri0 = new Array(lengthAll);\n      for (var i = 0; i < lengthAll; i++) {\n        allIndicesByPri0[i] = i;\n      }\n      allIndicesByPri0.sort(function (i1, i2) {\n        return allBounds[i1][pri0] - allBounds[i2][pri0];\n      });\n      var activeIndicesByPri1 = [],\n        allCollisions = new Array(lengthA);\n      for (var i = 0; i < lengthAll; i++) {\n        var curIndex = allIndicesByPri0[i],\n          curBounds = allBounds[curIndex],\n          origIndex = self ? curIndex : curIndex - lengthA,\n          isCurrentA = curIndex < lengthA,\n          isCurrentB = self || !isCurrentA,\n          curCollisions = isCurrentA ? [] : null;\n        if (activeIndicesByPri1.length) {\n          var pruneCount = binarySearch(activeIndicesByPri1, pri1, curBounds[pri0] - tolerance) + 1;\n          activeIndicesByPri1.splice(0, pruneCount);\n          if (self && onlySweepAxisCollisions) {\n            curCollisions = curCollisions.concat(activeIndicesByPri1);\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j];\n              allCollisions[activeIndex].push(origIndex);\n            }\n          } else {\n            var curSec1 = curBounds[sec1],\n              curSec0 = curBounds[sec0];\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j],\n                activeBounds = allBounds[activeIndex],\n                isActiveA = activeIndex < lengthA,\n                isActiveB = self || activeIndex >= lengthA;\n              if (onlySweepAxisCollisions || (isCurrentA && isActiveB || isCurrentB && isActiveA) && curSec1 >= activeBounds[sec0] - tolerance && curSec0 <= activeBounds[sec1] + tolerance) {\n                if (isCurrentA && isActiveB) {\n                  curCollisions.push(self ? activeIndex : activeIndex - lengthA);\n                }\n                if (isCurrentB && isActiveA) {\n                  allCollisions[activeIndex].push(origIndex);\n                }\n              }\n            }\n          }\n        }\n        if (isCurrentA) {\n          if (boundsA === boundsB) {\n            curCollisions.push(curIndex);\n          }\n          allCollisions[curIndex] = curCollisions;\n        }\n        if (activeIndicesByPri1.length) {\n          var curPri1 = curBounds[pri1],\n            index = binarySearch(activeIndicesByPri1, pri1, curPri1);\n          activeIndicesByPri1.splice(index + 1, 0, curIndex);\n        } else {\n          activeIndicesByPri1.push(curIndex);\n        }\n      }\n      for (var i = 0; i < allCollisions.length; i++) {\n        var collisions = allCollisions[i];\n        if (collisions) {\n          collisions.sort(function (i1, i2) {\n            return i1 - i2;\n          });\n        }\n      }\n      return allCollisions;\n    }\n  };\n  var Formatter = Base.extend({\n    initialize: function (precision) {\n      this.precision = Base.pick(precision, 5);\n      this.multiplier = Math.pow(10, this.precision);\n    },\n    number: function (val) {\n      return this.precision < 16 ? Math.round(val * this.multiplier) / this.multiplier : val;\n    },\n    pair: function (val1, val2, separator) {\n      return this.number(val1) + (separator || ',') + this.number(val2);\n    },\n    point: function (val, separator) {\n      return this.number(val.x) + (separator || ',') + this.number(val.y);\n    },\n    size: function (val, separator) {\n      return this.number(val.width) + (separator || ',') + this.number(val.height);\n    },\n    rectangle: function (val, separator) {\n      return this.point(val, separator) + (separator || ',') + this.size(val, separator);\n    }\n  });\n  Formatter.instance = new Formatter();\n  var Numerical = new function () {\n    var abscissas = [[0.5773502691896257645091488], [0, 0.7745966692414833770358531], [0.3399810435848562648026658, 0.8611363115940525752239465], [0, 0.5384693101056830910363144, 0.9061798459386639927976269], [0.2386191860831969086305017, 0.6612093864662645136613996, 0.9324695142031520278123016], [0, 0.4058451513773971669066064, 0.7415311855993944398638648, 0.9491079123427585245261897], [0.1834346424956498049394761, 0.5255324099163289858177390, 0.7966664774136267395915539, 0.9602898564975362316835609], [0, 0.3242534234038089290385380, 0.6133714327005903973087020, 0.8360311073266357942994298, 0.9681602395076260898355762], [0.1488743389816312108848260, 0.4333953941292471907992659, 0.6794095682990244062343274, 0.8650633666889845107320967, 0.9739065285171717200779640], [0, 0.2695431559523449723315320, 0.5190961292068118159257257, 0.7301520055740493240934163, 0.8870625997680952990751578, 0.9782286581460569928039380], [0.1252334085114689154724414, 0.3678314989981801937526915, 0.5873179542866174472967024, 0.7699026741943046870368938, 0.9041172563704748566784659, 0.9815606342467192506905491], [0, 0.2304583159551347940655281, 0.4484927510364468528779129, 0.6423493394403402206439846, 0.8015780907333099127942065, 0.9175983992229779652065478, 0.9841830547185881494728294], [0.1080549487073436620662447, 0.3191123689278897604356718, 0.5152486363581540919652907, 0.6872929048116854701480198, 0.8272013150697649931897947, 0.9284348836635735173363911, 0.9862838086968123388415973], [0, 0.2011940939974345223006283, 0.3941513470775633698972074, 0.5709721726085388475372267, 0.7244177313601700474161861, 0.8482065834104272162006483, 0.9372733924007059043077589, 0.9879925180204854284895657], [0.0950125098376374401853193, 0.2816035507792589132304605, 0.4580167776572273863424194, 0.6178762444026437484466718, 0.7554044083550030338951012, 0.8656312023878317438804679, 0.9445750230732325760779884, 0.9894009349916499325961542]];\n    var weights = [[1], [0.8888888888888888888888889, 0.5555555555555555555555556], [0.6521451548625461426269361, 0.3478548451374538573730639], [0.5688888888888888888888889, 0.4786286704993664680412915, 0.2369268850561890875142640], [0.4679139345726910473898703, 0.3607615730481386075698335, 0.1713244923791703450402961], [0.4179591836734693877551020, 0.3818300505051189449503698, 0.2797053914892766679014678, 0.1294849661688696932706114], [0.3626837833783619829651504, 0.3137066458778872873379622, 0.2223810344533744705443560, 0.1012285362903762591525314], [0.3302393550012597631645251, 0.3123470770400028400686304, 0.2606106964029354623187429, 0.1806481606948574040584720, 0.0812743883615744119718922], [0.2955242247147528701738930, 0.2692667193099963550912269, 0.2190863625159820439955349, 0.1494513491505805931457763, 0.0666713443086881375935688], [0.2729250867779006307144835, 0.2628045445102466621806889, 0.2331937645919904799185237, 0.1862902109277342514260976, 0.1255803694649046246346943, 0.0556685671161736664827537], [0.2491470458134027850005624, 0.2334925365383548087608499, 0.2031674267230659217490645, 0.1600783285433462263346525, 0.1069393259953184309602547, 0.0471753363865118271946160], [0.2325515532308739101945895, 0.2262831802628972384120902, 0.2078160475368885023125232, 0.1781459807619457382800467, 0.1388735102197872384636018, 0.0921214998377284479144218, 0.0404840047653158795200216], [0.2152638534631577901958764, 0.2051984637212956039659241, 0.1855383974779378137417166, 0.1572031671581935345696019, 0.1215185706879031846894148, 0.0801580871597602098056333, 0.0351194603317518630318329], [0.2025782419255612728806202, 0.1984314853271115764561183, 0.1861610000155622110268006, 0.1662692058169939335532009, 0.1395706779261543144478048, 0.1071592204671719350118695, 0.0703660474881081247092674, 0.0307532419961172683546284], [0.1894506104550684962853967, 0.1826034150449235888667637, 0.1691565193950025381893121, 0.1495959888165767320815017, 0.1246289712555338720524763, 0.0951585116824927848099251, 0.0622535239386478928628438, 0.0271524594117540948517806]];\n    var abs = Math.abs,\n      sqrt = Math.sqrt,\n      pow = Math.pow,\n      log2 = Math.log2 || function (x) {\n        return Math.log(x) * Math.LOG2E;\n      },\n      EPSILON = 1e-12,\n      MACHINE_EPSILON = 1.12e-16;\n    function clamp(value, min, max) {\n      return value < min ? min : value > max ? max : value;\n    }\n    function getDiscriminant(a, b, c) {\n      function split(v) {\n        var x = v * 134217729,\n          y = v - x,\n          hi = y + x,\n          lo = v - hi;\n        return [hi, lo];\n      }\n      var D = b * b - a * c,\n        E = b * b + a * c;\n      if (abs(D) * 3 < E) {\n        var ad = split(a),\n          bd = split(b),\n          cd = split(c),\n          p = b * b,\n          dp = bd[0] * bd[0] - p + 2 * bd[0] * bd[1] + bd[1] * bd[1],\n          q = a * c,\n          dq = ad[0] * cd[0] - q + ad[0] * cd[1] + ad[1] * cd[0] + ad[1] * cd[1];\n        D = p - q + (dp - dq);\n      }\n      return D;\n    }\n    function getNormalizationFactor() {\n      var norm = Math.max.apply(Math, arguments);\n      return norm && (norm < 1e-8 || norm > 1e8) ? pow(2, -Math.round(log2(norm))) : 0;\n    }\n    return {\n      EPSILON: EPSILON,\n      MACHINE_EPSILON: MACHINE_EPSILON,\n      CURVETIME_EPSILON: 1e-8,\n      GEOMETRIC_EPSILON: 1e-7,\n      TRIGONOMETRIC_EPSILON: 1e-8,\n      ANGULAR_EPSILON: 1e-5,\n      KAPPA: 4 * (sqrt(2) - 1) / 3,\n      isZero: function (val) {\n        return val >= -EPSILON && val <= EPSILON;\n      },\n      isMachineZero: function (val) {\n        return val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n      },\n      clamp: clamp,\n      integrate: function (f, a, b, n) {\n        var x = abscissas[n - 2],\n          w = weights[n - 2],\n          A = (b - a) * 0.5,\n          B = A + a,\n          i = 0,\n          m = n + 1 >> 1,\n          sum = n & 1 ? w[i++] * f(B) : 0;\n        while (i < m) {\n          var Ax = A * x[i];\n          sum += w[i++] * (f(B + Ax) + f(B - Ax));\n        }\n        return A * sum;\n      },\n      findRoot: function (f, df, x, a, b, n, tolerance) {\n        for (var i = 0; i < n; i++) {\n          var fx = f(x),\n            dx = fx / df(x),\n            nx = x - dx;\n          if (abs(dx) < tolerance) {\n            x = nx;\n            break;\n          }\n          if (fx > 0) {\n            b = x;\n            x = nx <= a ? (a + b) * 0.5 : nx;\n          } else {\n            a = x;\n            x = nx >= b ? (a + b) * 0.5 : nx;\n          }\n        }\n        return clamp(x, a, b);\n      },\n      solveQuadratic: function (a, b, c, roots, min, max) {\n        var x1,\n          x2 = Infinity;\n        if (abs(a) < EPSILON) {\n          if (abs(b) < EPSILON) return abs(c) < EPSILON ? -1 : 0;\n          x1 = -c / b;\n        } else {\n          b *= -0.5;\n          var D = getDiscriminant(a, b, c);\n          if (D && abs(D) < MACHINE_EPSILON) {\n            var f = getNormalizationFactor(abs(a), abs(b), abs(c));\n            if (f) {\n              a *= f;\n              b *= f;\n              c *= f;\n              D = getDiscriminant(a, b, c);\n            }\n          }\n          if (D >= -MACHINE_EPSILON) {\n            var Q = D < 0 ? 0 : sqrt(D),\n              R = b + (b < 0 ? -Q : Q);\n            if (R === 0) {\n              x1 = c / a;\n              x2 = -x1;\n            } else {\n              x1 = R / a;\n              x2 = c / R;\n            }\n          }\n        }\n        var count = 0,\n          boundless = min == null,\n          minB = min - EPSILON,\n          maxB = max + EPSILON;\n        if (isFinite(x1) && (boundless || x1 > minB && x1 < maxB)) roots[count++] = boundless ? x1 : clamp(x1, min, max);\n        if (x2 !== x1 && isFinite(x2) && (boundless || x2 > minB && x2 < maxB)) roots[count++] = boundless ? x2 : clamp(x2, min, max);\n        return count;\n      },\n      solveCubic: function (a, b, c, d, roots, min, max) {\n        var f = getNormalizationFactor(abs(a), abs(b), abs(c), abs(d)),\n          x,\n          b1,\n          c2,\n          qd,\n          q;\n        if (f) {\n          a *= f;\n          b *= f;\n          c *= f;\n          d *= f;\n        }\n        function evaluate(x0) {\n          x = x0;\n          var tmp = a * x;\n          b1 = tmp + b;\n          c2 = b1 * x + c;\n          qd = (tmp + b1) * x + c2;\n          q = c2 * x + d;\n        }\n        if (abs(a) < EPSILON) {\n          a = b;\n          b1 = c;\n          c2 = d;\n          x = Infinity;\n        } else if (abs(d) < EPSILON) {\n          b1 = b;\n          c2 = c;\n          x = 0;\n        } else {\n          evaluate(-(b / a) / 3);\n          var t = q / a,\n            r = pow(abs(t), 1 / 3),\n            s = t < 0 ? -1 : 1,\n            td = -qd / a,\n            rd = td > 0 ? 1.324717957244746 * Math.max(r, sqrt(td)) : r,\n            x0 = x - s * rd;\n          if (x0 !== x) {\n            do {\n              evaluate(x0);\n              x0 = qd === 0 ? x : x - q / qd / (1 + MACHINE_EPSILON);\n            } while (s * x0 > s * x);\n            if (abs(a) * x * x > abs(d / x)) {\n              c2 = -d / x;\n              b1 = (c2 - c) / x;\n            }\n          }\n        }\n        var count = Numerical.solveQuadratic(a, b1, c2, roots, min, max),\n          boundless = min == null;\n        if (isFinite(x) && (count === 0 || count > 0 && x !== roots[0] && x !== roots[1]) && (boundless || x > min - EPSILON && x < max + EPSILON)) roots[count++] = boundless ? x : clamp(x, min, max);\n        return count;\n      }\n    };\n  }();\n  var UID = {\n    _id: 1,\n    _pools: {},\n    get: function (name) {\n      if (name) {\n        var pool = this._pools[name];\n        if (!pool) pool = this._pools[name] = {\n          _id: 1\n        };\n        return pool._id++;\n      } else {\n        return this._id++;\n      }\n    }\n  };\n  var Point = Base.extend({\n    _class: 'Point',\n    _readIndex: true,\n    initialize: function Point(arg0, arg1) {\n      var type = typeof arg0,\n        reading = this.__read,\n        read = 0;\n      if (type === 'number') {\n        var hasY = typeof arg1 === 'number';\n        this._set(arg0, hasY ? arg1 : arg0);\n        if (reading) read = hasY ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('angle' in obj) {\n          this._set(obj.length || 0, 0);\n          this.setAngle(obj.angle || 0);\n        } else {\n          this._set(0, 0);\n          read = 0;\n        }\n      }\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n    equals: function (point) {\n      return this === point || point && (this.x === point.x && this.y === point.y || Array.isArray(point) && this.x === point[0] && this.y === point[1]) || false;\n    },\n    clone: function () {\n      return new Point(this.x, this.y);\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y)];\n    },\n    getLength: function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n    setLength: function (length) {\n      if (this.isZero()) {\n        var angle = this._angle || 0;\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      } else {\n        var scale = length / this.getLength();\n        if (Numerical.isZero(scale)) this.getAngle();\n        this._set(this.x * scale, this.y * scale);\n      }\n    },\n    getAngle: function () {\n      return this.getAngleInRadians.apply(this, arguments) * 180 / Math.PI;\n    },\n    setAngle: function (angle) {\n      this.setAngleInRadians.call(this, angle * Math.PI / 180);\n    },\n    getAngleInDegrees: '#getAngle',\n    setAngleInDegrees: '#setAngle',\n    getAngleInRadians: function () {\n      if (!arguments.length) {\n        return this.isZero() ? this._angle || 0 : this._angle = Math.atan2(this.y, this.x);\n      } else {\n        var point = Point.read(arguments),\n          div = this.getLength() * point.getLength();\n        if (Numerical.isZero(div)) {\n          return NaN;\n        } else {\n          var a = this.dot(point) / div;\n          return Math.acos(a < -1 ? -1 : a > 1 ? 1 : a);\n        }\n      }\n    },\n    setAngleInRadians: function (angle) {\n      this._angle = angle;\n      if (!this.isZero()) {\n        var length = this.getLength();\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      }\n    },\n    getQuadrant: function () {\n      return this.x >= 0 ? this.y >= 0 ? 1 : 4 : this.y >= 0 ? 2 : 3;\n    }\n  }, {\n    beans: false,\n    getDirectedAngle: function () {\n      var point = Point.read(arguments);\n      return Math.atan2(this.cross(point), this.dot(point)) * 180 / Math.PI;\n    },\n    getDistance: function () {\n      var args = arguments,\n        point = Point.read(args),\n        x = point.x - this.x,\n        y = point.y - this.y,\n        d = x * x + y * y,\n        squared = Base.read(args);\n      return squared ? d : Math.sqrt(d);\n    },\n    normalize: function (length) {\n      if (length === undefined) length = 1;\n      var current = this.getLength(),\n        scale = current !== 0 ? length / current : 0,\n        point = new Point(this.x * scale, this.y * scale);\n      if (scale >= 0) point._angle = this._angle;\n      return point;\n    },\n    rotate: function (angle, center) {\n      if (angle === 0) return this.clone();\n      angle = angle * Math.PI / 180;\n      var point = center ? this.subtract(center) : this,\n        sin = Math.sin(angle),\n        cos = Math.cos(angle);\n      point = new Point(point.x * cos - point.y * sin, point.x * sin + point.y * cos);\n      return center ? point.add(center) : point;\n    },\n    transform: function (matrix) {\n      return matrix ? matrix._transformPoint(this) : this;\n    },\n    add: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x + point.x, this.y + point.y);\n    },\n    subtract: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x - point.x, this.y - point.y);\n    },\n    multiply: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x * point.x, this.y * point.y);\n    },\n    divide: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x / point.x, this.y / point.y);\n    },\n    modulo: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x % point.x, this.y % point.y);\n    },\n    negate: function () {\n      return new Point(-this.x, -this.y);\n    },\n    isInside: function () {\n      return Rectangle.read(arguments).contains(this);\n    },\n    isClose: function () {\n      var args = arguments,\n        point = Point.read(args),\n        tolerance = Base.read(args);\n      return this.getDistance(point) <= tolerance;\n    },\n    isCollinear: function () {\n      var point = Point.read(arguments);\n      return Point.isCollinear(this.x, this.y, point.x, point.y);\n    },\n    isColinear: '#isCollinear',\n    isOrthogonal: function () {\n      var point = Point.read(arguments);\n      return Point.isOrthogonal(this.x, this.y, point.x, point.y);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this.x) && isZero(this.y);\n    },\n    isNaN: function () {\n      return isNaN(this.x) || isNaN(this.y);\n    },\n    isInQuadrant: function (q) {\n      return this.x * (q > 1 && q < 4 ? -1 : 1) >= 0 && this.y * (q > 2 ? -1 : 1) >= 0;\n    },\n    dot: function () {\n      var point = Point.read(arguments);\n      return this.x * point.x + this.y * point.y;\n    },\n    cross: function () {\n      var point = Point.read(arguments);\n      return this.x * point.y - this.y * point.x;\n    },\n    project: function () {\n      var point = Point.read(arguments),\n        scale = point.isZero() ? 0 : this.dot(point) / point.dot(point);\n      return new Point(point.x * scale, point.y * scale);\n    },\n    statics: {\n      min: function () {\n        var args = arguments,\n          point1 = Point.read(args),\n          point2 = Point.read(args);\n        return new Point(Math.min(point1.x, point2.x), Math.min(point1.y, point2.y));\n      },\n      max: function () {\n        var args = arguments,\n          point1 = Point.read(args),\n          point2 = Point.read(args);\n        return new Point(Math.max(point1.x, point2.x), Math.max(point1.y, point2.y));\n      },\n      random: function () {\n        return new Point(Math.random(), Math.random());\n      },\n      isCollinear: function (x1, y1, x2, y2) {\n        return Math.abs(x1 * y2 - y1 * x2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      },\n      isOrthogonal: function (x1, y1, x2, y2) {\n        return Math.abs(x1 * x2 + y1 * y2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n    this[key] = function () {\n      return new Point(op(this.x), op(this.y));\n    };\n  }, {}));\n  var LinkedPoint = Point.extend({\n    initialize: function Point(x, y, owner, setter) {\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (x, y, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getX: function () {\n      return this._x;\n    },\n    setX: function (x) {\n      this._x = x;\n      this._owner[this._setter](this);\n    },\n    getY: function () {\n      return this._y;\n    },\n    setY: function (y) {\n      this._y = y;\n      this._owner[this._setter](this);\n    },\n    isSelected: function () {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function (selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function () {\n      return this._setter === 'setPosition' ? 4 : 0;\n    }\n  });\n  var Size = Base.extend({\n    _class: 'Size',\n    _readIndex: true,\n    initialize: function Size(arg0, arg1) {\n      var type = typeof arg0,\n        reading = this.__read,\n        read = 0;\n      if (type === 'number') {\n        var hasHeight = typeof arg1 === 'number';\n        this._set(arg0, hasHeight ? arg1 : arg0);\n        if (reading) read = hasHeight ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else {\n          this._set(0, 0);\n          read = 0;\n        }\n      }\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (width, height) {\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    equals: function (size) {\n      return size === this || size && (this.width === size.width && this.height === size.height || Array.isArray(size) && this.width === size[0] && this.height === size[1]) || false;\n    },\n    clone: function () {\n      return new Size(this.width, this.height);\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.width), f.number(this.height)];\n    },\n    add: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width + size.width, this.height + size.height);\n    },\n    subtract: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width - size.width, this.height - size.height);\n    },\n    multiply: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width * size.width, this.height * size.height);\n    },\n    divide: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width / size.width, this.height / size.height);\n    },\n    modulo: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width % size.width, this.height % size.height);\n    },\n    negate: function () {\n      return new Size(-this.width, -this.height);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this.width) && isZero(this.height);\n    },\n    isNaN: function () {\n      return isNaN(this.width) || isNaN(this.height);\n    },\n    statics: {\n      min: function (size1, size2) {\n        return new Size(Math.min(size1.width, size2.width), Math.min(size1.height, size2.height));\n      },\n      max: function (size1, size2) {\n        return new Size(Math.max(size1.width, size2.width), Math.max(size1.height, size2.height));\n      },\n      random: function () {\n        return new Size(Math.random(), Math.random());\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n    this[key] = function () {\n      return new Size(op(this.width), op(this.height));\n    };\n  }, {}));\n  var LinkedSize = Size.extend({\n    initialize: function Size(width, height, owner, setter) {\n      this._width = width;\n      this._height = height;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (width, height, _dontNotify) {\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getWidth: function () {\n      return this._width;\n    },\n    setWidth: function (width) {\n      this._width = width;\n      this._owner[this._setter](this);\n    },\n    getHeight: function () {\n      return this._height;\n    },\n    setHeight: function (height) {\n      this._height = height;\n      this._owner[this._setter](this);\n    }\n  });\n  var Rectangle = Base.extend({\n    _class: 'Rectangle',\n    _readIndex: true,\n    beans: true,\n    initialize: function Rectangle(arg0, arg1, arg2, arg3) {\n      var args = arguments,\n        type = typeof arg0,\n        read;\n      if (type === 'number') {\n        this._set(arg0, arg1, arg2, arg3);\n        read = 4;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0, 0, 0);\n        read = arg0 === null ? 1 : 0;\n      } else if (args.length === 1) {\n        if (Array.isArray(arg0)) {\n          this._set.apply(this, arg0);\n          read = 1;\n        } else if (arg0.x !== undefined || arg0.width !== undefined) {\n          this._set(arg0.x || 0, arg0.y || 0, arg0.width || 0, arg0.height || 0);\n          read = 1;\n        } else if (arg0.from === undefined && arg0.to === undefined) {\n          this._set(0, 0, 0, 0);\n          if (Base.readSupported(args, this)) {\n            read = 1;\n          }\n        }\n      }\n      if (read === undefined) {\n        var frm = Point.readNamed(args, 'from'),\n          next = Base.peek(args),\n          x = frm.x,\n          y = frm.y,\n          width,\n          height;\n        if (next && next.x !== undefined || Base.hasNamed(args, 'to')) {\n          var to = Point.readNamed(args, 'to');\n          width = to.x - x;\n          height = to.y - y;\n          if (width < 0) {\n            x = to.x;\n            width = -width;\n          }\n          if (height < 0) {\n            y = to.y;\n            height = -height;\n          }\n        } else {\n          var size = Size.read(args);\n          width = size.width;\n          height = size.height;\n        }\n        this._set(x, y, width, height);\n        read = args.__index;\n      }\n      var filtered = args.__filtered;\n      if (filtered) this.__filtered = filtered;\n      if (this.__read) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (x, y, width, height) {\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    clone: function () {\n      return new Rectangle(this.x, this.y, this.width, this.height);\n    },\n    equals: function (rect) {\n      var rt = Base.isPlainValue(rect) ? Rectangle.read(arguments) : rect;\n      return rt === this || rt && this.x === rt.x && this.y === rt.y && this.width === rt.width && this.height === rt.height || false;\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ', width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y), f.number(this.width), f.number(this.height)];\n    },\n    getPoint: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.x, this.y, this, 'setPoint');\n    },\n    setPoint: function () {\n      var point = Point.read(arguments);\n      this.x = point.x;\n      this.y = point.y;\n    },\n    getSize: function (_dontLink) {\n      var ctor = _dontLink ? Size : LinkedSize;\n      return new ctor(this.width, this.height, this, 'setSize');\n    },\n    _fw: 1,\n    _fh: 1,\n    setSize: function () {\n      var size = Size.read(arguments),\n        sx = this._sx,\n        sy = this._sy,\n        w = size.width,\n        h = size.height;\n      if (sx) {\n        this.x += (this.width - w) * sx;\n      }\n      if (sy) {\n        this.y += (this.height - h) * sy;\n      }\n      this.width = w;\n      this.height = h;\n      this._fw = this._fh = 1;\n    },\n    getLeft: function () {\n      return this.x;\n    },\n    setLeft: function (left) {\n      if (!this._fw) {\n        var amount = left - this.x;\n        this.width -= this._sx === 0.5 ? amount * 2 : amount;\n      }\n      this.x = left;\n      this._sx = this._fw = 0;\n    },\n    getTop: function () {\n      return this.y;\n    },\n    setTop: function (top) {\n      if (!this._fh) {\n        var amount = top - this.y;\n        this.height -= this._sy === 0.5 ? amount * 2 : amount;\n      }\n      this.y = top;\n      this._sy = this._fh = 0;\n    },\n    getRight: function () {\n      return this.x + this.width;\n    },\n    setRight: function (right) {\n      if (!this._fw) {\n        var amount = right - this.x;\n        this.width = this._sx === 0.5 ? amount * 2 : amount;\n      }\n      this.x = right - this.width;\n      this._sx = 1;\n      this._fw = 0;\n    },\n    getBottom: function () {\n      return this.y + this.height;\n    },\n    setBottom: function (bottom) {\n      if (!this._fh) {\n        var amount = bottom - this.y;\n        this.height = this._sy === 0.5 ? amount * 2 : amount;\n      }\n      this.y = bottom - this.height;\n      this._sy = 1;\n      this._fh = 0;\n    },\n    getCenterX: function () {\n      return this.x + this.width / 2;\n    },\n    setCenterX: function (x) {\n      if (this._fw || this._sx === 0.5) {\n        this.x = x - this.width / 2;\n      } else {\n        if (this._sx) {\n          this.x += (x - this.x) * 2 * this._sx;\n        }\n        this.width = (x - this.x) * 2;\n      }\n      this._sx = 0.5;\n      this._fw = 0;\n    },\n    getCenterY: function () {\n      return this.y + this.height / 2;\n    },\n    setCenterY: function (y) {\n      if (this._fh || this._sy === 0.5) {\n        this.y = y - this.height / 2;\n      } else {\n        if (this._sy) {\n          this.y += (y - this.y) * 2 * this._sy;\n        }\n        this.height = (y - this.y) * 2;\n      }\n      this._sy = 0.5;\n      this._fh = 0;\n    },\n    getCenter: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.getCenterX(), this.getCenterY(), this, 'setCenter');\n    },\n    setCenter: function () {\n      var point = Point.read(arguments);\n      this.setCenterX(point.x);\n      this.setCenterY(point.y);\n      return this;\n    },\n    getArea: function () {\n      return this.width * this.height;\n    },\n    isEmpty: function () {\n      return this.width === 0 || this.height === 0;\n    },\n    contains: function (arg) {\n      return arg && arg.width !== undefined || (Array.isArray(arg) ? arg : arguments).length === 4 ? this._containsRectangle(Rectangle.read(arguments)) : this._containsPoint(Point.read(arguments));\n    },\n    _containsPoint: function (point) {\n      var x = point.x,\n        y = point.y;\n      return x >= this.x && y >= this.y && x <= this.x + this.width && y <= this.y + this.height;\n    },\n    _containsRectangle: function (rect) {\n      var x = rect.x,\n        y = rect.y;\n      return x >= this.x && y >= this.y && x + rect.width <= this.x + this.width && y + rect.height <= this.y + this.height;\n    },\n    intersects: function () {\n      var rect = Rectangle.read(arguments),\n        epsilon = Base.read(arguments) || 0;\n      return rect.x + rect.width > this.x - epsilon && rect.y + rect.height > this.y - epsilon && rect.x < this.x + this.width + epsilon && rect.y < this.y + this.height + epsilon;\n    },\n    intersect: function () {\n      var rect = Rectangle.read(arguments),\n        x1 = Math.max(this.x, rect.x),\n        y1 = Math.max(this.y, rect.y),\n        x2 = Math.min(this.x + this.width, rect.x + rect.width),\n        y2 = Math.min(this.y + this.height, rect.y + rect.height);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    unite: function () {\n      var rect = Rectangle.read(arguments),\n        x1 = Math.min(this.x, rect.x),\n        y1 = Math.min(this.y, rect.y),\n        x2 = Math.max(this.x + this.width, rect.x + rect.width),\n        y2 = Math.max(this.y + this.height, rect.y + rect.height);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    include: function () {\n      var point = Point.read(arguments);\n      var x1 = Math.min(this.x, point.x),\n        y1 = Math.min(this.y, point.y),\n        x2 = Math.max(this.x + this.width, point.x),\n        y2 = Math.max(this.y + this.height, point.y);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    expand: function () {\n      var amount = Size.read(arguments),\n        hor = amount.width,\n        ver = amount.height;\n      return new Rectangle(this.x - hor / 2, this.y - ver / 2, this.width + hor, this.height + ver);\n    },\n    scale: function (hor, ver) {\n      return this.expand(this.width * hor - this.width, this.height * (ver === undefined ? hor : ver) - this.height);\n    }\n  }, Base.each([['Top', 'Left'], ['Top', 'Right'], ['Bottom', 'Left'], ['Bottom', 'Right'], ['Left', 'Center'], ['Top', 'Center'], ['Right', 'Center'], ['Bottom', 'Center']], function (parts, index) {\n    var part = parts.join(''),\n      xFirst = /^[RL]/.test(part);\n    if (index >= 4) parts[1] += xFirst ? 'Y' : 'X';\n    var x = parts[xFirst ? 0 : 1],\n      y = parts[xFirst ? 1 : 0],\n      getX = 'get' + x,\n      getY = 'get' + y,\n      setX = 'set' + x,\n      setY = 'set' + y,\n      get = 'get' + part,\n      set = 'set' + part;\n    this[get] = function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this[getX](), this[getY](), this, set);\n    };\n    this[set] = function () {\n      var point = Point.read(arguments);\n      this[setX](point.x);\n      this[setY](point.y);\n    };\n  }, {\n    beans: true\n  }));\n  var LinkedRectangle = Rectangle.extend({\n    initialize: function Rectangle(x, y, width, height, owner, setter) {\n      this._set(x, y, width, height, true);\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (x, y, width, height, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    }\n  }, new function () {\n    var proto = Rectangle.prototype;\n    return Base.each(['x', 'y', 'width', 'height'], function (key) {\n      var part = Base.capitalize(key),\n        internal = '_' + key;\n      this['get' + part] = function () {\n        return this[internal];\n      };\n      this['set' + part] = function (value) {\n        this[internal] = value;\n        if (!this._dontNotify) this._owner[this._setter](this);\n      };\n    }, Base.each(['Point', 'Size', 'Center', 'Left', 'Top', 'Right', 'Bottom', 'CenterX', 'CenterY', 'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'], function (key) {\n      var name = 'set' + key;\n      this[name] = function () {\n        this._dontNotify = true;\n        proto[name].apply(this, arguments);\n        this._dontNotify = false;\n        this._owner[this._setter](this);\n      };\n    }, {\n      isSelected: function () {\n        return !!(this._owner._selection & 2);\n      },\n      setSelected: function (selected) {\n        var owner = this._owner;\n        if (owner._changeSelection) {\n          owner._changeSelection(2, selected);\n        }\n      }\n    }));\n  }());\n  var Matrix = Base.extend({\n    _class: 'Matrix',\n    initialize: function Matrix(arg, _dontNotify) {\n      var args = arguments,\n        count = args.length,\n        ok = true;\n      if (count >= 6) {\n        this._set.apply(this, args);\n      } else if (count === 1 || count === 2) {\n        if (arg instanceof Matrix) {\n          this._set(arg._a, arg._b, arg._c, arg._d, arg._tx, arg._ty, _dontNotify);\n        } else if (Array.isArray(arg)) {\n          this._set.apply(this, _dontNotify ? arg.concat([_dontNotify]) : arg);\n        } else {\n          ok = false;\n        }\n      } else if (!count) {\n        this.reset();\n      } else {\n        ok = false;\n      }\n      if (!ok) {\n        throw new Error('Unsupported matrix parameters');\n      }\n      return this;\n    },\n    set: '#initialize',\n    _set: function (a, b, c, d, tx, ty, _dontNotify) {\n      this._a = a;\n      this._b = b;\n      this._c = c;\n      this._d = d;\n      this._tx = tx;\n      this._ty = ty;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this.getValues(), options, true, dictionary);\n    },\n    _changed: function () {\n      var owner = this._owner;\n      if (owner) {\n        if (owner._applyMatrix) {\n          owner.transform(null, true);\n        } else {\n          owner._changed(25);\n        }\n      }\n    },\n    clone: function () {\n      return new Matrix(this._a, this._b, this._c, this._d, this._tx, this._ty);\n    },\n    equals: function (mx) {\n      return mx === this || mx && this._a === mx._a && this._b === mx._b && this._c === mx._c && this._d === mx._d && this._tx === mx._tx && this._ty === mx._ty;\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '[[' + [f.number(this._a), f.number(this._c), f.number(this._tx)].join(', ') + '], [' + [f.number(this._b), f.number(this._d), f.number(this._ty)].join(', ') + ']]';\n    },\n    reset: function (_dontNotify) {\n      this._a = this._d = 1;\n      this._b = this._c = this._tx = this._ty = 0;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    apply: function (recursively, _setApplyMatrix) {\n      var owner = this._owner;\n      if (owner) {\n        owner.transform(null, Base.pick(recursively, true), _setApplyMatrix);\n        return this.isIdentity();\n      }\n      return false;\n    },\n    translate: function () {\n      var point = Point.read(arguments),\n        x = point.x,\n        y = point.y;\n      this._tx += x * this._a + y * this._c;\n      this._ty += x * this._b + y * this._d;\n      this._changed();\n      return this;\n    },\n    scale: function () {\n      var args = arguments,\n        scale = Point.read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      if (center) this.translate(center);\n      this._a *= scale.x;\n      this._b *= scale.x;\n      this._c *= scale.y;\n      this._d *= scale.y;\n      if (center) this.translate(center.negate());\n      this._changed();\n      return this;\n    },\n    rotate: function (angle) {\n      angle *= Math.PI / 180;\n      var center = Point.read(arguments, 1),\n        x = center.x,\n        y = center.y,\n        cos = Math.cos(angle),\n        sin = Math.sin(angle),\n        tx = x - x * cos + y * sin,\n        ty = y - x * sin - y * cos,\n        a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d;\n      this._a = cos * a + sin * c;\n      this._b = cos * b + sin * d;\n      this._c = -sin * a + cos * c;\n      this._d = -sin * b + cos * d;\n      this._tx += tx * a + ty * c;\n      this._ty += tx * b + ty * d;\n      this._changed();\n      return this;\n    },\n    shear: function () {\n      var args = arguments,\n        shear = Point.read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      if (center) this.translate(center);\n      var a = this._a,\n        b = this._b;\n      this._a += shear.y * this._c;\n      this._b += shear.y * this._d;\n      this._c += shear.x * a;\n      this._d += shear.x * b;\n      if (center) this.translate(center.negate());\n      this._changed();\n      return this;\n    },\n    skew: function () {\n      var args = arguments,\n        skew = Point.read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        }),\n        toRadians = Math.PI / 180,\n        shear = new Point(Math.tan(skew.x * toRadians), Math.tan(skew.y * toRadians));\n      return this.shear(shear, center);\n    },\n    append: function (mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n          b1 = this._b,\n          c1 = this._c,\n          d1 = this._d,\n          a2 = mx._a,\n          b2 = mx._c,\n          c2 = mx._b,\n          d2 = mx._d,\n          tx2 = mx._tx,\n          ty2 = mx._ty;\n        this._a = a2 * a1 + c2 * c1;\n        this._c = b2 * a1 + d2 * c1;\n        this._b = a2 * b1 + c2 * d1;\n        this._d = b2 * b1 + d2 * d1;\n        this._tx += tx2 * a1 + ty2 * c1;\n        this._ty += tx2 * b1 + ty2 * d1;\n        if (!_dontNotify) this._changed();\n      }\n      return this;\n    },\n    prepend: function (mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n          b1 = this._b,\n          c1 = this._c,\n          d1 = this._d,\n          tx1 = this._tx,\n          ty1 = this._ty,\n          a2 = mx._a,\n          b2 = mx._c,\n          c2 = mx._b,\n          d2 = mx._d,\n          tx2 = mx._tx,\n          ty2 = mx._ty;\n        this._a = a2 * a1 + b2 * b1;\n        this._c = a2 * c1 + b2 * d1;\n        this._b = c2 * a1 + d2 * b1;\n        this._d = c2 * c1 + d2 * d1;\n        this._tx = a2 * tx1 + b2 * ty1 + tx2;\n        this._ty = c2 * tx1 + d2 * ty1 + ty2;\n        if (!_dontNotify) this._changed();\n      }\n      return this;\n    },\n    appended: function (mx) {\n      return this.clone().append(mx);\n    },\n    prepended: function (mx) {\n      return this.clone().prepend(mx);\n    },\n    invert: function () {\n      var a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d,\n        tx = this._tx,\n        ty = this._ty,\n        det = a * d - b * c,\n        res = null;\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        this._a = d / det;\n        this._b = -b / det;\n        this._c = -c / det;\n        this._d = a / det;\n        this._tx = (c * ty - d * tx) / det;\n        this._ty = (b * tx - a * ty) / det;\n        res = this;\n      }\n      return res;\n    },\n    inverted: function () {\n      return this.clone().invert();\n    },\n    concatenate: '#append',\n    preConcatenate: '#prepend',\n    chain: '#appended',\n    _shiftless: function () {\n      return new Matrix(this._a, this._b, this._c, this._d, 0, 0);\n    },\n    _orNullIfIdentity: function () {\n      return this.isIdentity() ? null : this;\n    },\n    isIdentity: function () {\n      return this._a === 1 && this._b === 0 && this._c === 0 && this._d === 1 && this._tx === 0 && this._ty === 0;\n    },\n    isInvertible: function () {\n      var det = this._a * this._d - this._c * this._b;\n      return det && !isNaN(det) && isFinite(this._tx) && isFinite(this._ty);\n    },\n    isSingular: function () {\n      return !this.isInvertible();\n    },\n    transform: function (src, dst, count) {\n      return arguments.length < 3 ? this._transformPoint(Point.read(arguments)) : this._transformCoordinates(src, dst, count);\n    },\n    _transformPoint: function (point, dest, _dontNotify) {\n      var x = point.x,\n        y = point.y;\n      if (!dest) dest = new Point();\n      return dest._set(x * this._a + y * this._c + this._tx, x * this._b + y * this._d + this._ty, _dontNotify);\n    },\n    _transformCoordinates: function (src, dst, count) {\n      for (var i = 0, max = 2 * count; i < max; i += 2) {\n        var x = src[i],\n          y = src[i + 1];\n        dst[i] = x * this._a + y * this._c + this._tx;\n        dst[i + 1] = x * this._b + y * this._d + this._ty;\n      }\n      return dst;\n    },\n    _transformCorners: function (rect) {\n      var x1 = rect.x,\n        y1 = rect.y,\n        x2 = x1 + rect.width,\n        y2 = y1 + rect.height,\n        coords = [x1, y1, x2, y1, x2, y2, x1, y2];\n      return this._transformCoordinates(coords, coords, 4);\n    },\n    _transformBounds: function (bounds, dest, _dontNotify) {\n      var coords = this._transformCorners(bounds),\n        min = coords.slice(0, 2),\n        max = min.slice();\n      for (var i = 2; i < 8; i++) {\n        var val = coords[i],\n          j = i & 1;\n        if (val < min[j]) {\n          min[j] = val;\n        } else if (val > max[j]) {\n          max[j] = val;\n        }\n      }\n      if (!dest) dest = new Rectangle();\n      return dest._set(min[0], min[1], max[0] - min[0], max[1] - min[1], _dontNotify);\n    },\n    inverseTransform: function () {\n      return this._inverseTransform(Point.read(arguments));\n    },\n    _inverseTransform: function (point, dest, _dontNotify) {\n      var a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d,\n        tx = this._tx,\n        ty = this._ty,\n        det = a * d - b * c,\n        res = null;\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        var x = point.x - this._tx,\n          y = point.y - this._ty;\n        if (!dest) dest = new Point();\n        res = dest._set((x * d - y * c) / det, (y * a - x * b) / det, _dontNotify);\n      }\n      return res;\n    },\n    decompose: function () {\n      var a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d,\n        det = a * d - b * c,\n        sqrt = Math.sqrt,\n        atan2 = Math.atan2,\n        degrees = 180 / Math.PI,\n        rotate,\n        scale,\n        skew;\n      if (a !== 0 || b !== 0) {\n        var r = sqrt(a * a + b * b);\n        rotate = Math.acos(a / r) * (b > 0 ? 1 : -1);\n        scale = [r, det / r];\n        skew = [atan2(a * c + b * d, r * r), 0];\n      } else if (c !== 0 || d !== 0) {\n        var s = sqrt(c * c + d * d);\n        rotate = Math.asin(c / s) * (d > 0 ? 1 : -1);\n        scale = [det / s, s];\n        skew = [0, atan2(a * c + b * d, s * s)];\n      } else {\n        rotate = 0;\n        skew = scale = [0, 0];\n      }\n      return {\n        translation: this.getTranslation(),\n        rotation: rotate * degrees,\n        scaling: new Point(scale),\n        skewing: new Point(skew[0] * degrees, skew[1] * degrees)\n      };\n    },\n    getValues: function () {\n      return [this._a, this._b, this._c, this._d, this._tx, this._ty];\n    },\n    getTranslation: function () {\n      return new Point(this._tx, this._ty);\n    },\n    getScaling: function () {\n      return this.decompose().scaling;\n    },\n    getRotation: function () {\n      return this.decompose().rotation;\n    },\n    applyToContext: function (ctx) {\n      if (!this.isIdentity()) {\n        ctx.transform(this._a, this._b, this._c, this._d, this._tx, this._ty);\n      }\n    }\n  }, Base.each(['a', 'b', 'c', 'd', 'tx', 'ty'], function (key) {\n    var part = Base.capitalize(key),\n      prop = '_' + key;\n    this['get' + part] = function () {\n      return this[prop];\n    };\n    this['set' + part] = function (value) {\n      this[prop] = value;\n      this._changed();\n    };\n  }, {}));\n  var Line = Base.extend({\n    _class: 'Line',\n    initialize: function Line(arg0, arg1, arg2, arg3, arg4) {\n      var asVector = false;\n      if (arguments.length >= 4) {\n        this._px = arg0;\n        this._py = arg1;\n        this._vx = arg2;\n        this._vy = arg3;\n        asVector = arg4;\n      } else {\n        this._px = arg0.x;\n        this._py = arg0.y;\n        this._vx = arg1.x;\n        this._vy = arg1.y;\n        asVector = arg2;\n      }\n      if (!asVector) {\n        this._vx -= this._px;\n        this._vy -= this._py;\n      }\n    },\n    getPoint: function () {\n      return new Point(this._px, this._py);\n    },\n    getVector: function () {\n      return new Point(this._vx, this._vy);\n    },\n    getLength: function () {\n      return this.getVector().getLength();\n    },\n    intersect: function (line, isInfinite) {\n      return Line.intersect(this._px, this._py, this._vx, this._vy, line._px, line._py, line._vx, line._vy, true, isInfinite);\n    },\n    getSide: function (point, isInfinite) {\n      return Line.getSide(this._px, this._py, this._vx, this._vy, point.x, point.y, true, isInfinite);\n    },\n    getDistance: function (point) {\n      return Math.abs(this.getSignedDistance(point));\n    },\n    getSignedDistance: function (point) {\n      return Line.getSignedDistance(this._px, this._py, this._vx, this._vy, point.x, point.y, true);\n    },\n    isCollinear: function (line) {\n      return Point.isCollinear(this._vx, this._vy, line._vx, line._vy);\n    },\n    isOrthogonal: function (line) {\n      return Point.isOrthogonal(this._vx, this._vy, line._vx, line._vy);\n    },\n    statics: {\n      intersect: function (p1x, p1y, v1x, v1y, p2x, p2y, v2x, v2y, asVector, isInfinite) {\n        if (!asVector) {\n          v1x -= p1x;\n          v1y -= p1y;\n          v2x -= p2x;\n          v2y -= p2y;\n        }\n        var cross = v1x * v2y - v1y * v2x;\n        if (!Numerical.isMachineZero(cross)) {\n          var dx = p1x - p2x,\n            dy = p1y - p2y,\n            u1 = (v2x * dy - v2y * dx) / cross,\n            u2 = (v1x * dy - v1y * dx) / cross,\n            epsilon = 1e-12,\n            uMin = -epsilon,\n            uMax = 1 + epsilon;\n          if (isInfinite || uMin < u1 && u1 < uMax && uMin < u2 && u2 < uMax) {\n            if (!isInfinite) {\n              u1 = u1 <= 0 ? 0 : u1 >= 1 ? 1 : u1;\n            }\n            return new Point(p1x + u1 * v1x, p1y + u1 * v1y);\n          }\n        }\n      },\n      getSide: function (px, py, vx, vy, x, y, asVector, isInfinite) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n        var v2x = x - px,\n          v2y = y - py,\n          ccw = v2x * vy - v2y * vx;\n        if (!isInfinite && Numerical.isMachineZero(ccw)) {\n          ccw = (v2x * vx + v2x * vx) / (vx * vx + vy * vy);\n          if (ccw >= 0 && ccw <= 1) ccw = 0;\n        }\n        return ccw < 0 ? -1 : ccw > 0 ? 1 : 0;\n      },\n      getSignedDistance: function (px, py, vx, vy, x, y, asVector) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n        return vx === 0 ? vy > 0 ? x - px : px - x : vy === 0 ? vx < 0 ? y - py : py - y : ((x - px) * vy - (y - py) * vx) / (vy > vx ? vy * Math.sqrt(1 + vx * vx / (vy * vy)) : vx * Math.sqrt(1 + vy * vy / (vx * vx)));\n      },\n      getDistance: function (px, py, vx, vy, x, y, asVector) {\n        return Math.abs(Line.getSignedDistance(px, py, vx, vy, x, y, asVector));\n      }\n    }\n  });\n  var Project = PaperScopeItem.extend({\n    _class: 'Project',\n    _list: 'projects',\n    _reference: 'project',\n    _compactSerialize: true,\n    initialize: function Project(element) {\n      PaperScopeItem.call(this, true);\n      this._children = [];\n      this._namedChildren = {};\n      this._activeLayer = null;\n      this._currentStyle = new Style(null, null, this);\n      this._view = View.create(this, element || CanvasProvider.getCanvas(1, 1));\n      this._selectionItems = {};\n      this._selectionCount = 0;\n      this._updateVersion = 0;\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this._children, options, true, dictionary);\n    },\n    _changed: function (flags, item) {\n      if (flags & 1) {\n        var view = this._view;\n        if (view) {\n          view._needsUpdate = true;\n          if (!view._requested && view._autoUpdate) view.requestUpdate();\n        }\n      }\n      var changes = this._changes;\n      if (changes && item) {\n        var changesById = this._changesById,\n          id = item._id,\n          entry = changesById[id];\n        if (entry) {\n          entry.flags |= flags;\n        } else {\n          changes.push(changesById[id] = {\n            item: item,\n            flags: flags\n          });\n        }\n      }\n    },\n    clear: function () {\n      var children = this._children;\n      for (var i = children.length - 1; i >= 0; i--) children[i].remove();\n    },\n    isEmpty: function () {\n      return !this._children.length;\n    },\n    remove: function remove() {\n      if (!remove.base.call(this)) return false;\n      if (this._view) this._view.remove();\n      return true;\n    },\n    getView: function () {\n      return this._view;\n    },\n    getCurrentStyle: function () {\n      return this._currentStyle;\n    },\n    setCurrentStyle: function (style) {\n      this._currentStyle.set(style);\n    },\n    getIndex: function () {\n      return this._index;\n    },\n    getOptions: function () {\n      return this._scope.settings;\n    },\n    getLayers: function () {\n      return this._children;\n    },\n    getActiveLayer: function () {\n      return this._activeLayer || new Layer({\n        project: this,\n        insert: true\n      });\n    },\n    getSymbolDefinitions: function () {\n      var definitions = [],\n        ids = {};\n      this.getItems({\n        class: SymbolItem,\n        match: function (item) {\n          var definition = item._definition,\n            id = definition._id;\n          if (!ids[id]) {\n            ids[id] = true;\n            definitions.push(definition);\n          }\n          return false;\n        }\n      });\n      return definitions;\n    },\n    getSymbols: 'getSymbolDefinitions',\n    getSelectedItems: function () {\n      var selectionItems = this._selectionItems,\n        items = [];\n      for (var id in selectionItems) {\n        var item = selectionItems[id],\n          selection = item._selection;\n        if (selection & 1 && item.isInserted()) {\n          items.push(item);\n        } else if (!selection) {\n          this._updateSelection(item);\n        }\n      }\n      return items;\n    },\n    _updateSelection: function (item) {\n      var id = item._id,\n        selectionItems = this._selectionItems;\n      if (item._selection) {\n        if (selectionItems[id] !== item) {\n          this._selectionCount++;\n          selectionItems[id] = item;\n        }\n      } else if (selectionItems[id] === item) {\n        this._selectionCount--;\n        delete selectionItems[id];\n      }\n    },\n    selectAll: function () {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) children[i].setFullySelected(true);\n    },\n    deselectAll: function () {\n      var selectionItems = this._selectionItems;\n      for (var i in selectionItems) selectionItems[i].setFullySelected(false);\n    },\n    addLayer: function (layer) {\n      return this.insertLayer(undefined, layer);\n    },\n    insertLayer: function (index, layer) {\n      if (layer instanceof Layer) {\n        layer._remove(false, true);\n        Base.splice(this._children, [layer], index, 0);\n        layer._setProject(this, true);\n        var name = layer._name;\n        if (name) layer.setName(name);\n        if (this._changes) layer._changed(5);\n        if (!this._activeLayer) this._activeLayer = layer;\n      } else {\n        layer = null;\n      }\n      return layer;\n    },\n    _insertItem: function (index, item, _created) {\n      item = this.insertLayer(index, item) || (this._activeLayer || this._insertItem(undefined, new Layer(Item.NO_INSERT), true)).insertChild(index, item);\n      if (_created && item.activate) item.activate();\n      return item;\n    },\n    getItems: function (options) {\n      return Item._getItems(this, options);\n    },\n    getItem: function (options) {\n      return Item._getItems(this, options, null, null, true)[0] || null;\n    },\n    importJSON: function (json) {\n      this.activate();\n      var layer = this._activeLayer;\n      return Base.importJSON(json, layer && layer.isEmpty() && layer);\n    },\n    removeOn: function (type) {\n      var sets = this._removeSets;\n      if (sets) {\n        if (type === 'mouseup') sets.mousedrag = null;\n        var set = sets[type];\n        if (set) {\n          for (var id in set) {\n            var item = set[id];\n            for (var key in sets) {\n              var other = sets[key];\n              if (other && other != set) delete other[item._id];\n            }\n            item.remove();\n          }\n          sets[type] = null;\n        }\n      }\n    },\n    draw: function (ctx, matrix, pixelRatio) {\n      this._updateVersion++;\n      ctx.save();\n      matrix.applyToContext(ctx);\n      var children = this._children,\n        param = new Base({\n          offset: new Point(0, 0),\n          pixelRatio: pixelRatio,\n          viewMatrix: matrix.isIdentity() ? null : matrix,\n          matrices: [new Matrix()],\n          updateMatrix: true\n        });\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].draw(ctx, param);\n      }\n      ctx.restore();\n      if (this._selectionCount > 0) {\n        ctx.save();\n        ctx.strokeWidth = 1;\n        var items = this._selectionItems,\n          size = this._scope.settings.handleSize,\n          version = this._updateVersion;\n        for (var id in items) {\n          items[id]._drawSelection(ctx, matrix, size, items, version);\n        }\n        ctx.restore();\n      }\n    }\n  });\n  var Item = Base.extend(Emitter, {\n    statics: {\n      extend: function extend(src) {\n        if (src._serializeFields) src._serializeFields = Base.set({}, this.prototype._serializeFields, src._serializeFields);\n        return extend.base.apply(this, arguments);\n      },\n      INSERT: {\n        insert: true\n      },\n      NO_INSERT: {\n        insert: false\n      }\n    },\n    _class: 'Item',\n    _name: null,\n    _applyMatrix: true,\n    _canApplyMatrix: true,\n    _canScaleStroke: false,\n    _pivot: null,\n    _visible: true,\n    _blendMode: 'normal',\n    _opacity: 1,\n    _locked: false,\n    _guide: false,\n    _clipMask: false,\n    _selection: 0,\n    _selectBounds: true,\n    _selectChildren: false,\n    _serializeFields: {\n      name: null,\n      applyMatrix: null,\n      matrix: new Matrix(),\n      pivot: null,\n      visible: true,\n      blendMode: 'normal',\n      opacity: 1,\n      locked: false,\n      guide: false,\n      clipMask: false,\n      selected: false,\n      data: {}\n    },\n    _prioritize: ['applyMatrix']\n  }, new function () {\n    var handlers = ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onClick', 'onDoubleClick', 'onMouseMove', 'onMouseEnter', 'onMouseLeave'];\n    return Base.each(handlers, function (name) {\n      this._events[name] = {\n        install: function (type) {\n          this.getView()._countItemEvent(type, 1);\n        },\n        uninstall: function (type) {\n          this.getView()._countItemEvent(type, -1);\n        }\n      };\n    }, {\n      _events: {\n        onFrame: {\n          install: function () {\n            this.getView()._animateItem(this, true);\n          },\n          uninstall: function () {\n            this.getView()._animateItem(this, false);\n          }\n        },\n        onLoad: {},\n        onError: {}\n      },\n      statics: {\n        _itemHandlers: handlers\n      }\n    });\n  }(), {\n    initialize: function Item() {},\n    _initialize: function (props, point) {\n      var hasProps = props && Base.isPlainObject(props),\n        internal = hasProps && props.internal === true,\n        matrix = this._matrix = new Matrix(),\n        project = hasProps && props.project || paper.project,\n        settings = paper.settings;\n      this._id = internal ? null : UID.get();\n      this._parent = this._index = null;\n      this._applyMatrix = this._canApplyMatrix && settings.applyMatrix;\n      if (point) matrix.translate(point);\n      matrix._owner = this;\n      this._style = new Style(project._currentStyle, this, project);\n      if (internal || hasProps && props.insert == false || !settings.insertItems && !(hasProps && props.insert == true)) {\n        this._setProject(project);\n      } else {\n        (hasProps && props.parent || project)._insertItem(undefined, this, true);\n      }\n      if (hasProps && props !== Item.NO_INSERT && props !== Item.INSERT) {\n        this.set(props, {\n          internal: true,\n          insert: true,\n          project: true,\n          parent: true\n        });\n      }\n      return hasProps;\n    },\n    _serialize: function (options, dictionary) {\n      var props = {},\n        that = this;\n      function serialize(fields) {\n        for (var key in fields) {\n          var value = that[key];\n          if (!Base.equals(value, key === 'leading' ? fields.fontSize * 1.2 : fields[key])) {\n            props[key] = Base.serialize(value, options, key !== 'data', dictionary);\n          }\n        }\n      }\n      serialize(this._serializeFields);\n      if (!(this instanceof Group)) serialize(this._style._defaults);\n      return [this._class, props];\n    },\n    _changed: function (flags) {\n      var symbol = this._symbol,\n        cacheParent = this._parent || symbol,\n        project = this._project;\n      if (flags & 8) {\n        this._bounds = this._position = this._decomposed = undefined;\n      }\n      if (flags & 16) {\n        this._globalMatrix = undefined;\n      }\n      if (cacheParent && flags & 72) {\n        Item._clearBoundsCache(cacheParent);\n      }\n      if (flags & 2) {\n        Item._clearBoundsCache(this);\n      }\n      if (project) project._changed(flags, this);\n      if (symbol) symbol._changed(flags);\n    },\n    getId: function () {\n      return this._id;\n    },\n    getName: function () {\n      return this._name;\n    },\n    setName: function (name) {\n      if (this._name) this._removeNamed();\n      if (name === +name + '') throw new Error('Names consisting only of numbers are not supported.');\n      var owner = this._getOwner();\n      if (name && owner) {\n        var children = owner._children,\n          namedChildren = owner._namedChildren;\n        (namedChildren[name] = namedChildren[name] || []).push(this);\n        if (!(name in children)) children[name] = this;\n      }\n      this._name = name || undefined;\n      this._changed(256);\n    },\n    getStyle: function () {\n      return this._style;\n    },\n    setStyle: function (style) {\n      this.getStyle().set(style);\n    }\n  }, Base.each(['locked', 'visible', 'blendMode', 'opacity', 'guide'], function (name) {\n    var part = Base.capitalize(name),\n      key = '_' + name,\n      flags = {\n        locked: 256,\n        visible: 265\n      };\n    this['get' + part] = function () {\n      return this[key];\n    };\n    this['set' + part] = function (value) {\n      if (value != this[key]) {\n        this[key] = value;\n        this._changed(flags[name] || 257);\n      }\n    };\n  }, {}), {\n    beans: true,\n    getSelection: function () {\n      return this._selection;\n    },\n    setSelection: function (selection) {\n      if (selection !== this._selection) {\n        this._selection = selection;\n        var project = this._project;\n        if (project) {\n          project._updateSelection(this);\n          this._changed(257);\n        }\n      }\n    },\n    _changeSelection: function (flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function () {\n      if (this._selectChildren) {\n        var children = this._children;\n        for (var i = 0, l = children.length; i < l; i++) if (children[i].isSelected()) return true;\n      }\n      return !!(this._selection & 1);\n    },\n    setSelected: function (selected) {\n      if (this._selectChildren) {\n        var children = this._children;\n        for (var i = 0, l = children.length; i < l; i++) children[i].setSelected(selected);\n      }\n      this._changeSelection(1, selected);\n    },\n    isFullySelected: function () {\n      var children = this._children,\n        selected = !!(this._selection & 1);\n      if (children && selected) {\n        for (var i = 0, l = children.length; i < l; i++) if (!children[i].isFullySelected()) return false;\n        return true;\n      }\n      return selected;\n    },\n    setFullySelected: function (selected) {\n      var children = this._children;\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) children[i].setFullySelected(selected);\n      }\n      this._changeSelection(1, selected);\n    },\n    isClipMask: function () {\n      return this._clipMask;\n    },\n    setClipMask: function (clipMask) {\n      if (this._clipMask != (clipMask = !!clipMask)) {\n        this._clipMask = clipMask;\n        if (clipMask) {\n          this.setFillColor(null);\n          this.setStrokeColor(null);\n        }\n        this._changed(257);\n        if (this._parent) this._parent._changed(2048);\n      }\n    },\n    getData: function () {\n      if (!this._data) this._data = {};\n      return this._data;\n    },\n    setData: function (data) {\n      this._data = data;\n    },\n    getPosition: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      var position = this._position || (this._position = this._getPositionFromBounds());\n      return new ctor(position.x, position.y, this, 'setPosition');\n    },\n    setPosition: function () {\n      this.translate(Point.read(arguments).subtract(this.getPosition(true)));\n    },\n    _getPositionFromBounds: function (bounds) {\n      return this._pivot ? this._matrix._transformPoint(this._pivot) : (bounds || this.getBounds()).getCenter(true);\n    },\n    getPivot: function () {\n      var pivot = this._pivot;\n      return pivot ? new LinkedPoint(pivot.x, pivot.y, this, 'setPivot') : null;\n    },\n    setPivot: function () {\n      this._pivot = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n      this._position = undefined;\n    }\n  }, Base.each({\n    getStrokeBounds: {\n      stroke: true\n    },\n    getHandleBounds: {\n      handle: true\n    },\n    getInternalBounds: {\n      internal: true\n    }\n  }, function (options, key) {\n    this[key] = function (matrix) {\n      return this.getBounds(matrix, options);\n    };\n  }, {\n    beans: true,\n    getBounds: function (matrix, options) {\n      var hasMatrix = options || matrix instanceof Matrix,\n        opts = Base.set({}, hasMatrix ? options : matrix, this._boundsOptions);\n      if (!opts.stroke || this.getStrokeScaling()) opts.cacheItem = this;\n      var rect = this._getCachedBounds(hasMatrix && matrix, opts).rect;\n      return !arguments.length ? new LinkedRectangle(rect.x, rect.y, rect.width, rect.height, this, 'setBounds') : rect;\n    },\n    setBounds: function () {\n      var rect = Rectangle.read(arguments),\n        bounds = this.getBounds(),\n        _matrix = this._matrix,\n        matrix = new Matrix(),\n        center = rect.getCenter();\n      matrix.translate(center);\n      if (rect.width != bounds.width || rect.height != bounds.height) {\n        if (!_matrix.isInvertible()) {\n          _matrix.set(_matrix._backup || new Matrix().translate(_matrix.getTranslation()));\n          bounds = this.getBounds();\n        }\n        matrix.scale(bounds.width !== 0 ? rect.width / bounds.width : 0, bounds.height !== 0 ? rect.height / bounds.height : 0);\n      }\n      center = bounds.getCenter();\n      matrix.translate(-center.x, -center.y);\n      this.transform(matrix);\n    },\n    _getBounds: function (matrix, options) {\n      var children = this._children;\n      if (!children || !children.length) return new Rectangle();\n      Item._updateBoundsCache(this, options.cacheItem);\n      return Item._getBounds(children, matrix, options);\n    },\n    _getBoundsCacheKey: function (options, internal) {\n      return [options.stroke ? 1 : 0, options.handle ? 1 : 0, internal ? 1 : 0].join('');\n    },\n    _getCachedBounds: function (matrix, options, noInternal) {\n      matrix = matrix && matrix._orNullIfIdentity();\n      var internal = options.internal && !noInternal,\n        cacheItem = options.cacheItem,\n        _matrix = internal ? null : this._matrix._orNullIfIdentity(),\n        cacheKey = cacheItem && (!matrix || matrix.equals(_matrix)) && this._getBoundsCacheKey(options, internal),\n        bounds = this._bounds;\n      Item._updateBoundsCache(this._parent || this._symbol, cacheItem);\n      if (cacheKey && bounds && cacheKey in bounds) {\n        var cached = bounds[cacheKey];\n        return {\n          rect: cached.rect.clone(),\n          nonscaling: cached.nonscaling\n        };\n      }\n      var res = this._getBounds(matrix || _matrix, options),\n        rect = res.rect || res,\n        style = this._style,\n        nonscaling = res.nonscaling || style.hasStroke() && !style.getStrokeScaling();\n      if (cacheKey) {\n        if (!bounds) {\n          this._bounds = bounds = {};\n        }\n        var cached = bounds[cacheKey] = {\n          rect: rect.clone(),\n          nonscaling: nonscaling,\n          internal: internal\n        };\n      }\n      return {\n        rect: rect,\n        nonscaling: nonscaling\n      };\n    },\n    _getStrokeMatrix: function (matrix, options) {\n      var parent = this.getStrokeScaling() ? null : options && options.internal ? this : this._parent || this._symbol && this._symbol._item,\n        mx = parent ? parent.getViewMatrix().invert() : matrix;\n      return mx && mx._shiftless();\n    },\n    statics: {\n      _updateBoundsCache: function (parent, item) {\n        if (parent && item) {\n          var id = item._id,\n            ref = parent._boundsCache = parent._boundsCache || {\n              ids: {},\n              list: []\n            };\n          if (!ref.ids[id]) {\n            ref.list.push(item);\n            ref.ids[id] = item;\n          }\n        }\n      },\n      _clearBoundsCache: function (item) {\n        var cache = item._boundsCache;\n        if (cache) {\n          item._bounds = item._position = item._boundsCache = undefined;\n          for (var i = 0, list = cache.list, l = list.length; i < l; i++) {\n            var other = list[i];\n            if (other !== item) {\n              other._bounds = other._position = undefined;\n              if (other._boundsCache) Item._clearBoundsCache(other);\n            }\n          }\n        }\n      },\n      _getBounds: function (items, matrix, options) {\n        var x1 = Infinity,\n          x2 = -x1,\n          y1 = x1,\n          y2 = x2,\n          nonscaling = false;\n        options = options || {};\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i];\n          if (item._visible && !item.isEmpty(true)) {\n            var bounds = item._getCachedBounds(matrix && matrix.appended(item._matrix), options, true),\n              rect = bounds.rect;\n            x1 = Math.min(rect.x, x1);\n            y1 = Math.min(rect.y, y1);\n            x2 = Math.max(rect.x + rect.width, x2);\n            y2 = Math.max(rect.y + rect.height, y2);\n            if (bounds.nonscaling) nonscaling = true;\n          }\n        }\n        return {\n          rect: isFinite(x1) ? new Rectangle(x1, y1, x2 - x1, y2 - y1) : new Rectangle(),\n          nonscaling: nonscaling\n        };\n      }\n    }\n  }), {\n    beans: true,\n    _decompose: function () {\n      return this._applyMatrix ? null : this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    getRotation: function () {\n      var decomposed = this._decompose();\n      return decomposed ? decomposed.rotation : 0;\n    },\n    setRotation: function (rotation) {\n      var current = this.getRotation();\n      if (current != null && rotation != null) {\n        var decomposed = this._decomposed;\n        this.rotate(rotation - current);\n        if (decomposed) {\n          decomposed.rotation = rotation;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getScaling: function () {\n      var decomposed = this._decompose(),\n        s = decomposed && decomposed.scaling;\n      return new LinkedPoint(s ? s.x : 1, s ? s.y : 1, this, 'setScaling');\n    },\n    setScaling: function () {\n      var current = this.getScaling(),\n        scaling = Point.read(arguments, 0, {\n          clone: true,\n          readNull: true\n        });\n      if (current && scaling && !current.equals(scaling)) {\n        var rotation = this.getRotation(),\n          decomposed = this._decomposed,\n          matrix = new Matrix(),\n          isZero = Numerical.isZero;\n        if (isZero(current.x) || isZero(current.y)) {\n          matrix.translate(decomposed.translation);\n          if (rotation) {\n            matrix.rotate(rotation);\n          }\n          matrix.scale(scaling.x, scaling.y);\n          this._matrix.set(matrix);\n        } else {\n          var center = this.getPosition(true);\n          matrix.translate(center);\n          if (rotation) matrix.rotate(rotation);\n          matrix.scale(scaling.x / current.x, scaling.y / current.y);\n          if (rotation) matrix.rotate(-rotation);\n          matrix.translate(center.negate());\n          this.transform(matrix);\n        }\n        if (decomposed) {\n          decomposed.scaling = scaling;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getMatrix: function () {\n      return this._matrix;\n    },\n    setMatrix: function () {\n      var matrix = this._matrix;\n      matrix.set.apply(matrix, arguments);\n    },\n    getGlobalMatrix: function (_dontClone) {\n      var matrix = this._globalMatrix;\n      if (matrix) {\n        var parent = this._parent;\n        var parents = [];\n        while (parent) {\n          if (!parent._globalMatrix) {\n            matrix = null;\n            for (var i = 0, l = parents.length; i < l; i++) {\n              parents[i]._globalMatrix = null;\n            }\n            break;\n          }\n          parents.push(parent);\n          parent = parent._parent;\n        }\n      }\n      if (!matrix) {\n        matrix = this._globalMatrix = this._matrix.clone();\n        var parent = this._parent;\n        if (parent) matrix.prepend(parent.getGlobalMatrix(true));\n      }\n      return _dontClone ? matrix : matrix.clone();\n    },\n    getViewMatrix: function () {\n      return this.getGlobalMatrix().prepend(this.getView()._matrix);\n    },\n    getApplyMatrix: function () {\n      return this._applyMatrix;\n    },\n    setApplyMatrix: function (apply) {\n      if (this._applyMatrix = this._canApplyMatrix && !!apply) this.transform(null, true);\n    },\n    getTransformContent: '#getApplyMatrix',\n    setTransformContent: '#setApplyMatrix'\n  }, {\n    getProject: function () {\n      return this._project;\n    },\n    _setProject: function (project, installEvents) {\n      if (this._project !== project) {\n        if (this._project) this._installEvents(false);\n        this._project = project;\n        var children = this._children;\n        for (var i = 0, l = children && children.length; i < l; i++) children[i]._setProject(project);\n        installEvents = true;\n      }\n      if (installEvents) this._installEvents(true);\n    },\n    getView: function () {\n      return this._project._view;\n    },\n    _installEvents: function _installEvents(install) {\n      _installEvents.base.call(this, install);\n      var children = this._children;\n      for (var i = 0, l = children && children.length; i < l; i++) children[i]._installEvents(install);\n    },\n    getLayer: function () {\n      var parent = this;\n      while (parent = parent._parent) {\n        if (parent instanceof Layer) return parent;\n      }\n      return null;\n    },\n    getParent: function () {\n      return this._parent;\n    },\n    setParent: function (item) {\n      return item.addChild(this);\n    },\n    _getOwner: '#getParent',\n    getChildren: function () {\n      return this._children;\n    },\n    setChildren: function (items) {\n      this.removeChildren();\n      this.addChildren(items);\n    },\n    getFirstChild: function () {\n      return this._children && this._children[0] || null;\n    },\n    getLastChild: function () {\n      return this._children && this._children[this._children.length - 1] || null;\n    },\n    getNextSibling: function () {\n      var owner = this._getOwner();\n      return owner && owner._children[this._index + 1] || null;\n    },\n    getPreviousSibling: function () {\n      var owner = this._getOwner();\n      return owner && owner._children[this._index - 1] || null;\n    },\n    getIndex: function () {\n      return this._index;\n    },\n    equals: function (item) {\n      return item === this || item && this._class === item._class && this._style.equals(item._style) && this._matrix.equals(item._matrix) && this._locked === item._locked && this._visible === item._visible && this._blendMode === item._blendMode && this._opacity === item._opacity && this._clipMask === item._clipMask && this._guide === item._guide && this._equals(item) || false;\n    },\n    _equals: function (item) {\n      return Base.equals(this._children, item._children);\n    },\n    clone: function (options) {\n      var copy = new this.constructor(Item.NO_INSERT),\n        children = this._children,\n        insert = Base.pick(options ? options.insert : undefined, options === undefined || options === true),\n        deep = Base.pick(options ? options.deep : undefined, true);\n      if (children) copy.copyAttributes(this);\n      if (!children || deep) copy.copyContent(this);\n      if (!children) copy.copyAttributes(this);\n      if (insert) copy.insertAbove(this);\n      var name = this._name,\n        parent = this._parent;\n      if (name && parent) {\n        var children = parent._children,\n          orig = name,\n          i = 1;\n        while (children[name]) name = orig + ' ' + i++;\n        if (name !== orig) copy.setName(name);\n      }\n      return copy;\n    },\n    copyContent: function (source) {\n      var children = source._children;\n      for (var i = 0, l = children && children.length; i < l; i++) {\n        this.addChild(children[i].clone(false), true);\n      }\n    },\n    copyAttributes: function (source, excludeMatrix) {\n      this.setStyle(source._style);\n      var keys = ['_locked', '_visible', '_blendMode', '_opacity', '_clipMask', '_guide'];\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i];\n        if (source.hasOwnProperty(key)) this[key] = source[key];\n      }\n      if (!excludeMatrix) this._matrix.set(source._matrix, true);\n      this.setApplyMatrix(source._applyMatrix);\n      this.setPivot(source._pivot);\n      this.setSelection(source._selection);\n      var data = source._data,\n        name = source._name;\n      this._data = data ? Base.clone(data) : null;\n      if (name) this.setName(name);\n    },\n    rasterize: function (arg0, arg1) {\n      var resolution, insert, raster;\n      if (Base.isPlainObject(arg0)) {\n        resolution = arg0.resolution;\n        insert = arg0.insert;\n        raster = arg0.raster;\n      } else {\n        resolution = arg0;\n        insert = arg1;\n      }\n      if (!raster) {\n        raster = new Raster(Item.NO_INSERT);\n      }\n      var bounds = this.getStrokeBounds(),\n        scale = (resolution || this.getView().getResolution()) / 72,\n        topLeft = bounds.getTopLeft().floor(),\n        bottomRight = bounds.getBottomRight().ceil(),\n        boundsSize = new Size(bottomRight.subtract(topLeft)),\n        rasterSize = boundsSize.multiply(scale);\n      raster.setSize(rasterSize, true);\n      if (!rasterSize.isZero()) {\n        var ctx = raster.getContext(true),\n          matrix = new Matrix().scale(scale).translate(topLeft.negate());\n        ctx.save();\n        matrix.applyToContext(ctx);\n        this.draw(ctx, new Base({\n          matrices: [matrix]\n        }));\n        ctx.restore();\n      }\n      raster._matrix.set(new Matrix().translate(topLeft.add(boundsSize.divide(2))).scale(1 / scale));\n      if (insert === undefined || insert) {\n        raster.insertAbove(this);\n      }\n      return raster;\n    },\n    contains: function () {\n      var matrix = this._matrix;\n      return matrix.isInvertible() && !!this._contains(matrix._inverseTransform(Point.read(arguments)));\n    },\n    _contains: function (point) {\n      var children = this._children;\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          if (children[i].contains(point)) return true;\n        }\n        return false;\n      }\n      return point.isInside(this.getInternalBounds());\n    },\n    isInside: function () {\n      return Rectangle.read(arguments).contains(this.getBounds());\n    },\n    _asPathItem: function () {\n      return new Path.Rectangle({\n        rectangle: this.getInternalBounds(),\n        matrix: this._matrix,\n        insert: false\n      });\n    },\n    intersects: function (item, _matrix) {\n      if (!(item instanceof Item)) return false;\n      return this._asPathItem().getIntersections(item._asPathItem(), null, _matrix, true).length > 0;\n    }\n  }, new function () {\n    function hitTest() {\n      var args = arguments;\n      return this._hitTest(Point.read(args), HitResult.getOptions(args));\n    }\n    function hitTestAll() {\n      var args = arguments,\n        point = Point.read(args),\n        options = HitResult.getOptions(args),\n        all = [];\n      this._hitTest(point, new Base({\n        all: all\n      }, options));\n      return all;\n    }\n    function hitTestChildren(point, options, viewMatrix, _exclude) {\n      var children = this._children;\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          var child = children[i];\n          var res = child !== _exclude && child._hitTest(point, options, viewMatrix);\n          if (res && !options.all) return res;\n        }\n      }\n      return null;\n    }\n    Project.inject({\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTest: hitTestChildren\n    });\n    return {\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTestChildren: hitTestChildren\n    };\n  }(), {\n    _hitTest: function (point, options, parentViewMatrix) {\n      if (this._locked || !this._visible || this._guide && !options.guides || this.isEmpty()) {\n        return null;\n      }\n      var matrix = this._matrix,\n        viewMatrix = parentViewMatrix ? parentViewMatrix.appended(matrix) : this.getGlobalMatrix().prepend(this.getView()._matrix),\n        tolerance = Math.max(options.tolerance, 1e-12),\n        tolerancePadding = options._tolerancePadding = new Size(Path._getStrokePadding(tolerance, matrix._shiftless().invert()));\n      point = matrix._inverseTransform(point);\n      if (!point || !this._children && !this.getBounds({\n        internal: true,\n        stroke: true,\n        handle: true\n      }).expand(tolerancePadding.multiply(2))._containsPoint(point)) {\n        return null;\n      }\n      var checkSelf = !(options.guides && !this._guide || options.selected && !this.isSelected() || options.type && options.type !== Base.hyphenate(this._class) || options.class && !(this instanceof options.class)),\n        match = options.match,\n        that = this,\n        bounds,\n        res;\n      function filter(hit) {\n        if (hit && match && !match(hit)) hit = null;\n        if (hit && options.all) options.all.push(hit);\n        return hit;\n      }\n      function checkPoint(type, part) {\n        var pt = part ? bounds['get' + part]() : that.getPosition();\n        if (point.subtract(pt).divide(tolerancePadding).length <= 1) {\n          return new HitResult(type, that, {\n            name: part ? Base.hyphenate(part) : type,\n            point: pt\n          });\n        }\n      }\n      var checkPosition = options.position,\n        checkCenter = options.center,\n        checkBounds = options.bounds;\n      if (checkSelf && this._parent && (checkPosition || checkCenter || checkBounds)) {\n        if (checkCenter || checkBounds) {\n          bounds = this.getInternalBounds();\n        }\n        res = checkPosition && checkPoint('position') || checkCenter && checkPoint('center', 'Center');\n        if (!res && checkBounds) {\n          var points = ['TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'];\n          for (var i = 0; i < 8 && !res; i++) {\n            res = checkPoint('bounds', points[i]);\n          }\n        }\n        res = filter(res);\n      }\n      if (!res) {\n        res = this._hitTestChildren(point, options, viewMatrix) || checkSelf && filter(this._hitTestSelf(point, options, viewMatrix, this.getStrokeScaling() ? null : viewMatrix._shiftless().invert())) || null;\n      }\n      if (res && res.point) {\n        res.point = matrix.transform(res.point);\n      }\n      return res;\n    },\n    _hitTestSelf: function (point, options) {\n      if (options.fill && this.hasFill() && this._contains(point)) return new HitResult('fill', this);\n    },\n    matches: function (name, compare) {\n      function matchObject(obj1, obj2) {\n        for (var i in obj1) {\n          if (obj1.hasOwnProperty(i)) {\n            var val1 = obj1[i],\n              val2 = obj2[i];\n            if (Base.isPlainObject(val1) && Base.isPlainObject(val2)) {\n              if (!matchObject(val1, val2)) return false;\n            } else if (!Base.equals(val1, val2)) {\n              return false;\n            }\n          }\n        }\n        return true;\n      }\n      var type = typeof name;\n      if (type === 'object') {\n        for (var key in name) {\n          if (name.hasOwnProperty(key) && !this.matches(key, name[key])) return false;\n        }\n        return true;\n      } else if (type === 'function') {\n        return name(this);\n      } else if (name === 'match') {\n        return compare(this);\n      } else {\n        var value = /^(empty|editable)$/.test(name) ? this['is' + Base.capitalize(name)]() : name === 'type' ? Base.hyphenate(this._class) : this[name];\n        if (name === 'class') {\n          if (typeof compare === 'function') return this instanceof compare;\n          value = this._class;\n        }\n        if (typeof compare === 'function') {\n          return !!compare(value);\n        } else if (compare) {\n          if (compare.test) {\n            return compare.test(value);\n          } else if (Base.isPlainObject(compare)) {\n            return matchObject(compare, value);\n          }\n        }\n        return Base.equals(value, compare);\n      }\n    },\n    getItems: function (options) {\n      return Item._getItems(this, options, this._matrix);\n    },\n    getItem: function (options) {\n      return Item._getItems(this, options, this._matrix, null, true)[0] || null;\n    },\n    statics: {\n      _getItems: function _getItems(item, options, matrix, param, firstOnly) {\n        if (!param) {\n          var obj = typeof options === 'object' && options,\n            overlapping = obj && obj.overlapping,\n            inside = obj && obj.inside,\n            bounds = overlapping || inside,\n            rect = bounds && Rectangle.read([bounds]);\n          param = {\n            items: [],\n            recursive: obj && obj.recursive !== false,\n            inside: !!inside,\n            overlapping: !!overlapping,\n            rect: rect,\n            path: overlapping && new Path.Rectangle({\n              rectangle: rect,\n              insert: false\n            })\n          };\n          if (obj) {\n            options = Base.filter({}, options, {\n              recursive: true,\n              inside: true,\n              overlapping: true\n            });\n          }\n        }\n        var children = item._children,\n          items = param.items,\n          rect = param.rect;\n        matrix = rect && (matrix || new Matrix());\n        for (var i = 0, l = children && children.length; i < l; i++) {\n          var child = children[i],\n            childMatrix = matrix && matrix.appended(child._matrix),\n            add = true;\n          if (rect) {\n            var bounds = child.getBounds(childMatrix);\n            if (!rect.intersects(bounds)) continue;\n            if (!(rect.contains(bounds) || param.overlapping && (bounds.contains(rect) || param.path.intersects(child, childMatrix)))) add = false;\n          }\n          if (add && child.matches(options)) {\n            items.push(child);\n            if (firstOnly) break;\n          }\n          if (param.recursive !== false) {\n            _getItems(child, options, childMatrix, param, firstOnly);\n          }\n          if (firstOnly && items.length > 0) break;\n        }\n        return items;\n      }\n    }\n  }, {\n    importJSON: function (json) {\n      var res = Base.importJSON(json, this);\n      return res !== this ? this.addChild(res) : res;\n    },\n    addChild: function (item) {\n      return this.insertChild(undefined, item);\n    },\n    insertChild: function (index, item) {\n      var res = item ? this.insertChildren(index, [item]) : null;\n      return res && res[0];\n    },\n    addChildren: function (items) {\n      return this.insertChildren(this._children.length, items);\n    },\n    insertChildren: function (index, items) {\n      var children = this._children;\n      if (children && items && items.length > 0) {\n        items = Base.slice(items);\n        var inserted = {};\n        for (var i = items.length - 1; i >= 0; i--) {\n          var item = items[i],\n            id = item && item._id;\n          if (!item || inserted[id]) {\n            items.splice(i, 1);\n          } else {\n            item._remove(false, true);\n            inserted[id] = true;\n          }\n        }\n        Base.splice(children, items, index, 0);\n        var project = this._project,\n          notifySelf = project._changes;\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i],\n            name = item._name;\n          item._parent = this;\n          item._setProject(project, true);\n          if (name) item.setName(name);\n          if (notifySelf) item._changed(5);\n        }\n        this._changed(11);\n      } else {\n        items = null;\n      }\n      return items;\n    },\n    _insertItem: '#insertChild',\n    _insertAt: function (item, offset) {\n      var owner = item && item._getOwner(),\n        res = item !== this && owner ? this : null;\n      if (res) {\n        res._remove(false, true);\n        owner._insertItem(item._index + offset, res);\n      }\n      return res;\n    },\n    insertAbove: function (item) {\n      return this._insertAt(item, 1);\n    },\n    insertBelow: function (item) {\n      return this._insertAt(item, 0);\n    },\n    sendToBack: function () {\n      var owner = this._getOwner();\n      return owner ? owner._insertItem(0, this) : null;\n    },\n    bringToFront: function () {\n      var owner = this._getOwner();\n      return owner ? owner._insertItem(undefined, this) : null;\n    },\n    appendTop: '#addChild',\n    appendBottom: function (item) {\n      return this.insertChild(0, item);\n    },\n    moveAbove: '#insertAbove',\n    moveBelow: '#insertBelow',\n    addTo: function (owner) {\n      return owner._insertItem(undefined, this);\n    },\n    copyTo: function (owner) {\n      return this.clone(false).addTo(owner);\n    },\n    reduce: function (options) {\n      var children = this._children;\n      if (children && children.length === 1) {\n        var child = children[0].reduce(options);\n        if (this._parent) {\n          child.insertAbove(this);\n          this.remove();\n        } else {\n          child.remove();\n        }\n        return child;\n      }\n      return this;\n    },\n    _removeNamed: function () {\n      var owner = this._getOwner();\n      if (owner) {\n        var children = owner._children,\n          namedChildren = owner._namedChildren,\n          name = this._name,\n          namedArray = namedChildren[name],\n          index = namedArray ? namedArray.indexOf(this) : -1;\n        if (index !== -1) {\n          if (children[name] == this) delete children[name];\n          namedArray.splice(index, 1);\n          if (namedArray.length) {\n            children[name] = namedArray[0];\n          } else {\n            delete namedChildren[name];\n          }\n        }\n      }\n    },\n    _remove: function (notifySelf, notifyParent) {\n      var owner = this._getOwner(),\n        project = this._project,\n        index = this._index;\n      if (this._style) this._style._dispose();\n      if (owner) {\n        if (this._name) this._removeNamed();\n        if (index != null) {\n          if (project._activeLayer === this) project._activeLayer = this.getNextSibling() || this.getPreviousSibling();\n          Base.splice(owner._children, null, index, 1);\n        }\n        this._installEvents(false);\n        if (notifySelf && project._changes) this._changed(5);\n        if (notifyParent) owner._changed(11, this);\n        this._parent = null;\n        return true;\n      }\n      return false;\n    },\n    remove: function () {\n      return this._remove(true, true);\n    },\n    replaceWith: function (item) {\n      var ok = item && item.insertBelow(this);\n      if (ok) this.remove();\n      return ok;\n    },\n    removeChildren: function (start, end) {\n      if (!this._children) return null;\n      start = start || 0;\n      end = Base.pick(end, this._children.length);\n      var removed = Base.splice(this._children, null, start, end - start);\n      for (var i = removed.length - 1; i >= 0; i--) {\n        removed[i]._remove(true, false);\n      }\n      if (removed.length > 0) this._changed(11);\n      return removed;\n    },\n    clear: '#removeChildren',\n    reverseChildren: function () {\n      if (this._children) {\n        this._children.reverse();\n        for (var i = 0, l = this._children.length; i < l; i++) this._children[i]._index = i;\n        this._changed(11);\n      }\n    },\n    isEmpty: function (recursively) {\n      var children = this._children;\n      var numChildren = children ? children.length : 0;\n      if (recursively) {\n        for (var i = 0; i < numChildren; i++) {\n          if (!children[i].isEmpty(recursively)) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return !numChildren;\n    },\n    isEditable: function () {\n      var item = this;\n      while (item) {\n        if (!item._visible || item._locked) return false;\n        item = item._parent;\n      }\n      return true;\n    },\n    hasFill: function () {\n      return this.getStyle().hasFill();\n    },\n    hasStroke: function () {\n      return this.getStyle().hasStroke();\n    },\n    hasShadow: function () {\n      return this.getStyle().hasShadow();\n    },\n    _getOrder: function (item) {\n      function getList(item) {\n        var list = [];\n        do {\n          list.unshift(item);\n        } while (item = item._parent);\n        return list;\n      }\n      var list1 = getList(this),\n        list2 = getList(item);\n      for (var i = 0, l = Math.min(list1.length, list2.length); i < l; i++) {\n        if (list1[i] != list2[i]) {\n          return list1[i]._index < list2[i]._index ? 1 : -1;\n        }\n      }\n      return 0;\n    },\n    hasChildren: function () {\n      return this._children && this._children.length > 0;\n    },\n    isInserted: function () {\n      return this._parent ? this._parent.isInserted() : false;\n    },\n    isAbove: function (item) {\n      return this._getOrder(item) === -1;\n    },\n    isBelow: function (item) {\n      return this._getOrder(item) === 1;\n    },\n    isParent: function (item) {\n      return this._parent === item;\n    },\n    isChild: function (item) {\n      return item && item._parent === this;\n    },\n    isDescendant: function (item) {\n      var parent = this;\n      while (parent = parent._parent) {\n        if (parent === item) return true;\n      }\n      return false;\n    },\n    isAncestor: function (item) {\n      return item ? item.isDescendant(this) : false;\n    },\n    isSibling: function (item) {\n      return this._parent === item._parent;\n    },\n    isGroupedWith: function (item) {\n      var parent = this._parent;\n      while (parent) {\n        if (parent._parent && /^(Group|Layer|CompoundPath)$/.test(parent._class) && item.isDescendant(parent)) return true;\n        parent = parent._parent;\n      }\n      return false;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n    this[key] = function () {\n      var args = arguments,\n        value = (rotate ? Base : Point).read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      return this.transform(new Matrix()[key](value, center || this.getPosition(true)));\n    };\n  }, {\n    translate: function () {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    transform: function (matrix, _applyRecursively, _setApplyMatrix) {\n      var _matrix = this._matrix,\n        transformMatrix = matrix && !matrix.isIdentity(),\n        applyMatrix = _setApplyMatrix && this._canApplyMatrix || this._applyMatrix && (transformMatrix || !_matrix.isIdentity() || _applyRecursively && this._children);\n      if (!transformMatrix && !applyMatrix) return this;\n      if (transformMatrix) {\n        if (!matrix.isInvertible() && _matrix.isInvertible()) _matrix._backup = _matrix.getValues();\n        _matrix.prepend(matrix, true);\n        var style = this._style,\n          fillColor = style.getFillColor(true),\n          strokeColor = style.getStrokeColor(true);\n        if (fillColor) fillColor.transform(matrix);\n        if (strokeColor) strokeColor.transform(matrix);\n      }\n      if (applyMatrix && (applyMatrix = this._transformContent(_matrix, _applyRecursively, _setApplyMatrix))) {\n        var pivot = this._pivot;\n        if (pivot) _matrix._transformPoint(pivot, pivot, true);\n        _matrix.reset(true);\n        if (_setApplyMatrix && this._canApplyMatrix) this._applyMatrix = true;\n      }\n      var bounds = this._bounds,\n        position = this._position;\n      if (transformMatrix || applyMatrix) {\n        this._changed(25);\n      }\n      var decomp = transformMatrix && bounds && matrix.decompose();\n      if (decomp && decomp.skewing.isZero() && decomp.rotation % 90 === 0) {\n        for (var key in bounds) {\n          var cache = bounds[key];\n          if (cache.nonscaling) {\n            delete bounds[key];\n          } else if (applyMatrix || !cache.internal) {\n            var rect = cache.rect;\n            matrix._transformBounds(rect, rect);\n          }\n        }\n        this._bounds = bounds;\n        var cached = bounds[this._getBoundsCacheKey(this._boundsOptions || {})];\n        if (cached) {\n          this._position = this._getPositionFromBounds(cached.rect);\n        }\n      } else if (transformMatrix && position && this._pivot) {\n        this._position = matrix._transformPoint(position, position);\n      }\n      return this;\n    },\n    _transformContent: function (matrix, applyRecursively, setApplyMatrix) {\n      var children = this._children;\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].transform(matrix, applyRecursively, setApplyMatrix);\n        }\n        return true;\n      }\n    },\n    globalToLocal: function () {\n      return this.getGlobalMatrix(true)._inverseTransform(Point.read(arguments));\n    },\n    localToGlobal: function () {\n      return this.getGlobalMatrix(true)._transformPoint(Point.read(arguments));\n    },\n    parentToLocal: function () {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    localToParent: function () {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    fitBounds: function (rectangle, fill) {\n      rectangle = Rectangle.read(arguments);\n      var bounds = this.getBounds(),\n        itemRatio = bounds.height / bounds.width,\n        rectRatio = rectangle.height / rectangle.width,\n        scale = (fill ? itemRatio > rectRatio : itemRatio < rectRatio) ? rectangle.width / bounds.width : rectangle.height / bounds.height,\n        newBounds = new Rectangle(new Point(), new Size(bounds.width * scale, bounds.height * scale));\n      newBounds.setCenter(rectangle.getCenter());\n      this.setBounds(newBounds);\n    }\n  }), {\n    _setStyles: function (ctx, param, viewMatrix) {\n      var style = this._style,\n        matrix = this._matrix;\n      if (style.hasFill()) {\n        ctx.fillStyle = style.getFillColor().toCanvasStyle(ctx, matrix);\n      }\n      if (style.hasStroke()) {\n        ctx.strokeStyle = style.getStrokeColor().toCanvasStyle(ctx, matrix);\n        ctx.lineWidth = style.getStrokeWidth();\n        var strokeJoin = style.getStrokeJoin(),\n          strokeCap = style.getStrokeCap(),\n          miterLimit = style.getMiterLimit();\n        if (strokeJoin) ctx.lineJoin = strokeJoin;\n        if (strokeCap) ctx.lineCap = strokeCap;\n        if (miterLimit) ctx.miterLimit = miterLimit;\n        if (paper.support.nativeDash) {\n          var dashArray = style.getDashArray(),\n            dashOffset = style.getDashOffset();\n          if (dashArray && dashArray.length) {\n            if ('setLineDash' in ctx) {\n              ctx.setLineDash(dashArray);\n              ctx.lineDashOffset = dashOffset;\n            } else {\n              ctx.mozDash = dashArray;\n              ctx.mozDashOffset = dashOffset;\n            }\n          }\n        }\n      }\n      if (style.hasShadow()) {\n        var pixelRatio = param.pixelRatio || 1,\n          mx = viewMatrix._shiftless().prepend(new Matrix().scale(pixelRatio, pixelRatio)),\n          blur = mx.transform(new Point(style.getShadowBlur(), 0)),\n          offset = mx.transform(this.getShadowOffset());\n        ctx.shadowColor = style.getShadowColor().toCanvasStyle(ctx);\n        ctx.shadowBlur = blur.getLength();\n        ctx.shadowOffsetX = offset.x;\n        ctx.shadowOffsetY = offset.y;\n      }\n    },\n    draw: function (ctx, param, parentStrokeMatrix) {\n      var updateVersion = this._updateVersion = this._project._updateVersion;\n      if (!this._visible || this._opacity === 0) return;\n      var matrices = param.matrices,\n        viewMatrix = param.viewMatrix,\n        matrix = this._matrix,\n        globalMatrix = matrices[matrices.length - 1].appended(matrix);\n      if (!globalMatrix.isInvertible()) return;\n      viewMatrix = viewMatrix ? viewMatrix.appended(globalMatrix) : globalMatrix;\n      matrices.push(globalMatrix);\n      if (param.updateMatrix) {\n        this._globalMatrix = globalMatrix;\n      }\n      var blendMode = this._blendMode,\n        opacity = Numerical.clamp(this._opacity, 0, 1),\n        normalBlend = blendMode === 'normal',\n        nativeBlend = BlendMode.nativeModes[blendMode],\n        direct = normalBlend && opacity === 1 || param.dontStart || param.clip || (nativeBlend || normalBlend && opacity < 1) && this._canComposite(),\n        pixelRatio = param.pixelRatio || 1,\n        mainCtx,\n        itemOffset,\n        prevOffset;\n      if (!direct) {\n        var bounds = this.getStrokeBounds(viewMatrix);\n        if (!bounds.width || !bounds.height) {\n          matrices.pop();\n          return;\n        }\n        prevOffset = param.offset;\n        itemOffset = param.offset = bounds.getTopLeft().floor();\n        mainCtx = ctx;\n        ctx = CanvasProvider.getContext(bounds.getSize().ceil().add(1).multiply(pixelRatio));\n        if (pixelRatio !== 1) ctx.scale(pixelRatio, pixelRatio);\n      }\n      ctx.save();\n      var strokeMatrix = parentStrokeMatrix ? parentStrokeMatrix.appended(matrix) : this._canScaleStroke && !this.getStrokeScaling(true) && viewMatrix,\n        clip = !direct && param.clipItem,\n        transform = !strokeMatrix || clip;\n      if (direct) {\n        ctx.globalAlpha = opacity;\n        if (nativeBlend) ctx.globalCompositeOperation = blendMode;\n      } else if (transform) {\n        ctx.translate(-itemOffset.x, -itemOffset.y);\n      }\n      if (transform) {\n        (direct ? matrix : viewMatrix).applyToContext(ctx);\n      }\n      if (clip) {\n        param.clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n      if (strokeMatrix) {\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        var offset = param.offset;\n        if (offset) ctx.translate(-offset.x, -offset.y);\n      }\n      this._draw(ctx, param, viewMatrix, strokeMatrix);\n      ctx.restore();\n      matrices.pop();\n      if (param.clip && !param.dontFinish) {\n        ctx.clip(this.getFillRule());\n      }\n      if (!direct) {\n        BlendMode.process(blendMode, ctx, mainCtx, opacity, itemOffset.subtract(prevOffset).multiply(pixelRatio));\n        CanvasProvider.release(ctx);\n        param.offset = prevOffset;\n      }\n    },\n    _isUpdated: function (updateVersion) {\n      var parent = this._parent;\n      if (parent instanceof CompoundPath) return parent._isUpdated(updateVersion);\n      var updated = this._updateVersion === updateVersion;\n      if (!updated && parent && parent._visible && parent._isUpdated(updateVersion)) {\n        this._updateVersion = updateVersion;\n        updated = true;\n      }\n      return updated;\n    },\n    _drawSelection: function (ctx, matrix, size, selectionItems, updateVersion) {\n      var selection = this._selection,\n        itemSelected = selection & 1,\n        boundsSelected = selection & 2 || itemSelected && this._selectBounds,\n        positionSelected = selection & 4;\n      if (!this._drawSelected) itemSelected = false;\n      if ((itemSelected || boundsSelected || positionSelected) && this._isUpdated(updateVersion)) {\n        var layer,\n          color = this.getSelectedColor(true) || (layer = this.getLayer()) && layer.getSelectedColor(true),\n          mx = matrix.appended(this.getGlobalMatrix(true)),\n          half = size / 2;\n        ctx.strokeStyle = ctx.fillStyle = color ? color.toCanvasStyle(ctx) : '#009dec';\n        if (itemSelected) this._drawSelected(ctx, mx, selectionItems);\n        if (positionSelected) {\n          var pos = this.getPosition(true),\n            parent = this._parent,\n            point = parent ? parent.localToGlobal(pos) : pos,\n            x = point.x,\n            y = point.y;\n          ctx.beginPath();\n          ctx.arc(x, y, half, 0, Math.PI * 2, true);\n          ctx.stroke();\n          var deltas = [[0, -1], [1, 0], [0, 1], [-1, 0]],\n            start = half,\n            end = size + 1;\n          for (var i = 0; i < 4; i++) {\n            var delta = deltas[i],\n              dx = delta[0],\n              dy = delta[1];\n            ctx.moveTo(x + dx * start, y + dy * start);\n            ctx.lineTo(x + dx * end, y + dy * end);\n            ctx.stroke();\n          }\n        }\n        if (boundsSelected) {\n          var coords = mx._transformCorners(this.getInternalBounds());\n          ctx.beginPath();\n          for (var i = 0; i < 8; i++) {\n            ctx[!i ? 'moveTo' : 'lineTo'](coords[i], coords[++i]);\n          }\n          ctx.closePath();\n          ctx.stroke();\n          for (var i = 0; i < 8; i++) {\n            ctx.fillRect(coords[i] - half, coords[++i] - half, size, size);\n          }\n        }\n      }\n    },\n    _canComposite: function () {\n      return false;\n    }\n  }, Base.each(['down', 'drag', 'up', 'move'], function (key) {\n    this['removeOn' + Base.capitalize(key)] = function () {\n      var hash = {};\n      hash[key] = true;\n      return this.removeOn(hash);\n    };\n  }, {\n    removeOn: function (obj) {\n      for (var name in obj) {\n        if (obj[name]) {\n          var key = 'mouse' + name,\n            project = this._project,\n            sets = project._removeSets = project._removeSets || {};\n          sets[key] = sets[key] || {};\n          sets[key][this._id] = this;\n        }\n      }\n      return this;\n    }\n  }), {\n    tween: function (from, to, options) {\n      if (!options) {\n        options = to;\n        to = from;\n        from = null;\n        if (!options) {\n          options = to;\n          to = null;\n        }\n      }\n      var easing = options && options.easing,\n        start = options && options.start,\n        duration = options != null && (typeof options === 'number' ? options : options.duration),\n        tween = new Tween(this, from, to, duration, easing, start);\n      function onFrame(event) {\n        tween._handleFrame(event.time * 1000);\n        if (!tween.running) {\n          this.off('frame', onFrame);\n        }\n      }\n      if (duration) {\n        this.on('frame', onFrame);\n      }\n      return tween;\n    },\n    tweenTo: function (to, options) {\n      return this.tween(null, to, options);\n    },\n    tweenFrom: function (from, options) {\n      return this.tween(from, null, options);\n    }\n  });\n  var Group = Item.extend({\n    _class: 'Group',\n    _selectBounds: false,\n    _selectChildren: true,\n    _serializeFields: {\n      children: []\n    },\n    initialize: function Group(arg) {\n      this._children = [];\n      this._namedChildren = {};\n      if (!this._initialize(arg)) this.addChildren(Array.isArray(arg) ? arg : arguments);\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n      if (flags & 2050) {\n        this._clipItem = undefined;\n      }\n    },\n    _getClipItem: function () {\n      var clipItem = this._clipItem;\n      if (clipItem === undefined) {\n        clipItem = null;\n        var children = this._children;\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i]._clipMask) {\n            clipItem = children[i];\n            break;\n          }\n        }\n        this._clipItem = clipItem;\n      }\n      return clipItem;\n    },\n    isClipped: function () {\n      return !!this._getClipItem();\n    },\n    setClipped: function (clipped) {\n      var child = this.getFirstChild();\n      if (child) child.setClipMask(clipped);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var clipItem = this._getClipItem();\n      return clipItem ? clipItem._getCachedBounds(clipItem._matrix.prepended(matrix), Base.set({}, options, {\n        stroke: false\n      })) : _getBounds.base.call(this, matrix, options);\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      var clipItem = this._getClipItem();\n      return (!clipItem || clipItem.contains(point)) && _hitTestChildren.base.call(this, point, options, viewMatrix, clipItem);\n    },\n    _draw: function (ctx, param) {\n      var clip = param.clip,\n        clipItem = !clip && this._getClipItem();\n      param = param.extend({\n        clipItem: clipItem,\n        clip: false\n      });\n      if (clip) {\n        ctx.beginPath();\n        param.dontStart = param.dontFinish = true;\n      } else if (clipItem) {\n        clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        var item = children[i];\n        if (item !== clipItem) item.draw(ctx, param);\n      }\n    }\n  });\n  var Layer = Group.extend({\n    _class: 'Layer',\n    initialize: function Layer() {\n      Group.apply(this, arguments);\n    },\n    _getOwner: function () {\n      return this._parent || this._index != null && this._project;\n    },\n    isInserted: function isInserted() {\n      return this._parent ? isInserted.base.call(this) : this._index != null;\n    },\n    activate: function () {\n      this._project._activeLayer = this;\n    },\n    _hitTestSelf: function () {}\n  });\n  var Shape = Item.extend({\n    _class: 'Shape',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _canScaleStroke: true,\n    _serializeFields: {\n      type: null,\n      size: null,\n      radius: null\n    },\n    initialize: function Shape(props, point) {\n      this._initialize(props, point);\n    },\n    _equals: function (item) {\n      return this._type === item._type && this._size.equals(item._size) && Base.equals(this._radius, item._radius);\n    },\n    copyContent: function (source) {\n      this.setType(source._type);\n      this.setSize(source._size);\n      this.setRadius(source._radius);\n    },\n    getType: function () {\n      return this._type;\n    },\n    setType: function (type) {\n      this._type = type;\n    },\n    getShape: '#getType',\n    setShape: '#setType',\n    getSize: function () {\n      var size = this._size;\n      return new LinkedSize(size.width, size.height, this, 'setSize');\n    },\n    setSize: function () {\n      var size = Size.read(arguments);\n      if (!this._size) {\n        this._size = size.clone();\n      } else if (!this._size.equals(size)) {\n        var type = this._type,\n          width = size.width,\n          height = size.height;\n        if (type === 'rectangle') {\n          this._radius.set(Size.min(this._radius, size.divide(2).abs()));\n        } else if (type === 'circle') {\n          width = height = (width + height) / 2;\n          this._radius = width / 2;\n        } else if (type === 'ellipse') {\n          this._radius._set(width / 2, height / 2);\n        }\n        this._size._set(width, height);\n        this._changed(9);\n      }\n    },\n    getRadius: function () {\n      var rad = this._radius;\n      return this._type === 'circle' ? rad : new LinkedSize(rad.width, rad.height, this, 'setRadius');\n    },\n    setRadius: function (radius) {\n      var type = this._type;\n      if (type === 'circle') {\n        if (radius === this._radius) return;\n        var size = radius * 2;\n        this._radius = radius;\n        this._size._set(size, size);\n      } else {\n        radius = Size.read(arguments);\n        if (!this._radius) {\n          this._radius = radius.clone();\n        } else {\n          if (this._radius.equals(radius)) return;\n          this._radius.set(radius);\n          if (type === 'rectangle') {\n            var size = Size.max(this._size, radius.multiply(2));\n            this._size.set(size);\n          } else if (type === 'ellipse') {\n            this._size._set(radius.width * 2, radius.height * 2);\n          }\n        }\n      }\n      this._changed(9);\n    },\n    isEmpty: function () {\n      return false;\n    },\n    toPath: function (insert) {\n      var path = new Path[Base.capitalize(this._type)]({\n        center: new Point(),\n        size: this._size,\n        radius: this._radius,\n        insert: false\n      });\n      path.copyAttributes(this);\n      if (paper.settings.applyMatrix) path.setApplyMatrix(true);\n      if (insert === undefined || insert) path.insertAbove(this);\n      return path;\n    },\n    toShape: '#clone',\n    _asPathItem: function () {\n      return this.toPath(false);\n    },\n    _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n      var style = this._style,\n        hasFill = style.hasFill(),\n        hasStroke = style.hasStroke(),\n        dontPaint = param.dontFinish || param.clip,\n        untransformed = !strokeMatrix;\n      if (hasFill || hasStroke || dontPaint) {\n        var type = this._type,\n          radius = this._radius,\n          isCircle = type === 'circle';\n        if (!param.dontStart) ctx.beginPath();\n        if (untransformed && isCircle) {\n          ctx.arc(0, 0, radius, 0, Math.PI * 2, true);\n        } else {\n          var rx = isCircle ? radius : radius.width,\n            ry = isCircle ? radius : radius.height,\n            size = this._size,\n            width = size.width,\n            height = size.height;\n          if (untransformed && type === 'rectangle' && rx === 0 && ry === 0) {\n            ctx.rect(-width / 2, -height / 2, width, height);\n          } else {\n            var x = width / 2,\n              y = height / 2,\n              kappa = 1 - 0.5522847498307936,\n              cx = rx * kappa,\n              cy = ry * kappa,\n              c = [-x, -y + ry, -x, -y + cy, -x + cx, -y, -x + rx, -y, x - rx, -y, x - cx, -y, x, -y + cy, x, -y + ry, x, y - ry, x, y - cy, x - cx, y, x - rx, y, -x + rx, y, -x + cx, y, -x, y - cy, -x, y - ry];\n            if (strokeMatrix) strokeMatrix.transform(c, c, 32);\n            ctx.moveTo(c[0], c[1]);\n            ctx.bezierCurveTo(c[2], c[3], c[4], c[5], c[6], c[7]);\n            if (x !== rx) ctx.lineTo(c[8], c[9]);\n            ctx.bezierCurveTo(c[10], c[11], c[12], c[13], c[14], c[15]);\n            if (y !== ry) ctx.lineTo(c[16], c[17]);\n            ctx.bezierCurveTo(c[18], c[19], c[20], c[21], c[22], c[23]);\n            if (x !== rx) ctx.lineTo(c[24], c[25]);\n            ctx.bezierCurveTo(c[26], c[27], c[28], c[29], c[30], c[31]);\n          }\n        }\n        ctx.closePath();\n      }\n      if (!dontPaint && (hasFill || hasStroke)) {\n        this._setStyles(ctx, param, viewMatrix);\n        if (hasFill) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n        if (hasStroke) ctx.stroke();\n      }\n    },\n    _canComposite: function () {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _getBounds: function (matrix, options) {\n      var rect = new Rectangle(this._size).setCenter(0, 0),\n        style = this._style,\n        strokeWidth = options.stroke && style.hasStroke() && style.getStrokeWidth();\n      if (matrix) rect = matrix._transformBounds(rect);\n      return strokeWidth ? rect.expand(Path._getStrokePadding(strokeWidth, this._getStrokeMatrix(matrix, options))) : rect;\n    }\n  }, new function () {\n    function getCornerCenter(that, point, expand) {\n      var radius = that._radius;\n      if (!radius.isZero()) {\n        var halfSize = that._size.divide(2);\n        for (var q = 1; q <= 4; q++) {\n          var dir = new Point(q > 1 && q < 4 ? -1 : 1, q > 2 ? -1 : 1),\n            corner = dir.multiply(halfSize),\n            center = corner.subtract(dir.multiply(radius)),\n            rect = new Rectangle(expand ? corner.add(dir.multiply(expand)) : corner, center);\n          if (rect.contains(point)) return {\n            point: center,\n            quadrant: q\n          };\n        }\n      }\n    }\n    function isOnEllipseStroke(point, radius, padding, quadrant) {\n      var vector = point.divide(radius);\n      return (!quadrant || vector.isInQuadrant(quadrant)) && vector.subtract(vector.normalize()).multiply(radius).divide(padding).length <= 1;\n    }\n    return {\n      _contains: function _contains(point) {\n        if (this._type === 'rectangle') {\n          var center = getCornerCenter(this, point);\n          return center ? point.subtract(center.point).divide(this._radius).getLength() <= 1 : _contains.base.call(this, point);\n        } else {\n          return point.divide(this.size).getLength() <= 0.5;\n        }\n      },\n      _hitTestSelf: function _hitTestSelf(point, options, viewMatrix, strokeMatrix) {\n        var hit = false,\n          style = this._style,\n          hitStroke = options.stroke && style.hasStroke(),\n          hitFill = options.fill && style.hasFill();\n        if (hitStroke || hitFill) {\n          var type = this._type,\n            radius = this._radius,\n            strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : 0,\n            strokePadding = options._tolerancePadding.add(Path._getStrokePadding(strokeRadius, !style.getStrokeScaling() && strokeMatrix));\n          if (type === 'rectangle') {\n            var padding = strokePadding.multiply(2),\n              center = getCornerCenter(this, point, padding);\n            if (center) {\n              hit = isOnEllipseStroke(point.subtract(center.point), radius, strokePadding, center.quadrant);\n            } else {\n              var rect = new Rectangle(this._size).setCenter(0, 0),\n                outer = rect.expand(padding),\n                inner = rect.expand(padding.negate());\n              hit = outer._containsPoint(point) && !inner._containsPoint(point);\n            }\n          } else {\n            hit = isOnEllipseStroke(point, radius, strokePadding);\n          }\n        }\n        return hit ? new HitResult(hitStroke ? 'stroke' : 'fill', this) : _hitTestSelf.base.apply(this, arguments);\n      }\n    };\n  }(), {\n    statics: new function () {\n      function createShape(type, point, size, radius, args) {\n        var item = Base.create(Shape.prototype);\n        item._type = type;\n        item._size = size;\n        item._radius = radius;\n        item._initialize(Base.getNamed(args), point);\n        return item;\n      }\n      return {\n        Circle: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            radius = Base.readNamed(args, 'radius');\n          return createShape('circle', center, new Size(radius * 2), radius, args);\n        },\n        Rectangle: function () {\n          var args = arguments,\n            rect = Rectangle.readNamed(args, 'rectangle'),\n            radius = Size.min(Size.readNamed(args, 'radius'), rect.getSize(true).divide(2));\n          return createShape('rectangle', rect.getCenter(true), rect.getSize(true), radius, args);\n        },\n        Ellipse: function () {\n          var args = arguments,\n            ellipse = Shape._readEllipse(args),\n            radius = ellipse.radius;\n          return createShape('ellipse', ellipse.center, radius.multiply(2), radius, args);\n        },\n        _readEllipse: function (args) {\n          var center, radius;\n          if (Base.hasNamed(args, 'radius')) {\n            center = Point.readNamed(args, 'center');\n            radius = Size.readNamed(args, 'radius');\n          } else {\n            var rect = Rectangle.readNamed(args, 'rectangle');\n            center = rect.getCenter(true);\n            radius = rect.getSize(true).divide(2);\n          }\n          return {\n            center: center,\n            radius: radius\n          };\n        }\n      };\n    }()\n  });\n  var Raster = Item.extend({\n    _class: 'Raster',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    _serializeFields: {\n      crossOrigin: null,\n      source: null\n    },\n    _prioritize: ['crossOrigin'],\n    _smoothing: 'low',\n    beans: true,\n    initialize: function Raster(source, position) {\n      if (!this._initialize(source, position !== undefined && Point.read(arguments))) {\n        var image,\n          type = typeof source,\n          object = type === 'string' ? document.getElementById(source) : type === 'object' ? source : null;\n        if (object && object !== Item.NO_INSERT) {\n          if (object.getContext || object.naturalHeight != null) {\n            image = object;\n          } else if (object) {\n            var size = Size.read(arguments);\n            if (!size.isZero()) {\n              image = CanvasProvider.getCanvas(size);\n            }\n          }\n        }\n        if (image) {\n          this.setImage(image);\n        } else {\n          this.setSource(source);\n        }\n      }\n      if (!this._size) {\n        this._size = new Size();\n        this._loaded = false;\n      }\n    },\n    _equals: function (item) {\n      return this.getSource() === item.getSource();\n    },\n    copyContent: function (source) {\n      var image = source._image,\n        canvas = source._canvas;\n      if (image) {\n        this._setImage(image);\n      } else if (canvas) {\n        var copyCanvas = CanvasProvider.getCanvas(source._size);\n        copyCanvas.getContext('2d').drawImage(canvas, 0, 0);\n        this._setImage(copyCanvas);\n      }\n      this._crossOrigin = source._crossOrigin;\n    },\n    getSize: function () {\n      var size = this._size;\n      return new LinkedSize(size ? size.width : 0, size ? size.height : 0, this, 'setSize');\n    },\n    setSize: function (_size, _clear) {\n      var size = Size.read(arguments);\n      if (!size.equals(this._size)) {\n        if (size.width > 0 && size.height > 0) {\n          var element = !_clear && this.getElement();\n          this._setImage(CanvasProvider.getCanvas(size));\n          if (element) {\n            this.getContext(true).drawImage(element, 0, 0, size.width, size.height);\n          }\n        } else {\n          if (this._canvas) CanvasProvider.release(this._canvas);\n          this._size = size.clone();\n        }\n      } else if (_clear) {\n        this.clear();\n      }\n    },\n    getWidth: function () {\n      return this._size ? this._size.width : 0;\n    },\n    setWidth: function (width) {\n      this.setSize(width, this.getHeight());\n    },\n    getHeight: function () {\n      return this._size ? this._size.height : 0;\n    },\n    setHeight: function (height) {\n      this.setSize(this.getWidth(), height);\n    },\n    getLoaded: function () {\n      return this._loaded;\n    },\n    isEmpty: function () {\n      var size = this._size;\n      return !size || size.width === 0 && size.height === 0;\n    },\n    getResolution: function () {\n      var matrix = this._matrix,\n        orig = new Point(0, 0).transform(matrix),\n        u = new Point(1, 0).transform(matrix).subtract(orig),\n        v = new Point(0, 1).transform(matrix).subtract(orig);\n      return new Size(72 / u.getLength(), 72 / v.getLength());\n    },\n    getPpi: '#getResolution',\n    getImage: function () {\n      return this._image;\n    },\n    setImage: function (image) {\n      var that = this;\n      function emit(event) {\n        var view = that.getView(),\n          type = event && event.type || 'load';\n        if (view && that.responds(type)) {\n          paper = view._scope;\n          that.emit(type, new Event(event));\n        }\n      }\n      this._setImage(image);\n      if (this._loaded) {\n        setTimeout(emit, 0);\n      } else if (image) {\n        DomEvent.add(image, {\n          load: function (event) {\n            that._setImage(image);\n            emit(event);\n          },\n          error: emit\n        });\n      }\n    },\n    _setImage: function (image) {\n      if (this._canvas) CanvasProvider.release(this._canvas);\n      if (image && image.getContext) {\n        this._image = null;\n        this._canvas = image;\n        this._loaded = true;\n      } else {\n        this._image = image;\n        this._canvas = null;\n        this._loaded = !!(image && image.src && image.complete);\n      }\n      this._size = new Size(image ? image.naturalWidth || image.width : 0, image ? image.naturalHeight || image.height : 0);\n      this._context = null;\n      this._changed(1033);\n    },\n    getCanvas: function () {\n      if (!this._canvas) {\n        var ctx = CanvasProvider.getContext(this._size);\n        try {\n          if (this._image) ctx.drawImage(this._image, 0, 0);\n          this._canvas = ctx.canvas;\n        } catch (e) {\n          CanvasProvider.release(ctx);\n        }\n      }\n      return this._canvas;\n    },\n    setCanvas: '#setImage',\n    getContext: function (_change) {\n      if (!this._context) this._context = this.getCanvas().getContext('2d');\n      if (_change) {\n        this._image = null;\n        this._changed(1025);\n      }\n      return this._context;\n    },\n    setContext: function (context) {\n      this._context = context;\n    },\n    getSource: function () {\n      var image = this._image;\n      return image && image.src || this.toDataURL();\n    },\n    setSource: function (src) {\n      var image = new self.Image(),\n        crossOrigin = this._crossOrigin;\n      if (crossOrigin) image.crossOrigin = crossOrigin;\n      if (src) image.src = src;\n      this.setImage(image);\n    },\n    getCrossOrigin: function () {\n      var image = this._image;\n      return image && image.crossOrigin || this._crossOrigin || '';\n    },\n    setCrossOrigin: function (crossOrigin) {\n      this._crossOrigin = crossOrigin;\n      var image = this._image;\n      if (image) image.crossOrigin = crossOrigin;\n    },\n    getSmoothing: function () {\n      return this._smoothing;\n    },\n    setSmoothing: function (smoothing) {\n      this._smoothing = typeof smoothing === 'string' ? smoothing : smoothing ? 'low' : 'off';\n      this._changed(257);\n    },\n    getElement: function () {\n      return this._canvas || this._loaded && this._image;\n    }\n  }, {\n    beans: false,\n    getSubCanvas: function () {\n      var rect = Rectangle.read(arguments),\n        ctx = CanvasProvider.getContext(rect.getSize());\n      ctx.drawImage(this.getCanvas(), rect.x, rect.y, rect.width, rect.height, 0, 0, rect.width, rect.height);\n      return ctx.canvas;\n    },\n    getSubRaster: function () {\n      var rect = Rectangle.read(arguments),\n        raster = new Raster(Item.NO_INSERT);\n      raster._setImage(this.getSubCanvas(rect));\n      raster.translate(rect.getCenter().subtract(this.getSize().divide(2)));\n      raster._matrix.prepend(this._matrix);\n      raster.insertAbove(this);\n      return raster;\n    },\n    toDataURL: function () {\n      var image = this._image,\n        src = image && image.src;\n      if (/^data:/.test(src)) return src;\n      var canvas = this.getCanvas();\n      return canvas ? canvas.toDataURL.apply(canvas, arguments) : null;\n    },\n    drawImage: function (image) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).drawImage(image, point.x, point.y);\n    },\n    getAverageColor: function (object) {\n      var bounds, path;\n      if (!object) {\n        bounds = this.getBounds();\n      } else if (object instanceof PathItem) {\n        path = object;\n        bounds = object.getBounds();\n      } else if (typeof object === 'object') {\n        if ('width' in object) {\n          bounds = new Rectangle(object);\n        } else if ('x' in object) {\n          bounds = new Rectangle(object.x - 0.5, object.y - 0.5, 1, 1);\n        }\n      }\n      if (!bounds) return null;\n      var sampleSize = 32,\n        width = Math.min(bounds.width, sampleSize),\n        height = Math.min(bounds.height, sampleSize);\n      var ctx = Raster._sampleContext;\n      if (!ctx) {\n        ctx = Raster._sampleContext = CanvasProvider.getContext(new Size(sampleSize));\n      } else {\n        ctx.clearRect(0, 0, sampleSize + 1, sampleSize + 1);\n      }\n      ctx.save();\n      var matrix = new Matrix().scale(width / bounds.width, height / bounds.height).translate(-bounds.x, -bounds.y);\n      matrix.applyToContext(ctx);\n      if (path) path.draw(ctx, new Base({\n        clip: true,\n        matrices: [matrix]\n      }));\n      this._matrix.applyToContext(ctx);\n      var element = this.getElement(),\n        size = this._size;\n      if (element) ctx.drawImage(element, -size.width / 2, -size.height / 2);\n      ctx.restore();\n      var pixels = ctx.getImageData(0.5, 0.5, Math.ceil(width), Math.ceil(height)).data,\n        channels = [0, 0, 0],\n        total = 0;\n      for (var i = 0, l = pixels.length; i < l; i += 4) {\n        var alpha = pixels[i + 3];\n        total += alpha;\n        alpha /= 255;\n        channels[0] += pixels[i] * alpha;\n        channels[1] += pixels[i + 1] * alpha;\n        channels[2] += pixels[i + 2] * alpha;\n      }\n      for (var i = 0; i < 3; i++) channels[i] /= total;\n      return total ? Color.read(channels) : null;\n    },\n    getPixel: function () {\n      var point = Point.read(arguments);\n      var data = this.getContext().getImageData(point.x, point.y, 1, 1).data;\n      return new Color('rgb', [data[0] / 255, data[1] / 255, data[2] / 255], data[3] / 255);\n    },\n    setPixel: function () {\n      var args = arguments,\n        point = Point.read(args),\n        color = Color.read(args),\n        components = color._convert('rgb'),\n        alpha = color._alpha,\n        ctx = this.getContext(true),\n        imageData = ctx.createImageData(1, 1),\n        data = imageData.data;\n      data[0] = components[0] * 255;\n      data[1] = components[1] * 255;\n      data[2] = components[2] * 255;\n      data[3] = alpha != null ? alpha * 255 : 255;\n      ctx.putImageData(imageData, point.x, point.y);\n    },\n    clear: function () {\n      var size = this._size;\n      this.getContext(true).clearRect(0, 0, size.width + 1, size.height + 1);\n    },\n    createImageData: function () {\n      var size = Size.read(arguments);\n      return this.getContext().createImageData(size.width, size.height);\n    },\n    getImageData: function () {\n      var rect = Rectangle.read(arguments);\n      if (rect.isEmpty()) rect = new Rectangle(this._size);\n      return this.getContext().getImageData(rect.x, rect.y, rect.width, rect.height);\n    },\n    putImageData: function (data) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).putImageData(data, point.x, point.y);\n    },\n    setImageData: function (data) {\n      this.setSize(data);\n      this.getContext(true).putImageData(data, 0, 0);\n    },\n    _getBounds: function (matrix, options) {\n      var rect = new Rectangle(this._size).setCenter(0, 0);\n      return matrix ? matrix._transformBounds(rect) : rect;\n    },\n    _hitTestSelf: function (point) {\n      if (this._contains(point)) {\n        var that = this;\n        return new HitResult('pixel', that, {\n          offset: point.add(that._size.divide(2)).round(),\n          color: {\n            get: function () {\n              return that.getPixel(this.offset);\n            }\n          }\n        });\n      }\n    },\n    _draw: function (ctx, param, viewMatrix) {\n      var element = this.getElement();\n      if (element && element.width > 0 && element.height > 0) {\n        ctx.globalAlpha = Numerical.clamp(this._opacity, 0, 1);\n        this._setStyles(ctx, param, viewMatrix);\n        var smoothing = this._smoothing,\n          disabled = smoothing === 'off';\n        DomElement.setPrefixed(ctx, disabled ? 'imageSmoothingEnabled' : 'imageSmoothingQuality', disabled ? false : smoothing);\n        ctx.drawImage(element, -this._size.width / 2, -this._size.height / 2);\n      }\n    },\n    _canComposite: function () {\n      return true;\n    }\n  });\n  var SymbolItem = Item.extend({\n    _class: 'SymbolItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: true\n    },\n    _serializeFields: {\n      symbol: null\n    },\n    initialize: function SymbolItem(arg0, arg1) {\n      if (!this._initialize(arg0, arg1 !== undefined && Point.read(arguments, 1))) this.setDefinition(arg0 instanceof SymbolDefinition ? arg0 : new SymbolDefinition(arg0));\n    },\n    _equals: function (item) {\n      return this._definition === item._definition;\n    },\n    copyContent: function (source) {\n      this.setDefinition(source._definition);\n    },\n    getDefinition: function () {\n      return this._definition;\n    },\n    setDefinition: function (definition) {\n      this._definition = definition;\n      this._changed(9);\n    },\n    getSymbol: '#getDefinition',\n    setSymbol: '#setDefinition',\n    isEmpty: function () {\n      return this._definition._item.isEmpty();\n    },\n    _getBounds: function (matrix, options) {\n      var item = this._definition._item;\n      return item._getCachedBounds(item._matrix.prepended(matrix), options);\n    },\n    _hitTestSelf: function (point, options, viewMatrix) {\n      var opts = options.extend({\n        all: false\n      });\n      var res = this._definition._item._hitTest(point, opts, viewMatrix);\n      if (res) res.item = this;\n      return res;\n    },\n    _draw: function (ctx, param) {\n      this._definition._item.draw(ctx, param);\n    }\n  });\n  var SymbolDefinition = Base.extend({\n    _class: 'SymbolDefinition',\n    initialize: function SymbolDefinition(item, dontCenter) {\n      this._id = UID.get();\n      this.project = paper.project;\n      if (item) this.setItem(item, dontCenter);\n    },\n    _serialize: function (options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._class, this._item], options, false, dictionary);\n      });\n    },\n    _changed: function (flags) {\n      if (flags & 8) Item._clearBoundsCache(this);\n      if (flags & 1) this.project._changed(flags);\n    },\n    getItem: function () {\n      return this._item;\n    },\n    setItem: function (item, _dontCenter) {\n      if (item._symbol) item = item.clone();\n      if (this._item) this._item._symbol = null;\n      this._item = item;\n      item.remove();\n      item.setSelected(false);\n      if (!_dontCenter) item.setPosition(new Point());\n      item._symbol = this;\n      this._changed(9);\n    },\n    getDefinition: '#getItem',\n    setDefinition: '#setItem',\n    place: function (position) {\n      return new SymbolItem(this, position);\n    },\n    clone: function () {\n      return new SymbolDefinition(this._item.clone(false));\n    },\n    equals: function (symbol) {\n      return symbol === this || symbol && this._item.equals(symbol._item) || false;\n    }\n  });\n  var HitResult = Base.extend({\n    _class: 'HitResult',\n    initialize: function HitResult(type, item, values) {\n      this.type = type;\n      this.item = item;\n      if (values) this.inject(values);\n    },\n    statics: {\n      getOptions: function (args) {\n        var options = args && Base.read(args);\n        return new Base({\n          type: null,\n          tolerance: paper.settings.hitTolerance,\n          fill: !options,\n          stroke: !options,\n          segments: !options,\n          handles: false,\n          ends: false,\n          position: false,\n          center: false,\n          bounds: false,\n          guides: false,\n          selected: false\n        }, options);\n      }\n    }\n  });\n  var Segment = Base.extend({\n    _class: 'Segment',\n    beans: true,\n    _selection: 0,\n    initialize: function Segment(arg0, arg1, arg2, arg3, arg4, arg5) {\n      var count = arguments.length,\n        point,\n        handleIn,\n        handleOut,\n        selection;\n      if (count > 0) {\n        if (arg0 == null || typeof arg0 === 'object') {\n          if (count === 1 && arg0 && 'point' in arg0) {\n            point = arg0.point;\n            handleIn = arg0.handleIn;\n            handleOut = arg0.handleOut;\n            selection = arg0.selection;\n          } else {\n            point = arg0;\n            handleIn = arg1;\n            handleOut = arg2;\n            selection = arg3;\n          }\n        } else {\n          point = [arg0, arg1];\n          handleIn = arg2 !== undefined ? [arg2, arg3] : null;\n          handleOut = arg4 !== undefined ? [arg4, arg5] : null;\n        }\n      }\n      new SegmentPoint(point, this, '_point');\n      new SegmentPoint(handleIn, this, '_handleIn');\n      new SegmentPoint(handleOut, this, '_handleOut');\n      if (selection) this.setSelection(selection);\n    },\n    _serialize: function (options, dictionary) {\n      var point = this._point,\n        selection = this._selection,\n        obj = selection || this.hasHandles() ? [point, this._handleIn, this._handleOut] : point;\n      if (selection) obj.push(selection);\n      return Base.serialize(obj, options, true, dictionary);\n    },\n    _changed: function (point) {\n      var path = this._path;\n      if (!path) return;\n      var curves = path._curves,\n        index = this._index,\n        curve;\n      if (curves) {\n        if ((!point || point === this._point || point === this._handleIn) && (curve = index > 0 ? curves[index - 1] : path._closed ? curves[curves.length - 1] : null)) curve._changed();\n        if ((!point || point === this._point || point === this._handleOut) && (curve = curves[index])) curve._changed();\n      }\n      path._changed(41);\n    },\n    getPoint: function () {\n      return this._point;\n    },\n    setPoint: function () {\n      this._point.set(Point.read(arguments));\n    },\n    getHandleIn: function () {\n      return this._handleIn;\n    },\n    setHandleIn: function () {\n      this._handleIn.set(Point.read(arguments));\n    },\n    getHandleOut: function () {\n      return this._handleOut;\n    },\n    setHandleOut: function () {\n      this._handleOut.set(Point.read(arguments));\n    },\n    hasHandles: function () {\n      return !this._handleIn.isZero() || !this._handleOut.isZero();\n    },\n    isSmooth: function () {\n      var handleIn = this._handleIn,\n        handleOut = this._handleOut;\n      return !handleIn.isZero() && !handleOut.isZero() && handleIn.isCollinear(handleOut);\n    },\n    clearHandles: function () {\n      this._handleIn._set(0, 0);\n      this._handleOut._set(0, 0);\n    },\n    getSelection: function () {\n      return this._selection;\n    },\n    setSelection: function (selection) {\n      var oldSelection = this._selection,\n        path = this._path;\n      this._selection = selection = selection || 0;\n      if (path && selection !== oldSelection) {\n        path._updateSelection(this, oldSelection, selection);\n        path._changed(257);\n      }\n    },\n    _changeSelection: function (flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function () {\n      return !!(this._selection & 7);\n    },\n    setSelected: function (selected) {\n      this._changeSelection(7, selected);\n    },\n    getIndex: function () {\n      return this._index !== undefined ? this._index : null;\n    },\n    getPath: function () {\n      return this._path || null;\n    },\n    getCurve: function () {\n      var path = this._path,\n        index = this._index;\n      if (path) {\n        if (index > 0 && !path._closed && index === path._segments.length - 1) index--;\n        return path.getCurves()[index] || null;\n      }\n      return null;\n    },\n    getLocation: function () {\n      var curve = this.getCurve();\n      return curve ? new CurveLocation(curve, this === curve._segment1 ? 0 : 1) : null;\n    },\n    getNext: function () {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index + 1] || this._path._closed && segments[0]) || null;\n    },\n    smooth: function (options, _first, _last) {\n      var opts = options || {},\n        type = opts.type,\n        factor = opts.factor,\n        prev = this.getPrevious(),\n        next = this.getNext(),\n        p0 = (prev || this)._point,\n        p1 = this._point,\n        p2 = (next || this)._point,\n        d1 = p0.getDistance(p1),\n        d2 = p1.getDistance(p2);\n      if (!type || type === 'catmull-rom') {\n        var a = factor === undefined ? 0.5 : factor,\n          d1_a = Math.pow(d1, a),\n          d1_2a = d1_a * d1_a,\n          d2_a = Math.pow(d2, a),\n          d2_2a = d2_a * d2_a;\n        if (!_first && prev) {\n          var A = 2 * d2_2a + 3 * d2_a * d1_a + d1_2a,\n            N = 3 * d2_a * (d2_a + d1_a);\n          this.setHandleIn(N !== 0 ? new Point((d2_2a * p0._x + A * p1._x - d1_2a * p2._x) / N - p1._x, (d2_2a * p0._y + A * p1._y - d1_2a * p2._y) / N - p1._y) : new Point());\n        }\n        if (!_last && next) {\n          var A = 2 * d1_2a + 3 * d1_a * d2_a + d2_2a,\n            N = 3 * d1_a * (d1_a + d2_a);\n          this.setHandleOut(N !== 0 ? new Point((d1_2a * p2._x + A * p1._x - d2_2a * p0._x) / N - p1._x, (d1_2a * p2._y + A * p1._y - d2_2a * p0._y) / N - p1._y) : new Point());\n        }\n      } else if (type === 'geometric') {\n        if (prev && next) {\n          var vector = p0.subtract(p2),\n            t = factor === undefined ? 0.4 : factor,\n            k = t * d1 / (d1 + d2);\n          if (!_first) this.setHandleIn(vector.multiply(k));\n          if (!_last) this.setHandleOut(vector.multiply(k - t));\n        }\n      } else {\n        throw new Error('Smoothing method \\'' + type + '\\' not supported.');\n      }\n    },\n    getPrevious: function () {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index - 1] || this._path._closed && segments[segments.length - 1]) || null;\n    },\n    isFirst: function () {\n      return !this._index;\n    },\n    isLast: function () {\n      var path = this._path;\n      return path && this._index === path._segments.length - 1 || false;\n    },\n    reverse: function () {\n      var handleIn = this._handleIn,\n        handleOut = this._handleOut,\n        tmp = handleIn.clone();\n      handleIn.set(handleOut);\n      handleOut.set(tmp);\n    },\n    reversed: function () {\n      return new Segment(this._point, this._handleOut, this._handleIn);\n    },\n    remove: function () {\n      return this._path ? !!this._path.removeSegment(this._index) : false;\n    },\n    clone: function () {\n      return new Segment(this._point, this._handleIn, this._handleOut);\n    },\n    equals: function (segment) {\n      return segment === this || segment && this._class === segment._class && this._point.equals(segment._point) && this._handleIn.equals(segment._handleIn) && this._handleOut.equals(segment._handleOut) || false;\n    },\n    toString: function () {\n      var parts = ['point: ' + this._point];\n      if (!this._handleIn.isZero()) parts.push('handleIn: ' + this._handleIn);\n      if (!this._handleOut.isZero()) parts.push('handleOut: ' + this._handleOut);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    transform: function (matrix) {\n      this._transformCoordinates(matrix, new Array(6), true);\n      this._changed();\n    },\n    interpolate: function (from, to, factor) {\n      var u = 1 - factor,\n        v = factor,\n        point1 = from._point,\n        point2 = to._point,\n        handleIn1 = from._handleIn,\n        handleIn2 = to._handleIn,\n        handleOut2 = to._handleOut,\n        handleOut1 = from._handleOut;\n      this._point._set(u * point1._x + v * point2._x, u * point1._y + v * point2._y, true);\n      this._handleIn._set(u * handleIn1._x + v * handleIn2._x, u * handleIn1._y + v * handleIn2._y, true);\n      this._handleOut._set(u * handleOut1._x + v * handleOut2._x, u * handleOut1._y + v * handleOut2._y, true);\n      this._changed();\n    },\n    _transformCoordinates: function (matrix, coords, change) {\n      var point = this._point,\n        handleIn = !change || !this._handleIn.isZero() ? this._handleIn : null,\n        handleOut = !change || !this._handleOut.isZero() ? this._handleOut : null,\n        x = point._x,\n        y = point._y,\n        i = 2;\n      coords[0] = x;\n      coords[1] = y;\n      if (handleIn) {\n        coords[i++] = handleIn._x + x;\n        coords[i++] = handleIn._y + y;\n      }\n      if (handleOut) {\n        coords[i++] = handleOut._x + x;\n        coords[i++] = handleOut._y + y;\n      }\n      if (matrix) {\n        matrix._transformCoordinates(coords, coords, i / 2);\n        x = coords[0];\n        y = coords[1];\n        if (change) {\n          point._x = x;\n          point._y = y;\n          i = 2;\n          if (handleIn) {\n            handleIn._x = coords[i++] - x;\n            handleIn._y = coords[i++] - y;\n          }\n          if (handleOut) {\n            handleOut._x = coords[i++] - x;\n            handleOut._y = coords[i++] - y;\n          }\n        } else {\n          if (!handleIn) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n          if (!handleOut) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n        }\n      }\n      return coords;\n    }\n  });\n  var SegmentPoint = Point.extend({\n    initialize: function SegmentPoint(point, owner, key) {\n      var x, y, selected;\n      if (!point) {\n        x = y = 0;\n      } else if ((x = point[0]) !== undefined) {\n        y = point[1];\n      } else {\n        var pt = point;\n        if ((x = pt.x) === undefined) {\n          pt = Point.read(arguments);\n          x = pt.x;\n        }\n        y = pt.y;\n        selected = pt.selected;\n      }\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      owner[key] = this;\n      if (selected) this.setSelected(true);\n    },\n    _set: function (x, y) {\n      this._x = x;\n      this._y = y;\n      this._owner._changed(this);\n      return this;\n    },\n    getX: function () {\n      return this._x;\n    },\n    setX: function (x) {\n      this._x = x;\n      this._owner._changed(this);\n    },\n    getY: function () {\n      return this._y;\n    },\n    setY: function (y) {\n      this._y = y;\n      this._owner._changed(this);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this._x) && isZero(this._y);\n    },\n    isSelected: function () {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function (selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function () {\n      var owner = this._owner;\n      return this === owner._point ? 1 : this === owner._handleIn ? 2 : this === owner._handleOut ? 4 : 0;\n    }\n  });\n  var Curve = Base.extend({\n    _class: 'Curve',\n    beans: true,\n    initialize: function Curve(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n      var count = arguments.length,\n        seg1,\n        seg2,\n        point1,\n        point2,\n        handle1,\n        handle2;\n      if (count === 3) {\n        this._path = arg0;\n        seg1 = arg1;\n        seg2 = arg2;\n      } else if (!count) {\n        seg1 = new Segment();\n        seg2 = new Segment();\n      } else if (count === 1) {\n        if ('segment1' in arg0) {\n          seg1 = new Segment(arg0.segment1);\n          seg2 = new Segment(arg0.segment2);\n        } else if ('point1' in arg0) {\n          point1 = arg0.point1;\n          handle1 = arg0.handle1;\n          handle2 = arg0.handle2;\n          point2 = arg0.point2;\n        } else if (Array.isArray(arg0)) {\n          point1 = [arg0[0], arg0[1]];\n          point2 = [arg0[6], arg0[7]];\n          handle1 = [arg0[2] - arg0[0], arg0[3] - arg0[1]];\n          handle2 = [arg0[4] - arg0[6], arg0[5] - arg0[7]];\n        }\n      } else if (count === 2) {\n        seg1 = new Segment(arg0);\n        seg2 = new Segment(arg1);\n      } else if (count === 4) {\n        point1 = arg0;\n        handle1 = arg1;\n        handle2 = arg2;\n        point2 = arg3;\n      } else if (count === 8) {\n        point1 = [arg0, arg1];\n        point2 = [arg6, arg7];\n        handle1 = [arg2 - arg0, arg3 - arg1];\n        handle2 = [arg4 - arg6, arg5 - arg7];\n      }\n      this._segment1 = seg1 || new Segment(point1, null, handle1);\n      this._segment2 = seg2 || new Segment(point2, handle2, null);\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this.hasHandles() ? [this.getPoint1(), this.getHandle1(), this.getHandle2(), this.getPoint2()] : [this.getPoint1(), this.getPoint2()], options, true, dictionary);\n    },\n    _changed: function () {\n      this._length = this._bounds = undefined;\n    },\n    clone: function () {\n      return new Curve(this._segment1, this._segment2);\n    },\n    toString: function () {\n      var parts = ['point1: ' + this._segment1._point];\n      if (!this._segment1._handleOut.isZero()) parts.push('handle1: ' + this._segment1._handleOut);\n      if (!this._segment2._handleIn.isZero()) parts.push('handle2: ' + this._segment2._handleIn);\n      parts.push('point2: ' + this._segment2._point);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    classify: function () {\n      return Curve.classify(this.getValues());\n    },\n    remove: function () {\n      var removed = false;\n      if (this._path) {\n        var segment2 = this._segment2,\n          handleOut = segment2._handleOut;\n        removed = segment2.remove();\n        if (removed) this._segment1._handleOut.set(handleOut);\n      }\n      return removed;\n    },\n    getPoint1: function () {\n      return this._segment1._point;\n    },\n    setPoint1: function () {\n      this._segment1._point.set(Point.read(arguments));\n    },\n    getPoint2: function () {\n      return this._segment2._point;\n    },\n    setPoint2: function () {\n      this._segment2._point.set(Point.read(arguments));\n    },\n    getHandle1: function () {\n      return this._segment1._handleOut;\n    },\n    setHandle1: function () {\n      this._segment1._handleOut.set(Point.read(arguments));\n    },\n    getHandle2: function () {\n      return this._segment2._handleIn;\n    },\n    setHandle2: function () {\n      this._segment2._handleIn.set(Point.read(arguments));\n    },\n    getSegment1: function () {\n      return this._segment1;\n    },\n    getSegment2: function () {\n      return this._segment2;\n    },\n    getPath: function () {\n      return this._path;\n    },\n    getIndex: function () {\n      return this._segment1._index;\n    },\n    getNext: function () {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index + 1] || this._path._closed && curves[0]) || null;\n    },\n    getPrevious: function () {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index - 1] || this._path._closed && curves[curves.length - 1]) || null;\n    },\n    isFirst: function () {\n      return !this._segment1._index;\n    },\n    isLast: function () {\n      var path = this._path;\n      return path && this._segment1._index === path._curves.length - 1 || false;\n    },\n    isSelected: function () {\n      return this.getPoint1().isSelected() && this.getHandle1().isSelected() && this.getHandle2().isSelected() && this.getPoint2().isSelected();\n    },\n    setSelected: function (selected) {\n      this.getPoint1().setSelected(selected);\n      this.getHandle1().setSelected(selected);\n      this.getHandle2().setSelected(selected);\n      this.getPoint2().setSelected(selected);\n    },\n    getValues: function (matrix) {\n      return Curve.getValues(this._segment1, this._segment2, matrix);\n    },\n    getPoints: function () {\n      var coords = this.getValues(),\n        points = [];\n      for (var i = 0; i < 8; i += 2) points.push(new Point(coords[i], coords[i + 1]));\n      return points;\n    }\n  }, {\n    getLength: function () {\n      if (this._length == null) this._length = Curve.getLength(this.getValues(), 0, 1);\n      return this._length;\n    },\n    getArea: function () {\n      return Curve.getArea(this.getValues());\n    },\n    getLine: function () {\n      return new Line(this._segment1._point, this._segment2._point);\n    },\n    getPart: function (from, to) {\n      return new Curve(Curve.getPart(this.getValues(), from, to));\n    },\n    getPartLength: function (from, to) {\n      return Curve.getLength(this.getValues(), from, to);\n    },\n    divideAt: function (location) {\n      return this.divideAtTime(location && location.curve === this ? location.time : this.getTimeAt(location));\n    },\n    divideAtTime: function (time, _setHandles) {\n      var tMin = 1e-8,\n        tMax = 1 - tMin,\n        res = null;\n      if (time >= tMin && time <= tMax) {\n        var parts = Curve.subdivide(this.getValues(), time),\n          left = parts[0],\n          right = parts[1],\n          setHandles = _setHandles || this.hasHandles(),\n          seg1 = this._segment1,\n          seg2 = this._segment2,\n          path = this._path;\n        if (setHandles) {\n          seg1._handleOut._set(left[2] - left[0], left[3] - left[1]);\n          seg2._handleIn._set(right[4] - right[6], right[5] - right[7]);\n        }\n        var x = left[6],\n          y = left[7],\n          segment = new Segment(new Point(x, y), setHandles && new Point(left[4] - x, left[5] - y), setHandles && new Point(right[2] - x, right[3] - y));\n        if (path) {\n          path.insert(seg1._index + 1, segment);\n          res = this.getNext();\n        } else {\n          this._segment2 = segment;\n          this._changed();\n          res = new Curve(segment, seg2);\n        }\n      }\n      return res;\n    },\n    splitAt: function (location) {\n      var path = this._path;\n      return path ? path.splitAt(location) : null;\n    },\n    splitAtTime: function (time) {\n      return this.splitAt(this.getLocationAtTime(time));\n    },\n    divide: function (offset, isTime) {\n      return this.divideAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    split: function (offset, isTime) {\n      return this.splitAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    reversed: function () {\n      return new Curve(this._segment2.reversed(), this._segment1.reversed());\n    },\n    clearHandles: function () {\n      this._segment1._handleOut._set(0, 0);\n      this._segment2._handleIn._set(0, 0);\n    },\n    statics: {\n      getValues: function (segment1, segment2, matrix, straight) {\n        var p1 = segment1._point,\n          h1 = segment1._handleOut,\n          h2 = segment2._handleIn,\n          p2 = segment2._point,\n          x1 = p1.x,\n          y1 = p1.y,\n          x2 = p2.x,\n          y2 = p2.y,\n          values = straight ? [x1, y1, x1, y1, x2, y2, x2, y2] : [x1, y1, x1 + h1._x, y1 + h1._y, x2 + h2._x, y2 + h2._y, x2, y2];\n        if (matrix) matrix._transformCoordinates(values, values, 4);\n        return values;\n      },\n      subdivide: function (v, t) {\n        var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7];\n        if (t === undefined) t = 0.5;\n        var u = 1 - t,\n          x4 = u * x0 + t * x1,\n          y4 = u * y0 + t * y1,\n          x5 = u * x1 + t * x2,\n          y5 = u * y1 + t * y2,\n          x6 = u * x2 + t * x3,\n          y6 = u * y2 + t * y3,\n          x7 = u * x4 + t * x5,\n          y7 = u * y4 + t * y5,\n          x8 = u * x5 + t * x6,\n          y8 = u * y5 + t * y6,\n          x9 = u * x7 + t * x8,\n          y9 = u * y7 + t * y8;\n        return [[x0, y0, x4, y4, x7, y7, x9, y9], [x9, y9, x8, y8, x6, y6, x3, y3]];\n      },\n      getMonoCurves: function (v, dir) {\n        var curves = [],\n          io = dir ? 0 : 1,\n          o0 = v[io + 0],\n          o1 = v[io + 2],\n          o2 = v[io + 4],\n          o3 = v[io + 6];\n        if (o0 >= o1 === o1 >= o2 && o1 >= o2 === o2 >= o3 || Curve.isStraight(v)) {\n          curves.push(v);\n        } else {\n          var a = 3 * (o1 - o2) - o0 + o3,\n            b = 2 * (o0 + o2) - 4 * o1,\n            c = o1 - o0,\n            tMin = 1e-8,\n            tMax = 1 - tMin,\n            roots = [],\n            n = Numerical.solveQuadratic(a, b, c, roots, tMin, tMax);\n          if (!n) {\n            curves.push(v);\n          } else {\n            roots.sort();\n            var t = roots[0],\n              parts = Curve.subdivide(v, t);\n            curves.push(parts[0]);\n            if (n > 1) {\n              t = (roots[1] - t) / (1 - t);\n              parts = Curve.subdivide(parts[1], t);\n              curves.push(parts[0]);\n            }\n            curves.push(parts[1]);\n          }\n        }\n        return curves;\n      },\n      solveCubic: function (v, coord, val, roots, min, max) {\n        var v0 = v[coord],\n          v1 = v[coord + 2],\n          v2 = v[coord + 4],\n          v3 = v[coord + 6],\n          res = 0;\n        if (!(v0 < val && v3 < val && v1 < val && v2 < val || v0 > val && v3 > val && v1 > val && v2 > val)) {\n          var c = 3 * (v1 - v0),\n            b = 3 * (v2 - v1) - c,\n            a = v3 - v0 - c - b;\n          res = Numerical.solveCubic(a, b, c, v0 - val, roots, min, max);\n        }\n        return res;\n      },\n      getTimeOf: function (v, point) {\n        var p0 = new Point(v[0], v[1]),\n          p3 = new Point(v[6], v[7]),\n          epsilon = 1e-12,\n          geomEpsilon = 1e-7,\n          t = point.isClose(p0, epsilon) ? 0 : point.isClose(p3, epsilon) ? 1 : null;\n        if (t === null) {\n          var coords = [point.x, point.y],\n            roots = [];\n          for (var c = 0; c < 2; c++) {\n            var count = Curve.solveCubic(v, c, coords[c], roots, 0, 1);\n            for (var i = 0; i < count; i++) {\n              var u = roots[i];\n              if (point.isClose(Curve.getPoint(v, u), geomEpsilon)) return u;\n            }\n          }\n        }\n        return point.isClose(p0, geomEpsilon) ? 0 : point.isClose(p3, geomEpsilon) ? 1 : null;\n      },\n      getNearestTime: function (v, point) {\n        if (Curve.isStraight(v)) {\n          var x0 = v[0],\n            y0 = v[1],\n            x3 = v[6],\n            y3 = v[7],\n            vx = x3 - x0,\n            vy = y3 - y0,\n            det = vx * vx + vy * vy;\n          if (det === 0) return 0;\n          var u = ((point.x - x0) * vx + (point.y - y0) * vy) / det;\n          return u < 1e-12 ? 0 : u > 0.999999999999 ? 1 : Curve.getTimeOf(v, new Point(x0 + u * vx, y0 + u * vy));\n        }\n        var count = 100,\n          minDist = Infinity,\n          minT = 0;\n        function refine(t) {\n          if (t >= 0 && t <= 1) {\n            var dist = point.getDistance(Curve.getPoint(v, t), true);\n            if (dist < minDist) {\n              minDist = dist;\n              minT = t;\n              return true;\n            }\n          }\n        }\n        for (var i = 0; i <= count; i++) refine(i / count);\n        var step = 1 / (count * 2);\n        while (step > 1e-8) {\n          if (!refine(minT - step) && !refine(minT + step)) step /= 2;\n        }\n        return minT;\n      },\n      getPart: function (v, from, to) {\n        var flip = from > to;\n        if (flip) {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n        if (from > 0) v = Curve.subdivide(v, from)[1];\n        if (to < 1) v = Curve.subdivide(v, (to - from) / (1 - from))[0];\n        return flip ? [v[6], v[7], v[4], v[5], v[2], v[3], v[0], v[1]] : v;\n      },\n      isFlatEnough: function (v, flatness) {\n        var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          ux = 3 * x1 - 2 * x0 - x3,\n          uy = 3 * y1 - 2 * y0 - y3,\n          vx = 3 * x2 - 2 * x3 - x0,\n          vy = 3 * y2 - 2 * y3 - y0;\n        return Math.max(ux * ux, vx * vx) + Math.max(uy * uy, vy * vy) <= 16 * flatness * flatness;\n      },\n      getArea: function (v) {\n        var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7];\n        return 3 * ((y3 - y0) * (x1 + x2) - (x3 - x0) * (y1 + y2) + y1 * (x0 - x2) - x1 * (y0 - y2) + y3 * (x2 + x0 / 3) - x3 * (y2 + y0 / 3)) / 20;\n      },\n      getBounds: function (v) {\n        var min = v.slice(0, 2),\n          max = min.slice(),\n          roots = [0, 0];\n        for (var i = 0; i < 2; i++) Curve._addBounds(v[i], v[i + 2], v[i + 4], v[i + 6], i, 0, min, max, roots);\n        return new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      _addBounds: function (v0, v1, v2, v3, coord, padding, min, max, roots) {\n        function add(value, padding) {\n          var left = value - padding,\n            right = value + padding;\n          if (left < min[coord]) min[coord] = left;\n          if (right > max[coord]) max[coord] = right;\n        }\n        padding /= 2;\n        var minPad = min[coord] + padding,\n          maxPad = max[coord] - padding;\n        if (v0 < minPad || v1 < minPad || v2 < minPad || v3 < minPad || v0 > maxPad || v1 > maxPad || v2 > maxPad || v3 > maxPad) {\n          if (v1 < v0 != v1 < v3 && v2 < v0 != v2 < v3) {\n            add(v0, 0);\n            add(v3, 0);\n          } else {\n            var a = 3 * (v1 - v2) - v0 + v3,\n              b = 2 * (v0 + v2) - 4 * v1,\n              c = v1 - v0,\n              count = Numerical.solveQuadratic(a, b, c, roots),\n              tMin = 1e-8,\n              tMax = 1 - tMin;\n            add(v3, 0);\n            for (var i = 0; i < count; i++) {\n              var t = roots[i],\n                u = 1 - t;\n              if (tMin <= t && t <= tMax) add(u * u * u * v0 + 3 * u * u * t * v1 + 3 * u * t * t * v2 + t * t * t * v3, padding);\n            }\n          }\n        }\n      }\n    }\n  }, Base.each(['getBounds', 'getStrokeBounds', 'getHandleBounds'], function (name) {\n    this[name] = function () {\n      if (!this._bounds) this._bounds = {};\n      var bounds = this._bounds[name];\n      if (!bounds) {\n        bounds = this._bounds[name] = Path[name]([this._segment1, this._segment2], false, this._path);\n      }\n      return bounds.clone();\n    };\n  }, {}), Base.each({\n    isStraight: function (p1, h1, h2, p2) {\n      if (h1.isZero() && h2.isZero()) {\n        return true;\n      } else {\n        var v = p2.subtract(p1);\n        if (v.isZero()) {\n          return false;\n        } else if (v.isCollinear(h1) && v.isCollinear(h2)) {\n          var l = new Line(p1, p2),\n            epsilon = 1e-7;\n          if (l.getDistance(p1.add(h1)) < epsilon && l.getDistance(p2.add(h2)) < epsilon) {\n            var div = v.dot(v),\n              s1 = v.dot(h1) / div,\n              s2 = v.dot(h2) / div;\n            return s1 >= 0 && s1 <= 1 && s2 <= 0 && s2 >= -1;\n          }\n        }\n      }\n      return false;\n    },\n    isLinear: function (p1, h1, h2, p2) {\n      var third = p2.subtract(p1).divide(3);\n      return h1.equals(third) && h2.negate().equals(third);\n    }\n  }, function (test, name) {\n    this[name] = function (epsilon) {\n      var seg1 = this._segment1,\n        seg2 = this._segment2;\n      return test(seg1._point, seg1._handleOut, seg2._handleIn, seg2._point, epsilon);\n    };\n    this.statics[name] = function (v, epsilon) {\n      var x0 = v[0],\n        y0 = v[1],\n        x3 = v[6],\n        y3 = v[7];\n      return test(new Point(x0, y0), new Point(v[2] - x0, v[3] - y0), new Point(v[4] - x3, v[5] - y3), new Point(x3, y3), epsilon);\n    };\n  }, {\n    statics: {},\n    hasHandles: function () {\n      return !this._segment1._handleOut.isZero() || !this._segment2._handleIn.isZero();\n    },\n    hasLength: function (epsilon) {\n      return (!this.getPoint1().equals(this.getPoint2()) || this.hasHandles()) && this.getLength() > (epsilon || 0);\n    },\n    isCollinear: function (curve) {\n      return curve && this.isStraight() && curve.isStraight() && this.getLine().isCollinear(curve.getLine());\n    },\n    isHorizontal: function () {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).y) < 1e-8;\n    },\n    isVertical: function () {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).x) < 1e-8;\n    }\n  }), {\n    beans: false,\n    getLocationAt: function (offset, _isTime) {\n      return this.getLocationAtTime(_isTime ? offset : this.getTimeAt(offset));\n    },\n    getLocationAtTime: function (t) {\n      return t != null && t >= 0 && t <= 1 ? new CurveLocation(this, t) : null;\n    },\n    getTimeAt: function (offset, start) {\n      return Curve.getTimeAt(this.getValues(), offset, start);\n    },\n    getParameterAt: '#getTimeAt',\n    getTimesWithTangent: function () {\n      var tangent = Point.read(arguments);\n      return tangent.isZero() ? [] : Curve.getTimesWithTangent(this.getValues(), tangent);\n    },\n    getOffsetAtTime: function (t) {\n      return this.getPartLength(0, t);\n    },\n    getLocationOf: function () {\n      return this.getLocationAtTime(this.getTimeOf(Point.read(arguments)));\n    },\n    getOffsetOf: function () {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getTimeOf: function () {\n      return Curve.getTimeOf(this.getValues(), Point.read(arguments));\n    },\n    getParameterOf: '#getTimeOf',\n    getNearestLocation: function () {\n      var point = Point.read(arguments),\n        values = this.getValues(),\n        t = Curve.getNearestTime(values, point),\n        pt = Curve.getPoint(values, t);\n      return new CurveLocation(this, t, pt, null, point.getDistance(pt));\n    },\n    getNearestPoint: function () {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    }\n  }, new function () {\n    var methods = ['getPoint', 'getTangent', 'getNormal', 'getWeightedTangent', 'getWeightedNormal', 'getCurvature'];\n    return Base.each(methods, function (name) {\n      this[name + 'At'] = function (location, _isTime) {\n        var values = this.getValues();\n        return Curve[name](values, _isTime ? location : Curve.getTimeAt(values, location));\n      };\n      this[name + 'AtTime'] = function (time) {\n        return Curve[name](this.getValues(), time);\n      };\n    }, {\n      statics: {\n        _evaluateMethods: methods\n      }\n    });\n  }(), new function () {\n    function getLengthIntegrand(v) {\n      var x0 = v[0],\n        y0 = v[1],\n        x1 = v[2],\n        y1 = v[3],\n        x2 = v[4],\n        y2 = v[5],\n        x3 = v[6],\n        y3 = v[7],\n        ax = 9 * (x1 - x2) + 3 * (x3 - x0),\n        bx = 6 * (x0 + x2) - 12 * x1,\n        cx = 3 * (x1 - x0),\n        ay = 9 * (y1 - y2) + 3 * (y3 - y0),\n        by = 6 * (y0 + y2) - 12 * y1,\n        cy = 3 * (y1 - y0);\n      return function (t) {\n        var dx = (ax * t + bx) * t + cx,\n          dy = (ay * t + by) * t + cy;\n        return Math.sqrt(dx * dx + dy * dy);\n      };\n    }\n    function getIterations(a, b) {\n      return Math.max(2, Math.min(16, Math.ceil(Math.abs(b - a) * 32)));\n    }\n    function evaluate(v, t, type, normalized) {\n      if (t == null || t < 0 || t > 1) return null;\n      var x0 = v[0],\n        y0 = v[1],\n        x1 = v[2],\n        y1 = v[3],\n        x2 = v[4],\n        y2 = v[5],\n        x3 = v[6],\n        y3 = v[7],\n        isZero = Numerical.isZero;\n      if (isZero(x1 - x0) && isZero(y1 - y0)) {\n        x1 = x0;\n        y1 = y0;\n      }\n      if (isZero(x2 - x3) && isZero(y2 - y3)) {\n        x2 = x3;\n        y2 = y3;\n      }\n      var cx = 3 * (x1 - x0),\n        bx = 3 * (x2 - x1) - cx,\n        ax = x3 - x0 - cx - bx,\n        cy = 3 * (y1 - y0),\n        by = 3 * (y2 - y1) - cy,\n        ay = y3 - y0 - cy - by,\n        x,\n        y;\n      if (type === 0) {\n        x = t === 0 ? x0 : t === 1 ? x3 : ((ax * t + bx) * t + cx) * t + x0;\n        y = t === 0 ? y0 : t === 1 ? y3 : ((ay * t + by) * t + cy) * t + y0;\n      } else {\n        var tMin = 1e-8,\n          tMax = 1 - tMin;\n        if (t < tMin) {\n          x = cx;\n          y = cy;\n        } else if (t > tMax) {\n          x = 3 * (x3 - x2);\n          y = 3 * (y3 - y2);\n        } else {\n          x = (3 * ax * t + 2 * bx) * t + cx;\n          y = (3 * ay * t + 2 * by) * t + cy;\n        }\n        if (normalized) {\n          if (x === 0 && y === 0 && (t < tMin || t > tMax)) {\n            x = x2 - x1;\n            y = y2 - y1;\n          }\n          var len = Math.sqrt(x * x + y * y);\n          if (len) {\n            x /= len;\n            y /= len;\n          }\n        }\n        if (type === 3) {\n          var x2 = 6 * ax * t + 2 * bx,\n            y2 = 6 * ay * t + 2 * by,\n            d = Math.pow(x * x + y * y, 3 / 2);\n          x = d !== 0 ? (x * y2 - y * x2) / d : 0;\n          y = 0;\n        }\n      }\n      return type === 2 ? new Point(y, -x) : new Point(x, y);\n    }\n    return {\n      statics: {\n        classify: function (v) {\n          var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7],\n            a1 = x0 * (y3 - y2) + y0 * (x2 - x3) + x3 * y2 - y3 * x2,\n            a2 = x1 * (y0 - y3) + y1 * (x3 - x0) + x0 * y3 - y0 * x3,\n            a3 = x2 * (y1 - y0) + y2 * (x0 - x1) + x1 * y0 - y1 * x0,\n            d3 = 3 * a3,\n            d2 = d3 - a2,\n            d1 = d2 - a2 + a1,\n            l = Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3),\n            s = l !== 0 ? 1 / l : 0,\n            isZero = Numerical.isZero,\n            serpentine = 'serpentine';\n          d1 *= s;\n          d2 *= s;\n          d3 *= s;\n          function type(type, t1, t2) {\n            var hasRoots = t1 !== undefined,\n              t1Ok = hasRoots && t1 > 0 && t1 < 1,\n              t2Ok = hasRoots && t2 > 0 && t2 < 1;\n            if (hasRoots && (!(t1Ok || t2Ok) || type === 'loop' && !(t1Ok && t2Ok))) {\n              type = 'arch';\n              t1Ok = t2Ok = false;\n            }\n            return {\n              type: type,\n              roots: t1Ok || t2Ok ? t1Ok && t2Ok ? t1 < t2 ? [t1, t2] : [t2, t1] : [t1Ok ? t1 : t2] : null\n            };\n          }\n          if (isZero(d1)) {\n            return isZero(d2) ? type(isZero(d3) ? 'line' : 'quadratic') : type(serpentine, d3 / (3 * d2));\n          }\n          var d = 3 * d2 * d2 - 4 * d1 * d3;\n          if (isZero(d)) {\n            return type('cusp', d2 / (2 * d1));\n          }\n          var f1 = d > 0 ? Math.sqrt(d / 3) : Math.sqrt(-d),\n            f2 = 2 * d1;\n          return type(d > 0 ? serpentine : 'loop', (d2 + f1) / f2, (d2 - f1) / f2);\n        },\n        getLength: function (v, a, b, ds) {\n          if (a === undefined) a = 0;\n          if (b === undefined) b = 1;\n          if (Curve.isStraight(v)) {\n            var c = v;\n            if (b < 1) {\n              c = Curve.subdivide(c, b)[0];\n              a /= b;\n            }\n            if (a > 0) {\n              c = Curve.subdivide(c, a)[1];\n            }\n            var dx = c[6] - c[0],\n              dy = c[7] - c[1];\n            return Math.sqrt(dx * dx + dy * dy);\n          }\n          return Numerical.integrate(ds || getLengthIntegrand(v), a, b, getIterations(a, b));\n        },\n        getTimeAt: function (v, offset, start) {\n          if (start === undefined) start = offset < 0 ? 1 : 0;\n          if (offset === 0) return start;\n          var abs = Math.abs,\n            epsilon = 1e-12,\n            forward = offset > 0,\n            a = forward ? start : 0,\n            b = forward ? 1 : start,\n            ds = getLengthIntegrand(v),\n            rangeLength = Curve.getLength(v, a, b, ds),\n            diff = abs(offset) - rangeLength;\n          if (abs(diff) < epsilon) {\n            return forward ? b : a;\n          } else if (diff > epsilon) {\n            return null;\n          }\n          var guess = offset / rangeLength,\n            length = 0;\n          function f(t) {\n            length += Numerical.integrate(ds, start, t, getIterations(start, t));\n            start = t;\n            return length - offset;\n          }\n          return Numerical.findRoot(f, ds, start + guess, a, b, 32, 1e-12);\n        },\n        getPoint: function (v, t) {\n          return evaluate(v, t, 0, false);\n        },\n        getTangent: function (v, t) {\n          return evaluate(v, t, 1, true);\n        },\n        getWeightedTangent: function (v, t) {\n          return evaluate(v, t, 1, false);\n        },\n        getNormal: function (v, t) {\n          return evaluate(v, t, 2, true);\n        },\n        getWeightedNormal: function (v, t) {\n          return evaluate(v, t, 2, false);\n        },\n        getCurvature: function (v, t) {\n          return evaluate(v, t, 3, false).x;\n        },\n        getPeaks: function (v) {\n          var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7],\n            ax = -x0 + 3 * x1 - 3 * x2 + x3,\n            bx = 3 * x0 - 6 * x1 + 3 * x2,\n            cx = -3 * x0 + 3 * x1,\n            ay = -y0 + 3 * y1 - 3 * y2 + y3,\n            by = 3 * y0 - 6 * y1 + 3 * y2,\n            cy = -3 * y0 + 3 * y1,\n            tMin = 1e-8,\n            tMax = 1 - tMin,\n            roots = [];\n          Numerical.solveCubic(9 * (ax * ax + ay * ay), 9 * (ax * bx + by * ay), 2 * (bx * bx + by * by) + 3 * (cx * ax + cy * ay), cx * bx + by * cy, roots, tMin, tMax);\n          return roots.sort();\n        }\n      }\n    };\n  }(), new function () {\n    function addLocation(locations, include, c1, t1, c2, t2, overlap) {\n      var excludeStart = !overlap && c1.getPrevious() === c2,\n        excludeEnd = !overlap && c1 !== c2 && c1.getNext() === c2,\n        tMin = 1e-8,\n        tMax = 1 - tMin;\n      if (t1 !== null && t1 >= (excludeStart ? tMin : 0) && t1 <= (excludeEnd ? tMax : 1)) {\n        if (t2 !== null && t2 >= (excludeEnd ? tMin : 0) && t2 <= (excludeStart ? tMax : 1)) {\n          var loc1 = new CurveLocation(c1, t1, null, overlap),\n            loc2 = new CurveLocation(c2, t2, null, overlap);\n          loc1._intersection = loc2;\n          loc2._intersection = loc1;\n          if (!include || include(loc1)) {\n            CurveLocation.insert(locations, loc1, true);\n          }\n        }\n      }\n    }\n    function addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMin, tMax, uMin, uMax) {\n      if (++calls >= 4096 || ++recursion >= 40) return calls;\n      var fatLineEpsilon = 1e-9,\n        q0x = v2[0],\n        q0y = v2[1],\n        q3x = v2[6],\n        q3y = v2[7],\n        getSignedDistance = Line.getSignedDistance,\n        d1 = getSignedDistance(q0x, q0y, q3x, q3y, v2[2], v2[3]),\n        d2 = getSignedDistance(q0x, q0y, q3x, q3y, v2[4], v2[5]),\n        factor = d1 * d2 > 0 ? 3 / 4 : 4 / 9,\n        dMin = factor * Math.min(0, d1, d2),\n        dMax = factor * Math.max(0, d1, d2),\n        dp0 = getSignedDistance(q0x, q0y, q3x, q3y, v1[0], v1[1]),\n        dp1 = getSignedDistance(q0x, q0y, q3x, q3y, v1[2], v1[3]),\n        dp2 = getSignedDistance(q0x, q0y, q3x, q3y, v1[4], v1[5]),\n        dp3 = getSignedDistance(q0x, q0y, q3x, q3y, v1[6], v1[7]),\n        hull = getConvexHull(dp0, dp1, dp2, dp3),\n        top = hull[0],\n        bottom = hull[1],\n        tMinClip,\n        tMaxClip;\n      if (d1 === 0 && d2 === 0 && dp0 === 0 && dp1 === 0 && dp2 === 0 && dp3 === 0 || (tMinClip = clipConvexHull(top, bottom, dMin, dMax)) == null || (tMaxClip = clipConvexHull(top.reverse(), bottom.reverse(), dMin, dMax)) == null) return calls;\n      var tMinNew = tMin + (tMax - tMin) * tMinClip,\n        tMaxNew = tMin + (tMax - tMin) * tMaxClip;\n      if (Math.max(uMax - uMin, tMaxNew - tMinNew) < fatLineEpsilon) {\n        var t = (tMinNew + tMaxNew) / 2,\n          u = (uMin + uMax) / 2;\n        addLocation(locations, include, flip ? c2 : c1, flip ? u : t, flip ? c1 : c2, flip ? t : u);\n      } else {\n        v1 = Curve.getPart(v1, tMinClip, tMaxClip);\n        var uDiff = uMax - uMin;\n        if (tMaxClip - tMinClip > 0.8) {\n          if (tMaxNew - tMinNew > uDiff) {\n            var parts = Curve.subdivide(v1, 0.5),\n              t = (tMinNew + tMaxNew) / 2;\n            calls = addCurveIntersections(v2, parts[0], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, t);\n            calls = addCurveIntersections(v2, parts[1], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, t, tMaxNew);\n          } else {\n            var parts = Curve.subdivide(v2, 0.5),\n              u = (uMin + uMax) / 2;\n            calls = addCurveIntersections(parts[0], v1, c2, c1, locations, include, !flip, recursion, calls, uMin, u, tMinNew, tMaxNew);\n            calls = addCurveIntersections(parts[1], v1, c2, c1, locations, include, !flip, recursion, calls, u, uMax, tMinNew, tMaxNew);\n          }\n        } else {\n          if (uDiff === 0 || uDiff >= fatLineEpsilon) {\n            calls = addCurveIntersections(v2, v1, c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, tMaxNew);\n          } else {\n            calls = addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMinNew, tMaxNew, uMin, uMax);\n          }\n        }\n      }\n      return calls;\n    }\n    function getConvexHull(dq0, dq1, dq2, dq3) {\n      var p0 = [0, dq0],\n        p1 = [1 / 3, dq1],\n        p2 = [2 / 3, dq2],\n        p3 = [1, dq3],\n        dist1 = dq1 - (2 * dq0 + dq3) / 3,\n        dist2 = dq2 - (dq0 + 2 * dq3) / 3,\n        hull;\n      if (dist1 * dist2 < 0) {\n        hull = [[p0, p1, p3], [p0, p2, p3]];\n      } else {\n        var distRatio = dist1 / dist2;\n        hull = [distRatio >= 2 ? [p0, p1, p3] : distRatio <= 0.5 ? [p0, p2, p3] : [p0, p1, p2, p3], [p0, p3]];\n      }\n      return (dist1 || dist2) < 0 ? hull.reverse() : hull;\n    }\n    function clipConvexHull(hullTop, hullBottom, dMin, dMax) {\n      if (hullTop[0][1] < dMin) {\n        return clipConvexHullPart(hullTop, true, dMin);\n      } else if (hullBottom[0][1] > dMax) {\n        return clipConvexHullPart(hullBottom, false, dMax);\n      } else {\n        return hullTop[0][0];\n      }\n    }\n    function clipConvexHullPart(part, top, threshold) {\n      var px = part[0][0],\n        py = part[0][1];\n      for (var i = 1, l = part.length; i < l; i++) {\n        var qx = part[i][0],\n          qy = part[i][1];\n        if (top ? qy >= threshold : qy <= threshold) {\n          return qy === threshold ? qx : px + (threshold - py) * (qx - px) / (qy - py);\n        }\n        px = qx;\n        py = qy;\n      }\n      return null;\n    }\n    function getCurveLineIntersections(v, px, py, vx, vy) {\n      var isZero = Numerical.isZero;\n      if (isZero(vx) && isZero(vy)) {\n        var t = Curve.getTimeOf(v, new Point(px, py));\n        return t === null ? [] : [t];\n      }\n      var angle = Math.atan2(-vy, vx),\n        sin = Math.sin(angle),\n        cos = Math.cos(angle),\n        rv = [],\n        roots = [];\n      for (var i = 0; i < 8; i += 2) {\n        var x = v[i] - px,\n          y = v[i + 1] - py;\n        rv.push(x * cos - y * sin, x * sin + y * cos);\n      }\n      Curve.solveCubic(rv, 1, 0, roots, 0, 1);\n      return roots;\n    }\n    function addCurveLineIntersections(v1, v2, c1, c2, locations, include, flip) {\n      var x1 = v2[0],\n        y1 = v2[1],\n        x2 = v2[6],\n        y2 = v2[7],\n        roots = getCurveLineIntersections(v1, x1, y1, x2 - x1, y2 - y1);\n      for (var i = 0, l = roots.length; i < l; i++) {\n        var t1 = roots[i],\n          p1 = Curve.getPoint(v1, t1),\n          t2 = Curve.getTimeOf(v2, p1);\n        if (t2 !== null) {\n          addLocation(locations, include, flip ? c2 : c1, flip ? t2 : t1, flip ? c1 : c2, flip ? t1 : t2);\n        }\n      }\n    }\n    function addLineIntersection(v1, v2, c1, c2, locations, include) {\n      var pt = Line.intersect(v1[0], v1[1], v1[6], v1[7], v2[0], v2[1], v2[6], v2[7]);\n      if (pt) {\n        addLocation(locations, include, c1, Curve.getTimeOf(v1, pt), c2, Curve.getTimeOf(v2, pt));\n      }\n    }\n    function getCurveIntersections(v1, v2, c1, c2, locations, include) {\n      var epsilon = 1e-12,\n        min = Math.min,\n        max = Math.max;\n      if (max(v1[0], v1[2], v1[4], v1[6]) + epsilon > min(v2[0], v2[2], v2[4], v2[6]) && min(v1[0], v1[2], v1[4], v1[6]) - epsilon < max(v2[0], v2[2], v2[4], v2[6]) && max(v1[1], v1[3], v1[5], v1[7]) + epsilon > min(v2[1], v2[3], v2[5], v2[7]) && min(v1[1], v1[3], v1[5], v1[7]) - epsilon < max(v2[1], v2[3], v2[5], v2[7])) {\n        var overlaps = getOverlaps(v1, v2);\n        if (overlaps) {\n          for (var i = 0; i < 2; i++) {\n            var overlap = overlaps[i];\n            addLocation(locations, include, c1, overlap[0], c2, overlap[1], true);\n          }\n        } else {\n          var straight1 = Curve.isStraight(v1),\n            straight2 = Curve.isStraight(v2),\n            straight = straight1 && straight2,\n            flip = straight1 && !straight2,\n            before = locations.length;\n          (straight ? addLineIntersection : straight1 || straight2 ? addCurveLineIntersections : addCurveIntersections)(flip ? v2 : v1, flip ? v1 : v2, flip ? c2 : c1, flip ? c1 : c2, locations, include, flip, 0, 0, 0, 1, 0, 1);\n          if (!straight || locations.length === before) {\n            for (var i = 0; i < 4; i++) {\n              var t1 = i >> 1,\n                t2 = i & 1,\n                i1 = t1 * 6,\n                i2 = t2 * 6,\n                p1 = new Point(v1[i1], v1[i1 + 1]),\n                p2 = new Point(v2[i2], v2[i2 + 1]);\n              if (p1.isClose(p2, epsilon)) {\n                addLocation(locations, include, c1, t1, c2, t2);\n              }\n            }\n          }\n        }\n      }\n      return locations;\n    }\n    function getSelfIntersection(v1, c1, locations, include) {\n      var info = Curve.classify(v1);\n      if (info.type === 'loop') {\n        var roots = info.roots;\n        addLocation(locations, include, c1, roots[0], c1, roots[1]);\n      }\n      return locations;\n    }\n    function getIntersections(curves1, curves2, include, matrix1, matrix2, _returnFirst) {\n      var epsilon = 1e-7,\n        self = !curves2;\n      if (self) curves2 = curves1;\n      var length1 = curves1.length,\n        length2 = curves2.length,\n        values1 = new Array(length1),\n        values2 = self ? values1 : new Array(length2),\n        locations = [];\n      for (var i = 0; i < length1; i++) {\n        values1[i] = curves1[i].getValues(matrix1);\n      }\n      if (!self) {\n        for (var i = 0; i < length2; i++) {\n          values2[i] = curves2[i].getValues(matrix2);\n        }\n      }\n      var boundsCollisions = CollisionDetection.findCurveBoundsCollisions(values1, values2, epsilon);\n      for (var index1 = 0; index1 < length1; index1++) {\n        var curve1 = curves1[index1],\n          v1 = values1[index1];\n        if (self) {\n          getSelfIntersection(v1, curve1, locations, include);\n        }\n        var collisions1 = boundsCollisions[index1];\n        if (collisions1) {\n          for (var j = 0; j < collisions1.length; j++) {\n            if (_returnFirst && locations.length) return locations;\n            var index2 = collisions1[j];\n            if (!self || index2 > index1) {\n              var curve2 = curves2[index2],\n                v2 = values2[index2];\n              getCurveIntersections(v1, v2, curve1, curve2, locations, include);\n            }\n          }\n        }\n      }\n      return locations;\n    }\n    function getOverlaps(v1, v2) {\n      function getSquaredLineLength(v) {\n        var x = v[6] - v[0],\n          y = v[7] - v[1];\n        return x * x + y * y;\n      }\n      var abs = Math.abs,\n        getDistance = Line.getDistance,\n        timeEpsilon = 1e-8,\n        geomEpsilon = 1e-7,\n        straight1 = Curve.isStraight(v1),\n        straight2 = Curve.isStraight(v2),\n        straightBoth = straight1 && straight2,\n        flip = getSquaredLineLength(v1) < getSquaredLineLength(v2),\n        l1 = flip ? v2 : v1,\n        l2 = flip ? v1 : v2,\n        px = l1[0],\n        py = l1[1],\n        vx = l1[6] - px,\n        vy = l1[7] - py;\n      if (getDistance(px, py, vx, vy, l2[0], l2[1], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[6], l2[7], true) < geomEpsilon) {\n        if (!straightBoth && getDistance(px, py, vx, vy, l1[2], l1[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l1[4], l1[5], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[2], l2[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[4], l2[5], true) < geomEpsilon) {\n          straight1 = straight2 = straightBoth = true;\n        }\n      } else if (straightBoth) {\n        return null;\n      }\n      if (straight1 ^ straight2) {\n        return null;\n      }\n      var v = [v1, v2],\n        pairs = [];\n      for (var i = 0; i < 4 && pairs.length < 2; i++) {\n        var i1 = i & 1,\n          i2 = i1 ^ 1,\n          t1 = i >> 1,\n          t2 = Curve.getTimeOf(v[i1], new Point(v[i2][t1 ? 6 : 0], v[i2][t1 ? 7 : 1]));\n        if (t2 != null) {\n          var pair = i1 ? [t1, t2] : [t2, t1];\n          if (!pairs.length || abs(pair[0] - pairs[0][0]) > timeEpsilon && abs(pair[1] - pairs[0][1]) > timeEpsilon) {\n            pairs.push(pair);\n          }\n        }\n        if (i > 2 && !pairs.length) break;\n      }\n      if (pairs.length !== 2) {\n        pairs = null;\n      } else if (!straightBoth) {\n        var o1 = Curve.getPart(v1, pairs[0][0], pairs[1][0]),\n          o2 = Curve.getPart(v2, pairs[0][1], pairs[1][1]);\n        if (abs(o2[2] - o1[2]) > geomEpsilon || abs(o2[3] - o1[3]) > geomEpsilon || abs(o2[4] - o1[4]) > geomEpsilon || abs(o2[5] - o1[5]) > geomEpsilon) pairs = null;\n      }\n      return pairs;\n    }\n    function getTimesWithTangent(v, tangent) {\n      var x0 = v[0],\n        y0 = v[1],\n        x1 = v[2],\n        y1 = v[3],\n        x2 = v[4],\n        y2 = v[5],\n        x3 = v[6],\n        y3 = v[7],\n        normalized = tangent.normalize(),\n        tx = normalized.x,\n        ty = normalized.y,\n        ax = 3 * x3 - 9 * x2 + 9 * x1 - 3 * x0,\n        ay = 3 * y3 - 9 * y2 + 9 * y1 - 3 * y0,\n        bx = 6 * x2 - 12 * x1 + 6 * x0,\n        by = 6 * y2 - 12 * y1 + 6 * y0,\n        cx = 3 * x1 - 3 * x0,\n        cy = 3 * y1 - 3 * y0,\n        den = 2 * ax * ty - 2 * ay * tx,\n        times = [];\n      if (Math.abs(den) < Numerical.CURVETIME_EPSILON) {\n        var num = ax * cy - ay * cx,\n          den = ax * by - ay * bx;\n        if (den != 0) {\n          var t = -num / den;\n          if (t >= 0 && t <= 1) times.push(t);\n        }\n      } else {\n        var delta = (bx * bx - 4 * ax * cx) * ty * ty + (-2 * bx * by + 4 * ay * cx + 4 * ax * cy) * tx * ty + (by * by - 4 * ay * cy) * tx * tx,\n          k = bx * ty - by * tx;\n        if (delta >= 0 && den != 0) {\n          var d = Math.sqrt(delta),\n            t0 = -(k + d) / den,\n            t1 = (-k + d) / den;\n          if (t0 >= 0 && t0 <= 1) times.push(t0);\n          if (t1 >= 0 && t1 <= 1) times.push(t1);\n        }\n      }\n      return times;\n    }\n    return {\n      getIntersections: function (curve) {\n        var v1 = this.getValues(),\n          v2 = curve && curve !== this && curve.getValues();\n        return v2 ? getCurveIntersections(v1, v2, this, curve, []) : getSelfIntersection(v1, this, []);\n      },\n      statics: {\n        getOverlaps: getOverlaps,\n        getIntersections: getIntersections,\n        getCurveLineIntersections: getCurveLineIntersections,\n        getTimesWithTangent: getTimesWithTangent\n      }\n    };\n  }());\n  var CurveLocation = Base.extend({\n    _class: 'CurveLocation',\n    initialize: function CurveLocation(curve, time, point, _overlap, _distance) {\n      if (time >= 0.99999999) {\n        var next = curve.getNext();\n        if (next) {\n          time = 0;\n          curve = next;\n        }\n      }\n      this._setCurve(curve);\n      this._time = time;\n      this._point = point || curve.getPointAtTime(time);\n      this._overlap = _overlap;\n      this._distance = _distance;\n      this._intersection = this._next = this._previous = null;\n    },\n    _setPath: function (path) {\n      this._path = path;\n      this._version = path ? path._version : 0;\n    },\n    _setCurve: function (curve) {\n      this._setPath(curve._path);\n      this._curve = curve;\n      this._segment = null;\n      this._segment1 = curve._segment1;\n      this._segment2 = curve._segment2;\n    },\n    _setSegment: function (segment) {\n      var curve = segment.getCurve();\n      if (curve) {\n        this._setCurve(curve);\n      } else {\n        this._setPath(segment._path);\n        this._segment1 = segment;\n        this._segment2 = null;\n      }\n      this._segment = segment;\n      this._time = segment === this._segment1 ? 0 : 1;\n      this._point = segment._point.clone();\n    },\n    getSegment: function () {\n      var segment = this._segment;\n      if (!segment) {\n        var curve = this.getCurve(),\n          time = this.getTime();\n        if (time === 0) {\n          segment = curve._segment1;\n        } else if (time === 1) {\n          segment = curve._segment2;\n        } else if (time != null) {\n          segment = curve.getPartLength(0, time) < curve.getPartLength(time, 1) ? curve._segment1 : curve._segment2;\n        }\n        this._segment = segment;\n      }\n      return segment;\n    },\n    getCurve: function () {\n      var path = this._path,\n        that = this;\n      if (path && path._version !== this._version) {\n        this._time = this._offset = this._curveOffset = this._curve = null;\n      }\n      function trySegment(segment) {\n        var curve = segment && segment.getCurve();\n        if (curve && (that._time = curve.getTimeOf(that._point)) != null) {\n          that._setCurve(curve);\n          return curve;\n        }\n      }\n      return this._curve || trySegment(this._segment) || trySegment(this._segment1) || trySegment(this._segment2.getPrevious());\n    },\n    getPath: function () {\n      var curve = this.getCurve();\n      return curve && curve._path;\n    },\n    getIndex: function () {\n      var curve = this.getCurve();\n      return curve && curve.getIndex();\n    },\n    getTime: function () {\n      var curve = this.getCurve(),\n        time = this._time;\n      return curve && time == null ? this._time = curve.getTimeOf(this._point) : time;\n    },\n    getParameter: '#getTime',\n    getPoint: function () {\n      return this._point;\n    },\n    getOffset: function () {\n      var offset = this._offset;\n      if (offset == null) {\n        offset = 0;\n        var path = this.getPath(),\n          index = this.getIndex();\n        if (path && index != null) {\n          var curves = path.getCurves();\n          for (var i = 0; i < index; i++) offset += curves[i].getLength();\n        }\n        this._offset = offset += this.getCurveOffset();\n      }\n      return offset;\n    },\n    getCurveOffset: function () {\n      var offset = this._curveOffset;\n      if (offset == null) {\n        var curve = this.getCurve(),\n          time = this.getTime();\n        this._curveOffset = offset = time != null && curve && curve.getPartLength(0, time);\n      }\n      return offset;\n    },\n    getIntersection: function () {\n      return this._intersection;\n    },\n    getDistance: function () {\n      return this._distance;\n    },\n    divide: function () {\n      var curve = this.getCurve(),\n        res = curve && curve.divideAtTime(this.getTime());\n      if (res) {\n        this._setSegment(res._segment1);\n      }\n      return res;\n    },\n    split: function () {\n      var curve = this.getCurve(),\n        path = curve._path,\n        res = curve && curve.splitAtTime(this.getTime());\n      if (res) {\n        this._setSegment(path.getLastSegment());\n      }\n      return res;\n    },\n    equals: function (loc, _ignoreOther) {\n      var res = this === loc;\n      if (!res && loc instanceof CurveLocation) {\n        var c1 = this.getCurve(),\n          c2 = loc.getCurve(),\n          p1 = c1._path,\n          p2 = c2._path;\n        if (p1 === p2) {\n          var abs = Math.abs,\n            epsilon = 1e-7,\n            diff = abs(this.getOffset() - loc.getOffset()),\n            i1 = !_ignoreOther && this._intersection,\n            i2 = !_ignoreOther && loc._intersection;\n          res = (diff < epsilon || p1 && abs(p1.getLength() - diff) < epsilon) && (!i1 && !i2 || i1 && i2 && i1.equals(i2, true));\n        }\n      }\n      return res;\n    },\n    toString: function () {\n      var parts = [],\n        point = this.getPoint(),\n        f = Formatter.instance;\n      if (point) parts.push('point: ' + point);\n      var index = this.getIndex();\n      if (index != null) parts.push('index: ' + index);\n      var time = this.getTime();\n      if (time != null) parts.push('time: ' + f.number(time));\n      if (this._distance != null) parts.push('distance: ' + f.number(this._distance));\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    isTouching: function () {\n      var inter = this._intersection;\n      if (inter && this.getTangent().isCollinear(inter.getTangent())) {\n        var curve1 = this.getCurve(),\n          curve2 = inter.getCurve();\n        return !(curve1.isStraight() && curve2.isStraight() && curve1.getLine().intersect(curve2.getLine()));\n      }\n      return false;\n    },\n    isCrossing: function () {\n      var inter = this._intersection;\n      if (!inter) return false;\n      var t1 = this.getTime(),\n        t2 = inter.getTime(),\n        tMin = 1e-8,\n        tMax = 1 - tMin,\n        t1Inside = t1 >= tMin && t1 <= tMax,\n        t2Inside = t2 >= tMin && t2 <= tMax;\n      if (t1Inside && t2Inside) return !this.isTouching();\n      var c2 = this.getCurve(),\n        c1 = c2 && t1 < tMin ? c2.getPrevious() : c2,\n        c4 = inter.getCurve(),\n        c3 = c4 && t2 < tMin ? c4.getPrevious() : c4;\n      if (t1 > tMax) c2 = c2.getNext();\n      if (t2 > tMax) c4 = c4.getNext();\n      if (!c1 || !c2 || !c3 || !c4) return false;\n      var offsets = [];\n      function addOffsets(curve, end) {\n        var v = curve.getValues(),\n          roots = Curve.classify(v).roots || Curve.getPeaks(v),\n          count = roots.length,\n          offset = Curve.getLength(v, end && count ? roots[count - 1] : 0, !end && count ? roots[0] : 1);\n        offsets.push(count ? offset : offset / 32);\n      }\n      function isInRange(angle, min, max) {\n        return min < max ? angle > min && angle < max : angle > min || angle < max;\n      }\n      if (!t1Inside) {\n        addOffsets(c1, true);\n        addOffsets(c2, false);\n      }\n      if (!t2Inside) {\n        addOffsets(c3, true);\n        addOffsets(c4, false);\n      }\n      var pt = this.getPoint(),\n        offset = Math.min.apply(Math, offsets),\n        v2 = t1Inside ? c2.getTangentAtTime(t1) : c2.getPointAt(offset).subtract(pt),\n        v1 = t1Inside ? v2.negate() : c1.getPointAt(-offset).subtract(pt),\n        v4 = t2Inside ? c4.getTangentAtTime(t2) : c4.getPointAt(offset).subtract(pt),\n        v3 = t2Inside ? v4.negate() : c3.getPointAt(-offset).subtract(pt),\n        a1 = v1.getAngle(),\n        a2 = v2.getAngle(),\n        a3 = v3.getAngle(),\n        a4 = v4.getAngle();\n      return !!(t1Inside ? isInRange(a1, a3, a4) ^ isInRange(a2, a3, a4) && isInRange(a1, a4, a3) ^ isInRange(a2, a4, a3) : isInRange(a3, a1, a2) ^ isInRange(a4, a1, a2) && isInRange(a3, a2, a1) ^ isInRange(a4, a2, a1));\n    },\n    hasOverlap: function () {\n      return !!this._overlap;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    var get = name + 'At';\n    this[name] = function () {\n      var curve = this.getCurve(),\n        time = this.getTime();\n      return time != null && curve && curve[get](time, true);\n    };\n  }, {\n    preserve: true\n  }), new function () {\n    function insert(locations, loc, merge) {\n      var length = locations.length,\n        l = 0,\n        r = length - 1;\n      function search(index, dir) {\n        for (var i = index + dir; i >= -1 && i <= length; i += dir) {\n          var loc2 = locations[(i % length + length) % length];\n          if (!loc.getPoint().isClose(loc2.getPoint(), 1e-7)) break;\n          if (loc.equals(loc2)) return loc2;\n        }\n        return null;\n      }\n      while (l <= r) {\n        var m = l + r >>> 1,\n          loc2 = locations[m],\n          found;\n        if (merge && (found = loc.equals(loc2) ? loc2 : search(m, -1) || search(m, 1))) {\n          if (loc._overlap) {\n            found._overlap = found._intersection._overlap = true;\n          }\n          return found;\n        }\n        var path1 = loc.getPath(),\n          path2 = loc2.getPath(),\n          diff = path1 !== path2 ? path1._id - path2._id : loc.getIndex() + loc.getTime() - (loc2.getIndex() + loc2.getTime());\n        if (diff < 0) {\n          r = m - 1;\n        } else {\n          l = m + 1;\n        }\n      }\n      locations.splice(l, 0, loc);\n      return loc;\n    }\n    return {\n      statics: {\n        insert: insert,\n        expand: function (locations) {\n          var expanded = locations.slice();\n          for (var i = locations.length - 1; i >= 0; i--) {\n            insert(expanded, locations[i]._intersection, false);\n          }\n          return expanded;\n        }\n      }\n    };\n  }());\n  var PathItem = Item.extend({\n    _class: 'PathItem',\n    _selectBounds: false,\n    _canScaleStroke: true,\n    beans: true,\n    initialize: function PathItem() {},\n    statics: {\n      create: function (arg) {\n        var data, segments, compound;\n        if (Base.isPlainObject(arg)) {\n          segments = arg.segments;\n          data = arg.pathData;\n        } else if (Array.isArray(arg)) {\n          segments = arg;\n        } else if (typeof arg === 'string') {\n          data = arg;\n        }\n        if (segments) {\n          var first = segments[0];\n          compound = first && Array.isArray(first[0]);\n        } else if (data) {\n          compound = (data.match(/m/gi) || []).length > 1 || /z\\s*\\S+/i.test(data);\n        }\n        var ctor = compound ? CompoundPath : Path;\n        return new ctor(arg);\n      }\n    },\n    _asPathItem: function () {\n      return this;\n    },\n    isClockwise: function () {\n      return this.getArea() >= 0;\n    },\n    setClockwise: function (clockwise) {\n      if (this.isClockwise() != (clockwise = !!clockwise)) this.reverse();\n    },\n    setPathData: function (data) {\n      var parts = data && data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),\n        coords,\n        relative = false,\n        previous,\n        control,\n        current = new Point(),\n        start = new Point();\n      function getCoord(index, coord) {\n        var val = +coords[index];\n        if (relative) val += current[coord];\n        return val;\n      }\n      function getPoint(index) {\n        return new Point(getCoord(index, 'x'), getCoord(index + 1, 'y'));\n      }\n      this.clear();\n      for (var i = 0, l = parts && parts.length; i < l; i++) {\n        var part = parts[i],\n          command = part[0],\n          lower = command.toLowerCase();\n        coords = part.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g);\n        var length = coords && coords.length;\n        relative = command === lower;\n        if (previous === 'z' && !/[mz]/.test(lower)) this.moveTo(current);\n        switch (lower) {\n          case 'm':\n          case 'l':\n            var move = lower === 'm';\n            for (var j = 0; j < length; j += 2) {\n              this[move ? 'moveTo' : 'lineTo'](current = getPoint(j));\n              if (move) {\n                start = current;\n                move = false;\n              }\n            }\n            control = current;\n            break;\n          case 'h':\n          case 'v':\n            var coord = lower === 'h' ? 'x' : 'y';\n            current = current.clone();\n            for (var j = 0; j < length; j++) {\n              current[coord] = getCoord(j, coord);\n              this.lineTo(current);\n            }\n            control = current;\n            break;\n          case 'c':\n            for (var j = 0; j < length; j += 6) {\n              this.cubicCurveTo(getPoint(j), control = getPoint(j + 2), current = getPoint(j + 4));\n            }\n            break;\n          case 's':\n            for (var j = 0; j < length; j += 4) {\n              this.cubicCurveTo(/[cs]/.test(previous) ? current.multiply(2).subtract(control) : current, control = getPoint(j), current = getPoint(j + 2));\n              previous = lower;\n            }\n            break;\n          case 'q':\n            for (var j = 0; j < length; j += 4) {\n              this.quadraticCurveTo(control = getPoint(j), current = getPoint(j + 2));\n            }\n            break;\n          case 't':\n            for (var j = 0; j < length; j += 2) {\n              this.quadraticCurveTo(control = /[qt]/.test(previous) ? current.multiply(2).subtract(control) : current, current = getPoint(j));\n              previous = lower;\n            }\n            break;\n          case 'a':\n            for (var j = 0; j < length; j += 7) {\n              this.arcTo(current = getPoint(j + 5), new Size(+coords[j], +coords[j + 1]), +coords[j + 2], +coords[j + 4], +coords[j + 3]);\n            }\n            break;\n          case 'z':\n            this.closePath(1e-12);\n            current = start;\n            break;\n        }\n        previous = lower;\n      }\n    },\n    _canComposite: function () {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _contains: function (point) {\n      var winding = point.isInside(this.getBounds({\n        internal: true,\n        handle: true\n      })) ? this._getWinding(point) : {};\n      return winding.onPath || !!(this.getFillRule() === 'evenodd' ? winding.windingL & 1 || winding.windingR & 1 : winding.winding);\n    },\n    getIntersections: function (path, include, _matrix, _returnFirst) {\n      var self = this === path || !path,\n        matrix1 = this._matrix._orNullIfIdentity(),\n        matrix2 = self ? matrix1 : (_matrix || path._matrix)._orNullIfIdentity();\n      return self || this.getBounds(matrix1).intersects(path.getBounds(matrix2), 1e-12) ? Curve.getIntersections(this.getCurves(), !self && path.getCurves(), include, matrix1, matrix2, _returnFirst) : [];\n    },\n    getCrossings: function (path) {\n      return this.getIntersections(path, function (inter) {\n        return inter.isCrossing();\n      });\n    },\n    getNearestLocation: function () {\n      var point = Point.read(arguments),\n        curves = this.getCurves(),\n        minDist = Infinity,\n        minLoc = null;\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getNearestLocation(point);\n        if (loc._distance < minDist) {\n          minDist = loc._distance;\n          minLoc = loc;\n        }\n      }\n      return minLoc;\n    },\n    getNearestPoint: function () {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    },\n    interpolate: function (from, to, factor) {\n      var isPath = !this._children,\n        name = isPath ? '_segments' : '_children',\n        itemsFrom = from[name],\n        itemsTo = to[name],\n        items = this[name];\n      if (!itemsFrom || !itemsTo || itemsFrom.length !== itemsTo.length) {\n        throw new Error('Invalid operands in interpolate() call: ' + from + ', ' + to);\n      }\n      var current = items.length,\n        length = itemsTo.length;\n      if (current < length) {\n        var ctor = isPath ? Segment : Path;\n        for (var i = current; i < length; i++) {\n          this.add(new ctor());\n        }\n      } else if (current > length) {\n        this[isPath ? 'removeSegments' : 'removeChildren'](length, current);\n      }\n      for (var i = 0; i < length; i++) {\n        items[i].interpolate(itemsFrom[i], itemsTo[i], factor);\n      }\n      if (isPath) {\n        this.setClosed(from._closed);\n        this._changed(9);\n      }\n    },\n    compare: function (path) {\n      var ok = false;\n      if (path) {\n        var paths1 = this._children || [this],\n          paths2 = path._children ? path._children.slice() : [path],\n          length1 = paths1.length,\n          length2 = paths2.length,\n          matched = [],\n          count = 0;\n        ok = true;\n        var boundsOverlaps = CollisionDetection.findItemBoundsCollisions(paths1, paths2, Numerical.GEOMETRIC_EPSILON);\n        for (var i1 = length1 - 1; i1 >= 0 && ok; i1--) {\n          var path1 = paths1[i1];\n          ok = false;\n          var pathBoundsOverlaps = boundsOverlaps[i1];\n          if (pathBoundsOverlaps) {\n            for (var i2 = pathBoundsOverlaps.length - 1; i2 >= 0 && !ok; i2--) {\n              if (path1.compare(paths2[pathBoundsOverlaps[i2]])) {\n                if (!matched[pathBoundsOverlaps[i2]]) {\n                  matched[pathBoundsOverlaps[i2]] = true;\n                  count++;\n                }\n                ok = true;\n              }\n            }\n          }\n        }\n        ok = ok && count === length2;\n      }\n      return ok;\n    }\n  });\n  var Path = PathItem.extend({\n    _class: 'Path',\n    _serializeFields: {\n      segments: [],\n      closed: false\n    },\n    initialize: function Path(arg) {\n      this._closed = false;\n      this._segments = [];\n      this._version = 0;\n      var args = arguments,\n        segments = Array.isArray(arg) ? typeof arg[0] === 'object' ? arg : args : arg && arg.size === undefined && (arg.x !== undefined || arg.point !== undefined) ? args : null;\n      if (segments && segments.length > 0) {\n        this.setSegments(segments);\n      } else {\n        this._curves = undefined;\n        this._segmentSelection = 0;\n        if (!segments && typeof arg === 'string') {\n          this.setPathData(arg);\n          arg = null;\n        }\n      }\n      this._initialize(!segments && arg);\n    },\n    _equals: function (item) {\n      return this._closed === item._closed && Base.equals(this._segments, item._segments);\n    },\n    copyContent: function (source) {\n      this.setSegments(source._segments);\n      this._closed = source._closed;\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n      if (flags & 8) {\n        this._length = this._area = undefined;\n        if (flags & 32) {\n          this._version++;\n        } else if (this._curves) {\n          for (var i = 0, l = this._curves.length; i < l; i++) this._curves[i]._changed();\n        }\n      } else if (flags & 64) {\n        this._bounds = undefined;\n      }\n    },\n    getStyle: function () {\n      var parent = this._parent;\n      return (parent instanceof CompoundPath ? parent : this)._style;\n    },\n    getSegments: function () {\n      return this._segments;\n    },\n    setSegments: function (segments) {\n      var fullySelected = this.isFullySelected(),\n        length = segments && segments.length;\n      this._segments.length = 0;\n      this._segmentSelection = 0;\n      this._curves = undefined;\n      if (length) {\n        var last = segments[length - 1];\n        if (typeof last === 'boolean') {\n          this.setClosed(last);\n          length--;\n        }\n        this._add(Segment.readList(segments, 0, {}, length));\n      }\n      if (fullySelected) this.setFullySelected(true);\n    },\n    getFirstSegment: function () {\n      return this._segments[0];\n    },\n    getLastSegment: function () {\n      return this._segments[this._segments.length - 1];\n    },\n    getCurves: function () {\n      var curves = this._curves,\n        segments = this._segments;\n      if (!curves) {\n        var length = this._countCurves();\n        curves = this._curves = new Array(length);\n        for (var i = 0; i < length; i++) curves[i] = new Curve(this, segments[i], segments[i + 1] || segments[0]);\n      }\n      return curves;\n    },\n    getFirstCurve: function () {\n      return this.getCurves()[0];\n    },\n    getLastCurve: function () {\n      var curves = this.getCurves();\n      return curves[curves.length - 1];\n    },\n    isClosed: function () {\n      return this._closed;\n    },\n    setClosed: function (closed) {\n      if (this._closed != (closed = !!closed)) {\n        this._closed = closed;\n        if (this._curves) {\n          var length = this._curves.length = this._countCurves();\n          if (closed) this._curves[length - 1] = new Curve(this, this._segments[length - 1], this._segments[0]);\n        }\n        this._changed(41);\n      }\n    }\n  }, {\n    beans: true,\n    getPathData: function (_matrix, _precision) {\n      var segments = this._segments,\n        length = segments.length,\n        f = new Formatter(_precision),\n        coords = new Array(6),\n        first = true,\n        curX,\n        curY,\n        prevX,\n        prevY,\n        inX,\n        inY,\n        outX,\n        outY,\n        parts = [];\n      function addSegment(segment, skipLine) {\n        segment._transformCoordinates(_matrix, coords);\n        curX = coords[0];\n        curY = coords[1];\n        if (first) {\n          parts.push('M' + f.pair(curX, curY));\n          first = false;\n        } else {\n          inX = coords[2];\n          inY = coords[3];\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            if (!skipLine) {\n              var dx = curX - prevX,\n                dy = curY - prevY;\n              parts.push(dx === 0 ? 'v' + f.number(dy) : dy === 0 ? 'h' + f.number(dx) : 'l' + f.pair(dx, dy));\n            }\n          } else {\n            parts.push('c' + f.pair(outX - prevX, outY - prevY) + ' ' + f.pair(inX - prevX, inY - prevY) + ' ' + f.pair(curX - prevX, curY - prevY));\n          }\n        }\n        prevX = curX;\n        prevY = curY;\n        outX = coords[4];\n        outY = coords[5];\n      }\n      if (!length) return '';\n      for (var i = 0; i < length; i++) addSegment(segments[i]);\n      if (this._closed && length > 0) {\n        addSegment(segments[0], true);\n        parts.push('z');\n      }\n      return parts.join('');\n    },\n    isEmpty: function () {\n      return !this._segments.length;\n    },\n    _transformContent: function (matrix) {\n      var segments = this._segments,\n        coords = new Array(6);\n      for (var i = 0, l = segments.length; i < l; i++) segments[i]._transformCoordinates(matrix, coords, true);\n      return true;\n    },\n    _add: function (segs, index) {\n      var segments = this._segments,\n        curves = this._curves,\n        amount = segs.length,\n        append = index == null,\n        index = append ? segments.length : index;\n      for (var i = 0; i < amount; i++) {\n        var segment = segs[i];\n        if (segment._path) segment = segs[i] = segment.clone();\n        segment._path = this;\n        segment._index = index + i;\n        if (segment._selection) this._updateSelection(segment, 0, segment._selection);\n      }\n      if (append) {\n        Base.push(segments, segs);\n      } else {\n        segments.splice.apply(segments, [index, 0].concat(segs));\n        for (var i = index + amount, l = segments.length; i < l; i++) segments[i]._index = i;\n      }\n      if (curves) {\n        var total = this._countCurves(),\n          start = index > 0 && index + amount - 1 === total ? index - 1 : index,\n          insert = start,\n          end = Math.min(start + amount, total);\n        if (segs._curves) {\n          curves.splice.apply(curves, [start, 0].concat(segs._curves));\n          insert += segs._curves.length;\n        }\n        for (var i = insert; i < end; i++) curves.splice(i, 0, new Curve(this, null, null));\n        this._adjustCurves(start, end);\n      }\n      this._changed(41);\n      return segs;\n    },\n    _adjustCurves: function (start, end) {\n      var segments = this._segments,\n        curves = this._curves,\n        curve;\n      for (var i = start; i < end; i++) {\n        curve = curves[i];\n        curve._path = this;\n        curve._segment1 = segments[i];\n        curve._segment2 = segments[i + 1] || segments[0];\n        curve._changed();\n      }\n      if (curve = curves[this._closed && !start ? segments.length - 1 : start - 1]) {\n        curve._segment2 = segments[start] || segments[0];\n        curve._changed();\n      }\n      if (curve = curves[end]) {\n        curve._segment1 = segments[end];\n        curve._changed();\n      }\n    },\n    _countCurves: function () {\n      var length = this._segments.length;\n      return !this._closed && length > 0 ? length - 1 : length;\n    },\n    add: function (segment1) {\n      var args = arguments;\n      return args.length > 1 && typeof segment1 !== 'number' ? this._add(Segment.readList(args)) : this._add([Segment.read(args)])[0];\n    },\n    insert: function (index, segment1) {\n      var args = arguments;\n      return args.length > 2 && typeof segment1 !== 'number' ? this._add(Segment.readList(args, 1), index) : this._add([Segment.read(args, 1)], index)[0];\n    },\n    addSegment: function () {\n      return this._add([Segment.read(arguments)])[0];\n    },\n    insertSegment: function (index) {\n      return this._add([Segment.read(arguments, 1)], index)[0];\n    },\n    addSegments: function (segments) {\n      return this._add(Segment.readList(segments));\n    },\n    insertSegments: function (index, segments) {\n      return this._add(Segment.readList(segments), index);\n    },\n    removeSegment: function (index) {\n      return this.removeSegments(index, index + 1)[0] || null;\n    },\n    removeSegments: function (start, end, _includeCurves) {\n      start = start || 0;\n      end = Base.pick(end, this._segments.length);\n      var segments = this._segments,\n        curves = this._curves,\n        count = segments.length,\n        removed = segments.splice(start, end - start),\n        amount = removed.length;\n      if (!amount) return removed;\n      for (var i = 0; i < amount; i++) {\n        var segment = removed[i];\n        if (segment._selection) this._updateSelection(segment, segment._selection, 0);\n        segment._index = segment._path = null;\n      }\n      for (var i = start, l = segments.length; i < l; i++) segments[i]._index = i;\n      if (curves) {\n        var index = start > 0 && end === count + (this._closed ? 1 : 0) ? start - 1 : start,\n          curves = curves.splice(index, amount);\n        for (var i = curves.length - 1; i >= 0; i--) curves[i]._path = null;\n        if (_includeCurves) removed._curves = curves.slice(1);\n        this._adjustCurves(index, index);\n      }\n      this._changed(41);\n      return removed;\n    },\n    clear: '#removeSegments',\n    hasHandles: function () {\n      var segments = this._segments;\n      for (var i = 0, l = segments.length; i < l; i++) {\n        if (segments[i].hasHandles()) return true;\n      }\n      return false;\n    },\n    clearHandles: function () {\n      var segments = this._segments;\n      for (var i = 0, l = segments.length; i < l; i++) segments[i].clearHandles();\n    },\n    getLength: function () {\n      if (this._length == null) {\n        var curves = this.getCurves(),\n          length = 0;\n        for (var i = 0, l = curves.length; i < l; i++) length += curves[i].getLength();\n        this._length = length;\n      }\n      return this._length;\n    },\n    getArea: function () {\n      var area = this._area;\n      if (area == null) {\n        var segments = this._segments,\n          closed = this._closed;\n        area = 0;\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var last = i + 1 === l;\n          area += Curve.getArea(Curve.getValues(segments[i], segments[last ? 0 : i + 1], null, last && !closed));\n        }\n        this._area = area;\n      }\n      return area;\n    },\n    isFullySelected: function () {\n      var length = this._segments.length;\n      return this.isSelected() && length > 0 && this._segmentSelection === length * 7;\n    },\n    setFullySelected: function (selected) {\n      if (selected) this._selectSegments(true);\n      this.setSelected(selected);\n    },\n    setSelection: function setSelection(selection) {\n      if (!(selection & 1)) this._selectSegments(false);\n      setSelection.base.call(this, selection);\n    },\n    _selectSegments: function (selected) {\n      var segments = this._segments,\n        length = segments.length,\n        selection = selected ? 7 : 0;\n      this._segmentSelection = selection * length;\n      for (var i = 0; i < length; i++) segments[i]._selection = selection;\n    },\n    _updateSelection: function (segment, oldSelection, newSelection) {\n      segment._selection = newSelection;\n      var selection = this._segmentSelection += newSelection - oldSelection;\n      if (selection > 0) this.setSelected(true);\n    },\n    divideAt: function (location) {\n      var loc = this.getLocationAt(location),\n        curve;\n      return loc && (curve = loc.getCurve().divideAt(loc.getCurveOffset())) ? curve._segment1 : null;\n    },\n    splitAt: function (location) {\n      var loc = this.getLocationAt(location),\n        index = loc && loc.index,\n        time = loc && loc.time,\n        tMin = 1e-8,\n        tMax = 1 - tMin;\n      if (time > tMax) {\n        index++;\n        time = 0;\n      }\n      var curves = this.getCurves();\n      if (index >= 0 && index < curves.length) {\n        if (time >= tMin) {\n          curves[index++].divideAtTime(time);\n        }\n        var segs = this.removeSegments(index, this._segments.length, true),\n          path;\n        if (this._closed) {\n          this.setClosed(false);\n          path = this;\n        } else {\n          path = new Path(Item.NO_INSERT);\n          path.insertAbove(this);\n          path.copyAttributes(this);\n        }\n        path._add(segs, 0);\n        this.addSegment(segs[0]);\n        return path;\n      }\n      return null;\n    },\n    split: function (index, time) {\n      var curve,\n        location = time === undefined ? index : (curve = this.getCurves()[index]) && curve.getLocationAtTime(time);\n      return location != null ? this.splitAt(location) : null;\n    },\n    join: function (path, tolerance) {\n      var epsilon = tolerance || 0;\n      if (path && path !== this) {\n        var segments = path._segments,\n          last1 = this.getLastSegment(),\n          last2 = path.getLastSegment();\n        if (!last2) return this;\n        if (last1 && last1._point.isClose(last2._point, epsilon)) path.reverse();\n        var first2 = path.getFirstSegment();\n        if (last1 && last1._point.isClose(first2._point, epsilon)) {\n          last1.setHandleOut(first2._handleOut);\n          this._add(segments.slice(1));\n        } else {\n          var first1 = this.getFirstSegment();\n          if (first1 && first1._point.isClose(first2._point, epsilon)) path.reverse();\n          last2 = path.getLastSegment();\n          if (first1 && first1._point.isClose(last2._point, epsilon)) {\n            first1.setHandleIn(last2._handleIn);\n            this._add(segments.slice(0, segments.length - 1), 0);\n          } else {\n            this._add(segments.slice());\n          }\n        }\n        if (path._closed) this._add([segments[0]]);\n        path.remove();\n      }\n      var first = this.getFirstSegment(),\n        last = this.getLastSegment();\n      if (first !== last && first._point.isClose(last._point, epsilon)) {\n        first.setHandleIn(last._handleIn);\n        last.remove();\n        this.setClosed(true);\n      }\n      return this;\n    },\n    reduce: function (options) {\n      var curves = this.getCurves(),\n        simplify = options && options.simplify,\n        tolerance = simplify ? 1e-7 : 0;\n      for (var i = curves.length - 1; i >= 0; i--) {\n        var curve = curves[i];\n        if (!curve.hasHandles() && (!curve.hasLength(tolerance) || simplify && curve.isCollinear(curve.getNext()))) curve.remove();\n      }\n      return this;\n    },\n    reverse: function () {\n      this._segments.reverse();\n      for (var i = 0, l = this._segments.length; i < l; i++) {\n        var segment = this._segments[i];\n        var handleIn = segment._handleIn;\n        segment._handleIn = segment._handleOut;\n        segment._handleOut = handleIn;\n        segment._index = i;\n      }\n      this._curves = null;\n      this._changed(9);\n    },\n    flatten: function (flatness) {\n      var flattener = new PathFlattener(this, flatness || 0.25, 256, true),\n        parts = flattener.parts,\n        length = parts.length,\n        segments = [];\n      for (var i = 0; i < length; i++) {\n        segments.push(new Segment(parts[i].curve.slice(0, 2)));\n      }\n      if (!this._closed && length > 0) {\n        segments.push(new Segment(parts[length - 1].curve.slice(6)));\n      }\n      this.setSegments(segments);\n    },\n    simplify: function (tolerance) {\n      var segments = new PathFitter(this).fit(tolerance || 2.5);\n      if (segments) this.setSegments(segments);\n      return !!segments;\n    },\n    smooth: function (options) {\n      var that = this,\n        opts = options || {},\n        type = opts.type || 'asymmetric',\n        segments = this._segments,\n        length = segments.length,\n        closed = this._closed;\n      function getIndex(value, _default) {\n        var index = value && value.index;\n        if (index != null) {\n          var path = value.path;\n          if (path && path !== that) throw new Error(value._class + ' ' + index + ' of ' + path + ' is not part of ' + that);\n          if (_default && value instanceof Curve) index++;\n        } else {\n          index = typeof value === 'number' ? value : _default;\n        }\n        return Math.min(index < 0 && closed ? index % length : index < 0 ? index + length : index, length - 1);\n      }\n      var loop = closed && opts.from === undefined && opts.to === undefined,\n        from = getIndex(opts.from, 0),\n        to = getIndex(opts.to, length - 1);\n      if (from > to) {\n        if (closed) {\n          from -= length;\n        } else {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n      }\n      if (/^(?:asymmetric|continuous)$/.test(type)) {\n        var asymmetric = type === 'asymmetric',\n          min = Math.min,\n          amount = to - from + 1,\n          n = amount - 1,\n          padding = loop ? min(amount, 4) : 1,\n          paddingLeft = padding,\n          paddingRight = padding,\n          knots = [];\n        if (!closed) {\n          paddingLeft = min(1, from);\n          paddingRight = min(1, length - to - 1);\n        }\n        n += paddingLeft + paddingRight;\n        if (n <= 1) return;\n        for (var i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n          knots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n        }\n        var x = knots[0]._x + 2 * knots[1]._x,\n          y = knots[0]._y + 2 * knots[1]._y,\n          f = 2,\n          n_1 = n - 1,\n          rx = [x],\n          ry = [y],\n          rf = [f],\n          px = [],\n          py = [];\n        for (var i = 1; i < n; i++) {\n          var internal = i < n_1,\n            a = internal ? 1 : asymmetric ? 1 : 2,\n            b = internal ? 4 : asymmetric ? 2 : 7,\n            u = internal ? 4 : asymmetric ? 3 : 8,\n            v = internal ? 2 : asymmetric ? 0 : 1,\n            m = a / f;\n          f = rf[i] = b - m;\n          x = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n          y = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n        }\n        px[n_1] = rx[n_1] / rf[n_1];\n        py[n_1] = ry[n_1] / rf[n_1];\n        for (var i = n - 2; i >= 0; i--) {\n          px[i] = (rx[i] - px[i + 1]) / rf[i];\n          py[i] = (ry[i] - py[i + 1]) / rf[i];\n        }\n        px[n] = (3 * knots[n]._x - px[n_1]) / 2;\n        py[n] = (3 * knots[n]._y - py[n_1]) / 2;\n        for (var i = paddingLeft, max = n - paddingRight, j = from; i <= max; i++, j++) {\n          var segment = segments[j < 0 ? j + length : j],\n            pt = segment._point,\n            hx = px[i] - pt._x,\n            hy = py[i] - pt._y;\n          if (loop || i < max) segment.setHandleOut(hx, hy);\n          if (loop || i > paddingLeft) segment.setHandleIn(-hx, -hy);\n        }\n      } else {\n        for (var i = from; i <= to; i++) {\n          segments[i < 0 ? i + length : i].smooth(opts, !loop && i === from, !loop && i === to);\n        }\n      }\n    },\n    toShape: function (insert) {\n      if (!this._closed) return null;\n      var segments = this._segments,\n        type,\n        size,\n        radius,\n        topCenter;\n      function isCollinear(i, j) {\n        var seg1 = segments[i],\n          seg2 = seg1.getNext(),\n          seg3 = segments[j],\n          seg4 = seg3.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg3._handleOut.isZero() && seg4._handleIn.isZero() && seg2._point.subtract(seg1._point).isCollinear(seg4._point.subtract(seg3._point));\n      }\n      function isOrthogonal(i) {\n        var seg2 = segments[i],\n          seg1 = seg2.getPrevious(),\n          seg3 = seg2.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg2._handleOut.isZero() && seg3._handleIn.isZero() && seg2._point.subtract(seg1._point).isOrthogonal(seg3._point.subtract(seg2._point));\n      }\n      function isArc(i) {\n        var seg1 = segments[i],\n          seg2 = seg1.getNext(),\n          handle1 = seg1._handleOut,\n          handle2 = seg2._handleIn,\n          kappa = 0.5522847498307936;\n        if (handle1.isOrthogonal(handle2)) {\n          var pt1 = seg1._point,\n            pt2 = seg2._point,\n            corner = new Line(pt1, handle1, true).intersect(new Line(pt2, handle2, true), true);\n          return corner && Numerical.isZero(handle1.getLength() / corner.subtract(pt1).getLength() - kappa) && Numerical.isZero(handle2.getLength() / corner.subtract(pt2).getLength() - kappa);\n        }\n        return false;\n      }\n      function getDistance(i, j) {\n        return segments[i]._point.getDistance(segments[j]._point);\n      }\n      if (!this.hasHandles() && segments.length === 4 && isCollinear(0, 2) && isCollinear(1, 3) && isOrthogonal(1)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(0, 3), getDistance(0, 1));\n        topCenter = segments[1]._point.add(segments[2]._point).divide(2);\n      } else if (segments.length === 8 && isArc(0) && isArc(2) && isArc(4) && isArc(6) && isCollinear(1, 5) && isCollinear(3, 7)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(1, 6), getDistance(0, 3));\n        radius = size.subtract(new Size(getDistance(0, 7), getDistance(1, 2))).divide(2);\n        topCenter = segments[3]._point.add(segments[4]._point).divide(2);\n      } else if (segments.length === 4 && isArc(0) && isArc(1) && isArc(2) && isArc(3)) {\n        if (Numerical.isZero(getDistance(0, 2) - getDistance(1, 3))) {\n          type = Shape.Circle;\n          radius = getDistance(0, 2) / 2;\n        } else {\n          type = Shape.Ellipse;\n          radius = new Size(getDistance(2, 0) / 2, getDistance(3, 1) / 2);\n        }\n        topCenter = segments[1]._point;\n      }\n      if (type) {\n        var center = this.getPosition(true),\n          shape = new type({\n            center: center,\n            size: size,\n            radius: radius,\n            insert: false\n          });\n        shape.copyAttributes(this, true);\n        shape._matrix.prepend(this._matrix);\n        shape.rotate(topCenter.subtract(center).getAngle() + 90);\n        if (insert === undefined || insert) shape.insertAbove(this);\n        return shape;\n      }\n      return null;\n    },\n    toPath: '#clone',\n    compare: function compare(path) {\n      if (!path || path instanceof CompoundPath) return compare.base.call(this, path);\n      var curves1 = this.getCurves(),\n        curves2 = path.getCurves(),\n        length1 = curves1.length,\n        length2 = curves2.length;\n      if (!length1 || !length2) {\n        return length1 == length2;\n      }\n      var v1 = curves1[0].getValues(),\n        values2 = [],\n        pos1 = 0,\n        pos2,\n        end1 = 0,\n        end2;\n      for (var i = 0; i < length2; i++) {\n        var v2 = curves2[i].getValues();\n        values2.push(v2);\n        var overlaps = Curve.getOverlaps(v1, v2);\n        if (overlaps) {\n          pos2 = !i && overlaps[0][0] > 0 ? length2 - 1 : i;\n          end2 = overlaps[0][1];\n          break;\n        }\n      }\n      var abs = Math.abs,\n        epsilon = 1e-8,\n        v2 = values2[pos2],\n        start2;\n      while (v1 && v2) {\n        var overlaps = Curve.getOverlaps(v1, v2);\n        if (overlaps) {\n          var t1 = overlaps[0][0];\n          if (abs(t1 - end1) < epsilon) {\n            end1 = overlaps[1][0];\n            if (end1 === 1) {\n              v1 = ++pos1 < length1 ? curves1[pos1].getValues() : null;\n              end1 = 0;\n            }\n            var t2 = overlaps[0][1];\n            if (abs(t2 - end2) < epsilon) {\n              if (!start2) start2 = [pos2, t2];\n              end2 = overlaps[1][1];\n              if (end2 === 1) {\n                if (++pos2 >= length2) pos2 = 0;\n                v2 = values2[pos2] || curves2[pos2].getValues();\n                end2 = 0;\n              }\n              if (!v1) {\n                return start2[0] === pos2 && start2[1] === end2;\n              }\n              continue;\n            }\n          }\n        }\n        break;\n      }\n      return false;\n    },\n    _hitTestSelf: function (point, options, viewMatrix, strokeMatrix) {\n      var that = this,\n        style = this.getStyle(),\n        segments = this._segments,\n        numSegments = segments.length,\n        closed = this._closed,\n        tolerancePadding = options._tolerancePadding,\n        strokePadding = tolerancePadding,\n        join,\n        cap,\n        miterLimit,\n        area,\n        loc,\n        res,\n        hitStroke = options.stroke && style.hasStroke(),\n        hitFill = options.fill && style.hasFill(),\n        hitCurves = options.curves,\n        strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : hitFill && options.tolerance > 0 || hitCurves ? 0 : null;\n      if (strokeRadius !== null) {\n        if (strokeRadius > 0) {\n          join = style.getStrokeJoin();\n          cap = style.getStrokeCap();\n          miterLimit = style.getMiterLimit();\n          strokePadding = strokePadding.add(Path._getStrokePadding(strokeRadius, strokeMatrix));\n        } else {\n          join = cap = 'round';\n        }\n      }\n      function isCloseEnough(pt, padding) {\n        return point.subtract(pt).divide(padding).length <= 1;\n      }\n      function checkSegmentPoint(seg, pt, name) {\n        if (!options.selected || pt.isSelected()) {\n          var anchor = seg._point;\n          if (pt !== anchor) pt = pt.add(anchor);\n          if (isCloseEnough(pt, strokePadding)) {\n            return new HitResult(name, that, {\n              segment: seg,\n              point: pt\n            });\n          }\n        }\n      }\n      function checkSegmentPoints(seg, ends) {\n        return (ends || options.segments) && checkSegmentPoint(seg, seg._point, 'segment') || !ends && options.handles && (checkSegmentPoint(seg, seg._handleIn, 'handle-in') || checkSegmentPoint(seg, seg._handleOut, 'handle-out'));\n      }\n      function addToArea(point) {\n        area.add(point);\n      }\n      function checkSegmentStroke(segment) {\n        var isJoin = closed || segment._index > 0 && segment._index < numSegments - 1;\n        if ((isJoin ? join : cap) === 'round') {\n          return isCloseEnough(segment._point, strokePadding);\n        } else {\n          area = new Path({\n            internal: true,\n            closed: true\n          });\n          if (isJoin) {\n            if (!segment.isSmooth()) {\n              Path._addBevelJoin(segment, join, strokeRadius, miterLimit, null, strokeMatrix, addToArea, true);\n            }\n          } else if (cap === 'square') {\n            Path._addSquareCap(segment, cap, strokeRadius, null, strokeMatrix, addToArea, true);\n          }\n          if (!area.isEmpty()) {\n            var loc;\n            return area.contains(point) || (loc = area.getNearestLocation(point)) && isCloseEnough(loc.getPoint(), tolerancePadding);\n          }\n        }\n      }\n      if (options.ends && !options.segments && !closed) {\n        if (res = checkSegmentPoints(segments[0], true) || checkSegmentPoints(segments[numSegments - 1], true)) return res;\n      } else if (options.segments || options.handles) {\n        for (var i = 0; i < numSegments; i++) if (res = checkSegmentPoints(segments[i])) return res;\n      }\n      if (strokeRadius !== null) {\n        loc = this.getNearestLocation(point);\n        if (loc) {\n          var time = loc.getTime();\n          if (time === 0 || time === 1 && numSegments > 1) {\n            if (!checkSegmentStroke(loc.getSegment())) loc = null;\n          } else if (!isCloseEnough(loc.getPoint(), strokePadding)) {\n            loc = null;\n          }\n        }\n        if (!loc && join === 'miter' && numSegments > 1) {\n          for (var i = 0; i < numSegments; i++) {\n            var segment = segments[i];\n            if (point.getDistance(segment._point) <= miterLimit * strokeRadius && checkSegmentStroke(segment)) {\n              loc = segment.getLocation();\n              break;\n            }\n          }\n        }\n      }\n      return !loc && hitFill && this._contains(point) || loc && !hitStroke && !hitCurves ? new HitResult('fill', this) : loc ? new HitResult(hitStroke ? 'stroke' : 'curve', this, {\n        location: loc,\n        point: loc.getPoint()\n      }) : null;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var loc = this.getLocationAt(offset);\n      return loc && loc[name]();\n    };\n  }, {\n    beans: false,\n    getLocationOf: function () {\n      var point = Point.read(arguments),\n        curves = this.getCurves();\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getLocationOf(point);\n        if (loc) return loc;\n      }\n      return null;\n    },\n    getOffsetOf: function () {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getLocationAt: function (offset) {\n      if (typeof offset === 'number') {\n        var curves = this.getCurves(),\n          length = 0;\n        for (var i = 0, l = curves.length; i < l; i++) {\n          var start = length,\n            curve = curves[i];\n          length += curve.getLength();\n          if (length > offset) {\n            return curve.getLocationAt(offset - start);\n          }\n        }\n        if (curves.length > 0 && offset <= this.getLength()) {\n          return new CurveLocation(curves[curves.length - 1], 1);\n        }\n      } else if (offset && offset.getPath && offset.getPath() === this) {\n        return offset;\n      }\n      return null;\n    },\n    getOffsetsWithTangent: function () {\n      var tangent = Point.read(arguments);\n      if (tangent.isZero()) {\n        return [];\n      }\n      var offsets = [];\n      var curveStart = 0;\n      var curves = this.getCurves();\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var curve = curves[i];\n        var curveTimes = curve.getTimesWithTangent(tangent);\n        for (var j = 0, m = curveTimes.length; j < m; j++) {\n          var offset = curveStart + curve.getOffsetAtTime(curveTimes[j]);\n          if (offsets.indexOf(offset) < 0) {\n            offsets.push(offset);\n          }\n        }\n        curveStart += curve.length;\n      }\n      return offsets;\n    }\n  }), new function () {\n    function drawHandles(ctx, segments, matrix, size) {\n      if (size <= 0) return;\n      var half = size / 2,\n        miniSize = size - 2,\n        miniHalf = half - 1,\n        coords = new Array(6),\n        pX,\n        pY;\n      function drawHandle(index) {\n        var hX = coords[index],\n          hY = coords[index + 1];\n        if (pX != hX || pY != hY) {\n          ctx.beginPath();\n          ctx.moveTo(pX, pY);\n          ctx.lineTo(hX, hY);\n          ctx.stroke();\n          ctx.beginPath();\n          ctx.arc(hX, hY, half, 0, Math.PI * 2, true);\n          ctx.fill();\n        }\n      }\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var segment = segments[i],\n          selection = segment._selection;\n        segment._transformCoordinates(matrix, coords);\n        pX = coords[0];\n        pY = coords[1];\n        if (selection & 2) drawHandle(2);\n        if (selection & 4) drawHandle(4);\n        ctx.fillRect(pX - half, pY - half, size, size);\n        if (miniSize > 0 && !(selection & 1)) {\n          var fillStyle = ctx.fillStyle;\n          ctx.fillStyle = '#ffffff';\n          ctx.fillRect(pX - miniHalf, pY - miniHalf, miniSize, miniSize);\n          ctx.fillStyle = fillStyle;\n        }\n      }\n    }\n    function drawSegments(ctx, path, matrix) {\n      var segments = path._segments,\n        length = segments.length,\n        coords = new Array(6),\n        first = true,\n        curX,\n        curY,\n        prevX,\n        prevY,\n        inX,\n        inY,\n        outX,\n        outY;\n      function drawSegment(segment) {\n        if (matrix) {\n          segment._transformCoordinates(matrix, coords);\n          curX = coords[0];\n          curY = coords[1];\n        } else {\n          var point = segment._point;\n          curX = point._x;\n          curY = point._y;\n        }\n        if (first) {\n          ctx.moveTo(curX, curY);\n          first = false;\n        } else {\n          if (matrix) {\n            inX = coords[2];\n            inY = coords[3];\n          } else {\n            var handle = segment._handleIn;\n            inX = curX + handle._x;\n            inY = curY + handle._y;\n          }\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            ctx.lineTo(curX, curY);\n          } else {\n            ctx.bezierCurveTo(outX, outY, inX, inY, curX, curY);\n          }\n        }\n        prevX = curX;\n        prevY = curY;\n        if (matrix) {\n          outX = coords[4];\n          outY = coords[5];\n        } else {\n          var handle = segment._handleOut;\n          outX = prevX + handle._x;\n          outY = prevY + handle._y;\n        }\n      }\n      for (var i = 0; i < length; i++) drawSegment(segments[i]);\n      if (path._closed && length > 0) drawSegment(segments[0]);\n    }\n    return {\n      _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n        var dontStart = param.dontStart,\n          dontPaint = param.dontFinish || param.clip,\n          style = this.getStyle(),\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          dashArray = style.getDashArray(),\n          dashLength = !paper.support.nativeDash && hasStroke && dashArray && dashArray.length;\n        if (!dontStart) ctx.beginPath();\n        if (hasFill || hasStroke && !dashLength || dontPaint) {\n          drawSegments(ctx, this, strokeMatrix);\n          if (this._closed) ctx.closePath();\n        }\n        function getOffset(i) {\n          return dashArray[(i % dashLength + dashLength) % dashLength];\n        }\n        if (!dontPaint && (hasFill || hasStroke)) {\n          this._setStyles(ctx, param, viewMatrix);\n          if (hasFill) {\n            ctx.fill(style.getFillRule());\n            ctx.shadowColor = 'rgba(0,0,0,0)';\n          }\n          if (hasStroke) {\n            if (dashLength) {\n              if (!dontStart) ctx.beginPath();\n              var flattener = new PathFlattener(this, 0.25, 32, false, strokeMatrix),\n                length = flattener.length,\n                from = -style.getDashOffset(),\n                to,\n                i = 0;\n              while (from > 0) {\n                from -= getOffset(i--) + getOffset(i--);\n              }\n              while (from < length) {\n                to = from + getOffset(i++);\n                if (from > 0 || to > 0) flattener.drawPart(ctx, Math.max(from, 0), Math.max(to, 0));\n                from = to + getOffset(i++);\n              }\n            }\n            ctx.stroke();\n          }\n        }\n      },\n      _drawSelected: function (ctx, matrix) {\n        ctx.beginPath();\n        drawSegments(ctx, this, matrix);\n        ctx.stroke();\n        drawHandles(ctx, this._segments, matrix, paper.settings.handleSize);\n      }\n    };\n  }(), new function () {\n    function getCurrentSegment(that) {\n      var segments = that._segments;\n      if (!segments.length) throw new Error('Use a moveTo() command first');\n      return segments[segments.length - 1];\n    }\n    return {\n      moveTo: function () {\n        var segments = this._segments;\n        if (segments.length === 1) this.removeSegment(0);\n        if (!segments.length) this._add([new Segment(Point.read(arguments))]);\n      },\n      moveBy: function () {\n        throw new Error('moveBy() is unsupported on Path items.');\n      },\n      lineTo: function () {\n        this._add([new Segment(Point.read(arguments))]);\n      },\n      cubicCurveTo: function () {\n        var args = arguments,\n          handle1 = Point.read(args),\n          handle2 = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this);\n        current.setHandleOut(handle1.subtract(current._point));\n        this._add([new Segment(to, handle2.subtract(to))]);\n      },\n      quadraticCurveTo: function () {\n        var args = arguments,\n          handle = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this)._point;\n        this.cubicCurveTo(handle.add(current.subtract(handle).multiply(1 / 3)), handle.add(to.subtract(handle).multiply(1 / 3)), to);\n      },\n      curveTo: function () {\n        var args = arguments,\n          through = Point.read(args),\n          to = Point.read(args),\n          t = Base.pick(Base.read(args), 0.5),\n          t1 = 1 - t,\n          current = getCurrentSegment(this)._point,\n          handle = through.subtract(current.multiply(t1 * t1)).subtract(to.multiply(t * t)).divide(2 * t * t1);\n        if (handle.isNaN()) throw new Error('Cannot put a curve through points with parameter = ' + t);\n        this.quadraticCurveTo(handle, to);\n      },\n      arcTo: function () {\n        var args = arguments,\n          abs = Math.abs,\n          sqrt = Math.sqrt,\n          current = getCurrentSegment(this),\n          from = current._point,\n          to = Point.read(args),\n          through,\n          peek = Base.peek(args),\n          clockwise = Base.pick(peek, true),\n          center,\n          extent,\n          vector,\n          matrix;\n        if (typeof clockwise === 'boolean') {\n          var middle = from.add(to).divide(2),\n            through = middle.add(middle.subtract(from).rotate(clockwise ? -90 : 90));\n        } else if (Base.remain(args) <= 2) {\n          through = to;\n          to = Point.read(args);\n        } else if (!from.equals(to)) {\n          var radius = Size.read(args),\n            isZero = Numerical.isZero;\n          if (isZero(radius.width) || isZero(radius.height)) return this.lineTo(to);\n          var rotation = Base.read(args),\n            clockwise = !!Base.read(args),\n            large = !!Base.read(args),\n            middle = from.add(to).divide(2),\n            pt = from.subtract(middle).rotate(-rotation),\n            x = pt.x,\n            y = pt.y,\n            rx = abs(radius.width),\n            ry = abs(radius.height),\n            rxSq = rx * rx,\n            rySq = ry * ry,\n            xSq = x * x,\n            ySq = y * y;\n          var factor = sqrt(xSq / rxSq + ySq / rySq);\n          if (factor > 1) {\n            rx *= factor;\n            ry *= factor;\n            rxSq = rx * rx;\n            rySq = ry * ry;\n          }\n          factor = (rxSq * rySq - rxSq * ySq - rySq * xSq) / (rxSq * ySq + rySq * xSq);\n          if (abs(factor) < 1e-12) factor = 0;\n          if (factor < 0) throw new Error('Cannot create an arc with the given arguments');\n          center = new Point(rx * y / ry, -ry * x / rx).multiply((large === clockwise ? -1 : 1) * sqrt(factor)).rotate(rotation).add(middle);\n          matrix = new Matrix().translate(center).rotate(rotation).scale(rx, ry);\n          vector = matrix._inverseTransform(from);\n          extent = vector.getDirectedAngle(matrix._inverseTransform(to));\n          if (!clockwise && extent > 0) extent -= 360;else if (clockwise && extent < 0) extent += 360;\n        }\n        if (through) {\n          var l1 = new Line(from.add(through).divide(2), through.subtract(from).rotate(90), true),\n            l2 = new Line(through.add(to).divide(2), to.subtract(through).rotate(90), true),\n            line = new Line(from, to),\n            throughSide = line.getSide(through);\n          center = l1.intersect(l2, true);\n          if (!center) {\n            if (!throughSide) return this.lineTo(to);\n            throw new Error('Cannot create an arc with the given arguments');\n          }\n          vector = from.subtract(center);\n          extent = vector.getDirectedAngle(to.subtract(center));\n          var centerSide = line.getSide(center, true);\n          if (centerSide === 0) {\n            extent = throughSide * abs(extent);\n          } else if (throughSide === centerSide) {\n            extent += extent < 0 ? 360 : -360;\n          }\n        }\n        if (extent) {\n          var epsilon = 1e-5,\n            ext = abs(extent),\n            count = ext >= 360 ? 4 : Math.ceil((ext - epsilon) / 90),\n            inc = extent / count,\n            half = inc * Math.PI / 360,\n            z = 4 / 3 * Math.sin(half) / (1 + Math.cos(half)),\n            segments = [];\n          for (var i = 0; i <= count; i++) {\n            var pt = to,\n              out = null;\n            if (i < count) {\n              out = vector.rotate(90).multiply(z);\n              if (matrix) {\n                pt = matrix._transformPoint(vector);\n                out = matrix._transformPoint(vector.add(out)).subtract(pt);\n              } else {\n                pt = center.add(vector);\n              }\n            }\n            if (!i) {\n              current.setHandleOut(out);\n            } else {\n              var _in = vector.rotate(-90).multiply(z);\n              if (matrix) {\n                _in = matrix._transformPoint(vector.add(_in)).subtract(pt);\n              }\n              segments.push(new Segment(pt, _in, out));\n            }\n            vector = vector.rotate(inc);\n          }\n          this._add(segments);\n        }\n      },\n      lineBy: function () {\n        var to = Point.read(arguments),\n          current = getCurrentSegment(this)._point;\n        this.lineTo(current.add(to));\n      },\n      curveBy: function () {\n        var args = arguments,\n          through = Point.read(args),\n          to = Point.read(args),\n          parameter = Base.read(args),\n          current = getCurrentSegment(this)._point;\n        this.curveTo(current.add(through), current.add(to), parameter);\n      },\n      cubicCurveBy: function () {\n        var args = arguments,\n          handle1 = Point.read(args),\n          handle2 = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this)._point;\n        this.cubicCurveTo(current.add(handle1), current.add(handle2), current.add(to));\n      },\n      quadraticCurveBy: function () {\n        var args = arguments,\n          handle = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this)._point;\n        this.quadraticCurveTo(current.add(handle), current.add(to));\n      },\n      arcBy: function () {\n        var args = arguments,\n          current = getCurrentSegment(this)._point,\n          point = current.add(Point.read(args)),\n          clockwise = Base.pick(Base.peek(args), true);\n        if (typeof clockwise === 'boolean') {\n          this.arcTo(point, clockwise);\n        } else {\n          this.arcTo(point, current.add(Point.read(args)));\n        }\n      },\n      closePath: function (tolerance) {\n        this.setClosed(true);\n        this.join(this, tolerance);\n      }\n    };\n  }(), {\n    _getBounds: function (matrix, options) {\n      var method = options.handle ? 'getHandleBounds' : options.stroke ? 'getStrokeBounds' : 'getBounds';\n      return Path[method](this._segments, this._closed, this, matrix, options);\n    },\n    statics: {\n      getBounds: function (segments, closed, path, matrix, options, strokePadding) {\n        var first = segments[0];\n        if (!first) return new Rectangle();\n        var coords = new Array(6),\n          prevCoords = first._transformCoordinates(matrix, new Array(6)),\n          min = prevCoords.slice(0, 2),\n          max = min.slice(),\n          roots = new Array(2);\n        function processSegment(segment) {\n          segment._transformCoordinates(matrix, coords);\n          for (var i = 0; i < 2; i++) {\n            Curve._addBounds(prevCoords[i], prevCoords[i + 4], coords[i + 2], coords[i], i, strokePadding ? strokePadding[i] : 0, min, max, roots);\n          }\n          var tmp = prevCoords;\n          prevCoords = coords;\n          coords = tmp;\n        }\n        for (var i = 1, l = segments.length; i < l; i++) processSegment(segments[i]);\n        if (closed) processSegment(first);\n        return new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      getStrokeBounds: function (segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n          stroke = style.hasStroke(),\n          strokeWidth = style.getStrokeWidth(),\n          strokeMatrix = stroke && path._getStrokeMatrix(matrix, options),\n          strokePadding = stroke && Path._getStrokePadding(strokeWidth, strokeMatrix),\n          bounds = Path.getBounds(segments, closed, path, matrix, options, strokePadding);\n        if (!stroke) return bounds;\n        var strokeRadius = strokeWidth / 2,\n          join = style.getStrokeJoin(),\n          cap = style.getStrokeCap(),\n          miterLimit = style.getMiterLimit(),\n          joinBounds = new Rectangle(new Size(strokePadding));\n        function addPoint(point) {\n          bounds = bounds.include(point);\n        }\n        function addRound(segment) {\n          bounds = bounds.unite(joinBounds.setCenter(segment._point.transform(matrix)));\n        }\n        function addJoin(segment, join) {\n          if (join === 'round' || segment.isSmooth()) {\n            addRound(segment);\n          } else {\n            Path._addBevelJoin(segment, join, strokeRadius, miterLimit, matrix, strokeMatrix, addPoint);\n          }\n        }\n        function addCap(segment, cap) {\n          if (cap === 'round') {\n            addRound(segment);\n          } else {\n            Path._addSquareCap(segment, cap, strokeRadius, matrix, strokeMatrix, addPoint);\n          }\n        }\n        var length = segments.length - (closed ? 0 : 1);\n        if (length > 0) {\n          for (var i = 1; i < length; i++) {\n            addJoin(segments[i], join);\n          }\n          if (closed) {\n            addJoin(segments[0], join);\n          } else {\n            addCap(segments[0], cap);\n            addCap(segments[segments.length - 1], cap);\n          }\n        }\n        return bounds;\n      },\n      _getStrokePadding: function (radius, matrix) {\n        if (!matrix) return [radius, radius];\n        var hor = new Point(radius, 0).transform(matrix),\n          ver = new Point(0, radius).transform(matrix),\n          phi = hor.getAngleInRadians(),\n          a = hor.getLength(),\n          b = ver.getLength();\n        var sin = Math.sin(phi),\n          cos = Math.cos(phi),\n          tan = Math.tan(phi),\n          tx = Math.atan2(b * tan, a),\n          ty = Math.atan2(b, tan * a);\n        return [Math.abs(a * Math.cos(tx) * cos + b * Math.sin(tx) * sin), Math.abs(b * Math.sin(ty) * cos + a * Math.cos(ty) * sin)];\n      },\n      _addBevelJoin: function (segment, join, radius, miterLimit, matrix, strokeMatrix, addPoint, isArea) {\n        var curve2 = segment.getCurve(),\n          curve1 = curve2.getPrevious(),\n          point = curve2.getPoint1().transform(matrix),\n          normal1 = curve1.getNormalAtTime(1).multiply(radius).transform(strokeMatrix),\n          normal2 = curve2.getNormalAtTime(0).multiply(radius).transform(strokeMatrix),\n          angle = normal1.getDirectedAngle(normal2);\n        if (angle < 0 || angle >= 180) {\n          normal1 = normal1.negate();\n          normal2 = normal2.negate();\n        }\n        if (isArea) addPoint(point);\n        addPoint(point.add(normal1));\n        if (join === 'miter') {\n          var corner = new Line(point.add(normal1), new Point(-normal1.y, normal1.x), true).intersect(new Line(point.add(normal2), new Point(-normal2.y, normal2.x), true), true);\n          if (corner && point.getDistance(corner) <= miterLimit * radius) {\n            addPoint(corner);\n          }\n        }\n        addPoint(point.add(normal2));\n      },\n      _addSquareCap: function (segment, cap, radius, matrix, strokeMatrix, addPoint, isArea) {\n        var point = segment._point.transform(matrix),\n          loc = segment.getLocation(),\n          normal = loc.getNormal().multiply(loc.getTime() === 0 ? radius : -radius).transform(strokeMatrix);\n        if (cap === 'square') {\n          if (isArea) {\n            addPoint(point.subtract(normal));\n            addPoint(point.add(normal));\n          }\n          point = point.add(normal.rotate(-90));\n        }\n        addPoint(point.add(normal));\n        addPoint(point.subtract(normal));\n      },\n      getHandleBounds: function (segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n          stroke = options.stroke && style.hasStroke(),\n          strokePadding,\n          joinPadding;\n        if (stroke) {\n          var strokeMatrix = path._getStrokeMatrix(matrix, options),\n            strokeRadius = style.getStrokeWidth() / 2,\n            joinRadius = strokeRadius;\n          if (style.getStrokeJoin() === 'miter') joinRadius = strokeRadius * style.getMiterLimit();\n          if (style.getStrokeCap() === 'square') joinRadius = Math.max(joinRadius, strokeRadius * Math.SQRT2);\n          strokePadding = Path._getStrokePadding(strokeRadius, strokeMatrix);\n          joinPadding = Path._getStrokePadding(joinRadius, strokeMatrix);\n        }\n        var coords = new Array(6),\n          x1 = Infinity,\n          x2 = -x1,\n          y1 = x1,\n          y2 = x2;\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i];\n          segment._transformCoordinates(matrix, coords);\n          for (var j = 0; j < 6; j += 2) {\n            var padding = !j ? joinPadding : strokePadding,\n              paddingX = padding ? padding[0] : 0,\n              paddingY = padding ? padding[1] : 0,\n              x = coords[j],\n              y = coords[j + 1],\n              xn = x - paddingX,\n              xx = x + paddingX,\n              yn = y - paddingY,\n              yx = y + paddingY;\n            if (xn < x1) x1 = xn;\n            if (xx > x2) x2 = xx;\n            if (yn < y1) y1 = yn;\n            if (yx > y2) y2 = yx;\n          }\n        }\n        return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n      }\n    }\n  });\n  Path.inject({\n    statics: new function () {\n      var kappa = 0.5522847498307936,\n        ellipseSegments = [new Segment([-1, 0], [0, kappa], [0, -kappa]), new Segment([0, -1], [-kappa, 0], [kappa, 0]), new Segment([1, 0], [0, -kappa], [0, kappa]), new Segment([0, 1], [kappa, 0], [-kappa, 0])];\n      function createPath(segments, closed, args) {\n        var props = Base.getNamed(args),\n          path = new Path(props && (props.insert == true ? Item.INSERT : props.insert == false ? Item.NO_INSERT : null));\n        path._add(segments);\n        path._closed = closed;\n        return path.set(props, Item.INSERT);\n      }\n      function createEllipse(center, radius, args) {\n        var segments = new Array(4);\n        for (var i = 0; i < 4; i++) {\n          var segment = ellipseSegments[i];\n          segments[i] = new Segment(segment._point.multiply(radius).add(center), segment._handleIn.multiply(radius), segment._handleOut.multiply(radius));\n        }\n        return createPath(segments, true, args);\n      }\n      return {\n        Line: function () {\n          var args = arguments;\n          return createPath([new Segment(Point.readNamed(args, 'from')), new Segment(Point.readNamed(args, 'to'))], false, args);\n        },\n        Circle: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            radius = Base.readNamed(args, 'radius');\n          return createEllipse(center, new Size(radius), args);\n        },\n        Rectangle: function () {\n          var args = arguments,\n            rect = Rectangle.readNamed(args, 'rectangle'),\n            radius = Size.readNamed(args, 'radius', 0, {\n              readNull: true\n            }),\n            bl = rect.getBottomLeft(true),\n            tl = rect.getTopLeft(true),\n            tr = rect.getTopRight(true),\n            br = rect.getBottomRight(true),\n            segments;\n          if (!radius || radius.isZero()) {\n            segments = [new Segment(bl), new Segment(tl), new Segment(tr), new Segment(br)];\n          } else {\n            radius = Size.min(radius, rect.getSize(true).divide(2));\n            var rx = radius.width,\n              ry = radius.height,\n              hx = rx * kappa,\n              hy = ry * kappa;\n            segments = [new Segment(bl.add(rx, 0), null, [-hx, 0]), new Segment(bl.subtract(0, ry), [0, hy]), new Segment(tl.add(0, ry), null, [0, -hy]), new Segment(tl.add(rx, 0), [-hx, 0], null), new Segment(tr.subtract(rx, 0), null, [hx, 0]), new Segment(tr.add(0, ry), [0, -hy], null), new Segment(br.subtract(0, ry), null, [0, hy]), new Segment(br.subtract(rx, 0), [hx, 0])];\n          }\n          return createPath(segments, true, args);\n        },\n        RoundRectangle: '#Rectangle',\n        Ellipse: function () {\n          var args = arguments,\n            ellipse = Shape._readEllipse(args);\n          return createEllipse(ellipse.center, ellipse.radius, args);\n        },\n        Oval: '#Ellipse',\n        Arc: function () {\n          var args = arguments,\n            from = Point.readNamed(args, 'from'),\n            through = Point.readNamed(args, 'through'),\n            to = Point.readNamed(args, 'to'),\n            props = Base.getNamed(args),\n            path = new Path(props && props.insert == false && Item.NO_INSERT);\n          path.moveTo(from);\n          path.arcTo(through, to);\n          return path.set(props);\n        },\n        RegularPolygon: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            sides = Base.readNamed(args, 'sides'),\n            radius = Base.readNamed(args, 'radius'),\n            step = 360 / sides,\n            three = sides % 3 === 0,\n            vector = new Point(0, three ? -radius : radius),\n            offset = three ? -1 : 0.5,\n            segments = new Array(sides);\n          for (var i = 0; i < sides; i++) segments[i] = new Segment(center.add(vector.rotate((i + offset) * step)));\n          return createPath(segments, true, args);\n        },\n        Star: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            points = Base.readNamed(args, 'points') * 2,\n            radius1 = Base.readNamed(args, 'radius1'),\n            radius2 = Base.readNamed(args, 'radius2'),\n            step = 360 / points,\n            vector = new Point(0, -1),\n            segments = new Array(points);\n          for (var i = 0; i < points; i++) segments[i] = new Segment(center.add(vector.rotate(step * i).multiply(i % 2 ? radius2 : radius1)));\n          return createPath(segments, true, args);\n        }\n      };\n    }()\n  });\n  var CompoundPath = PathItem.extend({\n    _class: 'CompoundPath',\n    _serializeFields: {\n      children: []\n    },\n    beans: true,\n    initialize: function CompoundPath(arg) {\n      this._children = [];\n      this._namedChildren = {};\n      if (!this._initialize(arg)) {\n        if (typeof arg === 'string') {\n          this.setPathData(arg);\n        } else {\n          this.addChildren(Array.isArray(arg) ? arg : arguments);\n        }\n      }\n    },\n    insertChildren: function insertChildren(index, items) {\n      var list = items,\n        first = list[0];\n      if (first && typeof first[0] === 'number') list = [list];\n      for (var i = items.length - 1; i >= 0; i--) {\n        var item = list[i];\n        if (list === items && !(item instanceof Path)) list = Base.slice(list);\n        if (Array.isArray(item)) {\n          list[i] = new Path({\n            segments: item,\n            insert: false\n          });\n        } else if (item instanceof CompoundPath) {\n          list.splice.apply(list, [i, 1].concat(item.removeChildren()));\n          item.remove();\n        }\n      }\n      return insertChildren.base.call(this, index, list);\n    },\n    reduce: function reduce(options) {\n      var children = this._children;\n      for (var i = children.length - 1; i >= 0; i--) {\n        var path = children[i].reduce(options);\n        if (path.isEmpty()) path.remove();\n      }\n      if (!children.length) {\n        var path = new Path(Item.NO_INSERT);\n        path.copyAttributes(this);\n        path.insertAbove(this);\n        this.remove();\n        return path;\n      }\n      return reduce.base.call(this);\n    },\n    isClosed: function () {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        if (!children[i]._closed) return false;\n      }\n      return true;\n    },\n    setClosed: function (closed) {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].setClosed(closed);\n      }\n    },\n    getFirstSegment: function () {\n      var first = this.getFirstChild();\n      return first && first.getFirstSegment();\n    },\n    getLastSegment: function () {\n      var last = this.getLastChild();\n      return last && last.getLastSegment();\n    },\n    getCurves: function () {\n      var children = this._children,\n        curves = [];\n      for (var i = 0, l = children.length; i < l; i++) {\n        Base.push(curves, children[i].getCurves());\n      }\n      return curves;\n    },\n    getFirstCurve: function () {\n      var first = this.getFirstChild();\n      return first && first.getFirstCurve();\n    },\n    getLastCurve: function () {\n      var last = this.getLastChild();\n      return last && last.getLastCurve();\n    },\n    getArea: function () {\n      var children = this._children,\n        area = 0;\n      for (var i = 0, l = children.length; i < l; i++) area += children[i].getArea();\n      return area;\n    },\n    getLength: function () {\n      var children = this._children,\n        length = 0;\n      for (var i = 0, l = children.length; i < l; i++) length += children[i].getLength();\n      return length;\n    },\n    getPathData: function (_matrix, _precision) {\n      var children = this._children,\n        paths = [];\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n          mx = child._matrix;\n        paths.push(child.getPathData(_matrix && !mx.isIdentity() ? _matrix.appended(mx) : _matrix, _precision));\n      }\n      return paths.join('');\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      return _hitTestChildren.base.call(this, point, options.class === Path || options.type === 'path' ? options : Base.set({}, options, {\n        fill: false\n      }), viewMatrix);\n    },\n    _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n      var children = this._children;\n      if (!children.length) return;\n      param = param.extend({\n        dontStart: true,\n        dontFinish: true\n      });\n      ctx.beginPath();\n      for (var i = 0, l = children.length; i < l; i++) children[i].draw(ctx, param, strokeMatrix);\n      if (!param.clip) {\n        this._setStyles(ctx, param, viewMatrix);\n        var style = this._style;\n        if (style.hasFill()) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n        if (style.hasStroke()) ctx.stroke();\n      }\n    },\n    _drawSelected: function (ctx, matrix, selectionItems) {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n          mx = child._matrix;\n        if (!selectionItems[child._id]) {\n          child._drawSelected(ctx, mx.isIdentity() ? matrix : matrix.appended(mx));\n        }\n      }\n    }\n  }, new function () {\n    function getCurrentPath(that, check) {\n      var children = that._children;\n      if (check && !children.length) throw new Error('Use a moveTo() command first');\n      return children[children.length - 1];\n    }\n    return Base.each(['lineTo', 'cubicCurveTo', 'quadraticCurveTo', 'curveTo', 'arcTo', 'lineBy', 'cubicCurveBy', 'quadraticCurveBy', 'curveBy', 'arcBy'], function (key) {\n      this[key] = function () {\n        var path = getCurrentPath(this, true);\n        path[key].apply(path, arguments);\n      };\n    }, {\n      moveTo: function () {\n        var current = getCurrentPath(this),\n          path = current && current.isEmpty() ? current : new Path(Item.NO_INSERT);\n        if (path !== current) this.addChild(path);\n        path.moveTo.apply(path, arguments);\n      },\n      moveBy: function () {\n        var current = getCurrentPath(this, true),\n          last = current && current.getLastSegment(),\n          point = Point.read(arguments);\n        this.moveTo(last ? point.add(last._point) : point);\n      },\n      closePath: function (tolerance) {\n        getCurrentPath(this, true).closePath(tolerance);\n      }\n    });\n  }(), Base.each(['reverse', 'flatten', 'simplify', 'smooth'], function (key) {\n    this[key] = function (param) {\n      var children = this._children,\n        res;\n      for (var i = 0, l = children.length; i < l; i++) {\n        res = children[i][key](param) || res;\n      }\n      return res;\n    };\n  }, {}));\n  PathItem.inject(new function () {\n    var min = Math.min,\n      max = Math.max,\n      abs = Math.abs,\n      operators = {\n        unite: {\n          '1': true,\n          '2': true\n        },\n        intersect: {\n          '2': true\n        },\n        subtract: {\n          '1': true\n        },\n        exclude: {\n          '1': true,\n          '-1': true\n        }\n      };\n    function getPaths(path) {\n      return path._children || [path];\n    }\n    function preparePath(path, resolve) {\n      var res = path.clone(false).reduce({\n        simplify: true\n      }).transform(null, true, true);\n      if (resolve) {\n        var paths = getPaths(res);\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n          if (!path._closed && !path.isEmpty()) {\n            path.closePath(1e-12);\n            path.getFirstSegment().setHandleIn(0, 0);\n            path.getLastSegment().setHandleOut(0, 0);\n          }\n        }\n        res = res.resolveCrossings().reorient(res.getFillRule() === 'nonzero', true);\n      }\n      return res;\n    }\n    function createResult(paths, simplify, path1, path2, options) {\n      var result = new CompoundPath(Item.NO_INSERT);\n      result.addChildren(paths, true);\n      result = result.reduce({\n        simplify: simplify\n      });\n      if (!(options && options.insert == false)) {\n        result.insertAbove(path2 && path1.isSibling(path2) && path1.getIndex() < path2.getIndex() ? path2 : path1);\n      }\n      result.copyAttributes(path1, true);\n      return result;\n    }\n    function filterIntersection(inter) {\n      return inter.hasOverlap() || inter.isCrossing();\n    }\n    function traceBoolean(path1, path2, operation, options) {\n      if (options && (options.trace == false || options.stroke) && /^(subtract|intersect)$/.test(operation)) return splitBoolean(path1, path2, operation);\n      var _path1 = preparePath(path1, true),\n        _path2 = path2 && path1 !== path2 && preparePath(path2, true),\n        operator = operators[operation];\n      operator[operation] = true;\n      if (_path2 && (operator.subtract || operator.exclude) ^ (_path2.isClockwise() ^ _path1.isClockwise())) _path2.reverse();\n      var crossings = divideLocations(CurveLocation.expand(_path1.getIntersections(_path2, filterIntersection))),\n        paths1 = getPaths(_path1),\n        paths2 = _path2 && getPaths(_path2),\n        segments = [],\n        curves = [],\n        paths;\n      function collectPaths(paths) {\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n          Base.push(segments, path._segments);\n          Base.push(curves, path.getCurves());\n          path._overlapsOnly = true;\n        }\n      }\n      function getCurves(indices) {\n        var list = [];\n        for (var i = 0, l = indices && indices.length; i < l; i++) {\n          list.push(curves[indices[i]]);\n        }\n        return list;\n      }\n      if (crossings.length) {\n        collectPaths(paths1);\n        if (paths2) collectPaths(paths2);\n        var curvesValues = new Array(curves.length);\n        for (var i = 0, l = curves.length; i < l; i++) {\n          curvesValues[i] = curves[i].getValues();\n        }\n        var curveCollisions = CollisionDetection.findCurveBoundsCollisions(curvesValues, curvesValues, 0, true);\n        var curveCollisionsMap = {};\n        for (var i = 0; i < curves.length; i++) {\n          var curve = curves[i],\n            id = curve._path._id,\n            map = curveCollisionsMap[id] = curveCollisionsMap[id] || {};\n          map[curve.getIndex()] = {\n            hor: getCurves(curveCollisions[i].hor),\n            ver: getCurves(curveCollisions[i].ver)\n          };\n        }\n        for (var i = 0, l = crossings.length; i < l; i++) {\n          propagateWinding(crossings[i]._segment, _path1, _path2, curveCollisionsMap, operator);\n        }\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i],\n            inter = segment._intersection;\n          if (!segment._winding) {\n            propagateWinding(segment, _path1, _path2, curveCollisionsMap, operator);\n          }\n          if (!(inter && inter._overlap)) segment._path._overlapsOnly = false;\n        }\n        paths = tracePaths(segments, operator);\n      } else {\n        paths = reorientPaths(paths2 ? paths1.concat(paths2) : paths1.slice(), function (w) {\n          return !!operator[w];\n        });\n      }\n      return createResult(paths, true, path1, path2, options);\n    }\n    function splitBoolean(path1, path2, operation) {\n      var _path1 = preparePath(path1),\n        _path2 = preparePath(path2),\n        crossings = _path1.getIntersections(_path2, filterIntersection),\n        subtract = operation === 'subtract',\n        divide = operation === 'divide',\n        added = {},\n        paths = [];\n      function addPath(path) {\n        if (!added[path._id] && (divide || _path2.contains(path.getPointAt(path.getLength() / 2)) ^ subtract)) {\n          paths.unshift(path);\n          return added[path._id] = true;\n        }\n      }\n      for (var i = crossings.length - 1; i >= 0; i--) {\n        var path = crossings[i].split();\n        if (path) {\n          if (addPath(path)) path.getFirstSegment().setHandleIn(0, 0);\n          _path1.getLastSegment().setHandleOut(0, 0);\n        }\n      }\n      addPath(_path1);\n      return createResult(paths, false, path1, path2);\n    }\n    function linkIntersections(from, to) {\n      var prev = from;\n      while (prev) {\n        if (prev === to) return;\n        prev = prev._previous;\n      }\n      while (from._next && from._next !== to) from = from._next;\n      if (!from._next) {\n        while (to._previous) to = to._previous;\n        from._next = to;\n        to._previous = from;\n      }\n    }\n    function clearCurveHandles(curves) {\n      for (var i = curves.length - 1; i >= 0; i--) curves[i].clearHandles();\n    }\n    function reorientPaths(paths, isInside, clockwise) {\n      var length = paths && paths.length;\n      if (length) {\n        var lookup = Base.each(paths, function (path, i) {\n            this[path._id] = {\n              container: null,\n              winding: path.isClockwise() ? 1 : -1,\n              index: i\n            };\n          }, {}),\n          sorted = paths.slice().sort(function (a, b) {\n            return abs(b.getArea()) - abs(a.getArea());\n          }),\n          first = sorted[0];\n        var collisions = CollisionDetection.findItemBoundsCollisions(sorted, null, Numerical.GEOMETRIC_EPSILON);\n        if (clockwise == null) clockwise = first.isClockwise();\n        for (var i = 0; i < length; i++) {\n          var path1 = sorted[i],\n            entry1 = lookup[path1._id],\n            containerWinding = 0,\n            indices = collisions[i];\n          if (indices) {\n            var point = null;\n            for (var j = indices.length - 1; j >= 0; j--) {\n              if (indices[j] < i) {\n                point = point || path1.getInteriorPoint();\n                var path2 = sorted[indices[j]];\n                if (path2.contains(point)) {\n                  var entry2 = lookup[path2._id];\n                  containerWinding = entry2.winding;\n                  entry1.winding += containerWinding;\n                  entry1.container = entry2.exclude ? entry2.container : path2;\n                  break;\n                }\n              }\n            }\n          }\n          if (isInside(entry1.winding) === isInside(containerWinding)) {\n            entry1.exclude = true;\n            paths[entry1.index] = null;\n          } else {\n            var container = entry1.container;\n            path1.setClockwise(container ? !container.isClockwise() : clockwise);\n          }\n        }\n      }\n      return paths;\n    }\n    function divideLocations(locations, include, clearLater) {\n      var results = include && [],\n        tMin = 1e-8,\n        tMax = 1 - tMin,\n        clearHandles = false,\n        clearCurves = clearLater || [],\n        clearLookup = clearLater && {},\n        renormalizeLocs,\n        prevCurve,\n        prevTime;\n      function getId(curve) {\n        return curve._path._id + '.' + curve._segment1._index;\n      }\n      for (var i = (clearLater && clearLater.length) - 1; i >= 0; i--) {\n        var curve = clearLater[i];\n        if (curve._path) clearLookup[getId(curve)] = true;\n      }\n      for (var i = locations.length - 1; i >= 0; i--) {\n        var loc = locations[i],\n          time = loc._time,\n          origTime = time,\n          exclude = include && !include(loc),\n          curve = loc._curve,\n          segment;\n        if (curve) {\n          if (curve !== prevCurve) {\n            clearHandles = !curve.hasHandles() || clearLookup && clearLookup[getId(curve)];\n            renormalizeLocs = [];\n            prevTime = null;\n            prevCurve = curve;\n          } else if (prevTime >= tMin) {\n            time /= prevTime;\n          }\n        }\n        if (exclude) {\n          if (renormalizeLocs) renormalizeLocs.push(loc);\n          continue;\n        } else if (include) {\n          results.unshift(loc);\n        }\n        prevTime = origTime;\n        if (time < tMin) {\n          segment = curve._segment1;\n        } else if (time > tMax) {\n          segment = curve._segment2;\n        } else {\n          var newCurve = curve.divideAtTime(time, true);\n          if (clearHandles) clearCurves.push(curve, newCurve);\n          segment = newCurve._segment1;\n          for (var j = renormalizeLocs.length - 1; j >= 0; j--) {\n            var l = renormalizeLocs[j];\n            l._time = (l._time - time) / (1 - time);\n          }\n        }\n        loc._setSegment(segment);\n        var inter = segment._intersection,\n          dest = loc._intersection;\n        if (inter) {\n          linkIntersections(inter, dest);\n          var other = inter;\n          while (other) {\n            linkIntersections(other._intersection, inter);\n            other = other._next;\n          }\n        } else {\n          segment._intersection = dest;\n        }\n      }\n      if (!clearLater) clearCurveHandles(clearCurves);\n      return results || locations;\n    }\n    function getWinding(point, curves, dir, closed, dontFlip) {\n      var curvesList = Array.isArray(curves) ? curves : curves[dir ? 'hor' : 'ver'];\n      var ia = dir ? 1 : 0,\n        io = ia ^ 1,\n        pv = [point.x, point.y],\n        pa = pv[ia],\n        po = pv[io],\n        windingEpsilon = 1e-9,\n        qualityEpsilon = 1e-6,\n        paL = pa - windingEpsilon,\n        paR = pa + windingEpsilon,\n        windingL = 0,\n        windingR = 0,\n        pathWindingL = 0,\n        pathWindingR = 0,\n        onPath = false,\n        onAnyPath = false,\n        quality = 1,\n        roots = [],\n        vPrev,\n        vClose;\n      function addWinding(v) {\n        var o0 = v[io + 0],\n          o3 = v[io + 6];\n        if (po < min(o0, o3) || po > max(o0, o3)) {\n          return;\n        }\n        var a0 = v[ia + 0],\n          a1 = v[ia + 2],\n          a2 = v[ia + 4],\n          a3 = v[ia + 6];\n        if (o0 === o3) {\n          if (a0 < paR && a3 > paL || a3 < paR && a0 > paL) {\n            onPath = true;\n          }\n          return;\n        }\n        var t = po === o0 ? 0 : po === o3 ? 1 : paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? 1 : Curve.solveCubic(v, io, po, roots, 0, 1) > 0 ? roots[0] : 1,\n          a = t === 0 ? a0 : t === 1 ? a3 : Curve.getPoint(v, t)[dir ? 'y' : 'x'],\n          winding = o0 > o3 ? 1 : -1,\n          windingPrev = vPrev[io] > vPrev[io + 6] ? 1 : -1,\n          a3Prev = vPrev[ia + 6];\n        if (po !== o0) {\n          if (a < paL) {\n            pathWindingL += winding;\n          } else if (a > paR) {\n            pathWindingR += winding;\n          } else {\n            onPath = true;\n          }\n          if (a > pa - qualityEpsilon && a < pa + qualityEpsilon) quality /= 2;\n        } else {\n          if (winding !== windingPrev) {\n            if (a0 < paL) {\n              pathWindingL += winding;\n            } else if (a0 > paR) {\n              pathWindingR += winding;\n            }\n          } else if (a0 != a3Prev) {\n            if (a3Prev < paR && a > paR) {\n              pathWindingR += winding;\n              onPath = true;\n            } else if (a3Prev > paL && a < paL) {\n              pathWindingL += winding;\n              onPath = true;\n            }\n          }\n          quality /= 4;\n        }\n        vPrev = v;\n        return !dontFlip && a > paL && a < paR && Curve.getTangent(v, t)[dir ? 'x' : 'y'] === 0 && getWinding(point, curves, !dir, closed, true);\n      }\n      function handleCurve(v) {\n        var o0 = v[io + 0],\n          o1 = v[io + 2],\n          o2 = v[io + 4],\n          o3 = v[io + 6];\n        if (po <= max(o0, o1, o2, o3) && po >= min(o0, o1, o2, o3)) {\n          var a0 = v[ia + 0],\n            a1 = v[ia + 2],\n            a2 = v[ia + 4],\n            a3 = v[ia + 6],\n            monoCurves = paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? [v] : Curve.getMonoCurves(v, dir),\n            res;\n          for (var i = 0, l = monoCurves.length; i < l; i++) {\n            if (res = addWinding(monoCurves[i])) return res;\n          }\n        }\n      }\n      for (var i = 0, l = curvesList.length; i < l; i++) {\n        var curve = curvesList[i],\n          path = curve._path,\n          v = curve.getValues(),\n          res;\n        if (!i || curvesList[i - 1]._path !== path) {\n          vPrev = null;\n          if (!path._closed) {\n            vClose = Curve.getValues(path.getLastCurve().getSegment2(), curve.getSegment1(), null, !closed);\n            if (vClose[io] !== vClose[io + 6]) {\n              vPrev = vClose;\n            }\n          }\n          if (!vPrev) {\n            vPrev = v;\n            var prev = path.getLastCurve();\n            while (prev && prev !== curve) {\n              var v2 = prev.getValues();\n              if (v2[io] !== v2[io + 6]) {\n                vPrev = v2;\n                break;\n              }\n              prev = prev.getPrevious();\n            }\n          }\n        }\n        if (res = handleCurve(v)) return res;\n        if (i + 1 === l || curvesList[i + 1]._path !== path) {\n          if (vClose && (res = handleCurve(vClose))) return res;\n          if (onPath && !pathWindingL && !pathWindingR) {\n            pathWindingL = pathWindingR = path.isClockwise(closed) ^ dir ? 1 : -1;\n          }\n          windingL += pathWindingL;\n          windingR += pathWindingR;\n          pathWindingL = pathWindingR = 0;\n          if (onPath) {\n            onAnyPath = true;\n            onPath = false;\n          }\n          vClose = null;\n        }\n      }\n      windingL = abs(windingL);\n      windingR = abs(windingR);\n      return {\n        winding: max(windingL, windingR),\n        windingL: windingL,\n        windingR: windingR,\n        quality: quality,\n        onPath: onAnyPath\n      };\n    }\n    function propagateWinding(segment, path1, path2, curveCollisionsMap, operator) {\n      var chain = [],\n        start = segment,\n        totalLength = 0,\n        winding;\n      do {\n        var curve = segment.getCurve();\n        if (curve) {\n          var length = curve.getLength();\n          chain.push({\n            segment: segment,\n            curve: curve,\n            length: length\n          });\n          totalLength += length;\n        }\n        segment = segment.getNext();\n      } while (segment && !segment._intersection && segment !== start);\n      var offsets = [0.5, 0.25, 0.75],\n        winding = {\n          winding: 0,\n          quality: -1\n        },\n        tMin = 1e-3,\n        tMax = 1 - tMin;\n      for (var i = 0; i < offsets.length && winding.quality < 0.5; i++) {\n        var length = totalLength * offsets[i];\n        for (var j = 0, l = chain.length; j < l; j++) {\n          var entry = chain[j],\n            curveLength = entry.length;\n          if (length <= curveLength) {\n            var curve = entry.curve,\n              path = curve._path,\n              parent = path._parent,\n              operand = parent instanceof CompoundPath ? parent : path,\n              t = Numerical.clamp(curve.getTimeAt(length), tMin, tMax),\n              pt = curve.getPointAtTime(t),\n              dir = abs(curve.getTangentAtTime(t).y) < Math.SQRT1_2;\n            var wind = null;\n            if (operator.subtract && path2) {\n              var otherPath = operand === path1 ? path2 : path1,\n                pathWinding = otherPath._getWinding(pt, dir, true);\n              if (operand === path1 && pathWinding.winding || operand === path2 && !pathWinding.winding) {\n                if (pathWinding.quality < 1) {\n                  continue;\n                } else {\n                  wind = {\n                    winding: 0,\n                    quality: 1\n                  };\n                }\n              }\n            }\n            wind = wind || getWinding(pt, curveCollisionsMap[path._id][curve.getIndex()], dir, true);\n            if (wind.quality > winding.quality) winding = wind;\n            break;\n          }\n          length -= curveLength;\n        }\n      }\n      for (var j = chain.length - 1; j >= 0; j--) {\n        chain[j].segment._winding = winding;\n      }\n    }\n    function tracePaths(segments, operator) {\n      var paths = [],\n        starts;\n      function isValid(seg) {\n        var winding;\n        return !!(seg && !seg._visited && (!operator || operator[(winding = seg._winding || {}).winding] && !(operator.unite && winding.winding === 2 && winding.windingL && winding.windingR)));\n      }\n      function isStart(seg) {\n        if (seg) {\n          for (var i = 0, l = starts.length; i < l; i++) {\n            if (seg === starts[i]) return true;\n          }\n        }\n        return false;\n      }\n      function visitPath(path) {\n        var segments = path._segments;\n        for (var i = 0, l = segments.length; i < l; i++) {\n          segments[i]._visited = true;\n        }\n      }\n      function getCrossingSegments(segment, collectStarts) {\n        var inter = segment._intersection,\n          start = inter,\n          crossings = [];\n        if (collectStarts) starts = [segment];\n        function collect(inter, end) {\n          while (inter && inter !== end) {\n            var other = inter._segment,\n              path = other && other._path;\n            if (path) {\n              var next = other.getNext() || path.getFirstSegment(),\n                nextInter = next._intersection;\n              if (other !== segment && (isStart(other) || isStart(next) || next && isValid(other) && (isValid(next) || nextInter && isValid(nextInter._segment)))) {\n                crossings.push(other);\n              }\n              if (collectStarts) starts.push(other);\n            }\n            inter = inter._next;\n          }\n        }\n        if (inter) {\n          collect(inter);\n          while (inter && inter._previous) inter = inter._previous;\n          collect(inter, start);\n        }\n        return crossings;\n      }\n      segments.sort(function (seg1, seg2) {\n        var inter1 = seg1._intersection,\n          inter2 = seg2._intersection,\n          over1 = !!(inter1 && inter1._overlap),\n          over2 = !!(inter2 && inter2._overlap),\n          path1 = seg1._path,\n          path2 = seg2._path;\n        return over1 ^ over2 ? over1 ? 1 : -1 : !inter1 ^ !inter2 ? inter1 ? 1 : -1 : path1 !== path2 ? path1._id - path2._id : seg1._index - seg2._index;\n      });\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var seg = segments[i],\n          valid = isValid(seg),\n          path = null,\n          finished = false,\n          closed = true,\n          branches = [],\n          branch,\n          visited,\n          handleIn;\n        if (valid && seg._path._overlapsOnly) {\n          var path1 = seg._path,\n            path2 = seg._intersection._segment._path;\n          if (path1.compare(path2)) {\n            if (path1.getArea()) paths.push(path1.clone(false));\n            visitPath(path1);\n            visitPath(path2);\n            valid = false;\n          }\n        }\n        while (valid) {\n          var first = !path,\n            crossings = getCrossingSegments(seg, first),\n            other = crossings.shift(),\n            finished = !first && (isStart(seg) || isStart(other)),\n            cross = !finished && other;\n          if (first) {\n            path = new Path(Item.NO_INSERT);\n            branch = null;\n          }\n          if (finished) {\n            if (seg.isFirst() || seg.isLast()) closed = seg._path._closed;\n            seg._visited = true;\n            break;\n          }\n          if (cross && branch) {\n            branches.push(branch);\n            branch = null;\n          }\n          if (!branch) {\n            if (cross) crossings.push(seg);\n            branch = {\n              start: path._segments.length,\n              crossings: crossings,\n              visited: visited = [],\n              handleIn: handleIn\n            };\n          }\n          if (cross) seg = other;\n          if (!isValid(seg)) {\n            path.removeSegments(branch.start);\n            for (var j = 0, k = visited.length; j < k; j++) {\n              visited[j]._visited = false;\n            }\n            visited.length = 0;\n            do {\n              seg = branch && branch.crossings.shift();\n              if (!seg || !seg._path) {\n                seg = null;\n                branch = branches.pop();\n                if (branch) {\n                  visited = branch.visited;\n                  handleIn = branch.handleIn;\n                }\n              }\n            } while (branch && !isValid(seg));\n            if (!seg) break;\n          }\n          var next = seg.getNext();\n          path.add(new Segment(seg._point, handleIn, next && seg._handleOut));\n          seg._visited = true;\n          visited.push(seg);\n          seg = next || seg._path.getFirstSegment();\n          handleIn = next && next._handleIn;\n        }\n        if (finished) {\n          if (closed) {\n            path.getFirstSegment().setHandleIn(handleIn);\n            path.setClosed(closed);\n          }\n          if (path.getArea() !== 0) {\n            paths.push(path);\n          }\n        }\n      }\n      return paths;\n    }\n    return {\n      _getWinding: function (point, dir, closed) {\n        return getWinding(point, this.getCurves(), dir, closed);\n      },\n      unite: function (path, options) {\n        return traceBoolean(this, path, 'unite', options);\n      },\n      intersect: function (path, options) {\n        return traceBoolean(this, path, 'intersect', options);\n      },\n      subtract: function (path, options) {\n        return traceBoolean(this, path, 'subtract', options);\n      },\n      exclude: function (path, options) {\n        return traceBoolean(this, path, 'exclude', options);\n      },\n      divide: function (path, options) {\n        return options && (options.trace == false || options.stroke) ? splitBoolean(this, path, 'divide') : createResult([this.subtract(path, options), this.intersect(path, options)], true, this, path, options);\n      },\n      resolveCrossings: function () {\n        var children = this._children,\n          paths = children || [this];\n        function hasOverlap(seg, path) {\n          var inter = seg && seg._intersection;\n          return inter && inter._overlap && inter._path === path;\n        }\n        var hasOverlaps = false,\n          hasCrossings = false,\n          intersections = this.getIntersections(null, function (inter) {\n            return inter.hasOverlap() && (hasOverlaps = true) || inter.isCrossing() && (hasCrossings = true);\n          }),\n          clearCurves = hasOverlaps && hasCrossings && [];\n        intersections = CurveLocation.expand(intersections);\n        if (hasOverlaps) {\n          var overlaps = divideLocations(intersections, function (inter) {\n            return inter.hasOverlap();\n          }, clearCurves);\n          for (var i = overlaps.length - 1; i >= 0; i--) {\n            var overlap = overlaps[i],\n              path = overlap._path,\n              seg = overlap._segment,\n              prev = seg.getPrevious(),\n              next = seg.getNext();\n            if (hasOverlap(prev, path) && hasOverlap(next, path)) {\n              seg.remove();\n              prev._handleOut._set(0, 0);\n              next._handleIn._set(0, 0);\n              if (prev !== seg && !prev.getCurve().hasLength()) {\n                next._handleIn.set(prev._handleIn);\n                prev.remove();\n              }\n            }\n          }\n        }\n        if (hasCrossings) {\n          divideLocations(intersections, hasOverlaps && function (inter) {\n            var curve1 = inter.getCurve(),\n              seg1 = inter.getSegment(),\n              other = inter._intersection,\n              curve2 = other._curve,\n              seg2 = other._segment;\n            if (curve1 && curve2 && curve1._path && curve2._path) return true;\n            if (seg1) seg1._intersection = null;\n            if (seg2) seg2._intersection = null;\n          }, clearCurves);\n          if (clearCurves) clearCurveHandles(clearCurves);\n          paths = tracePaths(Base.each(paths, function (path) {\n            Base.push(this, path._segments);\n          }, []));\n        }\n        var length = paths.length,\n          item;\n        if (length > 1 && children) {\n          if (paths !== children) this.setChildren(paths);\n          item = this;\n        } else if (length === 1 && !children) {\n          if (paths[0] !== this) this.setSegments(paths[0].removeSegments());\n          item = this;\n        }\n        if (!item) {\n          item = new CompoundPath(Item.NO_INSERT);\n          item.addChildren(paths);\n          item = item.reduce();\n          item.copyAttributes(this);\n          this.replaceWith(item);\n        }\n        return item;\n      },\n      reorient: function (nonZero, clockwise) {\n        var children = this._children;\n        if (children && children.length) {\n          this.setChildren(reorientPaths(this.removeChildren(), function (w) {\n            return !!(nonZero ? w : w & 1);\n          }, clockwise));\n        } else if (clockwise !== undefined) {\n          this.setClockwise(clockwise);\n        }\n        return this;\n      },\n      getInteriorPoint: function () {\n        var bounds = this.getBounds(),\n          point = bounds.getCenter(true);\n        if (!this.contains(point)) {\n          var curves = this.getCurves(),\n            y = point.y,\n            intercepts = [],\n            roots = [];\n          for (var i = 0, l = curves.length; i < l; i++) {\n            var v = curves[i].getValues(),\n              o0 = v[1],\n              o1 = v[3],\n              o2 = v[5],\n              o3 = v[7];\n            if (y >= min(o0, o1, o2, o3) && y <= max(o0, o1, o2, o3)) {\n              var monoCurves = Curve.getMonoCurves(v);\n              for (var j = 0, m = monoCurves.length; j < m; j++) {\n                var mv = monoCurves[j],\n                  mo0 = mv[1],\n                  mo3 = mv[7];\n                if (mo0 !== mo3 && (y >= mo0 && y <= mo3 || y >= mo3 && y <= mo0)) {\n                  var x = y === mo0 ? mv[0] : y === mo3 ? mv[6] : Curve.solveCubic(mv, 1, y, roots, 0, 1) === 1 ? Curve.getPoint(mv, roots[0]).x : (mv[0] + mv[6]) / 2;\n                  intercepts.push(x);\n                }\n              }\n            }\n          }\n          if (intercepts.length > 1) {\n            intercepts.sort(function (a, b) {\n              return a - b;\n            });\n            point.x = (intercepts[0] + intercepts[1]) / 2;\n          }\n        }\n        return point;\n      }\n    };\n  }());\n  var PathFlattener = Base.extend({\n    _class: 'PathFlattener',\n    initialize: function (path, flatness, maxRecursion, ignoreStraight, matrix) {\n      var curves = [],\n        parts = [],\n        length = 0,\n        minSpan = 1 / (maxRecursion || 32),\n        segments = path._segments,\n        segment1 = segments[0],\n        segment2;\n      function addCurve(segment1, segment2) {\n        var curve = Curve.getValues(segment1, segment2, matrix);\n        curves.push(curve);\n        computeParts(curve, segment1._index, 0, 1);\n      }\n      function computeParts(curve, index, t1, t2) {\n        if (t2 - t1 > minSpan && !(ignoreStraight && Curve.isStraight(curve)) && !Curve.isFlatEnough(curve, flatness || 0.25)) {\n          var halves = Curve.subdivide(curve, 0.5),\n            tMid = (t1 + t2) / 2;\n          computeParts(halves[0], index, t1, tMid);\n          computeParts(halves[1], index, tMid, t2);\n        } else {\n          var dx = curve[6] - curve[0],\n            dy = curve[7] - curve[1],\n            dist = Math.sqrt(dx * dx + dy * dy);\n          if (dist > 0) {\n            length += dist;\n            parts.push({\n              offset: length,\n              curve: curve,\n              index: index,\n              time: t2\n            });\n          }\n        }\n      }\n      for (var i = 1, l = segments.length; i < l; i++) {\n        segment2 = segments[i];\n        addCurve(segment1, segment2);\n        segment1 = segment2;\n      }\n      if (path._closed) addCurve(segment2 || segment1, segments[0]);\n      this.curves = curves;\n      this.parts = parts;\n      this.length = length;\n      this.index = 0;\n    },\n    _get: function (offset) {\n      var parts = this.parts,\n        length = parts.length,\n        start,\n        i,\n        j = this.index;\n      for (;;) {\n        i = j;\n        if (!j || parts[--j].offset < offset) break;\n      }\n      for (; i < length; i++) {\n        var part = parts[i];\n        if (part.offset >= offset) {\n          this.index = i;\n          var prev = parts[i - 1],\n            prevTime = prev && prev.index === part.index ? prev.time : 0,\n            prevOffset = prev ? prev.offset : 0;\n          return {\n            index: part.index,\n            time: prevTime + (part.time - prevTime) * (offset - prevOffset) / (part.offset - prevOffset)\n          };\n        }\n      }\n      return {\n        index: parts[length - 1].index,\n        time: 1\n      };\n    },\n    drawPart: function (ctx, from, to) {\n      var start = this._get(from),\n        end = this._get(to);\n      for (var i = start.index, l = end.index; i <= l; i++) {\n        var curve = Curve.getPart(this.curves[i], i === start.index ? start.time : 0, i === end.index ? end.time : 1);\n        if (i === start.index) ctx.moveTo(curve[0], curve[1]);\n        ctx.bezierCurveTo.apply(ctx, curve.slice(2));\n      }\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var param = this._get(offset);\n      return Curve[name](this.curves[param.index], param.time);\n    };\n  }, {}));\n  var PathFitter = Base.extend({\n    initialize: function (path) {\n      var points = this.points = [],\n        segments = path._segments,\n        closed = path._closed;\n      for (var i = 0, prev, l = segments.length; i < l; i++) {\n        var point = segments[i].point;\n        if (!prev || !prev.equals(point)) {\n          points.push(prev = point.clone());\n        }\n      }\n      if (closed) {\n        points.unshift(points[points.length - 1]);\n        points.push(points[1]);\n      }\n      this.closed = closed;\n    },\n    fit: function (error) {\n      var points = this.points,\n        length = points.length,\n        segments = null;\n      if (length > 0) {\n        segments = [new Segment(points[0])];\n        if (length > 1) {\n          this.fitCubic(segments, error, 0, length - 1, points[1].subtract(points[0]), points[length - 2].subtract(points[length - 1]));\n          if (this.closed) {\n            segments.shift();\n            segments.pop();\n          }\n        }\n      }\n      return segments;\n    },\n    fitCubic: function (segments, error, first, last, tan1, tan2) {\n      var points = this.points;\n      if (last - first === 1) {\n        var pt1 = points[first],\n          pt2 = points[last],\n          dist = pt1.getDistance(pt2) / 3;\n        this.addCurve(segments, [pt1, pt1.add(tan1.normalize(dist)), pt2.add(tan2.normalize(dist)), pt2]);\n        return;\n      }\n      var uPrime = this.chordLengthParameterize(first, last),\n        maxError = Math.max(error, error * error),\n        split,\n        parametersInOrder = true;\n      for (var i = 0; i <= 4; i++) {\n        var curve = this.generateBezier(first, last, uPrime, tan1, tan2);\n        var max = this.findMaxError(first, last, curve, uPrime);\n        if (max.error < error && parametersInOrder) {\n          this.addCurve(segments, curve);\n          return;\n        }\n        split = max.index;\n        if (max.error >= maxError) break;\n        parametersInOrder = this.reparameterize(first, last, uPrime, curve);\n        maxError = max.error;\n      }\n      var tanCenter = points[split - 1].subtract(points[split + 1]);\n      this.fitCubic(segments, error, first, split, tan1, tanCenter);\n      this.fitCubic(segments, error, split, last, tanCenter.negate(), tan2);\n    },\n    addCurve: function (segments, curve) {\n      var prev = segments[segments.length - 1];\n      prev.setHandleOut(curve[1].subtract(curve[0]));\n      segments.push(new Segment(curve[3], curve[2].subtract(curve[3])));\n    },\n    generateBezier: function (first, last, uPrime, tan1, tan2) {\n      var epsilon = 1e-12,\n        abs = Math.abs,\n        points = this.points,\n        pt1 = points[first],\n        pt2 = points[last],\n        C = [[0, 0], [0, 0]],\n        X = [0, 0];\n      for (var i = 0, l = last - first + 1; i < l; i++) {\n        var u = uPrime[i],\n          t = 1 - u,\n          b = 3 * u * t,\n          b0 = t * t * t,\n          b1 = b * t,\n          b2 = b * u,\n          b3 = u * u * u,\n          a1 = tan1.normalize(b1),\n          a2 = tan2.normalize(b2),\n          tmp = points[first + i].subtract(pt1.multiply(b0 + b1)).subtract(pt2.multiply(b2 + b3));\n        C[0][0] += a1.dot(a1);\n        C[0][1] += a1.dot(a2);\n        C[1][0] = C[0][1];\n        C[1][1] += a2.dot(a2);\n        X[0] += a1.dot(tmp);\n        X[1] += a2.dot(tmp);\n      }\n      var detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n        alpha1,\n        alpha2;\n      if (abs(detC0C1) > epsilon) {\n        var detC0X = C[0][0] * X[1] - C[1][0] * X[0],\n          detXC1 = X[0] * C[1][1] - X[1] * C[0][1];\n        alpha1 = detXC1 / detC0C1;\n        alpha2 = detC0X / detC0C1;\n      } else {\n        var c0 = C[0][0] + C[0][1],\n          c1 = C[1][0] + C[1][1];\n        alpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0 : abs(c1) > epsilon ? X[1] / c1 : 0;\n      }\n      var segLength = pt2.getDistance(pt1),\n        eps = epsilon * segLength,\n        handle1,\n        handle2;\n      if (alpha1 < eps || alpha2 < eps) {\n        alpha1 = alpha2 = segLength / 3;\n      } else {\n        var line = pt2.subtract(pt1);\n        handle1 = tan1.normalize(alpha1);\n        handle2 = tan2.normalize(alpha2);\n        if (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n          alpha1 = alpha2 = segLength / 3;\n          handle1 = handle2 = null;\n        }\n      }\n      return [pt1, pt1.add(handle1 || tan1.normalize(alpha1)), pt2.add(handle2 || tan2.normalize(alpha2)), pt2];\n    },\n    reparameterize: function (first, last, u, curve) {\n      for (var i = first; i <= last; i++) {\n        u[i - first] = this.findRoot(curve, this.points[i], u[i - first]);\n      }\n      for (var i = 1, l = u.length; i < l; i++) {\n        if (u[i] <= u[i - 1]) return false;\n      }\n      return true;\n    },\n    findRoot: function (curve, point, u) {\n      var curve1 = [],\n        curve2 = [];\n      for (var i = 0; i <= 2; i++) {\n        curve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n      }\n      for (var i = 0; i <= 1; i++) {\n        curve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n      }\n      var pt = this.evaluate(3, curve, u),\n        pt1 = this.evaluate(2, curve1, u),\n        pt2 = this.evaluate(1, curve2, u),\n        diff = pt.subtract(point),\n        df = pt1.dot(pt1) + diff.dot(pt2);\n      return Numerical.isMachineZero(df) ? u : u - diff.dot(pt1) / df;\n    },\n    evaluate: function (degree, curve, t) {\n      var tmp = curve.slice();\n      for (var i = 1; i <= degree; i++) {\n        for (var j = 0; j <= degree - i; j++) {\n          tmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n        }\n      }\n      return tmp[0];\n    },\n    chordLengthParameterize: function (first, last) {\n      var u = [0];\n      for (var i = first + 1; i <= last; i++) {\n        u[i - first] = u[i - first - 1] + this.points[i].getDistance(this.points[i - 1]);\n      }\n      for (var i = 1, m = last - first; i <= m; i++) {\n        u[i] /= u[m];\n      }\n      return u;\n    },\n    findMaxError: function (first, last, curve, u) {\n      var index = Math.floor((last - first + 1) / 2),\n        maxDist = 0;\n      for (var i = first + 1; i < last; i++) {\n        var P = this.evaluate(3, curve, u[i - first]);\n        var v = P.subtract(this.points[i]);\n        var dist = v.x * v.x + v.y * v.y;\n        if (dist >= maxDist) {\n          maxDist = dist;\n          index = i;\n        }\n      }\n      return {\n        error: maxDist,\n        index: index\n      };\n    }\n  });\n  var TextItem = Item.extend({\n    _class: 'TextItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _serializeFields: {\n      content: null\n    },\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    initialize: function TextItem(arg) {\n      this._content = '';\n      this._lines = [];\n      var hasProps = arg && Base.isPlainObject(arg) && arg.x === undefined && arg.y === undefined;\n      this._initialize(hasProps && arg, !hasProps && Point.read(arguments));\n    },\n    _equals: function (item) {\n      return this._content === item._content;\n    },\n    copyContent: function (source) {\n      this.setContent(source._content);\n    },\n    getContent: function () {\n      return this._content;\n    },\n    setContent: function (content) {\n      this._content = '' + content;\n      this._lines = this._content.split(/\\r\\n|\\n|\\r/mg);\n      this._changed(521);\n    },\n    isEmpty: function () {\n      return !this._content;\n    },\n    getCharacterStyle: '#getStyle',\n    setCharacterStyle: '#setStyle',\n    getParagraphStyle: '#getStyle',\n    setParagraphStyle: '#setStyle'\n  });\n  var PointText = TextItem.extend({\n    _class: 'PointText',\n    initialize: function PointText() {\n      TextItem.apply(this, arguments);\n    },\n    getPoint: function () {\n      var point = this._matrix.getTranslation();\n      return new LinkedPoint(point.x, point.y, this, 'setPoint');\n    },\n    setPoint: function () {\n      var point = Point.read(arguments);\n      this.translate(point.subtract(this._matrix.getTranslation()));\n    },\n    _draw: function (ctx, param, viewMatrix) {\n      if (!this._content) return;\n      this._setStyles(ctx, param, viewMatrix);\n      var lines = this._lines,\n        style = this._style,\n        hasFill = style.hasFill(),\n        hasStroke = style.hasStroke(),\n        leading = style.getLeading(),\n        shadowColor = ctx.shadowColor;\n      ctx.font = style.getFontStyle();\n      ctx.textAlign = style.getJustification();\n      for (var i = 0, l = lines.length; i < l; i++) {\n        ctx.shadowColor = shadowColor;\n        var line = lines[i];\n        if (hasFill) {\n          ctx.fillText(line, 0, 0);\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n        if (hasStroke) ctx.strokeText(line, 0, 0);\n        ctx.translate(0, leading);\n      }\n    },\n    _getBounds: function (matrix, options) {\n      var style = this._style,\n        lines = this._lines,\n        numLines = lines.length,\n        justification = style.getJustification(),\n        leading = style.getLeading(),\n        width = this.getView().getTextWidth(style.getFontStyle(), lines),\n        x = 0;\n      if (justification !== 'left') x -= width / (justification === 'center' ? 2 : 1);\n      var rect = new Rectangle(x, numLines ? -0.75 * leading : 0, width, numLines * leading);\n      return matrix ? matrix._transformBounds(rect, rect) : rect;\n    }\n  });\n  var Color = Base.extend(new function () {\n    var types = {\n      gray: ['gray'],\n      rgb: ['red', 'green', 'blue'],\n      hsb: ['hue', 'saturation', 'brightness'],\n      hsl: ['hue', 'saturation', 'lightness'],\n      gradient: ['gradient', 'origin', 'destination', 'highlight']\n    };\n    var componentParsers = {},\n      namedColors = {\n        transparent: [0, 0, 0, 0]\n      },\n      colorCtx;\n    function fromCSS(string) {\n      var match = string.match(/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i) || string.match(/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i),\n        type = 'rgb',\n        components;\n      if (match) {\n        var amount = match[4] ? 4 : 3;\n        components = new Array(amount);\n        for (var i = 0; i < amount; i++) {\n          var value = match[i + 1];\n          components[i] = parseInt(value.length == 1 ? value + value : value, 16) / 255;\n        }\n      } else if (match = string.match(/^(rgb|hsl)a?\\((.*)\\)$/)) {\n        type = match[1];\n        components = match[2].trim().split(/[,\\s]+/g);\n        var isHSL = type === 'hsl';\n        for (var i = 0, l = Math.min(components.length, 4); i < l; i++) {\n          var component = components[i];\n          var value = parseFloat(component);\n          if (isHSL) {\n            if (i === 0) {\n              var unit = component.match(/([a-z]*)$/)[1];\n              value *= {\n                turn: 360,\n                rad: 180 / Math.PI,\n                grad: 0.9\n              }[unit] || 1;\n            } else if (i < 3) {\n              value /= 100;\n            }\n          } else if (i < 3) {\n            value /= /%$/.test(component) ? 100 : 255;\n          }\n          components[i] = value;\n        }\n      } else {\n        var color = namedColors[string];\n        if (!color) {\n          if (window) {\n            if (!colorCtx) {\n              colorCtx = CanvasProvider.getContext(1, 1, {\n                willReadFrequently: true\n              });\n              colorCtx.globalCompositeOperation = 'copy';\n            }\n            colorCtx.fillStyle = 'rgba(0,0,0,0)';\n            colorCtx.fillStyle = string;\n            colorCtx.fillRect(0, 0, 1, 1);\n            var data = colorCtx.getImageData(0, 0, 1, 1).data;\n            color = namedColors[string] = [data[0] / 255, data[1] / 255, data[2] / 255];\n          } else {\n            color = [0, 0, 0];\n          }\n        }\n        components = color.slice();\n      }\n      return [type, components];\n    }\n    var hsbIndices = [[0, 3, 1], [2, 0, 1], [1, 0, 3], [1, 2, 0], [3, 1, 0], [0, 1, 2]];\n    var converters = {\n      'rgb-hsb': function (r, g, b) {\n        var max = Math.max(r, g, b),\n          min = Math.min(r, g, b),\n          delta = max - min,\n          h = delta === 0 ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60;\n        return [h, max === 0 ? 0 : delta / max, max];\n      },\n      'hsb-rgb': function (h, s, b) {\n        h = (h / 60 % 6 + 6) % 6;\n        var i = Math.floor(h),\n          f = h - i,\n          i = hsbIndices[i],\n          v = [b, b * (1 - s), b * (1 - s * f), b * (1 - s * (1 - f))];\n        return [v[i[0]], v[i[1]], v[i[2]]];\n      },\n      'rgb-hsl': function (r, g, b) {\n        var max = Math.max(r, g, b),\n          min = Math.min(r, g, b),\n          delta = max - min,\n          achromatic = delta === 0,\n          h = achromatic ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60,\n          l = (max + min) / 2,\n          s = achromatic ? 0 : l < 0.5 ? delta / (max + min) : delta / (2 - max - min);\n        return [h, s, l];\n      },\n      'hsl-rgb': function (h, s, l) {\n        h = (h / 360 % 1 + 1) % 1;\n        if (s === 0) return [l, l, l];\n        var t3s = [h + 1 / 3, h, h - 1 / 3],\n          t2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n          t1 = 2 * l - t2,\n          c = [];\n        for (var i = 0; i < 3; i++) {\n          var t3 = t3s[i];\n          if (t3 < 0) t3 += 1;\n          if (t3 > 1) t3 -= 1;\n          c[i] = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 : 2 * t3 < 1 ? t2 : 3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 : t1;\n        }\n        return c;\n      },\n      'rgb-gray': function (r, g, b) {\n        return [r * 0.2989 + g * 0.587 + b * 0.114];\n      },\n      'gray-rgb': function (g) {\n        return [g, g, g];\n      },\n      'gray-hsb': function (g) {\n        return [0, 0, g];\n      },\n      'gray-hsl': function (g) {\n        return [0, 0, g];\n      },\n      'gradient-rgb': function () {\n        return [];\n      },\n      'rgb-gradient': function () {\n        return [];\n      }\n    };\n    return Base.each(types, function (properties, type) {\n      componentParsers[type] = [];\n      Base.each(properties, function (name, index) {\n        var part = Base.capitalize(name),\n          hasOverlap = /^(hue|saturation)$/.test(name),\n          parser = componentParsers[type][index] = type === 'gradient' ? name === 'gradient' ? function (value) {\n            var current = this._components[0];\n            value = Gradient.read(Array.isArray(value) ? value : arguments, 0, {\n              readNull: true\n            });\n            if (current !== value) {\n              if (current) current._removeOwner(this);\n              if (value) value._addOwner(this);\n            }\n            return value;\n          } : function () {\n            return Point.read(arguments, 0, {\n              readNull: name === 'highlight',\n              clone: true\n            });\n          } : function (value) {\n            return value == null || isNaN(value) ? 0 : +value;\n          };\n        this['get' + part] = function () {\n          return this._type === type || hasOverlap && /^hs[bl]$/.test(this._type) ? this._components[index] : this._convert(type)[index];\n        };\n        this['set' + part] = function (value) {\n          if (this._type !== type && !(hasOverlap && /^hs[bl]$/.test(this._type))) {\n            this._components = this._convert(type);\n            this._properties = types[type];\n            this._type = type;\n          }\n          this._components[index] = parser.call(this, value);\n          this._changed();\n        };\n      }, this);\n    }, {\n      _class: 'Color',\n      _readIndex: true,\n      initialize: function Color(arg) {\n        var args = arguments,\n          reading = this.__read,\n          read = 0,\n          type,\n          components,\n          alpha,\n          values;\n        if (Array.isArray(arg)) {\n          args = arg;\n          arg = args[0];\n        }\n        var argType = arg != null && typeof arg;\n        if (argType === 'string' && arg in types) {\n          type = arg;\n          arg = args[1];\n          if (Array.isArray(arg)) {\n            components = arg;\n            alpha = args[2];\n          } else {\n            if (reading) read = 1;\n            args = Base.slice(args, 1);\n            argType = typeof arg;\n          }\n        }\n        if (!components) {\n          values = argType === 'number' ? args : argType === 'object' && arg.length != null ? arg : null;\n          if (values) {\n            if (!type) type = values.length >= 3 ? 'rgb' : 'gray';\n            var length = types[type].length;\n            alpha = values[length];\n            if (reading) {\n              read += values === arguments ? length + (alpha != null ? 1 : 0) : 1;\n            }\n            if (values.length > length) values = Base.slice(values, 0, length);\n          } else if (argType === 'string') {\n            var converted = fromCSS(arg);\n            type = converted[0];\n            components = converted[1];\n            if (components.length === 4) {\n              alpha = components[3];\n              components.length--;\n            }\n          } else if (argType === 'object') {\n            if (arg.constructor === Color) {\n              type = arg._type;\n              components = arg._components.slice();\n              alpha = arg._alpha;\n              if (type === 'gradient') {\n                for (var i = 1, l = components.length; i < l; i++) {\n                  var point = components[i];\n                  if (point) components[i] = point.clone();\n                }\n              }\n            } else if (arg.constructor === Gradient) {\n              type = 'gradient';\n              values = args;\n            } else {\n              type = 'hue' in arg ? 'lightness' in arg ? 'hsl' : 'hsb' : 'gradient' in arg || 'stops' in arg || 'radial' in arg ? 'gradient' : 'gray' in arg ? 'gray' : 'rgb';\n              var properties = types[type],\n                parsers = componentParsers[type];\n              this._components = components = [];\n              for (var i = 0, l = properties.length; i < l; i++) {\n                var value = arg[properties[i]];\n                if (value == null && !i && type === 'gradient' && 'stops' in arg) {\n                  value = {\n                    stops: arg.stops,\n                    radial: arg.radial\n                  };\n                }\n                value = parsers[i].call(this, value);\n                if (value != null) components[i] = value;\n              }\n              alpha = arg.alpha;\n            }\n          }\n          if (reading && type) read = 1;\n        }\n        this._type = type || 'rgb';\n        if (!components) {\n          this._components = components = [];\n          var parsers = componentParsers[this._type];\n          for (var i = 0, l = parsers.length; i < l; i++) {\n            var value = parsers[i].call(this, values && values[i]);\n            if (value != null) components[i] = value;\n          }\n        }\n        this._components = components;\n        this._properties = types[this._type];\n        this._alpha = alpha;\n        if (reading) this.__read = read;\n        return this;\n      },\n      set: '#initialize',\n      _serialize: function (options, dictionary) {\n        var components = this.getComponents();\n        return Base.serialize(/^(gray|rgb)$/.test(this._type) ? components : [this._type].concat(components), options, true, dictionary);\n      },\n      _changed: function () {\n        this._canvasStyle = null;\n        if (this._owner) {\n          if (this._setter) {\n            this._owner[this._setter](this);\n          } else {\n            this._owner._changed(129);\n          }\n        }\n      },\n      _convert: function (type) {\n        var converter;\n        return this._type === type ? this._components.slice() : (converter = converters[this._type + '-' + type]) ? converter.apply(this, this._components) : converters['rgb-' + type].apply(this, converters[this._type + '-rgb'].apply(this, this._components));\n      },\n      convert: function (type) {\n        return new Color(type, this._convert(type), this._alpha);\n      },\n      getType: function () {\n        return this._type;\n      },\n      setType: function (type) {\n        this._components = this._convert(type);\n        this._properties = types[type];\n        this._type = type;\n      },\n      getComponents: function () {\n        var components = this._components.slice();\n        if (this._alpha != null) components.push(this._alpha);\n        return components;\n      },\n      getAlpha: function () {\n        return this._alpha != null ? this._alpha : 1;\n      },\n      setAlpha: function (alpha) {\n        this._alpha = alpha == null ? null : Math.min(Math.max(alpha, 0), 1);\n        this._changed();\n      },\n      hasAlpha: function () {\n        return this._alpha != null;\n      },\n      equals: function (color) {\n        var col = Base.isPlainValue(color, true) ? Color.read(arguments) : color;\n        return col === this || col && this._class === col._class && this._type === col._type && this.getAlpha() === col.getAlpha() && Base.equals(this._components, col._components) || false;\n      },\n      toString: function () {\n        var properties = this._properties,\n          parts = [],\n          isGradient = this._type === 'gradient',\n          f = Formatter.instance;\n        for (var i = 0, l = properties.length; i < l; i++) {\n          var value = this._components[i];\n          if (value != null) parts.push(properties[i] + ': ' + (isGradient ? value : f.number(value)));\n        }\n        if (this._alpha != null) parts.push('alpha: ' + f.number(this._alpha));\n        return '{ ' + parts.join(', ') + ' }';\n      },\n      toCSS: function (hex) {\n        var components = this._convert('rgb'),\n          alpha = hex || this._alpha == null ? 1 : this._alpha;\n        function convert(val) {\n          return Math.round((val < 0 ? 0 : val > 1 ? 1 : val) * 255);\n        }\n        components = [convert(components[0]), convert(components[1]), convert(components[2])];\n        if (alpha < 1) components.push(alpha < 0 ? 0 : alpha);\n        return hex ? '#' + ((1 << 24) + (components[0] << 16) + (components[1] << 8) + components[2]).toString(16).slice(1) : (components.length == 4 ? 'rgba(' : 'rgb(') + components.join(',') + ')';\n      },\n      toCanvasStyle: function (ctx, matrix) {\n        if (this._canvasStyle) return this._canvasStyle;\n        if (this._type !== 'gradient') return this._canvasStyle = this.toCSS();\n        var components = this._components,\n          gradient = components[0],\n          stops = gradient._stops,\n          origin = components[1],\n          destination = components[2],\n          highlight = components[3],\n          inverse = matrix && matrix.inverted(),\n          canvasGradient;\n        if (inverse) {\n          origin = inverse._transformPoint(origin);\n          destination = inverse._transformPoint(destination);\n          if (highlight) highlight = inverse._transformPoint(highlight);\n        }\n        if (gradient._radial) {\n          var radius = destination.getDistance(origin);\n          if (highlight) {\n            var vector = highlight.subtract(origin);\n            if (vector.getLength() > radius) highlight = origin.add(vector.normalize(radius - 0.1));\n          }\n          var start = highlight || origin;\n          canvasGradient = ctx.createRadialGradient(start.x, start.y, 0, origin.x, origin.y, radius);\n        } else {\n          canvasGradient = ctx.createLinearGradient(origin.x, origin.y, destination.x, destination.y);\n        }\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n            offset = stop._offset;\n          canvasGradient.addColorStop(offset == null ? i / (l - 1) : offset, stop._color.toCanvasStyle());\n        }\n        return this._canvasStyle = canvasGradient;\n      },\n      transform: function (matrix) {\n        if (this._type === 'gradient') {\n          var components = this._components;\n          for (var i = 1, l = components.length; i < l; i++) {\n            var point = components[i];\n            matrix._transformPoint(point, point, true);\n          }\n          this._changed();\n        }\n      },\n      statics: {\n        _types: types,\n        random: function () {\n          var random = Math.random;\n          return new Color(random(), random(), random());\n        },\n        _setOwner: function (color, owner, setter) {\n          if (color) {\n            if (color._owner && owner && color._owner !== owner) {\n              color = color.clone();\n            }\n            if (!color._owner ^ !owner) {\n              color._owner = owner || null;\n              color._setter = setter || null;\n            }\n          }\n          return color;\n        }\n      }\n    });\n  }(), new function () {\n    var operators = {\n      add: function (a, b) {\n        return a + b;\n      },\n      subtract: function (a, b) {\n        return a - b;\n      },\n      multiply: function (a, b) {\n        return a * b;\n      },\n      divide: function (a, b) {\n        return a / b;\n      }\n    };\n    return Base.each(operators, function (operator, name) {\n      this[name] = function (color) {\n        color = Color.read(arguments);\n        var type = this._type,\n          components1 = this._components,\n          components2 = color._convert(type);\n        for (var i = 0, l = components1.length; i < l; i++) components2[i] = operator(components1[i], components2[i]);\n        return new Color(type, components2, this._alpha != null ? operator(this._alpha, color.getAlpha()) : null);\n      };\n    }, {});\n  }());\n  var Gradient = Base.extend({\n    _class: 'Gradient',\n    initialize: function Gradient(stops, radial) {\n      this._id = UID.get();\n      if (stops && Base.isPlainObject(stops)) {\n        this.set(stops);\n        stops = radial = null;\n      }\n      if (this._stops == null) {\n        this.setStops(stops || ['white', 'black']);\n      }\n      if (this._radial == null) {\n        this.setRadial(typeof radial === 'string' && radial === 'radial' || radial || false);\n      }\n    },\n    _serialize: function (options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._stops, this._radial], options, true, dictionary);\n      });\n    },\n    _changed: function () {\n      for (var i = 0, l = this._owners && this._owners.length; i < l; i++) {\n        this._owners[i]._changed();\n      }\n    },\n    _addOwner: function (color) {\n      if (!this._owners) this._owners = [];\n      this._owners.push(color);\n    },\n    _removeOwner: function (color) {\n      var index = this._owners ? this._owners.indexOf(color) : -1;\n      if (index != -1) {\n        this._owners.splice(index, 1);\n        if (!this._owners.length) this._owners = undefined;\n      }\n    },\n    clone: function () {\n      var stops = [];\n      for (var i = 0, l = this._stops.length; i < l; i++) {\n        stops[i] = this._stops[i].clone();\n      }\n      return new Gradient(stops, this._radial);\n    },\n    getStops: function () {\n      return this._stops;\n    },\n    setStops: function (stops) {\n      if (stops.length < 2) {\n        throw new Error('Gradient stop list needs to contain at least two stops.');\n      }\n      var _stops = this._stops;\n      if (_stops) {\n        for (var i = 0, l = _stops.length; i < l; i++) _stops[i]._owner = undefined;\n      }\n      _stops = this._stops = GradientStop.readList(stops, 0, {\n        clone: true\n      });\n      for (var i = 0, l = _stops.length; i < l; i++) _stops[i]._owner = this;\n      this._changed();\n    },\n    getRadial: function () {\n      return this._radial;\n    },\n    setRadial: function (radial) {\n      this._radial = radial;\n      this._changed();\n    },\n    equals: function (gradient) {\n      if (gradient === this) return true;\n      if (gradient && this._class === gradient._class) {\n        var stops1 = this._stops,\n          stops2 = gradient._stops,\n          length = stops1.length;\n        if (length === stops2.length) {\n          for (var i = 0; i < length; i++) {\n            if (!stops1[i].equals(stops2[i])) return false;\n          }\n          return true;\n        }\n      }\n      return false;\n    }\n  });\n  var GradientStop = Base.extend({\n    _class: 'GradientStop',\n    initialize: function GradientStop(arg0, arg1) {\n      var color = arg0,\n        offset = arg1;\n      if (typeof arg0 === 'object' && arg1 === undefined) {\n        if (Array.isArray(arg0) && typeof arg0[0] !== 'number') {\n          color = arg0[0];\n          offset = arg0[1];\n        } else if ('color' in arg0 || 'offset' in arg0 || 'rampPoint' in arg0) {\n          color = arg0.color;\n          offset = arg0.offset || arg0.rampPoint || 0;\n        }\n      }\n      this.setColor(color);\n      this.setOffset(offset);\n    },\n    clone: function () {\n      return new GradientStop(this._color.clone(), this._offset);\n    },\n    _serialize: function (options, dictionary) {\n      var color = this._color,\n        offset = this._offset;\n      return Base.serialize(offset == null ? [color] : [color, offset], options, true, dictionary);\n    },\n    _changed: function () {\n      if (this._owner) this._owner._changed(129);\n    },\n    getOffset: function () {\n      return this._offset;\n    },\n    setOffset: function (offset) {\n      this._offset = offset;\n      this._changed();\n    },\n    getRampPoint: '#getOffset',\n    setRampPoint: '#setOffset',\n    getColor: function () {\n      return this._color;\n    },\n    setColor: function () {\n      Color._setOwner(this._color, null);\n      this._color = Color._setOwner(Color.read(arguments, 0), this, 'setColor');\n      this._changed();\n    },\n    equals: function (stop) {\n      return stop === this || stop && this._class === stop._class && this._color.equals(stop._color) && this._offset == stop._offset || false;\n    }\n  });\n  var Style = Base.extend(new function () {\n    var itemDefaults = {\n        fillColor: null,\n        fillRule: 'nonzero',\n        strokeColor: null,\n        strokeWidth: 1,\n        strokeCap: 'butt',\n        strokeJoin: 'miter',\n        strokeScaling: true,\n        miterLimit: 10,\n        dashOffset: 0,\n        dashArray: [],\n        shadowColor: null,\n        shadowBlur: 0,\n        shadowOffset: new Point(),\n        selectedColor: null\n      },\n      groupDefaults = Base.set({}, itemDefaults, {\n        fontFamily: 'sans-serif',\n        fontWeight: 'normal',\n        fontSize: 12,\n        leading: null,\n        justification: 'left'\n      }),\n      textDefaults = Base.set({}, groupDefaults, {\n        fillColor: new Color()\n      }),\n      flags = {\n        strokeWidth: 193,\n        strokeCap: 193,\n        strokeJoin: 193,\n        strokeScaling: 201,\n        miterLimit: 193,\n        fontFamily: 9,\n        fontWeight: 9,\n        fontSize: 9,\n        font: 9,\n        leading: 9,\n        justification: 9\n      },\n      item = {\n        beans: true\n      },\n      fields = {\n        _class: 'Style',\n        beans: true,\n        initialize: function Style(style, _owner, _project) {\n          this._values = {};\n          this._owner = _owner;\n          this._project = _owner && _owner._project || _project || paper.project;\n          this._defaults = !_owner || _owner instanceof Group ? groupDefaults : _owner instanceof TextItem ? textDefaults : itemDefaults;\n          if (style) this.set(style);\n        }\n      };\n    Base.each(groupDefaults, function (value, key) {\n      var isColor = /Color$/.test(key),\n        isPoint = key === 'shadowOffset',\n        part = Base.capitalize(key),\n        flag = flags[key],\n        set = 'set' + part,\n        get = 'get' + part;\n      fields[set] = function (value) {\n        var owner = this._owner,\n          children = owner && owner._children,\n          applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath);\n        if (applyToChildren) {\n          for (var i = 0, l = children.length; i < l; i++) children[i]._style[set](value);\n        }\n        if ((key === 'selectedColor' || !applyToChildren) && key in this._defaults) {\n          var old = this._values[key];\n          if (old !== value) {\n            if (isColor) {\n              if (old) {\n                Color._setOwner(old, null);\n                old._canvasStyle = null;\n              }\n              if (value && value.constructor === Color) {\n                value = Color._setOwner(value, owner, applyToChildren && set);\n              }\n            }\n            this._values[key] = value;\n            if (owner) owner._changed(flag || 129);\n          }\n        }\n      };\n      fields[get] = function (_dontMerge) {\n        var owner = this._owner,\n          children = owner && owner._children,\n          applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath),\n          value;\n        if (applyToChildren && !_dontMerge) {\n          for (var i = 0, l = children.length; i < l; i++) {\n            var childValue = children[i]._style[get]();\n            if (!i) {\n              value = childValue;\n            } else if (!Base.equals(value, childValue)) {\n              return undefined;\n            }\n          }\n        } else if (key in this._defaults) {\n          var value = this._values[key];\n          if (value === undefined) {\n            value = this._defaults[key];\n            if (value && value.clone) {\n              value = value.clone();\n            }\n          } else {\n            var ctor = isColor ? Color : isPoint ? Point : null;\n            if (ctor && !(value && value.constructor === ctor)) {\n              this._values[key] = value = ctor.read([value], 0, {\n                readNull: true,\n                clone: true\n              });\n            }\n          }\n        }\n        if (value && isColor) {\n          value = Color._setOwner(value, owner, applyToChildren && set);\n        }\n        return value;\n      };\n      item[get] = function (_dontMerge) {\n        return this._style[get](_dontMerge);\n      };\n      item[set] = function (value) {\n        this._style[set](value);\n      };\n    });\n    Base.each({\n      Font: 'FontFamily',\n      WindingRule: 'FillRule'\n    }, function (value, key) {\n      var get = 'get' + key,\n        set = 'set' + key;\n      fields[get] = item[get] = '#get' + value;\n      fields[set] = item[set] = '#set' + value;\n    });\n    Item.inject(item);\n    return fields;\n  }(), {\n    set: function (style) {\n      var isStyle = style instanceof Style,\n        values = isStyle ? style._values : style;\n      if (values) {\n        for (var key in values) {\n          if (key in this._defaults) {\n            var value = values[key];\n            this[key] = value && isStyle && value.clone ? value.clone() : value;\n          }\n        }\n      }\n    },\n    equals: function (style) {\n      function compare(style1, style2, secondary) {\n        var values1 = style1._values,\n          values2 = style2._values,\n          defaults2 = style2._defaults;\n        for (var key in values1) {\n          var value1 = values1[key],\n            value2 = values2[key];\n          if (!(secondary && key in values2) && !Base.equals(value1, value2 === undefined ? defaults2[key] : value2)) return false;\n        }\n        return true;\n      }\n      return style === this || style && this._class === style._class && compare(this, style) && compare(style, this, true) || false;\n    },\n    _dispose: function () {\n      var color;\n      color = this.getFillColor();\n      if (color) color._canvasStyle = null;\n      color = this.getStrokeColor();\n      if (color) color._canvasStyle = null;\n      color = this.getShadowColor();\n      if (color) color._canvasStyle = null;\n    },\n    hasFill: function () {\n      var color = this.getFillColor();\n      return !!color && color.alpha > 0;\n    },\n    hasStroke: function () {\n      var color = this.getStrokeColor();\n      return !!color && color.alpha > 0 && this.getStrokeWidth() > 0;\n    },\n    hasShadow: function () {\n      var color = this.getShadowColor();\n      return !!color && color.alpha > 0 && (this.getShadowBlur() > 0 || !this.getShadowOffset().isZero());\n    },\n    getView: function () {\n      return this._project._view;\n    },\n    getFontStyle: function () {\n      var fontSize = this.getFontSize();\n      return this.getFontWeight() + ' ' + fontSize + (/[a-z]/i.test(fontSize + '') ? ' ' : 'px ') + this.getFontFamily();\n    },\n    getFont: '#getFontFamily',\n    setFont: '#setFontFamily',\n    getLeading: function getLeading() {\n      var leading = getLeading.base.call(this),\n        fontSize = this.getFontSize();\n      if (/pt|em|%|px/.test(fontSize)) fontSize = this.getView().getPixelSize(fontSize);\n      return leading != null ? leading : fontSize * 1.2;\n    }\n  });\n  var DomElement = new function () {\n    function handlePrefix(el, name, set, value) {\n      var prefixes = ['', 'webkit', 'moz', 'Moz', 'ms', 'o'],\n        suffix = name[0].toUpperCase() + name.substring(1);\n      for (var i = 0; i < 6; i++) {\n        var prefix = prefixes[i],\n          key = prefix ? prefix + suffix : name;\n        if (key in el) {\n          if (set) {\n            el[key] = value;\n          } else {\n            return el[key];\n          }\n          break;\n        }\n      }\n    }\n    return {\n      getStyles: function (el) {\n        var doc = el && el.nodeType !== 9 ? el.ownerDocument : el,\n          view = doc && doc.defaultView;\n        return view && view.getComputedStyle(el, '');\n      },\n      getBounds: function (el, viewport) {\n        var doc = el.ownerDocument,\n          body = doc.body,\n          html = doc.documentElement,\n          rect;\n        try {\n          rect = el.getBoundingClientRect();\n        } catch (e) {\n          rect = {\n            left: 0,\n            top: 0,\n            width: 0,\n            height: 0\n          };\n        }\n        var x = rect.left - (html.clientLeft || body.clientLeft || 0),\n          y = rect.top - (html.clientTop || body.clientTop || 0);\n        if (!viewport) {\n          var view = doc.defaultView;\n          x += view.pageXOffset || html.scrollLeft || body.scrollLeft;\n          y += view.pageYOffset || html.scrollTop || body.scrollTop;\n        }\n        return new Rectangle(x, y, rect.width, rect.height);\n      },\n      getViewportBounds: function (el) {\n        var doc = el.ownerDocument,\n          view = doc.defaultView,\n          html = doc.documentElement;\n        return new Rectangle(0, 0, view.innerWidth || html.clientWidth, view.innerHeight || html.clientHeight);\n      },\n      getOffset: function (el, viewport) {\n        return DomElement.getBounds(el, viewport).getPoint();\n      },\n      getSize: function (el) {\n        return DomElement.getBounds(el, true).getSize();\n      },\n      isInvisible: function (el) {\n        return DomElement.getSize(el).equals(new Size(0, 0));\n      },\n      isInView: function (el) {\n        return !DomElement.isInvisible(el) && DomElement.getViewportBounds(el).intersects(DomElement.getBounds(el, true));\n      },\n      isInserted: function (el) {\n        return document.body.contains(el);\n      },\n      getPrefixed: function (el, name) {\n        return el && handlePrefix(el, name);\n      },\n      setPrefixed: function (el, name, value) {\n        if (typeof name === 'object') {\n          for (var key in name) handlePrefix(el, key, true, name[key]);\n        } else {\n          handlePrefix(el, name, true, value);\n        }\n      }\n    };\n  }();\n  var DomEvent = {\n    add: function (el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n            parts = type.split(/[\\s,]+/g);\n          for (var i = 0, l = parts.length; i < l; i++) {\n            var name = parts[i];\n            var options = el === document && (name === 'touchstart' || name === 'touchmove') ? {\n              passive: false\n            } : false;\n            el.addEventListener(name, func, options);\n          }\n        }\n      }\n    },\n    remove: function (el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n            parts = type.split(/[\\s,]+/g);\n          for (var i = 0, l = parts.length; i < l; i++) el.removeEventListener(parts[i], func, false);\n        }\n      }\n    },\n    getPoint: function (event) {\n      var pos = event.targetTouches ? event.targetTouches.length ? event.targetTouches[0] : event.changedTouches[0] : event;\n      return new Point(pos.pageX || pos.clientX + document.documentElement.scrollLeft, pos.pageY || pos.clientY + document.documentElement.scrollTop);\n    },\n    getTarget: function (event) {\n      return event.target || event.srcElement;\n    },\n    getRelatedTarget: function (event) {\n      return event.relatedTarget || event.toElement;\n    },\n    getOffset: function (event, target) {\n      return DomEvent.getPoint(event).subtract(DomElement.getOffset(target || DomEvent.getTarget(event)));\n    }\n  };\n  DomEvent.requestAnimationFrame = new function () {\n    var nativeRequest = DomElement.getPrefixed(window, 'requestAnimationFrame'),\n      requested = false,\n      callbacks = [],\n      timer;\n    function handleCallbacks() {\n      var functions = callbacks;\n      callbacks = [];\n      for (var i = 0, l = functions.length; i < l; i++) functions[i]();\n      requested = nativeRequest && callbacks.length;\n      if (requested) nativeRequest(handleCallbacks);\n    }\n    return function (callback) {\n      callbacks.push(callback);\n      if (nativeRequest) {\n        if (!requested) {\n          nativeRequest(handleCallbacks);\n          requested = true;\n        }\n      } else if (!timer) {\n        timer = setInterval(handleCallbacks, 1000 / 60);\n      }\n    };\n  }();\n  var View = Base.extend(Emitter, {\n    _class: 'View',\n    initialize: function View(project, element) {\n      function getSize(name) {\n        return element[name] || parseInt(element.getAttribute(name), 10);\n      }\n      function getCanvasSize() {\n        var size = DomElement.getSize(element);\n        return size.isNaN() || size.isZero() ? new Size(getSize('width'), getSize('height')) : size;\n      }\n      var size;\n      if (window && element) {\n        this._id = element.getAttribute('id');\n        if (this._id == null) element.setAttribute('id', this._id = 'paper-view-' + View._id++);\n        DomEvent.add(element, this._viewEvents);\n        var none = 'none';\n        DomElement.setPrefixed(element.style, {\n          userDrag: none,\n          userSelect: none,\n          touchCallout: none,\n          contentZooming: none,\n          tapHighlightColor: 'rgba(0,0,0,0)'\n        });\n        if (PaperScope.hasAttribute(element, 'resize')) {\n          var that = this;\n          DomEvent.add(window, this._windowEvents = {\n            resize: function () {\n              that.setViewSize(getCanvasSize());\n            }\n          });\n        }\n        size = getCanvasSize();\n        if (PaperScope.hasAttribute(element, 'stats') && typeof Stats !== 'undefined') {\n          this._stats = new Stats();\n          var stats = this._stats.domElement,\n            style = stats.style,\n            offset = DomElement.getOffset(element);\n          style.position = 'absolute';\n          style.left = offset.x + 'px';\n          style.top = offset.y + 'px';\n          document.body.appendChild(stats);\n        }\n      } else {\n        size = new Size(element);\n        element = null;\n      }\n      this._project = project;\n      this._scope = project._scope;\n      this._element = element;\n      if (!this._pixelRatio) this._pixelRatio = window && window.devicePixelRatio || 1;\n      this._setElementSize(size.width, size.height);\n      this._viewSize = size;\n      View._views.push(this);\n      View._viewsById[this._id] = this;\n      (this._matrix = new Matrix())._owner = this;\n      if (!View._focused) View._focused = this;\n      this._frameItems = {};\n      this._frameItemCount = 0;\n      this._itemEvents = {\n        native: {},\n        virtual: {}\n      };\n      this._autoUpdate = !paper.agent.node;\n      this._needsUpdate = false;\n    },\n    remove: function () {\n      if (!this._project) return false;\n      if (View._focused === this) View._focused = null;\n      View._views.splice(View._views.indexOf(this), 1);\n      delete View._viewsById[this._id];\n      var project = this._project;\n      if (project._view === this) project._view = null;\n      DomEvent.remove(this._element, this._viewEvents);\n      DomEvent.remove(window, this._windowEvents);\n      this._element = this._project = null;\n      this.off('frame');\n      this._animate = false;\n      this._frameItems = {};\n      return true;\n    },\n    _events: Base.each(Item._itemHandlers.concat(['onResize', 'onKeyDown', 'onKeyUp']), function (name) {\n      this[name] = {};\n    }, {\n      onFrame: {\n        install: function () {\n          this.play();\n        },\n        uninstall: function () {\n          this.pause();\n        }\n      }\n    }),\n    _animate: false,\n    _time: 0,\n    _count: 0,\n    getAutoUpdate: function () {\n      return this._autoUpdate;\n    },\n    setAutoUpdate: function (autoUpdate) {\n      this._autoUpdate = autoUpdate;\n      if (autoUpdate) this.requestUpdate();\n    },\n    update: function () {},\n    draw: function () {\n      this.update();\n    },\n    requestUpdate: function () {\n      if (!this._requested) {\n        var that = this;\n        DomEvent.requestAnimationFrame(function () {\n          that._requested = false;\n          if (that._animate) {\n            that.requestUpdate();\n            var element = that._element;\n            if ((!DomElement.getPrefixed(document, 'hidden') || PaperScope.getAttribute(element, 'keepalive') === 'true') && DomElement.isInView(element)) {\n              that._handleFrame();\n            }\n          }\n          if (that._autoUpdate) that.update();\n        });\n        this._requested = true;\n      }\n    },\n    play: function () {\n      this._animate = true;\n      this.requestUpdate();\n    },\n    pause: function () {\n      this._animate = false;\n    },\n    _handleFrame: function () {\n      paper = this._scope;\n      var now = Date.now() / 1000,\n        delta = this._last ? now - this._last : 0;\n      this._last = now;\n      this.emit('frame', new Base({\n        delta: delta,\n        time: this._time += delta,\n        count: this._count++\n      }));\n      if (this._stats) this._stats.update();\n    },\n    _animateItem: function (item, animate) {\n      var items = this._frameItems;\n      if (animate) {\n        items[item._id] = {\n          item: item,\n          time: 0,\n          count: 0\n        };\n        if (++this._frameItemCount === 1) this.on('frame', this._handleFrameItems);\n      } else {\n        delete items[item._id];\n        if (--this._frameItemCount === 0) {\n          this.off('frame', this._handleFrameItems);\n        }\n      }\n    },\n    _handleFrameItems: function (event) {\n      for (var i in this._frameItems) {\n        var entry = this._frameItems[i];\n        entry.item.emit('frame', new Base(event, {\n          time: entry.time += event.delta,\n          count: entry.count++\n        }));\n      }\n    },\n    _changed: function () {\n      this._project._changed(4097);\n      this._bounds = this._decomposed = undefined;\n    },\n    getElement: function () {\n      return this._element;\n    },\n    getPixelRatio: function () {\n      return this._pixelRatio;\n    },\n    getResolution: function () {\n      return this._pixelRatio * 72;\n    },\n    getViewSize: function () {\n      var size = this._viewSize;\n      return new LinkedSize(size.width, size.height, this, 'setViewSize');\n    },\n    setViewSize: function () {\n      var size = Size.read(arguments),\n        delta = size.subtract(this._viewSize);\n      if (delta.isZero()) return;\n      this._setElementSize(size.width, size.height);\n      this._viewSize.set(size);\n      this._changed();\n      this.emit('resize', {\n        size: size,\n        delta: delta\n      });\n      if (this._autoUpdate) {\n        this.update();\n      }\n    },\n    _setElementSize: function (width, height) {\n      var element = this._element;\n      if (element) {\n        if (element.width !== width) element.width = width;\n        if (element.height !== height) element.height = height;\n      }\n    },\n    getBounds: function () {\n      if (!this._bounds) this._bounds = this._matrix.inverted()._transformBounds(new Rectangle(new Point(), this._viewSize));\n      return this._bounds;\n    },\n    getSize: function () {\n      return this.getBounds().getSize();\n    },\n    isVisible: function () {\n      return DomElement.isInView(this._element);\n    },\n    isInserted: function () {\n      return DomElement.isInserted(this._element);\n    },\n    getPixelSize: function (size) {\n      var element = this._element,\n        pixels;\n      if (element) {\n        var parent = element.parentNode,\n          temp = document.createElement('div');\n        temp.style.fontSize = size;\n        parent.appendChild(temp);\n        pixels = parseFloat(DomElement.getStyles(temp).fontSize);\n        parent.removeChild(temp);\n      } else {\n        pixels = parseFloat(pixels);\n      }\n      return pixels;\n    },\n    getTextWidth: function (font, lines) {\n      return 0;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n    this[key] = function () {\n      var args = arguments,\n        value = (rotate ? Base : Point).read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      return this.transform(new Matrix()[key](value, center || this.getCenter(true)));\n    };\n  }, {\n    _decompose: function () {\n      return this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    translate: function () {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    getCenter: function () {\n      return this.getBounds().getCenter();\n    },\n    setCenter: function () {\n      var center = Point.read(arguments);\n      this.translate(this.getCenter().subtract(center));\n    },\n    getZoom: function () {\n      var scaling = this._decompose().scaling;\n      return (scaling.x + scaling.y) / 2;\n    },\n    setZoom: function (zoom) {\n      this.transform(new Matrix().scale(zoom / this.getZoom(), this.getCenter()));\n    },\n    getRotation: function () {\n      return this._decompose().rotation;\n    },\n    setRotation: function (rotation) {\n      var current = this.getRotation();\n      if (current != null && rotation != null) {\n        this.rotate(rotation - current);\n      }\n    },\n    getScaling: function () {\n      var scaling = this._decompose().scaling;\n      return new LinkedPoint(scaling.x, scaling.y, this, 'setScaling');\n    },\n    setScaling: function () {\n      var current = this.getScaling(),\n        scaling = Point.read(arguments, 0, {\n          clone: true,\n          readNull: true\n        });\n      if (current && scaling) {\n        this.scale(scaling.x / current.x, scaling.y / current.y);\n      }\n    },\n    getMatrix: function () {\n      return this._matrix;\n    },\n    setMatrix: function () {\n      var matrix = this._matrix;\n      matrix.set.apply(matrix, arguments);\n    },\n    transform: function (matrix) {\n      this._matrix.append(matrix);\n    },\n    scrollBy: function () {\n      this.translate(Point.read(arguments).negate());\n    }\n  }), {\n    projectToView: function () {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    viewToProject: function () {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    getEventPoint: function (event) {\n      return this.viewToProject(DomEvent.getOffset(event, this._element));\n    }\n  }, {\n    statics: {\n      _views: [],\n      _viewsById: {},\n      _id: 0,\n      create: function (project, element) {\n        if (document && typeof element === 'string') element = document.getElementById(element);\n        var ctor = window ? CanvasView : View;\n        return new ctor(project, element);\n      }\n    }\n  }, new function () {\n    if (!window) return;\n    var prevFocus,\n      tempFocus,\n      dragging = false,\n      mouseDown = false;\n    function getView(event) {\n      var target = DomEvent.getTarget(event);\n      return target.getAttribute && View._viewsById[target.getAttribute('id')];\n    }\n    function updateFocus() {\n      var view = View._focused;\n      if (!view || !view.isVisible()) {\n        for (var i = 0, l = View._views.length; i < l; i++) {\n          if ((view = View._views[i]).isVisible()) {\n            View._focused = tempFocus = view;\n            break;\n          }\n        }\n      }\n    }\n    function handleMouseMove(view, event, point) {\n      view._handleMouseEvent('mousemove', event, point);\n    }\n    var navigator = window.navigator,\n      mousedown,\n      mousemove,\n      mouseup;\n    if (navigator.pointerEnabled || navigator.msPointerEnabled) {\n      mousedown = 'pointerdown MSPointerDown';\n      mousemove = 'pointermove MSPointerMove';\n      mouseup = 'pointerup pointercancel MSPointerUp MSPointerCancel';\n    } else {\n      mousedown = 'touchstart';\n      mousemove = 'touchmove';\n      mouseup = 'touchend touchcancel';\n      if (!('ontouchstart' in window && navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i))) {\n        mousedown += ' mousedown';\n        mousemove += ' mousemove';\n        mouseup += ' mouseup';\n      }\n    }\n    var viewEvents = {},\n      docEvents = {\n        mouseout: function (event) {\n          var view = View._focused,\n            target = DomEvent.getRelatedTarget(event);\n          if (view && (!target || target.nodeName === 'HTML')) {\n            var offset = DomEvent.getOffset(event, view._element),\n              x = offset.x,\n              abs = Math.abs,\n              ax = abs(x),\n              max = 1 << 25,\n              diff = ax - max;\n            offset.x = abs(diff) < ax ? diff * (x < 0 ? -1 : 1) : x;\n            handleMouseMove(view, event, view.viewToProject(offset));\n          }\n        },\n        scroll: updateFocus\n      };\n    viewEvents[mousedown] = function (event) {\n      var view = View._focused = getView(event);\n      if (!dragging) {\n        dragging = true;\n        view._handleMouseEvent('mousedown', event);\n      }\n    };\n    docEvents[mousemove] = function (event) {\n      var view = View._focused;\n      if (!mouseDown) {\n        var target = getView(event);\n        if (target) {\n          if (view !== target) {\n            if (view) handleMouseMove(view, event);\n            if (!prevFocus) prevFocus = view;\n            view = View._focused = tempFocus = target;\n          }\n        } else if (tempFocus && tempFocus === view) {\n          if (prevFocus && !prevFocus.isInserted()) prevFocus = null;\n          view = View._focused = prevFocus;\n          prevFocus = null;\n          updateFocus();\n        }\n      }\n      if (view) handleMouseMove(view, event);\n    };\n    docEvents[mousedown] = function () {\n      mouseDown = true;\n    };\n    docEvents[mouseup] = function (event) {\n      var view = View._focused;\n      if (view && dragging) view._handleMouseEvent('mouseup', event);\n      mouseDown = dragging = false;\n    };\n    DomEvent.add(document, docEvents);\n    DomEvent.add(window, {\n      load: updateFocus\n    });\n    var called = false,\n      prevented = false,\n      fallbacks = {\n        doubleclick: 'click',\n        mousedrag: 'mousemove'\n      },\n      wasInView = false,\n      overView,\n      downPoint,\n      lastPoint,\n      downItem,\n      overItem,\n      dragItem,\n      clickItem,\n      clickTime,\n      dblClick;\n    function emitMouseEvent(obj, target, type, event, point, prevPoint, stopItem) {\n      var stopped = false,\n        mouseEvent;\n      function emit(obj, type) {\n        if (obj.responds(type)) {\n          if (!mouseEvent) {\n            mouseEvent = new MouseEvent(type, event, point, target || obj, prevPoint ? point.subtract(prevPoint) : null);\n          }\n          if (obj.emit(type, mouseEvent)) {\n            called = true;\n            if (mouseEvent.prevented) prevented = true;\n            if (mouseEvent.stopped) return stopped = true;\n          }\n        } else {\n          var fallback = fallbacks[type];\n          if (fallback) return emit(obj, fallback);\n        }\n      }\n      while (obj && obj !== stopItem) {\n        if (emit(obj, type)) break;\n        obj = obj._parent;\n      }\n      return stopped;\n    }\n    function emitMouseEvents(view, hitItem, type, event, point, prevPoint) {\n      view._project.removeOn(type);\n      prevented = called = false;\n      return dragItem && emitMouseEvent(dragItem, null, type, event, point, prevPoint) || hitItem && hitItem !== dragItem && !hitItem.isDescendant(dragItem) && emitMouseEvent(hitItem, null, type === 'mousedrag' ? 'mousemove' : type, event, point, prevPoint, dragItem) || emitMouseEvent(view, dragItem || hitItem || view, type, event, point, prevPoint);\n    }\n    var itemEventsMap = {\n      mousedown: {\n        mousedown: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mouseup: {\n        mouseup: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mousemove: {\n        mousedrag: 1,\n        mousemove: 1,\n        mouseenter: 1,\n        mouseleave: 1\n      }\n    };\n    return {\n      _viewEvents: viewEvents,\n      _handleMouseEvent: function (type, event, point) {\n        var itemEvents = this._itemEvents,\n          hitItems = itemEvents.native[type],\n          nativeMove = type === 'mousemove',\n          tool = this._scope.tool,\n          view = this;\n        function responds(type) {\n          return itemEvents.virtual[type] || view.responds(type) || tool && tool.responds(type);\n        }\n        if (nativeMove && dragging && responds('mousedrag')) type = 'mousedrag';\n        if (!point) point = this.getEventPoint(event);\n        var inView = this.getBounds().contains(point),\n          hit = hitItems && inView && view._project.hitTest(point, {\n            tolerance: 0,\n            fill: true,\n            stroke: true\n          }),\n          hitItem = hit && hit.item || null,\n          handle = false,\n          mouse = {};\n        mouse[type.substr(5)] = true;\n        if (hitItems && hitItem !== overItem) {\n          if (overItem) {\n            emitMouseEvent(overItem, null, 'mouseleave', event, point);\n          }\n          if (hitItem) {\n            emitMouseEvent(hitItem, null, 'mouseenter', event, point);\n          }\n          overItem = hitItem;\n        }\n        if (wasInView ^ inView) {\n          emitMouseEvent(this, null, inView ? 'mouseenter' : 'mouseleave', event, point);\n          overView = inView ? this : null;\n          handle = true;\n        }\n        if ((inView || mouse.drag) && !point.equals(lastPoint)) {\n          emitMouseEvents(this, hitItem, nativeMove ? type : 'mousemove', event, point, lastPoint);\n          handle = true;\n        }\n        wasInView = inView;\n        if (mouse.down && inView || mouse.up && downPoint) {\n          emitMouseEvents(this, hitItem, type, event, point, downPoint);\n          if (mouse.down) {\n            dblClick = hitItem === clickItem && Date.now() - clickTime < 300;\n            downItem = clickItem = hitItem;\n            if (!prevented && hitItem) {\n              var item = hitItem;\n              while (item && !item.responds('mousedrag')) item = item._parent;\n              if (item) dragItem = hitItem;\n            }\n            downPoint = point;\n          } else if (mouse.up) {\n            if (!prevented && hitItem === downItem) {\n              clickTime = Date.now();\n              emitMouseEvents(this, hitItem, dblClick ? 'doubleclick' : 'click', event, point, downPoint);\n              dblClick = false;\n            }\n            downItem = dragItem = null;\n          }\n          wasInView = false;\n          handle = true;\n        }\n        lastPoint = point;\n        if (handle && tool) {\n          called = tool._handleMouseEvent(type, event, point, mouse) || called;\n        }\n        if (event.cancelable !== false && (called && !mouse.move || mouse.down && responds('mouseup'))) {\n          event.preventDefault();\n        }\n      },\n      _handleKeyEvent: function (type, event, key, character) {\n        var scope = this._scope,\n          tool = scope.tool,\n          keyEvent;\n        function emit(obj) {\n          if (obj.responds(type)) {\n            paper = scope;\n            obj.emit(type, keyEvent = keyEvent || new KeyEvent(type, event, key, character));\n          }\n        }\n        if (this.isVisible()) {\n          emit(this);\n          if (tool && tool.responds(type)) emit(tool);\n        }\n      },\n      _countItemEvent: function (type, sign) {\n        var itemEvents = this._itemEvents,\n          native = itemEvents.native,\n          virtual = itemEvents.virtual;\n        for (var key in itemEventsMap) {\n          native[key] = (native[key] || 0) + (itemEventsMap[key][type] || 0) * sign;\n        }\n        virtual[type] = (virtual[type] || 0) + sign;\n      },\n      statics: {\n        updateFocus: updateFocus,\n        _resetState: function () {\n          dragging = mouseDown = called = wasInView = false;\n          prevFocus = tempFocus = overView = downPoint = lastPoint = downItem = overItem = dragItem = clickItem = clickTime = dblClick = null;\n        }\n      }\n    };\n  }());\n  var CanvasView = View.extend({\n    _class: 'CanvasView',\n    initialize: function CanvasView(project, canvas) {\n      if (!(canvas instanceof window.HTMLCanvasElement)) {\n        var size = Size.read(arguments, 1);\n        if (size.isZero()) throw new Error('Cannot create CanvasView with the provided argument: ' + Base.slice(arguments, 1));\n        canvas = CanvasProvider.getCanvas(size);\n      }\n      var ctx = this._context = canvas.getContext('2d');\n      ctx.save();\n      this._pixelRatio = 1;\n      if (!/^off|false$/.test(PaperScope.getAttribute(canvas, 'hidpi'))) {\n        var deviceRatio = window.devicePixelRatio || 1,\n          backingStoreRatio = DomElement.getPrefixed(ctx, 'backingStorePixelRatio') || 1;\n        this._pixelRatio = deviceRatio / backingStoreRatio;\n      }\n      View.call(this, project, canvas);\n      this._needsUpdate = true;\n    },\n    remove: function remove() {\n      this._context.restore();\n      return remove.base.call(this);\n    },\n    _setElementSize: function _setElementSize(width, height) {\n      var pixelRatio = this._pixelRatio;\n      _setElementSize.base.call(this, width * pixelRatio, height * pixelRatio);\n      if (pixelRatio !== 1) {\n        var element = this._element,\n          ctx = this._context;\n        if (!PaperScope.hasAttribute(element, 'resize')) {\n          var style = element.style;\n          style.width = width + 'px';\n          style.height = height + 'px';\n        }\n        ctx.restore();\n        ctx.save();\n        ctx.scale(pixelRatio, pixelRatio);\n      }\n    },\n    getContext: function () {\n      return this._context;\n    },\n    getPixelSize: function getPixelSize(size) {\n      var agent = paper.agent,\n        pixels;\n      if (agent && agent.firefox) {\n        pixels = getPixelSize.base.call(this, size);\n      } else {\n        var ctx = this._context,\n          prevFont = ctx.font;\n        ctx.font = size + ' serif';\n        pixels = parseFloat(ctx.font);\n        ctx.font = prevFont;\n      }\n      return pixels;\n    },\n    getTextWidth: function (font, lines) {\n      var ctx = this._context,\n        prevFont = ctx.font,\n        width = 0;\n      ctx.font = font;\n      for (var i = 0, l = lines.length; i < l; i++) width = Math.max(width, ctx.measureText(lines[i]).width);\n      ctx.font = prevFont;\n      return width;\n    },\n    update: function () {\n      if (!this._needsUpdate) return false;\n      var project = this._project,\n        ctx = this._context,\n        size = this._viewSize;\n      ctx.clearRect(0, 0, size.width + 1, size.height + 1);\n      if (project) project.draw(ctx, this._matrix, this._pixelRatio);\n      this._needsUpdate = false;\n      return true;\n    }\n  });\n  var Event = Base.extend({\n    _class: 'Event',\n    initialize: function Event(event) {\n      this.event = event;\n      this.type = event && event.type;\n    },\n    prevented: false,\n    stopped: false,\n    preventDefault: function () {\n      this.prevented = true;\n      this.event.preventDefault();\n    },\n    stopPropagation: function () {\n      this.stopped = true;\n      this.event.stopPropagation();\n    },\n    stop: function () {\n      this.stopPropagation();\n      this.preventDefault();\n    },\n    getTimeStamp: function () {\n      return this.event.timeStamp;\n    },\n    getModifiers: function () {\n      return Key.modifiers;\n    }\n  });\n  var KeyEvent = Event.extend({\n    _class: 'KeyEvent',\n    initialize: function KeyEvent(type, event, key, character) {\n      this.type = type;\n      this.event = event;\n      this.key = key;\n      this.character = character;\n    },\n    toString: function () {\n      return \"{ type: '\" + this.type + \"', key: '\" + this.key + \"', character: '\" + this.character + \"', modifiers: \" + this.getModifiers() + \" }\";\n    }\n  });\n  var Key = new function () {\n    var keyLookup = {\n        '\\t': 'tab',\n        ' ': 'space',\n        '\\b': 'backspace',\n        '\\x7f': 'delete',\n        'Spacebar': 'space',\n        'Del': 'delete',\n        'Win': 'meta',\n        'Esc': 'escape'\n      },\n      charLookup = {\n        'tab': '\\t',\n        'space': ' ',\n        'enter': '\\r'\n      },\n      keyMap = {},\n      charMap = {},\n      metaFixMap,\n      downKey,\n      modifiers = new Base({\n        shift: false,\n        control: false,\n        alt: false,\n        meta: false,\n        capsLock: false,\n        space: false\n      }).inject({\n        option: {\n          get: function () {\n            return this.alt;\n          }\n        },\n        command: {\n          get: function () {\n            var agent = paper && paper.agent;\n            return agent && agent.mac ? this.meta : this.control;\n          }\n        }\n      });\n    function getKey(event) {\n      var key = event.key || event.keyIdentifier;\n      key = /^U\\+/.test(key) ? String.fromCharCode(parseInt(key.substr(2), 16)) : /^Arrow[A-Z]/.test(key) ? key.substr(5) : key === 'Unidentified' || key === undefined ? String.fromCharCode(event.keyCode) : key;\n      return keyLookup[key] || (key.length > 1 ? Base.hyphenate(key) : key.toLowerCase());\n    }\n    function handleKey(down, key, character, event) {\n      var type = down ? 'keydown' : 'keyup',\n        view = View._focused,\n        name;\n      keyMap[key] = down;\n      if (down) {\n        charMap[key] = character;\n      } else {\n        delete charMap[key];\n      }\n      if (key.length > 1 && (name = Base.camelize(key)) in modifiers) {\n        modifiers[name] = down;\n        var agent = paper && paper.agent;\n        if (name === 'meta' && agent && agent.mac) {\n          if (down) {\n            metaFixMap = {};\n          } else {\n            for (var k in metaFixMap) {\n              if (k in charMap) handleKey(false, k, metaFixMap[k], event);\n            }\n            metaFixMap = null;\n          }\n        }\n      } else if (down && metaFixMap) {\n        metaFixMap[key] = character;\n      }\n      if (view) {\n        view._handleKeyEvent(down ? 'keydown' : 'keyup', event, key, character);\n      }\n    }\n    DomEvent.add(document, {\n      keydown: function (event) {\n        var key = getKey(event),\n          agent = paper && paper.agent;\n        if (key.length > 1 || agent && agent.chrome && (event.altKey || agent.mac && event.metaKey || !agent.mac && event.ctrlKey)) {\n          handleKey(true, key, charLookup[key] || (key.length > 1 ? '' : key), event);\n        } else {\n          downKey = key;\n        }\n      },\n      keypress: function (event) {\n        if (downKey) {\n          var key = getKey(event),\n            code = event.charCode,\n            character = code >= 32 ? String.fromCharCode(code) : key.length > 1 ? '' : key;\n          if (key !== downKey) {\n            key = character.toLowerCase();\n          }\n          handleKey(true, key, character, event);\n          downKey = null;\n        }\n      },\n      keyup: function (event) {\n        var key = getKey(event);\n        if (key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    DomEvent.add(window, {\n      blur: function (event) {\n        for (var key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    return {\n      modifiers: modifiers,\n      isDown: function (key) {\n        return !!keyMap[key];\n      }\n    };\n  }();\n  var MouseEvent = Event.extend({\n    _class: 'MouseEvent',\n    initialize: function MouseEvent(type, event, point, target, delta) {\n      this.type = type;\n      this.event = event;\n      this.point = point;\n      this.target = target;\n      this.delta = delta;\n    },\n    toString: function () {\n      return \"{ type: '\" + this.type + \"', point: \" + this.point + ', target: ' + this.target + (this.delta ? ', delta: ' + this.delta : '') + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var ToolEvent = Event.extend({\n    _class: 'ToolEvent',\n    _item: null,\n    initialize: function ToolEvent(tool, type, event) {\n      this.tool = tool;\n      this.type = type;\n      this.event = event;\n    },\n    _choosePoint: function (point, toolPoint) {\n      return point ? point : toolPoint ? toolPoint.clone() : null;\n    },\n    getPoint: function () {\n      return this._choosePoint(this._point, this.tool._point);\n    },\n    setPoint: function (point) {\n      this._point = point;\n    },\n    getLastPoint: function () {\n      return this._choosePoint(this._lastPoint, this.tool._lastPoint);\n    },\n    setLastPoint: function (lastPoint) {\n      this._lastPoint = lastPoint;\n    },\n    getDownPoint: function () {\n      return this._choosePoint(this._downPoint, this.tool._downPoint);\n    },\n    setDownPoint: function (downPoint) {\n      this._downPoint = downPoint;\n    },\n    getMiddlePoint: function () {\n      if (!this._middlePoint && this.tool._lastPoint) {\n        return this.tool._point.add(this.tool._lastPoint).divide(2);\n      }\n      return this._middlePoint;\n    },\n    setMiddlePoint: function (middlePoint) {\n      this._middlePoint = middlePoint;\n    },\n    getDelta: function () {\n      return !this._delta && this.tool._lastPoint ? this.tool._point.subtract(this.tool._lastPoint) : this._delta;\n    },\n    setDelta: function (delta) {\n      this._delta = delta;\n    },\n    getCount: function () {\n      return this.tool[/^mouse(down|up)$/.test(this.type) ? '_downCount' : '_moveCount'];\n    },\n    setCount: function (count) {\n      this.tool[/^mouse(down|up)$/.test(this.type) ? 'downCount' : 'count'] = count;\n    },\n    getItem: function () {\n      if (!this._item) {\n        var result = this.tool._scope.project.hitTest(this.getPoint());\n        if (result) {\n          var item = result.item,\n            parent = item._parent;\n          while (/^(Group|CompoundPath)$/.test(parent._class)) {\n            item = parent;\n            parent = parent._parent;\n          }\n          this._item = item;\n        }\n      }\n      return this._item;\n    },\n    setItem: function (item) {\n      this._item = item;\n    },\n    toString: function () {\n      return '{ type: ' + this.type + ', point: ' + this.getPoint() + ', count: ' + this.getCount() + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var Tool = PaperScopeItem.extend({\n    _class: 'Tool',\n    _list: 'tools',\n    _reference: 'tool',\n    _events: ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onMouseMove', 'onActivate', 'onDeactivate', 'onEditOptions', 'onKeyDown', 'onKeyUp'],\n    initialize: function Tool(props) {\n      PaperScopeItem.call(this);\n      this._moveCount = -1;\n      this._downCount = -1;\n      this.set(props);\n    },\n    getMinDistance: function () {\n      return this._minDistance;\n    },\n    setMinDistance: function (minDistance) {\n      this._minDistance = minDistance;\n      if (minDistance != null && this._maxDistance != null && minDistance > this._maxDistance) {\n        this._maxDistance = minDistance;\n      }\n    },\n    getMaxDistance: function () {\n      return this._maxDistance;\n    },\n    setMaxDistance: function (maxDistance) {\n      this._maxDistance = maxDistance;\n      if (this._minDistance != null && maxDistance != null && maxDistance < this._minDistance) {\n        this._minDistance = maxDistance;\n      }\n    },\n    getFixedDistance: function () {\n      return this._minDistance == this._maxDistance ? this._minDistance : null;\n    },\n    setFixedDistance: function (distance) {\n      this._minDistance = this._maxDistance = distance;\n    },\n    _handleMouseEvent: function (type, event, point, mouse) {\n      paper = this._scope;\n      if (mouse.drag && !this.responds(type)) type = 'mousemove';\n      var move = mouse.move || mouse.drag,\n        responds = this.responds(type),\n        minDistance = this.minDistance,\n        maxDistance = this.maxDistance,\n        called = false,\n        tool = this;\n      function update(minDistance, maxDistance) {\n        var pt = point,\n          toolPoint = move ? tool._point : tool._downPoint || pt;\n        if (move) {\n          if (tool._moveCount >= 0 && pt.equals(toolPoint)) {\n            return false;\n          }\n          if (toolPoint && (minDistance != null || maxDistance != null)) {\n            var vector = pt.subtract(toolPoint),\n              distance = vector.getLength();\n            if (distance < (minDistance || 0)) return false;\n            if (maxDistance) {\n              pt = toolPoint.add(vector.normalize(Math.min(distance, maxDistance)));\n            }\n          }\n          tool._moveCount++;\n        }\n        tool._point = pt;\n        tool._lastPoint = toolPoint || pt;\n        if (mouse.down) {\n          tool._moveCount = -1;\n          tool._downPoint = pt;\n          tool._downCount++;\n        }\n        return true;\n      }\n      function emit() {\n        if (responds) {\n          called = tool.emit(type, new ToolEvent(tool, type, event)) || called;\n        }\n      }\n      if (mouse.down) {\n        update();\n        emit();\n      } else if (mouse.up) {\n        update(null, maxDistance);\n        emit();\n      } else if (responds) {\n        while (update(minDistance, maxDistance)) emit();\n      }\n      return called;\n    }\n  });\n  var Tween = Base.extend(Emitter, {\n    _class: 'Tween',\n    statics: {\n      easings: new Base({\n        linear: function (t) {\n          return t;\n        },\n        easeInQuad: function (t) {\n          return t * t;\n        },\n        easeOutQuad: function (t) {\n          return t * (2 - t);\n        },\n        easeInOutQuad: function (t) {\n          return t < 0.5 ? 2 * t * t : -1 + 2 * (2 - t) * t;\n        },\n        easeInCubic: function (t) {\n          return t * t * t;\n        },\n        easeOutCubic: function (t) {\n          return --t * t * t + 1;\n        },\n        easeInOutCubic: function (t) {\n          return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n        },\n        easeInQuart: function (t) {\n          return t * t * t * t;\n        },\n        easeOutQuart: function (t) {\n          return 1 - --t * t * t * t;\n        },\n        easeInOutQuart: function (t) {\n          return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n        },\n        easeInQuint: function (t) {\n          return t * t * t * t * t;\n        },\n        easeOutQuint: function (t) {\n          return 1 + --t * t * t * t * t;\n        },\n        easeInOutQuint: function (t) {\n          return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n        }\n      })\n    },\n    initialize: function Tween(object, from, to, duration, easing, start) {\n      this.object = object;\n      var type = typeof easing;\n      var isFunction = type === 'function';\n      this.type = isFunction ? type : type === 'string' ? easing : 'linear';\n      this.easing = isFunction ? easing : Tween.easings[this.type];\n      this.duration = duration;\n      this.running = false;\n      this._then = null;\n      this._startTime = null;\n      var state = from || to;\n      this._keys = state ? Object.keys(state) : [];\n      this._parsedKeys = this._parseKeys(this._keys);\n      this._from = state && this._getState(from);\n      this._to = state && this._getState(to);\n      if (start !== false) {\n        this.start();\n      }\n    },\n    then: function (then) {\n      this._then = then;\n      return this;\n    },\n    start: function () {\n      this._startTime = null;\n      this.running = true;\n      return this;\n    },\n    stop: function () {\n      this.running = false;\n      return this;\n    },\n    update: function (progress) {\n      if (this.running) {\n        if (progress >= 1) {\n          progress = 1;\n          this.running = false;\n        }\n        var factor = this.easing(progress),\n          keys = this._keys,\n          getValue = function (value) {\n            return typeof value === 'function' ? value(factor, progress) : value;\n          };\n        for (var i = 0, l = keys && keys.length; i < l; i++) {\n          var key = keys[i],\n            from = getValue(this._from[key]),\n            to = getValue(this._to[key]),\n            value = from && to && from.__add && to.__add ? to.__subtract(from).__multiply(factor).__add(from) : (to - from) * factor + from;\n          this._setProperty(this._parsedKeys[key], value);\n        }\n        if (this.responds('update')) {\n          this.emit('update', new Base({\n            progress: progress,\n            factor: factor\n          }));\n        }\n        if (!this.running && this._then) {\n          this._then(this.object);\n        }\n      }\n      return this;\n    },\n    _events: {\n      onUpdate: {}\n    },\n    _handleFrame: function (time) {\n      var startTime = this._startTime,\n        progress = startTime ? (time - startTime) / this.duration : 0;\n      if (!startTime) {\n        this._startTime = time;\n      }\n      this.update(progress);\n    },\n    _getState: function (state) {\n      var keys = this._keys,\n        result = {};\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n          path = this._parsedKeys[key],\n          current = this._getProperty(path),\n          value;\n        if (state) {\n          var resolved = this._resolveValue(current, state[key]);\n          this._setProperty(path, resolved);\n          value = this._getProperty(path);\n          value = value && value.clone ? value.clone() : value;\n          this._setProperty(path, current);\n        } else {\n          value = current && current.clone ? current.clone() : current;\n        }\n        result[key] = value;\n      }\n      return result;\n    },\n    _resolveValue: function (current, value) {\n      if (value) {\n        if (Array.isArray(value) && value.length === 2) {\n          var operator = value[0];\n          return operator && operator.match && operator.match(/^[+\\-\\*\\/]=/) ? this._calculate(current, operator[0], value[1]) : value;\n        } else if (typeof value === 'string') {\n          var match = value.match(/^[+\\-*/]=(.*)/);\n          if (match) {\n            var parsed = JSON.parse(match[1].replace(/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g, '\"$2\": '));\n            return this._calculate(current, value[0], parsed);\n          }\n        }\n      }\n      return value;\n    },\n    _calculate: function (left, operator, right) {\n      return paper.PaperScript.calculateBinary(left, operator, right);\n    },\n    _parseKeys: function (keys) {\n      var parsed = {};\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n          path = key.replace(/\\.([^.]*)/g, '/$1').replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g, '/$1');\n        parsed[key] = path.split('/');\n      }\n      return parsed;\n    },\n    _getProperty: function (path, offset) {\n      var obj = this.object;\n      for (var i = 0, l = path.length - (offset || 0); i < l && obj; i++) {\n        obj = obj[path[i]];\n      }\n      return obj;\n    },\n    _setProperty: function (path, value) {\n      var dest = this._getProperty(path, 1);\n      if (dest) {\n        dest[path[path.length - 1]] = value;\n      }\n    }\n  });\n  var Http = {\n    request: function (options) {\n      var xhr = new self.XMLHttpRequest();\n      xhr.open((options.method || 'get').toUpperCase(), options.url, Base.pick(options.async, true));\n      if (options.mimeType) xhr.overrideMimeType(options.mimeType);\n      xhr.onload = function () {\n        var status = xhr.status;\n        if (status === 0 || status === 200) {\n          if (options.onLoad) {\n            options.onLoad.call(xhr, xhr.responseText);\n          }\n        } else {\n          xhr.onerror();\n        }\n      };\n      xhr.onerror = function () {\n        var status = xhr.status,\n          message = 'Could not load \"' + options.url + '\" (Status: ' + status + ')';\n        if (options.onError) {\n          options.onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      };\n      return xhr.send(null);\n    }\n  };\n  var CanvasProvider = Base.exports.CanvasProvider = {\n    canvases: [],\n    getCanvas: function (width, height, options) {\n      if (!window) return null;\n      var canvas,\n        clear = true;\n      if (typeof width === 'object') {\n        height = width.height;\n        width = width.width;\n      }\n      if (this.canvases.length) {\n        canvas = this.canvases.pop();\n      } else {\n        canvas = document.createElement('canvas');\n        clear = false;\n      }\n      var ctx = canvas.getContext('2d', options || {});\n      if (!ctx) {\n        throw new Error('Canvas ' + canvas + ' is unable to provide a 2D context.');\n      }\n      if (canvas.width === width && canvas.height === height) {\n        if (clear) ctx.clearRect(0, 0, width + 1, height + 1);\n      } else {\n        canvas.width = width;\n        canvas.height = height;\n      }\n      ctx.save();\n      return canvas;\n    },\n    getContext: function (width, height, options) {\n      var canvas = this.getCanvas(width, height, options);\n      return canvas ? canvas.getContext('2d', options || {}) : null;\n    },\n    release: function (obj) {\n      var canvas = obj && obj.canvas ? obj.canvas : obj;\n      if (canvas && canvas.getContext) {\n        canvas.getContext('2d').restore();\n        this.canvases.push(canvas);\n      }\n    }\n  };\n  var BlendMode = new function () {\n    var min = Math.min,\n      max = Math.max,\n      abs = Math.abs,\n      sr,\n      sg,\n      sb,\n      sa,\n      br,\n      bg,\n      bb,\n      ba,\n      dr,\n      dg,\n      db;\n    function getLum(r, g, b) {\n      return 0.2989 * r + 0.587 * g + 0.114 * b;\n    }\n    function setLum(r, g, b, l) {\n      var d = l - getLum(r, g, b);\n      dr = r + d;\n      dg = g + d;\n      db = b + d;\n      var l = getLum(dr, dg, db),\n        mn = min(dr, dg, db),\n        mx = max(dr, dg, db);\n      if (mn < 0) {\n        var lmn = l - mn;\n        dr = l + (dr - l) * l / lmn;\n        dg = l + (dg - l) * l / lmn;\n        db = l + (db - l) * l / lmn;\n      }\n      if (mx > 255) {\n        var ln = 255 - l,\n          mxl = mx - l;\n        dr = l + (dr - l) * ln / mxl;\n        dg = l + (dg - l) * ln / mxl;\n        db = l + (db - l) * ln / mxl;\n      }\n    }\n    function getSat(r, g, b) {\n      return max(r, g, b) - min(r, g, b);\n    }\n    function setSat(r, g, b, s) {\n      var col = [r, g, b],\n        mx = max(r, g, b),\n        mn = min(r, g, b),\n        md;\n      mn = mn === r ? 0 : mn === g ? 1 : 2;\n      mx = mx === r ? 0 : mx === g ? 1 : 2;\n      md = min(mn, mx) === 0 ? max(mn, mx) === 1 ? 2 : 1 : 0;\n      if (col[mx] > col[mn]) {\n        col[md] = (col[md] - col[mn]) * s / (col[mx] - col[mn]);\n        col[mx] = s;\n      } else {\n        col[md] = col[mx] = 0;\n      }\n      col[mn] = 0;\n      dr = col[0];\n      dg = col[1];\n      db = col[2];\n    }\n    var modes = {\n      multiply: function () {\n        dr = br * sr / 255;\n        dg = bg * sg / 255;\n        db = bb * sb / 255;\n      },\n      screen: function () {\n        dr = br + sr - br * sr / 255;\n        dg = bg + sg - bg * sg / 255;\n        db = bb + sb - bb * sb / 255;\n      },\n      overlay: function () {\n        dr = br < 128 ? 2 * br * sr / 255 : 255 - 2 * (255 - br) * (255 - sr) / 255;\n        dg = bg < 128 ? 2 * bg * sg / 255 : 255 - 2 * (255 - bg) * (255 - sg) / 255;\n        db = bb < 128 ? 2 * bb * sb / 255 : 255 - 2 * (255 - bb) * (255 - sb) / 255;\n      },\n      'soft-light': function () {\n        var t = sr * br / 255;\n        dr = t + br * (255 - (255 - br) * (255 - sr) / 255 - t) / 255;\n        t = sg * bg / 255;\n        dg = t + bg * (255 - (255 - bg) * (255 - sg) / 255 - t) / 255;\n        t = sb * bb / 255;\n        db = t + bb * (255 - (255 - bb) * (255 - sb) / 255 - t) / 255;\n      },\n      'hard-light': function () {\n        dr = sr < 128 ? 2 * sr * br / 255 : 255 - 2 * (255 - sr) * (255 - br) / 255;\n        dg = sg < 128 ? 2 * sg * bg / 255 : 255 - 2 * (255 - sg) * (255 - bg) / 255;\n        db = sb < 128 ? 2 * sb * bb / 255 : 255 - 2 * (255 - sb) * (255 - bb) / 255;\n      },\n      'color-dodge': function () {\n        dr = br === 0 ? 0 : sr === 255 ? 255 : min(255, 255 * br / (255 - sr));\n        dg = bg === 0 ? 0 : sg === 255 ? 255 : min(255, 255 * bg / (255 - sg));\n        db = bb === 0 ? 0 : sb === 255 ? 255 : min(255, 255 * bb / (255 - sb));\n      },\n      'color-burn': function () {\n        dr = br === 255 ? 255 : sr === 0 ? 0 : max(0, 255 - (255 - br) * 255 / sr);\n        dg = bg === 255 ? 255 : sg === 0 ? 0 : max(0, 255 - (255 - bg) * 255 / sg);\n        db = bb === 255 ? 255 : sb === 0 ? 0 : max(0, 255 - (255 - bb) * 255 / sb);\n      },\n      darken: function () {\n        dr = br < sr ? br : sr;\n        dg = bg < sg ? bg : sg;\n        db = bb < sb ? bb : sb;\n      },\n      lighten: function () {\n        dr = br > sr ? br : sr;\n        dg = bg > sg ? bg : sg;\n        db = bb > sb ? bb : sb;\n      },\n      difference: function () {\n        dr = br - sr;\n        if (dr < 0) dr = -dr;\n        dg = bg - sg;\n        if (dg < 0) dg = -dg;\n        db = bb - sb;\n        if (db < 0) db = -db;\n      },\n      exclusion: function () {\n        dr = br + sr * (255 - br - br) / 255;\n        dg = bg + sg * (255 - bg - bg) / 255;\n        db = bb + sb * (255 - bb - bb) / 255;\n      },\n      hue: function () {\n        setSat(sr, sg, sb, getSat(br, bg, bb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      saturation: function () {\n        setSat(br, bg, bb, getSat(sr, sg, sb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      luminosity: function () {\n        setLum(br, bg, bb, getLum(sr, sg, sb));\n      },\n      color: function () {\n        setLum(sr, sg, sb, getLum(br, bg, bb));\n      },\n      add: function () {\n        dr = min(br + sr, 255);\n        dg = min(bg + sg, 255);\n        db = min(bb + sb, 255);\n      },\n      subtract: function () {\n        dr = max(br - sr, 0);\n        dg = max(bg - sg, 0);\n        db = max(bb - sb, 0);\n      },\n      average: function () {\n        dr = (br + sr) / 2;\n        dg = (bg + sg) / 2;\n        db = (bb + sb) / 2;\n      },\n      negation: function () {\n        dr = 255 - abs(255 - sr - br);\n        dg = 255 - abs(255 - sg - bg);\n        db = 255 - abs(255 - sb - bb);\n      }\n    };\n    var nativeModes = this.nativeModes = Base.each(['source-over', 'source-in', 'source-out', 'source-atop', 'destination-over', 'destination-in', 'destination-out', 'destination-atop', 'lighter', 'darker', 'copy', 'xor'], function (mode) {\n      this[mode] = true;\n    }, {});\n    var ctx = CanvasProvider.getContext(1, 1, {\n      willReadFrequently: true\n    });\n    if (ctx) {\n      Base.each(modes, function (func, mode) {\n        var darken = mode === 'darken',\n          ok = false;\n        ctx.save();\n        try {\n          ctx.fillStyle = darken ? '#300' : '#a00';\n          ctx.fillRect(0, 0, 1, 1);\n          ctx.globalCompositeOperation = mode;\n          if (ctx.globalCompositeOperation === mode) {\n            ctx.fillStyle = darken ? '#a00' : '#300';\n            ctx.fillRect(0, 0, 1, 1);\n            ok = ctx.getImageData(0, 0, 1, 1).data[0] !== darken ? 170 : 51;\n          }\n        } catch (e) {}\n        ctx.restore();\n        nativeModes[mode] = ok;\n      });\n      CanvasProvider.release(ctx);\n    }\n    this.process = function (mode, srcContext, dstContext, alpha, offset) {\n      var srcCanvas = srcContext.canvas,\n        normal = mode === 'normal';\n      if (normal || nativeModes[mode]) {\n        dstContext.save();\n        dstContext.setTransform(1, 0, 0, 1, 0, 0);\n        dstContext.globalAlpha = alpha;\n        if (!normal) dstContext.globalCompositeOperation = mode;\n        dstContext.drawImage(srcCanvas, offset.x, offset.y);\n        dstContext.restore();\n      } else {\n        var process = modes[mode];\n        if (!process) return;\n        var dstData = dstContext.getImageData(offset.x, offset.y, srcCanvas.width, srcCanvas.height),\n          dst = dstData.data,\n          src = srcContext.getImageData(0, 0, srcCanvas.width, srcCanvas.height).data;\n        for (var i = 0, l = dst.length; i < l; i += 4) {\n          sr = src[i];\n          br = dst[i];\n          sg = src[i + 1];\n          bg = dst[i + 1];\n          sb = src[i + 2];\n          bb = dst[i + 2];\n          sa = src[i + 3];\n          ba = dst[i + 3];\n          process();\n          var a1 = sa * alpha / 255,\n            a2 = 1 - a1;\n          dst[i] = a1 * dr + a2 * br;\n          dst[i + 1] = a1 * dg + a2 * bg;\n          dst[i + 2] = a1 * db + a2 * bb;\n          dst[i + 3] = sa * alpha + a2 * ba;\n        }\n        dstContext.putImageData(dstData, offset.x, offset.y);\n      }\n    };\n  }();\n  var SvgElement = new function () {\n    var svg = 'http://www.w3.org/2000/svg',\n      xmlns = 'http://www.w3.org/2000/xmlns',\n      xlink = 'http://www.w3.org/1999/xlink',\n      attributeNamespace = {\n        href: xlink,\n        xlink: xmlns,\n        xmlns: xmlns + '/',\n        'xmlns:xlink': xmlns + '/'\n      };\n    function create(tag, attributes, formatter) {\n      return set(document.createElementNS(svg, tag), attributes, formatter);\n    }\n    function get(node, name) {\n      var namespace = attributeNamespace[name],\n        value = namespace ? node.getAttributeNS(namespace, name) : node.getAttribute(name);\n      return value === 'null' ? null : value;\n    }\n    function set(node, attributes, formatter) {\n      for (var name in attributes) {\n        var value = attributes[name],\n          namespace = attributeNamespace[name];\n        if (typeof value === 'number' && formatter) value = formatter.number(value);\n        if (namespace) {\n          node.setAttributeNS(namespace, name, value);\n        } else {\n          node.setAttribute(name, value);\n        }\n      }\n      return node;\n    }\n    return {\n      svg: svg,\n      xmlns: xmlns,\n      xlink: xlink,\n      create: create,\n      get: get,\n      set: set\n    };\n  }();\n  var SvgStyles = Base.each({\n    fillColor: ['fill', 'color'],\n    fillRule: ['fill-rule', 'string'],\n    strokeColor: ['stroke', 'color'],\n    strokeWidth: ['stroke-width', 'number'],\n    strokeCap: ['stroke-linecap', 'string'],\n    strokeJoin: ['stroke-linejoin', 'string'],\n    strokeScaling: ['vector-effect', 'lookup', {\n      true: 'none',\n      false: 'non-scaling-stroke'\n    }, function (item, value) {\n      return !value && (item instanceof PathItem || item instanceof Shape || item instanceof TextItem);\n    }],\n    miterLimit: ['stroke-miterlimit', 'number'],\n    dashArray: ['stroke-dasharray', 'array'],\n    dashOffset: ['stroke-dashoffset', 'number'],\n    fontFamily: ['font-family', 'string'],\n    fontWeight: ['font-weight', 'string'],\n    fontSize: ['font-size', 'number'],\n    justification: ['text-anchor', 'lookup', {\n      left: 'start',\n      center: 'middle',\n      right: 'end'\n    }],\n    opacity: ['opacity', 'number'],\n    blendMode: ['mix-blend-mode', 'style']\n  }, function (entry, key) {\n    var part = Base.capitalize(key),\n      lookup = entry[2];\n    this[key] = {\n      type: entry[1],\n      property: key,\n      attribute: entry[0],\n      toSVG: lookup,\n      fromSVG: lookup && Base.each(lookup, function (value, name) {\n        this[value] = name;\n      }, {}),\n      exportFilter: entry[3],\n      get: 'get' + part,\n      set: 'set' + part\n    };\n  }, {});\n  new function () {\n    var formatter;\n    function getTransform(matrix, coordinates, center) {\n      var attrs = new Base(),\n        trans = matrix.getTranslation();\n      if (coordinates) {\n        var point;\n        if (matrix.isInvertible()) {\n          matrix = matrix._shiftless();\n          point = matrix._inverseTransform(trans);\n          trans = null;\n        } else {\n          point = new Point();\n        }\n        attrs[center ? 'cx' : 'x'] = point.x;\n        attrs[center ? 'cy' : 'y'] = point.y;\n      }\n      if (!matrix.isIdentity()) {\n        var decomposed = matrix.decompose();\n        if (decomposed) {\n          var parts = [],\n            angle = decomposed.rotation,\n            scale = decomposed.scaling,\n            skew = decomposed.skewing;\n          if (trans && !trans.isZero()) parts.push('translate(' + formatter.point(trans) + ')');\n          if (angle) parts.push('rotate(' + formatter.number(angle) + ')');\n          if (!Numerical.isZero(scale.x - 1) || !Numerical.isZero(scale.y - 1)) parts.push('scale(' + formatter.point(scale) + ')');\n          if (skew.x) parts.push('skewX(' + formatter.number(skew.x) + ')');\n          if (skew.y) parts.push('skewY(' + formatter.number(skew.y) + ')');\n          attrs.transform = parts.join(' ');\n        } else {\n          attrs.transform = 'matrix(' + matrix.getValues().join(',') + ')';\n        }\n      }\n      return attrs;\n    }\n    function exportGroup(item, options) {\n      var attrs = getTransform(item._matrix),\n        children = item._children;\n      var node = SvgElement.create('g', attrs, formatter);\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i];\n        var childNode = exportSVG(child, options);\n        if (childNode) {\n          if (child.isClipMask()) {\n            var clip = SvgElement.create('clipPath');\n            clip.appendChild(childNode);\n            setDefinition(child, clip, 'clip');\n            SvgElement.set(node, {\n              'clip-path': 'url(#' + clip.id + ')'\n            });\n          } else {\n            node.appendChild(childNode);\n          }\n        }\n      }\n      return node;\n    }\n    function exportRaster(item, options) {\n      var attrs = getTransform(item._matrix, true),\n        size = item.getSize(),\n        image = item.getImage();\n      attrs.x -= size.width / 2;\n      attrs.y -= size.height / 2;\n      attrs.width = size.width;\n      attrs.height = size.height;\n      attrs.href = options.embedImages == false && image && image.src || item.toDataURL();\n      return SvgElement.create('image', attrs, formatter);\n    }\n    function exportPath(item, options) {\n      var matchShapes = options.matchShapes;\n      if (matchShapes) {\n        var shape = item.toShape(false);\n        if (shape) return exportShape(shape, options);\n      }\n      var segments = item._segments,\n        length = segments.length,\n        type,\n        attrs = getTransform(item._matrix);\n      if (matchShapes && length >= 2 && !item.hasHandles()) {\n        if (length > 2) {\n          type = item._closed ? 'polygon' : 'polyline';\n          var parts = [];\n          for (var i = 0; i < length; i++) {\n            parts.push(formatter.point(segments[i]._point));\n          }\n          attrs.points = parts.join(' ');\n        } else {\n          type = 'line';\n          var start = segments[0]._point,\n            end = segments[1]._point;\n          attrs.set({\n            x1: start.x,\n            y1: start.y,\n            x2: end.x,\n            y2: end.y\n          });\n        }\n      } else {\n        type = 'path';\n        attrs.d = item.getPathData(null, options.precision);\n      }\n      return SvgElement.create(type, attrs, formatter);\n    }\n    function exportShape(item) {\n      var type = item._type,\n        radius = item._radius,\n        attrs = getTransform(item._matrix, true, type !== 'rectangle');\n      if (type === 'rectangle') {\n        type = 'rect';\n        var size = item._size,\n          width = size.width,\n          height = size.height;\n        attrs.x -= width / 2;\n        attrs.y -= height / 2;\n        attrs.width = width;\n        attrs.height = height;\n        if (radius.isZero()) radius = null;\n      }\n      if (radius) {\n        if (type === 'circle') {\n          attrs.r = radius;\n        } else {\n          attrs.rx = radius.width;\n          attrs.ry = radius.height;\n        }\n      }\n      return SvgElement.create(type, attrs, formatter);\n    }\n    function exportCompoundPath(item, options) {\n      var attrs = getTransform(item._matrix);\n      var data = item.getPathData(null, options.precision);\n      if (data) attrs.d = data;\n      return SvgElement.create('path', attrs, formatter);\n    }\n    function exportSymbolItem(item, options) {\n      var attrs = getTransform(item._matrix, true),\n        definition = item._definition,\n        node = getDefinition(definition, 'symbol'),\n        definitionItem = definition._item,\n        bounds = definitionItem.getStrokeBounds();\n      if (!node) {\n        node = SvgElement.create('symbol', {\n          viewBox: formatter.rectangle(bounds)\n        });\n        node.appendChild(exportSVG(definitionItem, options));\n        setDefinition(definition, node, 'symbol');\n      }\n      attrs.href = '#' + node.id;\n      attrs.x += bounds.x;\n      attrs.y += bounds.y;\n      attrs.width = bounds.width;\n      attrs.height = bounds.height;\n      attrs.overflow = 'visible';\n      return SvgElement.create('use', attrs, formatter);\n    }\n    function exportGradient(color) {\n      var gradientNode = getDefinition(color, 'color');\n      if (!gradientNode) {\n        var gradient = color.getGradient(),\n          radial = gradient._radial,\n          origin = color.getOrigin(),\n          destination = color.getDestination(),\n          attrs;\n        if (radial) {\n          attrs = {\n            cx: origin.x,\n            cy: origin.y,\n            r: origin.getDistance(destination)\n          };\n          var highlight = color.getHighlight();\n          if (highlight) {\n            attrs.fx = highlight.x;\n            attrs.fy = highlight.y;\n          }\n        } else {\n          attrs = {\n            x1: origin.x,\n            y1: origin.y,\n            x2: destination.x,\n            y2: destination.y\n          };\n        }\n        attrs.gradientUnits = 'userSpaceOnUse';\n        gradientNode = SvgElement.create((radial ? 'radial' : 'linear') + 'Gradient', attrs, formatter);\n        var stops = gradient._stops;\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n            stopColor = stop._color,\n            alpha = stopColor.getAlpha(),\n            offset = stop._offset;\n          attrs = {\n            offset: offset == null ? i / (l - 1) : offset\n          };\n          if (stopColor) attrs['stop-color'] = stopColor.toCSS(true);\n          if (alpha < 1) attrs['stop-opacity'] = alpha;\n          gradientNode.appendChild(SvgElement.create('stop', attrs, formatter));\n        }\n        setDefinition(color, gradientNode, 'color');\n      }\n      return 'url(#' + gradientNode.id + ')';\n    }\n    function exportText(item) {\n      var node = SvgElement.create('text', getTransform(item._matrix, true), formatter);\n      node.textContent = item._content;\n      return node;\n    }\n    var exporters = {\n      Group: exportGroup,\n      Layer: exportGroup,\n      Raster: exportRaster,\n      Path: exportPath,\n      Shape: exportShape,\n      CompoundPath: exportCompoundPath,\n      SymbolItem: exportSymbolItem,\n      PointText: exportText\n    };\n    function applyStyle(item, node, isRoot) {\n      var attrs = {},\n        parent = !isRoot && item.getParent(),\n        style = [];\n      if (item._name != null) attrs.id = item._name;\n      Base.each(SvgStyles, function (entry) {\n        var get = entry.get,\n          type = entry.type,\n          value = item[get]();\n        if (entry.exportFilter ? entry.exportFilter(item, value) : !parent || !Base.equals(parent[get](), value)) {\n          if (type === 'color' && value != null) {\n            var alpha = value.getAlpha();\n            if (alpha < 1) attrs[entry.attribute + '-opacity'] = alpha;\n          }\n          if (type === 'style') {\n            style.push(entry.attribute + ': ' + value);\n          } else {\n            attrs[entry.attribute] = value == null ? 'none' : type === 'color' ? value.gradient ? exportGradient(value, item) : value.toCSS(true) : type === 'array' ? value.join(',') : type === 'lookup' ? entry.toSVG[value] : value;\n          }\n        }\n      });\n      if (style.length) attrs.style = style.join(';');\n      if (attrs.opacity === 1) delete attrs.opacity;\n      if (!item._visible) attrs.visibility = 'hidden';\n      return SvgElement.set(node, attrs, formatter);\n    }\n    var definitions;\n    function getDefinition(item, type) {\n      if (!definitions) definitions = {\n        ids: {},\n        svgs: {}\n      };\n      return item && definitions.svgs[type + '-' + (item._id || item.__id || (item.__id = UID.get('svg')))];\n    }\n    function setDefinition(item, node, type) {\n      if (!definitions) getDefinition();\n      var typeId = definitions.ids[type] = (definitions.ids[type] || 0) + 1;\n      node.id = type + '-' + typeId;\n      definitions.svgs[type + '-' + (item._id || item.__id)] = node;\n    }\n    function exportDefinitions(node, options) {\n      var svg = node,\n        defs = null;\n      if (definitions) {\n        svg = node.nodeName.toLowerCase() === 'svg' && node;\n        for (var i in definitions.svgs) {\n          if (!defs) {\n            if (!svg) {\n              svg = SvgElement.create('svg');\n              svg.appendChild(node);\n            }\n            defs = svg.insertBefore(SvgElement.create('defs'), svg.firstChild);\n          }\n          defs.appendChild(definitions.svgs[i]);\n        }\n        definitions = null;\n      }\n      return options.asString ? new self.XMLSerializer().serializeToString(svg) : svg;\n    }\n    function exportSVG(item, options, isRoot) {\n      var exporter = exporters[item._class],\n        node = exporter && exporter(item, options);\n      if (node) {\n        var onExport = options.onExport;\n        if (onExport) node = onExport(item, node, options) || node;\n        var data = JSON.stringify(item._data);\n        if (data && data !== '{}' && data !== 'null') node.setAttribute('data-paper-data', data);\n      }\n      return node && applyStyle(item, node, isRoot);\n    }\n    function setOptions(options) {\n      if (!options) options = {};\n      formatter = new Formatter(options.precision);\n      return options;\n    }\n    Item.inject({\n      exportSVG: function (options) {\n        options = setOptions(options);\n        return exportDefinitions(exportSVG(this, options, true), options);\n      }\n    });\n    Project.inject({\n      exportSVG: function (options) {\n        options = setOptions(options);\n        var children = this._children,\n          view = this.getView(),\n          bounds = Base.pick(options.bounds, 'view'),\n          mx = options.matrix || bounds === 'view' && view._matrix,\n          matrix = mx && Matrix.read([mx]),\n          rect = bounds === 'view' ? new Rectangle([0, 0], view.getViewSize()) : bounds === 'content' ? Item._getBounds(children, matrix, {\n            stroke: true\n          }).rect : Rectangle.read([bounds], 0, {\n            readNull: true\n          }),\n          attrs = {\n            version: '1.1',\n            xmlns: SvgElement.svg,\n            'xmlns:xlink': SvgElement.xlink\n          };\n        if (rect) {\n          attrs.width = rect.width;\n          attrs.height = rect.height;\n          if (rect.x || rect.x === 0 || rect.y || rect.y === 0) attrs.viewBox = formatter.rectangle(rect);\n        }\n        var node = SvgElement.create('svg', attrs, formatter),\n          parent = node;\n        if (matrix && !matrix.isIdentity()) {\n          parent = node.appendChild(SvgElement.create('g', getTransform(matrix), formatter));\n        }\n        for (var i = 0, l = children.length; i < l; i++) {\n          parent.appendChild(exportSVG(children[i], options, true));\n        }\n        return exportDefinitions(node, options);\n      }\n    });\n  }();\n  new function () {\n    var definitions = {},\n      rootSize;\n    function getValue(node, name, isString, allowNull, allowPercent, defaultValue) {\n      var value = SvgElement.get(node, name) || defaultValue,\n        res = value == null ? allowNull ? null : isString ? '' : 0 : isString ? value : parseFloat(value);\n      return /%\\s*$/.test(value) ? res / 100 * (allowPercent ? 1 : rootSize[/x|^width/.test(name) ? 'width' : 'height']) : res;\n    }\n    function getPoint(node, x, y, allowNull, allowPercent, defaultX, defaultY) {\n      x = getValue(node, x || 'x', false, allowNull, allowPercent, defaultX);\n      y = getValue(node, y || 'y', false, allowNull, allowPercent, defaultY);\n      return allowNull && (x == null || y == null) ? null : new Point(x, y);\n    }\n    function getSize(node, w, h, allowNull, allowPercent) {\n      w = getValue(node, w || 'width', false, allowNull, allowPercent);\n      h = getValue(node, h || 'height', false, allowNull, allowPercent);\n      return allowNull && (w == null || h == null) ? null : new Size(w, h);\n    }\n    function convertValue(value, type, lookup) {\n      return value === 'none' ? null : type === 'number' ? parseFloat(value) : type === 'array' ? value ? value.split(/[\\s,]+/g).map(parseFloat) : [] : type === 'color' ? getDefinition(value) || value : type === 'lookup' ? lookup[value] : value;\n    }\n    function importGroup(node, type, options, isRoot) {\n      var nodes = node.childNodes,\n        isClip = type === 'clippath',\n        isDefs = type === 'defs',\n        item = new Group(),\n        project = item._project,\n        currentStyle = project._currentStyle,\n        children = [];\n      if (!isClip && !isDefs) {\n        item = applyAttributes(item, node, isRoot);\n        project._currentStyle = item._style.clone();\n      }\n      if (isRoot) {\n        var defs = node.querySelectorAll('defs');\n        for (var i = 0, l = defs.length; i < l; i++) {\n          importNode(defs[i], options, false);\n        }\n      }\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        var childNode = nodes[i],\n          child;\n        if (childNode.nodeType === 1 && !/^defs$/i.test(childNode.nodeName) && (child = importNode(childNode, options, false)) && !(child instanceof SymbolDefinition)) children.push(child);\n      }\n      item.addChildren(children);\n      if (isClip) item = applyAttributes(item.reduce(), node, isRoot);\n      project._currentStyle = currentStyle;\n      if (isClip || isDefs) {\n        item.remove();\n        item = null;\n      }\n      return item;\n    }\n    function importPoly(node, type) {\n      var coords = node.getAttribute('points').match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),\n        points = [];\n      for (var i = 0, l = coords.length; i < l; i += 2) points.push(new Point(parseFloat(coords[i]), parseFloat(coords[i + 1])));\n      var path = new Path(points);\n      if (type === 'polygon') path.closePath();\n      return path;\n    }\n    function importPath(node) {\n      return PathItem.create(node.getAttribute('d'));\n    }\n    function importGradient(node, type) {\n      var id = (getValue(node, 'href', true) || '').substring(1),\n        radial = type === 'radialgradient',\n        gradient;\n      if (id) {\n        gradient = definitions[id].getGradient();\n        if (gradient._radial ^ radial) {\n          gradient = gradient.clone();\n          gradient._radial = radial;\n        }\n      } else {\n        var nodes = node.childNodes,\n          stops = [];\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) stops.push(applyAttributes(new GradientStop(), child));\n        }\n        gradient = new Gradient(stops, radial);\n      }\n      var origin,\n        destination,\n        highlight,\n        scaleToBounds = getValue(node, 'gradientUnits', true) !== 'userSpaceOnUse';\n      if (radial) {\n        origin = getPoint(node, 'cx', 'cy', false, scaleToBounds, '50%', '50%');\n        destination = origin.add(getValue(node, 'r', false, false, scaleToBounds, '50%'), 0);\n        highlight = getPoint(node, 'fx', 'fy', true, scaleToBounds);\n      } else {\n        origin = getPoint(node, 'x1', 'y1', false, scaleToBounds, '0%', '0%');\n        destination = getPoint(node, 'x2', 'y2', false, scaleToBounds, '100%', '0%');\n      }\n      var color = applyAttributes(new Color(gradient, origin, destination, highlight), node);\n      color._scaleToBounds = scaleToBounds;\n      return null;\n    }\n    var importers = {\n      '#document': function (node, type, options, isRoot) {\n        var nodes = node.childNodes;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) return importNode(child, options, isRoot);\n        }\n      },\n      g: importGroup,\n      svg: importGroup,\n      clippath: importGroup,\n      polygon: importPoly,\n      polyline: importPoly,\n      path: importPath,\n      lineargradient: importGradient,\n      radialgradient: importGradient,\n      image: function (node) {\n        var raster = new Raster(getValue(node, 'href', true));\n        raster.on('load', function () {\n          var size = getSize(node);\n          this.setSize(size);\n          var center = getPoint(node).add(size.divide(2));\n          this._matrix.append(new Matrix().translate(center));\n        });\n        return raster;\n      },\n      symbol: function (node, type, options, isRoot) {\n        return new SymbolDefinition(importGroup(node, type, options, isRoot), true);\n      },\n      defs: importGroup,\n      use: function (node) {\n        var id = (getValue(node, 'href', true) || '').substring(1),\n          definition = definitions[id],\n          point = getPoint(node);\n        return definition ? definition instanceof SymbolDefinition ? definition.place(point) : definition.clone().translate(point) : null;\n      },\n      circle: function (node) {\n        return new Shape.Circle(getPoint(node, 'cx', 'cy'), getValue(node, 'r'));\n      },\n      ellipse: function (node) {\n        return new Shape.Ellipse({\n          center: getPoint(node, 'cx', 'cy'),\n          radius: getSize(node, 'rx', 'ry')\n        });\n      },\n      rect: function (node) {\n        return new Shape.Rectangle(new Rectangle(getPoint(node), getSize(node)), getSize(node, 'rx', 'ry'));\n      },\n      line: function (node) {\n        return new Path.Line(getPoint(node, 'x1', 'y1'), getPoint(node, 'x2', 'y2'));\n      },\n      text: function (node) {\n        var text = new PointText(getPoint(node).add(getPoint(node, 'dx', 'dy')));\n        text.setContent(node.textContent.trim() || '');\n        return text;\n      },\n      switch: importGroup\n    };\n    function applyTransform(item, value, name, node) {\n      if (item.transform) {\n        var transforms = (node.getAttribute(name) || '').split(/\\)\\s*/g),\n          matrix = new Matrix();\n        for (var i = 0, l = transforms.length; i < l; i++) {\n          var transform = transforms[i];\n          if (!transform) break;\n          var parts = transform.split(/\\(\\s*/),\n            command = parts[0],\n            v = parts[1].split(/[\\s,]+/g);\n          for (var j = 0, m = v.length; j < m; j++) v[j] = parseFloat(v[j]);\n          switch (command) {\n            case 'matrix':\n              matrix.append(new Matrix(v[0], v[1], v[2], v[3], v[4], v[5]));\n              break;\n            case 'rotate':\n              matrix.rotate(v[0], v[1] || 0, v[2] || 0);\n              break;\n            case 'translate':\n              matrix.translate(v[0], v[1] || 0);\n              break;\n            case 'scale':\n              matrix.scale(v);\n              break;\n            case 'skewX':\n              matrix.skew(v[0], 0);\n              break;\n            case 'skewY':\n              matrix.skew(0, v[0]);\n              break;\n          }\n        }\n        item.transform(matrix);\n      }\n    }\n    function applyOpacity(item, value, name) {\n      var key = name === 'fill-opacity' ? 'getFillColor' : 'getStrokeColor',\n        color = item[key] && item[key]();\n      if (color) color.setAlpha(parseFloat(value));\n    }\n    var attributes = Base.set(Base.each(SvgStyles, function (entry) {\n      this[entry.attribute] = function (item, value) {\n        if (item[entry.set]) {\n          item[entry.set](convertValue(value, entry.type, entry.fromSVG));\n          if (entry.type === 'color') {\n            var color = item[entry.get]();\n            if (color) {\n              if (color._scaleToBounds) {\n                var bounds = item.getBounds();\n                color.transform(new Matrix().translate(bounds.getPoint()).scale(bounds.getSize()));\n              }\n            }\n          }\n        }\n      };\n    }, {}), {\n      id: function (item, value) {\n        definitions[value] = item;\n        if (item.setName) item.setName(value);\n      },\n      'clip-path': function (item, value) {\n        var clip = getDefinition(value);\n        if (clip) {\n          clip = clip.clone();\n          clip.setClipMask(true);\n          if (item instanceof Group) {\n            item.insertChild(0, clip);\n          } else {\n            return new Group(clip, item);\n          }\n        }\n      },\n      gradientTransform: applyTransform,\n      transform: applyTransform,\n      'fill-opacity': applyOpacity,\n      'stroke-opacity': applyOpacity,\n      visibility: function (item, value) {\n        if (item.setVisible) item.setVisible(value === 'visible');\n      },\n      display: function (item, value) {\n        if (item.setVisible) item.setVisible(value !== null);\n      },\n      'stop-color': function (item, value) {\n        if (item.setColor) item.setColor(value);\n      },\n      'stop-opacity': function (item, value) {\n        if (item._color) item._color.setAlpha(parseFloat(value));\n      },\n      offset: function (item, value) {\n        if (item.setOffset) {\n          var percent = value.match(/(.*)%$/);\n          item.setOffset(percent ? percent[1] / 100 : parseFloat(value));\n        }\n      },\n      viewBox: function (item, value, name, node, styles) {\n        var rect = new Rectangle(convertValue(value, 'array')),\n          size = getSize(node, null, null, true),\n          group,\n          matrix;\n        if (item instanceof Group) {\n          var scale = size ? size.divide(rect.getSize()) : 1,\n            matrix = new Matrix().scale(scale).translate(rect.getPoint().negate());\n          group = item;\n        } else if (item instanceof SymbolDefinition) {\n          if (size) rect.setSize(size);\n          group = item._item;\n        }\n        if (group) {\n          if (getAttribute(node, 'overflow', styles) !== 'visible') {\n            var clip = new Shape.Rectangle(rect);\n            clip.setClipMask(true);\n            group.addChild(clip);\n          }\n          if (matrix) group.transform(matrix);\n        }\n      }\n    });\n    function getAttribute(node, name, styles) {\n      var attr = node.attributes[name],\n        value = attr && attr.value;\n      if (!value && node.style) {\n        var style = Base.camelize(name);\n        value = node.style[style];\n        if (!value && styles.node[style] !== styles.parent[style]) value = styles.node[style];\n      }\n      return !value ? undefined : value === 'none' ? null : value;\n    }\n    function applyAttributes(item, node, isRoot) {\n      var parent = node.parentNode,\n        styles = {\n          node: DomElement.getStyles(node) || {},\n          parent: !isRoot && !/^defs$/i.test(parent.tagName) && DomElement.getStyles(parent) || {}\n        };\n      Base.each(attributes, function (apply, name) {\n        var value = getAttribute(node, name, styles);\n        item = value !== undefined && apply(item, value, name, node, styles) || item;\n      });\n      return item;\n    }\n    function getDefinition(value) {\n      var match = value && value.match(/\\((?:[\"'#]*)([^\"')]+)/),\n        name = match && match[1],\n        res = name && definitions[window ? name.replace(window.location.href.split('#')[0] + '#', '') : name];\n      if (res && res._scaleToBounds) {\n        res = res.clone();\n        res._scaleToBounds = true;\n      }\n      return res;\n    }\n    function importNode(node, options, isRoot) {\n      var type = node.nodeName.toLowerCase(),\n        isElement = type !== '#document',\n        body = document.body,\n        container,\n        parent,\n        next;\n      if (isRoot && isElement) {\n        rootSize = paper.getView().getSize();\n        rootSize = getSize(node, null, null, true) || rootSize;\n        container = SvgElement.create('svg', {\n          style: 'stroke-width: 1px; stroke-miterlimit: 10'\n        });\n        parent = node.parentNode;\n        next = node.nextSibling;\n        container.appendChild(node);\n        body.appendChild(container);\n      }\n      var settings = paper.settings,\n        applyMatrix = settings.applyMatrix,\n        insertItems = settings.insertItems;\n      settings.applyMatrix = false;\n      settings.insertItems = false;\n      var importer = importers[type],\n        item = importer && importer(node, type, options, isRoot) || null;\n      settings.insertItems = insertItems;\n      settings.applyMatrix = applyMatrix;\n      if (item) {\n        if (isElement && !(item instanceof Group)) item = applyAttributes(item, node, isRoot);\n        var onImport = options.onImport,\n          data = isElement && node.getAttribute('data-paper-data');\n        if (onImport) item = onImport(node, item, options) || item;\n        if (options.expandShapes && item instanceof Shape) {\n          item.remove();\n          item = item.toPath();\n        }\n        if (data) item._data = JSON.parse(data);\n      }\n      if (container) {\n        body.removeChild(container);\n        if (parent) {\n          if (next) {\n            parent.insertBefore(node, next);\n          } else {\n            parent.appendChild(node);\n          }\n        }\n      }\n      if (isRoot) {\n        definitions = {};\n        if (item && Base.pick(options.applyMatrix, applyMatrix)) item.matrix.apply(true, true);\n      }\n      return item;\n    }\n    function importSVG(source, options, owner) {\n      if (!source) return null;\n      options = typeof options === 'function' ? {\n        onLoad: options\n      } : options || {};\n      var scope = paper,\n        item = null;\n      function onLoad(svg) {\n        try {\n          var node = typeof svg === 'object' ? svg : new self.DOMParser().parseFromString(svg.trim(), 'image/svg+xml');\n          if (!node.nodeName) {\n            node = null;\n            throw new Error('Unsupported SVG source: ' + source);\n          }\n          paper = scope;\n          item = importNode(node, options, true);\n          if (!options || options.insert !== false) {\n            owner._insertItem(undefined, item);\n          }\n          var onLoad = options.onLoad;\n          if (onLoad) onLoad(item, svg);\n        } catch (e) {\n          onError(e);\n        }\n      }\n      function onError(message, status) {\n        var onError = options.onError;\n        if (onError) {\n          onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      }\n      if (typeof source === 'string' && !/^[\\s\\S]*</.test(source)) {\n        var node = document.getElementById(source);\n        if (node) {\n          onLoad(node);\n        } else {\n          Http.request({\n            url: source,\n            async: true,\n            onLoad: onLoad,\n            onError: onError\n          });\n        }\n      } else if (typeof File !== 'undefined' && source instanceof File) {\n        var reader = new FileReader();\n        reader.onload = function () {\n          onLoad(reader.result);\n        };\n        reader.onerror = function () {\n          onError(reader.error);\n        };\n        return reader.readAsText(source);\n      } else {\n        onLoad(source);\n      }\n      return item;\n    }\n    Item.inject({\n      importSVG: function (node, options) {\n        return importSVG(node, options, this);\n      }\n    });\n    Project.inject({\n      importSVG: function (node, options) {\n        this.activate();\n        return importSVG(node, options, this);\n      }\n    });\n  }();\n  Base.exports.PaperScript = function () {\n    var global = this,\n      acorn = global.acorn;\n    if (!acorn && typeof require !== 'undefined') {\n      try {\n        acorn = require('acorn');\n      } catch (e) {}\n    }\n    if (!acorn) {\n      var exports, module;\n      acorn = exports = module = {};\n      (function (root, mod) {\n        if (typeof exports == \"object\" && typeof module == \"object\") return mod(exports);\n        if (typeof define == \"function\" && define.amd) return define([\"exports\"], mod);\n        mod(root.acorn || (root.acorn = {}));\n      })(this, function (exports) {\n        \"use strict\";\n\n        exports.version = \"0.5.0\";\n        var options, input, inputLen, sourceFile;\n        exports.parse = function (inpt, opts) {\n          input = String(inpt);\n          inputLen = input.length;\n          setOptions(opts);\n          initTokenState();\n          return parseTopLevel(options.program);\n        };\n        var defaultOptions = exports.defaultOptions = {\n          ecmaVersion: 5,\n          strictSemicolons: false,\n          allowTrailingCommas: true,\n          forbidReserved: false,\n          allowReturnOutsideFunction: false,\n          locations: false,\n          onComment: null,\n          ranges: false,\n          program: null,\n          sourceFile: null,\n          directSourceFile: null\n        };\n        function setOptions(opts) {\n          options = opts || {};\n          for (var opt in defaultOptions) if (!Object.prototype.hasOwnProperty.call(options, opt)) options[opt] = defaultOptions[opt];\n          sourceFile = options.sourceFile || null;\n        }\n        var getLineInfo = exports.getLineInfo = function (input, offset) {\n          for (var line = 1, cur = 0;;) {\n            lineBreak.lastIndex = cur;\n            var match = lineBreak.exec(input);\n            if (match && match.index < offset) {\n              ++line;\n              cur = match.index + match[0].length;\n            } else break;\n          }\n          return {\n            line: line,\n            column: offset - cur\n          };\n        };\n        exports.tokenize = function (inpt, opts) {\n          input = String(inpt);\n          inputLen = input.length;\n          setOptions(opts);\n          initTokenState();\n          var t = {};\n          function getToken(forceRegexp) {\n            lastEnd = tokEnd;\n            readToken(forceRegexp);\n            t.start = tokStart;\n            t.end = tokEnd;\n            t.startLoc = tokStartLoc;\n            t.endLoc = tokEndLoc;\n            t.type = tokType;\n            t.value = tokVal;\n            return t;\n          }\n          getToken.jumpTo = function (pos, reAllowed) {\n            tokPos = pos;\n            if (options.locations) {\n              tokCurLine = 1;\n              tokLineStart = lineBreak.lastIndex = 0;\n              var match;\n              while ((match = lineBreak.exec(input)) && match.index < pos) {\n                ++tokCurLine;\n                tokLineStart = match.index + match[0].length;\n              }\n            }\n            tokRegexpAllowed = reAllowed;\n            skipSpace();\n          };\n          return getToken;\n        };\n        var tokPos;\n        var tokStart, tokEnd;\n        var tokStartLoc, tokEndLoc;\n        var tokType, tokVal;\n        var tokRegexpAllowed;\n        var tokCurLine, tokLineStart;\n        var lastStart, lastEnd, lastEndLoc;\n        var inFunction, labels, strict;\n        function raise(pos, message) {\n          var loc = getLineInfo(input, pos);\n          message += \" (\" + loc.line + \":\" + loc.column + \")\";\n          var err = new SyntaxError(message);\n          err.pos = pos;\n          err.loc = loc;\n          err.raisedAt = tokPos;\n          throw err;\n        }\n        var empty = [];\n        var _num = {\n            type: \"num\"\n          },\n          _regexp = {\n            type: \"regexp\"\n          },\n          _string = {\n            type: \"string\"\n          };\n        var _name = {\n            type: \"name\"\n          },\n          _eof = {\n            type: \"eof\"\n          };\n        var _break = {\n            keyword: \"break\"\n          },\n          _case = {\n            keyword: \"case\",\n            beforeExpr: true\n          },\n          _catch = {\n            keyword: \"catch\"\n          };\n        var _continue = {\n            keyword: \"continue\"\n          },\n          _debugger = {\n            keyword: \"debugger\"\n          },\n          _default = {\n            keyword: \"default\"\n          };\n        var _do = {\n            keyword: \"do\",\n            isLoop: true\n          },\n          _else = {\n            keyword: \"else\",\n            beforeExpr: true\n          };\n        var _finally = {\n            keyword: \"finally\"\n          },\n          _for = {\n            keyword: \"for\",\n            isLoop: true\n          },\n          _function = {\n            keyword: \"function\"\n          };\n        var _if = {\n            keyword: \"if\"\n          },\n          _return = {\n            keyword: \"return\",\n            beforeExpr: true\n          },\n          _switch = {\n            keyword: \"switch\"\n          };\n        var _throw = {\n            keyword: \"throw\",\n            beforeExpr: true\n          },\n          _try = {\n            keyword: \"try\"\n          },\n          _var = {\n            keyword: \"var\"\n          };\n        var _while = {\n            keyword: \"while\",\n            isLoop: true\n          },\n          _with = {\n            keyword: \"with\"\n          },\n          _new = {\n            keyword: \"new\",\n            beforeExpr: true\n          };\n        var _this = {\n          keyword: \"this\"\n        };\n        var _null = {\n            keyword: \"null\",\n            atomValue: null\n          },\n          _true = {\n            keyword: \"true\",\n            atomValue: true\n          };\n        var _false = {\n          keyword: \"false\",\n          atomValue: false\n        };\n        var _in = {\n          keyword: \"in\",\n          binop: 7,\n          beforeExpr: true\n        };\n        var keywordTypes = {\n          \"break\": _break,\n          \"case\": _case,\n          \"catch\": _catch,\n          \"continue\": _continue,\n          \"debugger\": _debugger,\n          \"default\": _default,\n          \"do\": _do,\n          \"else\": _else,\n          \"finally\": _finally,\n          \"for\": _for,\n          \"function\": _function,\n          \"if\": _if,\n          \"return\": _return,\n          \"switch\": _switch,\n          \"throw\": _throw,\n          \"try\": _try,\n          \"var\": _var,\n          \"while\": _while,\n          \"with\": _with,\n          \"null\": _null,\n          \"true\": _true,\n          \"false\": _false,\n          \"new\": _new,\n          \"in\": _in,\n          \"instanceof\": {\n            keyword: \"instanceof\",\n            binop: 7,\n            beforeExpr: true\n          },\n          \"this\": _this,\n          \"typeof\": {\n            keyword: \"typeof\",\n            prefix: true,\n            beforeExpr: true\n          },\n          \"void\": {\n            keyword: \"void\",\n            prefix: true,\n            beforeExpr: true\n          },\n          \"delete\": {\n            keyword: \"delete\",\n            prefix: true,\n            beforeExpr: true\n          }\n        };\n        var _bracketL = {\n            type: \"[\",\n            beforeExpr: true\n          },\n          _bracketR = {\n            type: \"]\"\n          },\n          _braceL = {\n            type: \"{\",\n            beforeExpr: true\n          };\n        var _braceR = {\n            type: \"}\"\n          },\n          _parenL = {\n            type: \"(\",\n            beforeExpr: true\n          },\n          _parenR = {\n            type: \")\"\n          };\n        var _comma = {\n            type: \",\",\n            beforeExpr: true\n          },\n          _semi = {\n            type: \";\",\n            beforeExpr: true\n          };\n        var _colon = {\n            type: \":\",\n            beforeExpr: true\n          },\n          _dot = {\n            type: \".\"\n          },\n          _question = {\n            type: \"?\",\n            beforeExpr: true\n          };\n        var _slash = {\n            binop: 10,\n            beforeExpr: true\n          },\n          _eq = {\n            isAssign: true,\n            beforeExpr: true\n          };\n        var _assign = {\n          isAssign: true,\n          beforeExpr: true\n        };\n        var _incDec = {\n            postfix: true,\n            prefix: true,\n            isUpdate: true\n          },\n          _prefix = {\n            prefix: true,\n            beforeExpr: true\n          };\n        var _logicalOR = {\n          binop: 1,\n          beforeExpr: true\n        };\n        var _logicalAND = {\n          binop: 2,\n          beforeExpr: true\n        };\n        var _bitwiseOR = {\n          binop: 3,\n          beforeExpr: true\n        };\n        var _bitwiseXOR = {\n          binop: 4,\n          beforeExpr: true\n        };\n        var _bitwiseAND = {\n          binop: 5,\n          beforeExpr: true\n        };\n        var _equality = {\n          binop: 6,\n          beforeExpr: true\n        };\n        var _relational = {\n          binop: 7,\n          beforeExpr: true\n        };\n        var _bitShift = {\n          binop: 8,\n          beforeExpr: true\n        };\n        var _plusMin = {\n          binop: 9,\n          prefix: true,\n          beforeExpr: true\n        };\n        var _multiplyModulo = {\n          binop: 10,\n          beforeExpr: true\n        };\n        exports.tokTypes = {\n          bracketL: _bracketL,\n          bracketR: _bracketR,\n          braceL: _braceL,\n          braceR: _braceR,\n          parenL: _parenL,\n          parenR: _parenR,\n          comma: _comma,\n          semi: _semi,\n          colon: _colon,\n          dot: _dot,\n          question: _question,\n          slash: _slash,\n          eq: _eq,\n          name: _name,\n          eof: _eof,\n          num: _num,\n          regexp: _regexp,\n          string: _string\n        };\n        for (var kw in keywordTypes) exports.tokTypes[\"_\" + kw] = keywordTypes[kw];\n        function makePredicate(words) {\n          words = words.split(\" \");\n          var f = \"\",\n            cats = [];\n          out: for (var i = 0; i < words.length; ++i) {\n            for (var j = 0; j < cats.length; ++j) if (cats[j][0].length == words[i].length) {\n              cats[j].push(words[i]);\n              continue out;\n            }\n            cats.push([words[i]]);\n          }\n          function compareTo(arr) {\n            if (arr.length == 1) return f += \"return str === \" + JSON.stringify(arr[0]) + \";\";\n            f += \"switch(str){\";\n            for (var i = 0; i < arr.length; ++i) f += \"case \" + JSON.stringify(arr[i]) + \":\";\n            f += \"return true}return false;\";\n          }\n          if (cats.length > 3) {\n            cats.sort(function (a, b) {\n              return b.length - a.length;\n            });\n            f += \"switch(str.length){\";\n            for (var i = 0; i < cats.length; ++i) {\n              var cat = cats[i];\n              f += \"case \" + cat[0].length + \":\";\n              compareTo(cat);\n            }\n            f += \"}\";\n          } else {\n            compareTo(words);\n          }\n          return new Function(\"str\", f);\n        }\n        var isReservedWord3 = makePredicate(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\");\n        var isReservedWord5 = makePredicate(\"class enum extends super const export import\");\n        var isStrictReservedWord = makePredicate(\"implements interface let package private protected public static yield\");\n        var isStrictBadIdWord = makePredicate(\"eval arguments\");\n        var isKeyword = makePredicate(\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\");\n        var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n        var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n        var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n        var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n        var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n        var newline = /[\\n\\r\\u2028\\u2029]/;\n        var lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n        var isIdentifierStart = exports.isIdentifierStart = function (code) {\n          if (code < 65) return code === 36;\n          if (code < 91) return true;\n          if (code < 97) return code === 95;\n          if (code < 123) return true;\n          return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n        };\n        var isIdentifierChar = exports.isIdentifierChar = function (code) {\n          if (code < 48) return code === 36;\n          if (code < 58) return true;\n          if (code < 65) return false;\n          if (code < 91) return true;\n          if (code < 97) return code === 95;\n          if (code < 123) return true;\n          return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n        };\n        function line_loc_t() {\n          this.line = tokCurLine;\n          this.column = tokPos - tokLineStart;\n        }\n        function initTokenState() {\n          tokCurLine = 1;\n          tokPos = tokLineStart = 0;\n          tokRegexpAllowed = true;\n          skipSpace();\n        }\n        function finishToken(type, val) {\n          tokEnd = tokPos;\n          if (options.locations) tokEndLoc = new line_loc_t();\n          tokType = type;\n          skipSpace();\n          tokVal = val;\n          tokRegexpAllowed = type.beforeExpr;\n        }\n        function skipBlockComment() {\n          var startLoc = options.onComment && options.locations && new line_loc_t();\n          var start = tokPos,\n            end = input.indexOf(\"*/\", tokPos += 2);\n          if (end === -1) raise(tokPos - 2, \"Unterminated comment\");\n          tokPos = end + 2;\n          if (options.locations) {\n            lineBreak.lastIndex = start;\n            var match;\n            while ((match = lineBreak.exec(input)) && match.index < tokPos) {\n              ++tokCurLine;\n              tokLineStart = match.index + match[0].length;\n            }\n          }\n          if (options.onComment) options.onComment(true, input.slice(start + 2, end), start, tokPos, startLoc, options.locations && new line_loc_t());\n        }\n        function skipLineComment() {\n          var start = tokPos;\n          var startLoc = options.onComment && options.locations && new line_loc_t();\n          var ch = input.charCodeAt(tokPos += 2);\n          while (tokPos < inputLen && ch !== 10 && ch !== 13 && ch !== 8232 && ch !== 8233) {\n            ++tokPos;\n            ch = input.charCodeAt(tokPos);\n          }\n          if (options.onComment) options.onComment(false, input.slice(start + 2, tokPos), start, tokPos, startLoc, options.locations && new line_loc_t());\n        }\n        function skipSpace() {\n          while (tokPos < inputLen) {\n            var ch = input.charCodeAt(tokPos);\n            if (ch === 32) {\n              ++tokPos;\n            } else if (ch === 13) {\n              ++tokPos;\n              var next = input.charCodeAt(tokPos);\n              if (next === 10) {\n                ++tokPos;\n              }\n              if (options.locations) {\n                ++tokCurLine;\n                tokLineStart = tokPos;\n              }\n            } else if (ch === 10 || ch === 8232 || ch === 8233) {\n              ++tokPos;\n              if (options.locations) {\n                ++tokCurLine;\n                tokLineStart = tokPos;\n              }\n            } else if (ch > 8 && ch < 14) {\n              ++tokPos;\n            } else if (ch === 47) {\n              var next = input.charCodeAt(tokPos + 1);\n              if (next === 42) {\n                skipBlockComment();\n              } else if (next === 47) {\n                skipLineComment();\n              } else break;\n            } else if (ch === 160) {\n              ++tokPos;\n            } else if (ch >= 5760 && nonASCIIwhitespace.test(String.fromCharCode(ch))) {\n              ++tokPos;\n            } else {\n              break;\n            }\n          }\n        }\n        function readToken_dot() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next >= 48 && next <= 57) return readNumber(true);\n          ++tokPos;\n          return finishToken(_dot);\n        }\n        function readToken_slash() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (tokRegexpAllowed) {\n            ++tokPos;\n            return readRegexp();\n          }\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_slash, 1);\n        }\n        function readToken_mult_modulo() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_multiplyModulo, 1);\n        }\n        function readToken_pipe_amp(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === code) return finishOp(code === 124 ? _logicalOR : _logicalAND, 2);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(code === 124 ? _bitwiseOR : _bitwiseAND, 1);\n        }\n        function readToken_caret() {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_bitwiseXOR, 1);\n        }\n        function readToken_plus_min(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === code) {\n            if (next == 45 && input.charCodeAt(tokPos + 2) == 62 && newline.test(input.slice(lastEnd, tokPos))) {\n              tokPos += 3;\n              skipLineComment();\n              skipSpace();\n              return readToken();\n            }\n            return finishOp(_incDec, 2);\n          }\n          if (next === 61) return finishOp(_assign, 2);\n          return finishOp(_plusMin, 1);\n        }\n        function readToken_lt_gt(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          var size = 1;\n          if (next === code) {\n            size = code === 62 && input.charCodeAt(tokPos + 2) === 62 ? 3 : 2;\n            if (input.charCodeAt(tokPos + size) === 61) return finishOp(_assign, size + 1);\n            return finishOp(_bitShift, size);\n          }\n          if (next == 33 && code == 60 && input.charCodeAt(tokPos + 2) == 45 && input.charCodeAt(tokPos + 3) == 45) {\n            tokPos += 4;\n            skipLineComment();\n            skipSpace();\n            return readToken();\n          }\n          if (next === 61) size = input.charCodeAt(tokPos + 2) === 61 ? 3 : 2;\n          return finishOp(_relational, size);\n        }\n        function readToken_eq_excl(code) {\n          var next = input.charCodeAt(tokPos + 1);\n          if (next === 61) return finishOp(_equality, input.charCodeAt(tokPos + 2) === 61 ? 3 : 2);\n          return finishOp(code === 61 ? _eq : _prefix, 1);\n        }\n        function getTokenFromCode(code) {\n          switch (code) {\n            case 46:\n              return readToken_dot();\n            case 40:\n              ++tokPos;\n              return finishToken(_parenL);\n            case 41:\n              ++tokPos;\n              return finishToken(_parenR);\n            case 59:\n              ++tokPos;\n              return finishToken(_semi);\n            case 44:\n              ++tokPos;\n              return finishToken(_comma);\n            case 91:\n              ++tokPos;\n              return finishToken(_bracketL);\n            case 93:\n              ++tokPos;\n              return finishToken(_bracketR);\n            case 123:\n              ++tokPos;\n              return finishToken(_braceL);\n            case 125:\n              ++tokPos;\n              return finishToken(_braceR);\n            case 58:\n              ++tokPos;\n              return finishToken(_colon);\n            case 63:\n              ++tokPos;\n              return finishToken(_question);\n            case 48:\n              var next = input.charCodeAt(tokPos + 1);\n              if (next === 120 || next === 88) return readHexNumber();\n            case 49:\n            case 50:\n            case 51:\n            case 52:\n            case 53:\n            case 54:\n            case 55:\n            case 56:\n            case 57:\n              return readNumber(false);\n            case 34:\n            case 39:\n              return readString(code);\n            case 47:\n              return readToken_slash(code);\n            case 37:\n            case 42:\n              return readToken_mult_modulo();\n            case 124:\n            case 38:\n              return readToken_pipe_amp(code);\n            case 94:\n              return readToken_caret();\n            case 43:\n            case 45:\n              return readToken_plus_min(code);\n            case 60:\n            case 62:\n              return readToken_lt_gt(code);\n            case 61:\n            case 33:\n              return readToken_eq_excl(code);\n            case 126:\n              return finishOp(_prefix, 1);\n          }\n          return false;\n        }\n        function readToken(forceRegexp) {\n          if (!forceRegexp) tokStart = tokPos;else tokPos = tokStart + 1;\n          if (options.locations) tokStartLoc = new line_loc_t();\n          if (forceRegexp) return readRegexp();\n          if (tokPos >= inputLen) return finishToken(_eof);\n          var code = input.charCodeAt(tokPos);\n          if (isIdentifierStart(code) || code === 92) return readWord();\n          var tok = getTokenFromCode(code);\n          if (tok === false) {\n            var ch = String.fromCharCode(code);\n            if (ch === \"\\\\\" || nonASCIIidentifierStart.test(ch)) return readWord();\n            raise(tokPos, \"Unexpected character '\" + ch + \"'\");\n          }\n          return tok;\n        }\n        function finishOp(type, size) {\n          var str = input.slice(tokPos, tokPos + size);\n          tokPos += size;\n          finishToken(type, str);\n        }\n        function readRegexp() {\n          var content = \"\",\n            escaped,\n            inClass,\n            start = tokPos;\n          for (;;) {\n            if (tokPos >= inputLen) raise(start, \"Unterminated regular expression\");\n            var ch = input.charAt(tokPos);\n            if (newline.test(ch)) raise(start, \"Unterminated regular expression\");\n            if (!escaped) {\n              if (ch === \"[\") inClass = true;else if (ch === \"]\" && inClass) inClass = false;else if (ch === \"/\" && !inClass) break;\n              escaped = ch === \"\\\\\";\n            } else escaped = false;\n            ++tokPos;\n          }\n          var content = input.slice(start, tokPos);\n          ++tokPos;\n          var mods = readWord1();\n          if (mods && !/^[gmsiy]*$/.test(mods)) raise(start, \"Invalid regexp flag\");\n          try {\n            var value = new RegExp(content, mods);\n          } catch (e) {\n            if (e instanceof SyntaxError) raise(start, e.message);\n            raise(e);\n          }\n          return finishToken(_regexp, value);\n        }\n        function readInt(radix, len) {\n          var start = tokPos,\n            total = 0;\n          for (var i = 0, e = len == null ? Infinity : len; i < e; ++i) {\n            var code = input.charCodeAt(tokPos),\n              val;\n            if (code >= 97) val = code - 97 + 10;else if (code >= 65) val = code - 65 + 10;else if (code >= 48 && code <= 57) val = code - 48;else val = Infinity;\n            if (val >= radix) break;\n            ++tokPos;\n            total = total * radix + val;\n          }\n          if (tokPos === start || len != null && tokPos - start !== len) return null;\n          return total;\n        }\n        function readHexNumber() {\n          tokPos += 2;\n          var val = readInt(16);\n          if (val == null) raise(tokStart + 2, \"Expected hexadecimal number\");\n          if (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n          return finishToken(_num, val);\n        }\n        function readNumber(startsWithDot) {\n          var start = tokPos,\n            isFloat = false,\n            octal = input.charCodeAt(tokPos) === 48;\n          if (!startsWithDot && readInt(10) === null) raise(start, \"Invalid number\");\n          if (input.charCodeAt(tokPos) === 46) {\n            ++tokPos;\n            readInt(10);\n            isFloat = true;\n          }\n          var next = input.charCodeAt(tokPos);\n          if (next === 69 || next === 101) {\n            next = input.charCodeAt(++tokPos);\n            if (next === 43 || next === 45) ++tokPos;\n            if (readInt(10) === null) raise(start, \"Invalid number\");\n            isFloat = true;\n          }\n          if (isIdentifierStart(input.charCodeAt(tokPos))) raise(tokPos, \"Identifier directly after number\");\n          var str = input.slice(start, tokPos),\n            val;\n          if (isFloat) val = parseFloat(str);else if (!octal || str.length === 1) val = parseInt(str, 10);else if (/[89]/.test(str) || strict) raise(start, \"Invalid number\");else val = parseInt(str, 8);\n          return finishToken(_num, val);\n        }\n        function readString(quote) {\n          tokPos++;\n          var out = \"\";\n          for (;;) {\n            if (tokPos >= inputLen) raise(tokStart, \"Unterminated string constant\");\n            var ch = input.charCodeAt(tokPos);\n            if (ch === quote) {\n              ++tokPos;\n              return finishToken(_string, out);\n            }\n            if (ch === 92) {\n              ch = input.charCodeAt(++tokPos);\n              var octal = /^[0-7]+/.exec(input.slice(tokPos, tokPos + 3));\n              if (octal) octal = octal[0];\n              while (octal && parseInt(octal, 8) > 255) octal = octal.slice(0, -1);\n              if (octal === \"0\") octal = null;\n              ++tokPos;\n              if (octal) {\n                if (strict) raise(tokPos - 2, \"Octal literal in strict mode\");\n                out += String.fromCharCode(parseInt(octal, 8));\n                tokPos += octal.length - 1;\n              } else {\n                switch (ch) {\n                  case 110:\n                    out += \"\\n\";\n                    break;\n                  case 114:\n                    out += \"\\r\";\n                    break;\n                  case 120:\n                    out += String.fromCharCode(readHexChar(2));\n                    break;\n                  case 117:\n                    out += String.fromCharCode(readHexChar(4));\n                    break;\n                  case 85:\n                    out += String.fromCharCode(readHexChar(8));\n                    break;\n                  case 116:\n                    out += \"\\t\";\n                    break;\n                  case 98:\n                    out += \"\\b\";\n                    break;\n                  case 118:\n                    out += \"\\u000b\";\n                    break;\n                  case 102:\n                    out += \"\\f\";\n                    break;\n                  case 48:\n                    out += \"\\0\";\n                    break;\n                  case 13:\n                    if (input.charCodeAt(tokPos) === 10) ++tokPos;\n                  case 10:\n                    if (options.locations) {\n                      tokLineStart = tokPos;\n                      ++tokCurLine;\n                    }\n                    break;\n                  default:\n                    out += String.fromCharCode(ch);\n                    break;\n                }\n              }\n            } else {\n              if (ch === 13 || ch === 10 || ch === 8232 || ch === 8233) raise(tokStart, \"Unterminated string constant\");\n              out += String.fromCharCode(ch);\n              ++tokPos;\n            }\n          }\n        }\n        function readHexChar(len) {\n          var n = readInt(16, len);\n          if (n === null) raise(tokStart, \"Bad character escape sequence\");\n          return n;\n        }\n        var containsEsc;\n        function readWord1() {\n          containsEsc = false;\n          var word,\n            first = true,\n            start = tokPos;\n          for (;;) {\n            var ch = input.charCodeAt(tokPos);\n            if (isIdentifierChar(ch)) {\n              if (containsEsc) word += input.charAt(tokPos);\n              ++tokPos;\n            } else if (ch === 92) {\n              if (!containsEsc) word = input.slice(start, tokPos);\n              containsEsc = true;\n              if (input.charCodeAt(++tokPos) != 117) raise(tokPos, \"Expecting Unicode escape sequence \\\\uXXXX\");\n              ++tokPos;\n              var esc = readHexChar(4);\n              var escStr = String.fromCharCode(esc);\n              if (!escStr) raise(tokPos - 1, \"Invalid Unicode escape\");\n              if (!(first ? isIdentifierStart(esc) : isIdentifierChar(esc))) raise(tokPos - 4, \"Invalid Unicode escape\");\n              word += escStr;\n            } else {\n              break;\n            }\n            first = false;\n          }\n          return containsEsc ? word : input.slice(start, tokPos);\n        }\n        function readWord() {\n          var word = readWord1();\n          var type = _name;\n          if (!containsEsc && isKeyword(word)) type = keywordTypes[word];\n          return finishToken(type, word);\n        }\n        function next() {\n          lastStart = tokStart;\n          lastEnd = tokEnd;\n          lastEndLoc = tokEndLoc;\n          readToken();\n        }\n        function setStrict(strct) {\n          strict = strct;\n          tokPos = tokStart;\n          if (options.locations) {\n            while (tokPos < tokLineStart) {\n              tokLineStart = input.lastIndexOf(\"\\n\", tokLineStart - 2) + 1;\n              --tokCurLine;\n            }\n          }\n          skipSpace();\n          readToken();\n        }\n        function node_t() {\n          this.type = null;\n          this.start = tokStart;\n          this.end = null;\n        }\n        function node_loc_t() {\n          this.start = tokStartLoc;\n          this.end = null;\n          if (sourceFile !== null) this.source = sourceFile;\n        }\n        function startNode() {\n          var node = new node_t();\n          if (options.locations) node.loc = new node_loc_t();\n          if (options.directSourceFile) node.sourceFile = options.directSourceFile;\n          if (options.ranges) node.range = [tokStart, 0];\n          return node;\n        }\n        function startNodeFrom(other) {\n          var node = new node_t();\n          node.start = other.start;\n          if (options.locations) {\n            node.loc = new node_loc_t();\n            node.loc.start = other.loc.start;\n          }\n          if (options.ranges) node.range = [other.range[0], 0];\n          return node;\n        }\n        function finishNode(node, type) {\n          node.type = type;\n          node.end = lastEnd;\n          if (options.locations) node.loc.end = lastEndLoc;\n          if (options.ranges) node.range[1] = lastEnd;\n          return node;\n        }\n        function isUseStrict(stmt) {\n          return options.ecmaVersion >= 5 && stmt.type === \"ExpressionStatement\" && stmt.expression.type === \"Literal\" && stmt.expression.value === \"use strict\";\n        }\n        function eat(type) {\n          if (tokType === type) {\n            next();\n            return true;\n          }\n        }\n        function canInsertSemicolon() {\n          return !options.strictSemicolons && (tokType === _eof || tokType === _braceR || newline.test(input.slice(lastEnd, tokStart)));\n        }\n        function semicolon() {\n          if (!eat(_semi) && !canInsertSemicolon()) unexpected();\n        }\n        function expect(type) {\n          if (tokType === type) next();else unexpected();\n        }\n        function unexpected() {\n          raise(tokStart, \"Unexpected token\");\n        }\n        function checkLVal(expr) {\n          if (expr.type !== \"Identifier\" && expr.type !== \"MemberExpression\") raise(expr.start, \"Assigning to rvalue\");\n          if (strict && expr.type === \"Identifier\" && isStrictBadIdWord(expr.name)) raise(expr.start, \"Assigning to \" + expr.name + \" in strict mode\");\n        }\n        function parseTopLevel(program) {\n          lastStart = lastEnd = tokPos;\n          if (options.locations) lastEndLoc = new line_loc_t();\n          inFunction = strict = null;\n          labels = [];\n          readToken();\n          var node = program || startNode(),\n            first = true;\n          if (!program) node.body = [];\n          while (tokType !== _eof) {\n            var stmt = parseStatement();\n            node.body.push(stmt);\n            if (first && isUseStrict(stmt)) setStrict(true);\n            first = false;\n          }\n          return finishNode(node, \"Program\");\n        }\n        var loopLabel = {\n            kind: \"loop\"\n          },\n          switchLabel = {\n            kind: \"switch\"\n          };\n        function parseStatement() {\n          if (tokType === _slash || tokType === _assign && tokVal == \"/=\") readToken(true);\n          var starttype = tokType,\n            node = startNode();\n          switch (starttype) {\n            case _break:\n            case _continue:\n              next();\n              var isBreak = starttype === _break;\n              if (eat(_semi) || canInsertSemicolon()) node.label = null;else if (tokType !== _name) unexpected();else {\n                node.label = parseIdent();\n                semicolon();\n              }\n              for (var i = 0; i < labels.length; ++i) {\n                var lab = labels[i];\n                if (node.label == null || lab.name === node.label.name) {\n                  if (lab.kind != null && (isBreak || lab.kind === \"loop\")) break;\n                  if (node.label && isBreak) break;\n                }\n              }\n              if (i === labels.length) raise(node.start, \"Unsyntactic \" + starttype.keyword);\n              return finishNode(node, isBreak ? \"BreakStatement\" : \"ContinueStatement\");\n            case _debugger:\n              next();\n              semicolon();\n              return finishNode(node, \"DebuggerStatement\");\n            case _do:\n              next();\n              labels.push(loopLabel);\n              node.body = parseStatement();\n              labels.pop();\n              expect(_while);\n              node.test = parseParenExpression();\n              semicolon();\n              return finishNode(node, \"DoWhileStatement\");\n            case _for:\n              next();\n              labels.push(loopLabel);\n              expect(_parenL);\n              if (tokType === _semi) return parseFor(node, null);\n              if (tokType === _var) {\n                var init = startNode();\n                next();\n                parseVar(init, true);\n                finishNode(init, \"VariableDeclaration\");\n                if (init.declarations.length === 1 && eat(_in)) return parseForIn(node, init);\n                return parseFor(node, init);\n              }\n              var init = parseExpression(false, true);\n              if (eat(_in)) {\n                checkLVal(init);\n                return parseForIn(node, init);\n              }\n              return parseFor(node, init);\n            case _function:\n              next();\n              return parseFunction(node, true);\n            case _if:\n              next();\n              node.test = parseParenExpression();\n              node.consequent = parseStatement();\n              node.alternate = eat(_else) ? parseStatement() : null;\n              return finishNode(node, \"IfStatement\");\n            case _return:\n              if (!inFunction && !options.allowReturnOutsideFunction) raise(tokStart, \"'return' outside of function\");\n              next();\n              if (eat(_semi) || canInsertSemicolon()) node.argument = null;else {\n                node.argument = parseExpression();\n                semicolon();\n              }\n              return finishNode(node, \"ReturnStatement\");\n            case _switch:\n              next();\n              node.discriminant = parseParenExpression();\n              node.cases = [];\n              expect(_braceL);\n              labels.push(switchLabel);\n              for (var cur, sawDefault; tokType != _braceR;) {\n                if (tokType === _case || tokType === _default) {\n                  var isCase = tokType === _case;\n                  if (cur) finishNode(cur, \"SwitchCase\");\n                  node.cases.push(cur = startNode());\n                  cur.consequent = [];\n                  next();\n                  if (isCase) cur.test = parseExpression();else {\n                    if (sawDefault) raise(lastStart, \"Multiple default clauses\");\n                    sawDefault = true;\n                    cur.test = null;\n                  }\n                  expect(_colon);\n                } else {\n                  if (!cur) unexpected();\n                  cur.consequent.push(parseStatement());\n                }\n              }\n              if (cur) finishNode(cur, \"SwitchCase\");\n              next();\n              labels.pop();\n              return finishNode(node, \"SwitchStatement\");\n            case _throw:\n              next();\n              if (newline.test(input.slice(lastEnd, tokStart))) raise(lastEnd, \"Illegal newline after throw\");\n              node.argument = parseExpression();\n              semicolon();\n              return finishNode(node, \"ThrowStatement\");\n            case _try:\n              next();\n              node.block = parseBlock();\n              node.handler = null;\n              if (tokType === _catch) {\n                var clause = startNode();\n                next();\n                expect(_parenL);\n                clause.param = parseIdent();\n                if (strict && isStrictBadIdWord(clause.param.name)) raise(clause.param.start, \"Binding \" + clause.param.name + \" in strict mode\");\n                expect(_parenR);\n                clause.guard = null;\n                clause.body = parseBlock();\n                node.handler = finishNode(clause, \"CatchClause\");\n              }\n              node.guardedHandlers = empty;\n              node.finalizer = eat(_finally) ? parseBlock() : null;\n              if (!node.handler && !node.finalizer) raise(node.start, \"Missing catch or finally clause\");\n              return finishNode(node, \"TryStatement\");\n            case _var:\n              next();\n              parseVar(node);\n              semicolon();\n              return finishNode(node, \"VariableDeclaration\");\n            case _while:\n              next();\n              node.test = parseParenExpression();\n              labels.push(loopLabel);\n              node.body = parseStatement();\n              labels.pop();\n              return finishNode(node, \"WhileStatement\");\n            case _with:\n              if (strict) raise(tokStart, \"'with' in strict mode\");\n              next();\n              node.object = parseParenExpression();\n              node.body = parseStatement();\n              return finishNode(node, \"WithStatement\");\n            case _braceL:\n              return parseBlock();\n            case _semi:\n              next();\n              return finishNode(node, \"EmptyStatement\");\n            default:\n              var maybeName = tokVal,\n                expr = parseExpression();\n              if (starttype === _name && expr.type === \"Identifier\" && eat(_colon)) {\n                for (var i = 0; i < labels.length; ++i) if (labels[i].name === maybeName) raise(expr.start, \"Label '\" + maybeName + \"' is already declared\");\n                var kind = tokType.isLoop ? \"loop\" : tokType === _switch ? \"switch\" : null;\n                labels.push({\n                  name: maybeName,\n                  kind: kind\n                });\n                node.body = parseStatement();\n                labels.pop();\n                node.label = expr;\n                return finishNode(node, \"LabeledStatement\");\n              } else {\n                node.expression = expr;\n                semicolon();\n                return finishNode(node, \"ExpressionStatement\");\n              }\n          }\n        }\n        function parseParenExpression() {\n          expect(_parenL);\n          var val = parseExpression();\n          expect(_parenR);\n          return val;\n        }\n        function parseBlock(allowStrict) {\n          var node = startNode(),\n            first = true,\n            strict = false,\n            oldStrict;\n          node.body = [];\n          expect(_braceL);\n          while (!eat(_braceR)) {\n            var stmt = parseStatement();\n            node.body.push(stmt);\n            if (first && allowStrict && isUseStrict(stmt)) {\n              oldStrict = strict;\n              setStrict(strict = true);\n            }\n            first = false;\n          }\n          if (strict && !oldStrict) setStrict(false);\n          return finishNode(node, \"BlockStatement\");\n        }\n        function parseFor(node, init) {\n          node.init = init;\n          expect(_semi);\n          node.test = tokType === _semi ? null : parseExpression();\n          expect(_semi);\n          node.update = tokType === _parenR ? null : parseExpression();\n          expect(_parenR);\n          node.body = parseStatement();\n          labels.pop();\n          return finishNode(node, \"ForStatement\");\n        }\n        function parseForIn(node, init) {\n          node.left = init;\n          node.right = parseExpression();\n          expect(_parenR);\n          node.body = parseStatement();\n          labels.pop();\n          return finishNode(node, \"ForInStatement\");\n        }\n        function parseVar(node, noIn) {\n          node.declarations = [];\n          node.kind = \"var\";\n          for (;;) {\n            var decl = startNode();\n            decl.id = parseIdent();\n            if (strict && isStrictBadIdWord(decl.id.name)) raise(decl.id.start, \"Binding \" + decl.id.name + \" in strict mode\");\n            decl.init = eat(_eq) ? parseExpression(true, noIn) : null;\n            node.declarations.push(finishNode(decl, \"VariableDeclarator\"));\n            if (!eat(_comma)) break;\n          }\n          return node;\n        }\n        function parseExpression(noComma, noIn) {\n          var expr = parseMaybeAssign(noIn);\n          if (!noComma && tokType === _comma) {\n            var node = startNodeFrom(expr);\n            node.expressions = [expr];\n            while (eat(_comma)) node.expressions.push(parseMaybeAssign(noIn));\n            return finishNode(node, \"SequenceExpression\");\n          }\n          return expr;\n        }\n        function parseMaybeAssign(noIn) {\n          var left = parseMaybeConditional(noIn);\n          if (tokType.isAssign) {\n            var node = startNodeFrom(left);\n            node.operator = tokVal;\n            node.left = left;\n            next();\n            node.right = parseMaybeAssign(noIn);\n            checkLVal(left);\n            return finishNode(node, \"AssignmentExpression\");\n          }\n          return left;\n        }\n        function parseMaybeConditional(noIn) {\n          var expr = parseExprOps(noIn);\n          if (eat(_question)) {\n            var node = startNodeFrom(expr);\n            node.test = expr;\n            node.consequent = parseExpression(true);\n            expect(_colon);\n            node.alternate = parseExpression(true, noIn);\n            return finishNode(node, \"ConditionalExpression\");\n          }\n          return expr;\n        }\n        function parseExprOps(noIn) {\n          return parseExprOp(parseMaybeUnary(), -1, noIn);\n        }\n        function parseExprOp(left, minPrec, noIn) {\n          var prec = tokType.binop;\n          if (prec != null && (!noIn || tokType !== _in)) {\n            if (prec > minPrec) {\n              var node = startNodeFrom(left);\n              node.left = left;\n              node.operator = tokVal;\n              var op = tokType;\n              next();\n              node.right = parseExprOp(parseMaybeUnary(), prec, noIn);\n              var exprNode = finishNode(node, op === _logicalOR || op === _logicalAND ? \"LogicalExpression\" : \"BinaryExpression\");\n              return parseExprOp(exprNode, minPrec, noIn);\n            }\n          }\n          return left;\n        }\n        function parseMaybeUnary() {\n          if (tokType.prefix) {\n            var node = startNode(),\n              update = tokType.isUpdate;\n            node.operator = tokVal;\n            node.prefix = true;\n            tokRegexpAllowed = true;\n            next();\n            node.argument = parseMaybeUnary();\n            if (update) checkLVal(node.argument);else if (strict && node.operator === \"delete\" && node.argument.type === \"Identifier\") raise(node.start, \"Deleting local variable in strict mode\");\n            return finishNode(node, update ? \"UpdateExpression\" : \"UnaryExpression\");\n          }\n          var expr = parseExprSubscripts();\n          while (tokType.postfix && !canInsertSemicolon()) {\n            var node = startNodeFrom(expr);\n            node.operator = tokVal;\n            node.prefix = false;\n            node.argument = expr;\n            checkLVal(expr);\n            next();\n            expr = finishNode(node, \"UpdateExpression\");\n          }\n          return expr;\n        }\n        function parseExprSubscripts() {\n          return parseSubscripts(parseExprAtom());\n        }\n        function parseSubscripts(base, noCalls) {\n          if (eat(_dot)) {\n            var node = startNodeFrom(base);\n            node.object = base;\n            node.property = parseIdent(true);\n            node.computed = false;\n            return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n          } else if (eat(_bracketL)) {\n            var node = startNodeFrom(base);\n            node.object = base;\n            node.property = parseExpression();\n            node.computed = true;\n            expect(_bracketR);\n            return parseSubscripts(finishNode(node, \"MemberExpression\"), noCalls);\n          } else if (!noCalls && eat(_parenL)) {\n            var node = startNodeFrom(base);\n            node.callee = base;\n            node.arguments = parseExprList(_parenR, false);\n            return parseSubscripts(finishNode(node, \"CallExpression\"), noCalls);\n          } else return base;\n        }\n        function parseExprAtom() {\n          switch (tokType) {\n            case _this:\n              var node = startNode();\n              next();\n              return finishNode(node, \"ThisExpression\");\n            case _name:\n              return parseIdent();\n            case _num:\n            case _string:\n            case _regexp:\n              var node = startNode();\n              node.value = tokVal;\n              node.raw = input.slice(tokStart, tokEnd);\n              next();\n              return finishNode(node, \"Literal\");\n            case _null:\n            case _true:\n            case _false:\n              var node = startNode();\n              node.value = tokType.atomValue;\n              node.raw = tokType.keyword;\n              next();\n              return finishNode(node, \"Literal\");\n            case _parenL:\n              var tokStartLoc1 = tokStartLoc,\n                tokStart1 = tokStart;\n              next();\n              var val = parseExpression();\n              val.start = tokStart1;\n              val.end = tokEnd;\n              if (options.locations) {\n                val.loc.start = tokStartLoc1;\n                val.loc.end = tokEndLoc;\n              }\n              if (options.ranges) val.range = [tokStart1, tokEnd];\n              expect(_parenR);\n              return val;\n            case _bracketL:\n              var node = startNode();\n              next();\n              node.elements = parseExprList(_bracketR, true, true);\n              return finishNode(node, \"ArrayExpression\");\n            case _braceL:\n              return parseObj();\n            case _function:\n              var node = startNode();\n              next();\n              return parseFunction(node, false);\n            case _new:\n              return parseNew();\n            default:\n              unexpected();\n          }\n        }\n        function parseNew() {\n          var node = startNode();\n          next();\n          node.callee = parseSubscripts(parseExprAtom(), true);\n          if (eat(_parenL)) node.arguments = parseExprList(_parenR, false);else node.arguments = empty;\n          return finishNode(node, \"NewExpression\");\n        }\n        function parseObj() {\n          var node = startNode(),\n            first = true,\n            sawGetSet = false;\n          node.properties = [];\n          next();\n          while (!eat(_braceR)) {\n            if (!first) {\n              expect(_comma);\n              if (options.allowTrailingCommas && eat(_braceR)) break;\n            } else first = false;\n            var prop = {\n                key: parsePropertyName()\n              },\n              isGetSet = false,\n              kind;\n            if (eat(_colon)) {\n              prop.value = parseExpression(true);\n              kind = prop.kind = \"init\";\n            } else if (options.ecmaVersion >= 5 && prop.key.type === \"Identifier\" && (prop.key.name === \"get\" || prop.key.name === \"set\")) {\n              isGetSet = sawGetSet = true;\n              kind = prop.kind = prop.key.name;\n              prop.key = parsePropertyName();\n              if (tokType !== _parenL) unexpected();\n              prop.value = parseFunction(startNode(), false);\n            } else unexpected();\n            if (prop.key.type === \"Identifier\" && (strict || sawGetSet)) {\n              for (var i = 0; i < node.properties.length; ++i) {\n                var other = node.properties[i];\n                if (other.key.name === prop.key.name) {\n                  var conflict = kind == other.kind || isGetSet && other.kind === \"init\" || kind === \"init\" && (other.kind === \"get\" || other.kind === \"set\");\n                  if (conflict && !strict && kind === \"init\" && other.kind === \"init\") conflict = false;\n                  if (conflict) raise(prop.key.start, \"Redefinition of property\");\n                }\n              }\n            }\n            node.properties.push(prop);\n          }\n          return finishNode(node, \"ObjectExpression\");\n        }\n        function parsePropertyName() {\n          if (tokType === _num || tokType === _string) return parseExprAtom();\n          return parseIdent(true);\n        }\n        function parseFunction(node, isStatement) {\n          if (tokType === _name) node.id = parseIdent();else if (isStatement) unexpected();else node.id = null;\n          node.params = [];\n          var first = true;\n          expect(_parenL);\n          while (!eat(_parenR)) {\n            if (!first) expect(_comma);else first = false;\n            node.params.push(parseIdent());\n          }\n          var oldInFunc = inFunction,\n            oldLabels = labels;\n          inFunction = true;\n          labels = [];\n          node.body = parseBlock(true);\n          inFunction = oldInFunc;\n          labels = oldLabels;\n          if (strict || node.body.body.length && isUseStrict(node.body.body[0])) {\n            for (var i = node.id ? -1 : 0; i < node.params.length; ++i) {\n              var id = i < 0 ? node.id : node.params[i];\n              if (isStrictReservedWord(id.name) || isStrictBadIdWord(id.name)) raise(id.start, \"Defining '\" + id.name + \"' in strict mode\");\n              if (i >= 0) for (var j = 0; j < i; ++j) if (id.name === node.params[j].name) raise(id.start, \"Argument name clash in strict mode\");\n            }\n          }\n          return finishNode(node, isStatement ? \"FunctionDeclaration\" : \"FunctionExpression\");\n        }\n        function parseExprList(close, allowTrailingComma, allowEmpty) {\n          var elts = [],\n            first = true;\n          while (!eat(close)) {\n            if (!first) {\n              expect(_comma);\n              if (allowTrailingComma && options.allowTrailingCommas && eat(close)) break;\n            } else first = false;\n            if (allowEmpty && tokType === _comma) elts.push(null);else elts.push(parseExpression(true));\n          }\n          return elts;\n        }\n        function parseIdent(liberal) {\n          var node = startNode();\n          if (liberal && options.forbidReserved == \"everywhere\") liberal = false;\n          if (tokType === _name) {\n            if (!liberal && (options.forbidReserved && (options.ecmaVersion === 3 ? isReservedWord3 : isReservedWord5)(tokVal) || strict && isStrictReservedWord(tokVal)) && input.slice(tokStart, tokEnd).indexOf(\"\\\\\") == -1) raise(tokStart, \"The keyword '\" + tokVal + \"' is reserved\");\n            node.name = tokVal;\n          } else if (liberal && tokType.keyword) {\n            node.name = tokType.keyword;\n          } else {\n            unexpected();\n          }\n          tokRegexpAllowed = false;\n          next();\n          return finishNode(node, \"Identifier\");\n        }\n      });\n      if (!acorn.version) acorn = null;\n    }\n    function parse(code, options) {\n      return (global.acorn || acorn).parse(code, options);\n    }\n    var binaryOperators = {\n      '+': '__add',\n      '-': '__subtract',\n      '*': '__multiply',\n      '/': '__divide',\n      '%': '__modulo',\n      '==': '__equals',\n      '!=': '__equals'\n    };\n    var unaryOperators = {\n      '-': '__negate',\n      '+': '__self'\n    };\n    var fields = Base.each(['add', 'subtract', 'multiply', 'divide', 'modulo', 'equals', 'negate'], function (name) {\n      this['__' + name] = '#' + name;\n    }, {\n      __self: function () {\n        return this;\n      }\n    });\n    Point.inject(fields);\n    Size.inject(fields);\n    Color.inject(fields);\n    function __$__(left, operator, right) {\n      var handler = binaryOperators[operator];\n      if (left && left[handler]) {\n        var res = left[handler](right);\n        return operator === '!=' ? !res : res;\n      }\n      switch (operator) {\n        case '+':\n          return left + right;\n        case '-':\n          return left - right;\n        case '*':\n          return left * right;\n        case '/':\n          return left / right;\n        case '%':\n          return left % right;\n        case '==':\n          return left == right;\n        case '!=':\n          return left != right;\n      }\n    }\n    function $__(operator, value) {\n      var handler = unaryOperators[operator];\n      if (value && value[handler]) return value[handler]();\n      switch (operator) {\n        case '+':\n          return +value;\n        case '-':\n          return -value;\n      }\n    }\n    function compile(code, options) {\n      if (!code) return '';\n      options = options || {};\n      var insertions = [];\n      function getOffset(offset) {\n        for (var i = 0, l = insertions.length; i < l; i++) {\n          var insertion = insertions[i];\n          if (insertion[0] >= offset) break;\n          offset += insertion[1];\n        }\n        return offset;\n      }\n      function getCode(node) {\n        return code.substring(getOffset(node.range[0]), getOffset(node.range[1]));\n      }\n      function getBetween(left, right) {\n        return code.substring(getOffset(left.range[1]), getOffset(right.range[0]));\n      }\n      function replaceCode(node, str) {\n        var start = getOffset(node.range[0]),\n          end = getOffset(node.range[1]),\n          insert = 0;\n        for (var i = insertions.length - 1; i >= 0; i--) {\n          if (start > insertions[i][0]) {\n            insert = i + 1;\n            break;\n          }\n        }\n        insertions.splice(insert, 0, [start, str.length - end + start]);\n        code = code.substring(0, start) + str + code.substring(end);\n      }\n      function handleOverloading(node, parent) {\n        switch (node.type) {\n          case 'UnaryExpression':\n            if (node.operator in unaryOperators && node.argument.type !== 'Literal') {\n              var arg = getCode(node.argument);\n              replaceCode(node, '$__(\"' + node.operator + '\", ' + arg + ')');\n            }\n            break;\n          case 'BinaryExpression':\n            if (node.operator in binaryOperators && node.left.type !== 'Literal') {\n              var left = getCode(node.left),\n                right = getCode(node.right),\n                between = getBetween(node.left, node.right),\n                operator = node.operator;\n              replaceCode(node, '__$__(' + left + ',' + between.replace(new RegExp('\\\\' + operator), '\"' + operator + '\"') + ', ' + right + ')');\n            }\n            break;\n          case 'UpdateExpression':\n          case 'AssignmentExpression':\n            var parentType = parent && parent.type;\n            if (!(parentType === 'ForStatement' || parentType === 'BinaryExpression' && /^[=!<>]/.test(parent.operator) || parentType === 'MemberExpression' && parent.computed)) {\n              if (node.type === 'UpdateExpression') {\n                var arg = getCode(node.argument),\n                  exp = '__$__(' + arg + ', \"' + node.operator[0] + '\", 1)',\n                  str = arg + ' = ' + exp;\n                if (node.prefix) {\n                  str = '(' + str + ')';\n                } else if (parentType === 'AssignmentExpression' || parentType === 'VariableDeclarator' || parentType === 'BinaryExpression') {\n                  if (getCode(parent.left || parent.id) === arg) str = exp;\n                  str = arg + '; ' + str;\n                }\n                replaceCode(node, str);\n              } else {\n                if (/^.=$/.test(node.operator) && node.left.type !== 'Literal') {\n                  var left = getCode(node.left),\n                    right = getCode(node.right),\n                    exp = left + ' = __$__(' + left + ', \"' + node.operator[0] + '\", ' + right + ')';\n                  replaceCode(node, /^\\(.*\\)$/.test(getCode(node)) ? '(' + exp + ')' : exp);\n                }\n              }\n            }\n            break;\n        }\n      }\n      function handleExports(node) {\n        switch (node.type) {\n          case 'ExportDefaultDeclaration':\n            replaceCode({\n              range: [node.start, node.declaration.start]\n            }, 'module.exports = ');\n            break;\n          case 'ExportNamedDeclaration':\n            var declaration = node.declaration;\n            var specifiers = node.specifiers;\n            if (declaration) {\n              var declarations = declaration.declarations;\n              if (declarations) {\n                declarations.forEach(function (dec) {\n                  replaceCode(dec, 'module.exports.' + getCode(dec));\n                });\n                replaceCode({\n                  range: [node.start, declaration.start + declaration.kind.length]\n                }, '');\n              }\n            } else if (specifiers) {\n              var exports = specifiers.map(function (specifier) {\n                var name = getCode(specifier);\n                return 'module.exports.' + name + ' = ' + name + '; ';\n              }).join('');\n              if (exports) {\n                replaceCode(node, exports);\n              }\n            }\n            break;\n        }\n      }\n      function walkAST(node, parent, paperFeatures) {\n        if (node) {\n          for (var key in node) {\n            if (key !== 'range' && key !== 'loc') {\n              var value = node[key];\n              if (Array.isArray(value)) {\n                for (var i = 0, l = value.length; i < l; i++) {\n                  walkAST(value[i], node, paperFeatures);\n                }\n              } else if (value && typeof value === 'object') {\n                walkAST(value, node, paperFeatures);\n              }\n            }\n          }\n          if (paperFeatures.operatorOverloading !== false) {\n            handleOverloading(node, parent);\n          }\n          if (paperFeatures.moduleExports !== false) {\n            handleExports(node);\n          }\n        }\n      }\n      function encodeVLQ(value) {\n        var res = '',\n          base64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n        value = (Math.abs(value) << 1) + (value < 0 ? 1 : 0);\n        while (value || !res) {\n          var next = value & 32 - 1;\n          value >>= 5;\n          if (value) next |= 32;\n          res += base64[next];\n        }\n        return res;\n      }\n      var url = options.url || '',\n        sourceMaps = options.sourceMaps,\n        paperFeatures = options.paperFeatures || {},\n        source = options.source || code,\n        offset = options.offset || 0,\n        agent = paper.agent,\n        version = agent.versionNumber,\n        offsetCode = false,\n        lineBreaks = /\\r\\n|\\n|\\r/mg,\n        map;\n      if (sourceMaps && (agent.chrome && version >= 30 || agent.webkit && version >= 537.76 || agent.firefox && version >= 23 || agent.node)) {\n        if (agent.node) {\n          offset -= 2;\n        } else if (window && url && !window.location.href.indexOf(url)) {\n          var html = document.getElementsByTagName('html')[0].innerHTML;\n          offset = html.substr(0, html.indexOf(code) + 1).match(lineBreaks).length + 1;\n        }\n        offsetCode = offset > 0 && !(agent.chrome && version >= 36 || agent.safari && version >= 600 || agent.firefox && version >= 40 || agent.node);\n        var mappings = ['AA' + encodeVLQ(offsetCode ? 0 : offset) + 'A'];\n        mappings.length = (code.match(lineBreaks) || []).length + 1 + (offsetCode ? offset : 0);\n        map = {\n          version: 3,\n          file: url,\n          names: [],\n          mappings: mappings.join(';AACA'),\n          sourceRoot: '',\n          sources: [url],\n          sourcesContent: [source]\n        };\n      }\n      if (paperFeatures.operatorOverloading !== false || paperFeatures.moduleExports !== false) {\n        walkAST(parse(code, {\n          ranges: true,\n          preserveParens: true,\n          sourceType: 'module'\n        }), null, paperFeatures);\n      }\n      if (map) {\n        if (offsetCode) {\n          code = new Array(offset + 1).join('\\n') + code;\n        }\n        if (/^(inline|both)$/.test(sourceMaps)) {\n          code += \"\\n//# sourceMappingURL=data:application/json;base64,\" + self.btoa(unescape(encodeURIComponent(JSON.stringify(map))));\n        }\n        code += \"\\n//# sourceURL=\" + (url || 'paperscript');\n      }\n      return {\n        url: url,\n        source: source,\n        code: code,\n        map: map\n      };\n    }\n    function execute(code, scope, options) {\n      paper = scope;\n      var view = scope.getView(),\n        tool = /\\btool\\.\\w+|\\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\\b/.test(code) && !/\\bnew\\s+Tool\\b/.test(code) ? new Tool() : null,\n        toolHandlers = tool ? tool._events : [],\n        handlers = ['onFrame', 'onResize'].concat(toolHandlers),\n        params = [],\n        args = [],\n        func,\n        compiled = typeof code === 'object' ? code : compile(code, options);\n      code = compiled.code;\n      function expose(scope, hidden) {\n        for (var key in scope) {\n          if ((hidden || !/^_/.test(key)) && new RegExp('([\\\\b\\\\s\\\\W]|^)' + key.replace(/\\$/g, '\\\\$') + '\\\\b').test(code)) {\n            params.push(key);\n            args.push(scope[key]);\n          }\n        }\n      }\n      expose({\n        __$__: __$__,\n        $__: $__,\n        paper: scope,\n        tool: tool\n      }, true);\n      expose(scope);\n      code = 'var module = { exports: {} }; ' + code;\n      var exports = Base.each(handlers, function (key) {\n        if (new RegExp('\\\\s+' + key + '\\\\b').test(code)) {\n          params.push(key);\n          this.push('module.exports.' + key + ' = ' + key + ';');\n        }\n      }, []).join('\\n');\n      if (exports) {\n        code += '\\n' + exports;\n      }\n      code += '\\nreturn module.exports;';\n      var agent = paper.agent;\n      if (document && (agent.chrome || agent.firefox && agent.versionNumber < 40)) {\n        var script = document.createElement('script'),\n          head = document.head || document.getElementsByTagName('head')[0];\n        if (agent.firefox) code = '\\n' + code;\n        script.appendChild(document.createTextNode('document.__paperscript__ = function(' + params + ') {' + code + '\\n}'));\n        head.appendChild(script);\n        func = document.__paperscript__;\n        delete document.__paperscript__;\n        head.removeChild(script);\n      } else {\n        func = Function(params, code);\n      }\n      var exports = func && func.apply(scope, args);\n      var obj = exports || {};\n      Base.each(toolHandlers, function (key) {\n        var value = obj[key];\n        if (value) tool[key] = value;\n      });\n      if (view) {\n        if (obj.onResize) view.setOnResize(obj.onResize);\n        view.emit('resize', {\n          size: view.size,\n          delta: new Point()\n        });\n        if (obj.onFrame) view.setOnFrame(obj.onFrame);\n        view.requestUpdate();\n      }\n      return exports;\n    }\n    function loadScript(script) {\n      if (/^text\\/(?:x-|)paperscript$/.test(script.type) && PaperScope.getAttribute(script, 'ignore') !== 'true') {\n        var canvasId = PaperScope.getAttribute(script, 'canvas'),\n          canvas = document.getElementById(canvasId),\n          src = script.src || script.getAttribute('data-src'),\n          async = PaperScope.hasAttribute(script, 'async'),\n          scopeAttribute = 'data-paper-scope';\n        if (!canvas) throw new Error('Unable to find canvas with id \"' + canvasId + '\"');\n        var scope = PaperScope.get(canvas.getAttribute(scopeAttribute)) || new PaperScope().setup(canvas);\n        canvas.setAttribute(scopeAttribute, scope._id);\n        if (src) {\n          Http.request({\n            url: src,\n            async: async,\n            mimeType: 'text/plain',\n            onLoad: function (code) {\n              execute(code, scope, src);\n            }\n          });\n        } else {\n          execute(script.innerHTML, scope, script.baseURI);\n        }\n        script.setAttribute('data-paper-ignore', 'true');\n        return scope;\n      }\n    }\n    function loadAll() {\n      Base.each(document && document.getElementsByTagName('script'), loadScript);\n    }\n    function load(script) {\n      return script ? loadScript(script) : loadAll();\n    }\n    if (window) {\n      if (document.readyState === 'complete') {\n        setTimeout(loadAll);\n      } else {\n        DomEvent.add(window, {\n          load: loadAll\n        });\n      }\n    }\n    return {\n      compile: compile,\n      execute: execute,\n      load: load,\n      parse: parse,\n      calculateBinary: __$__,\n      calculateUnary: $__\n    };\n  }.call(this);\n  var paper = new (PaperScope.inject(Base.exports, {\n    Base: Base,\n    Numerical: Numerical,\n    Key: Key,\n    DomEvent: DomEvent,\n    DomElement: DomElement,\n    document: document,\n    window: window,\n    Symbol: SymbolDefinition,\n    PlacedSymbol: SymbolItem\n  }))();\n  if (paper.agent.node) {\n    require('./node/extend.js')(paper);\n  }\n  if (typeof define === 'function' && define.amd) {\n    define('paper', paper);\n  } else if (typeof module === 'object' && module) {\n    module.exports = paper;\n  }\n  return paper;\n}.call(this, typeof self === 'object' ? self : null);"],"names":["self","undefined","window","document","Base","hidden","array","slice","create","Object","describe","getOwnPropertyDescriptor","define","defineProperty","forEach","iter","bind","i","l","this","length","call","forIn","hasOwnProperty","set","assign","dst","arguments","src","key","each","obj","desc","value","inject","dest","enumerable","beans","preserve","beansNames","field","name","val","get","substring","bean","isFunc","res","prev","base","match","toLowerCase","isPlainObject","writable","configurable","test","part","statics","prototype","extend","ctor","proto","initialize","apply","clone","constructor","pick","a","b","list","begin","end","module","exports","toString","_id","_class","_name","type","push","Formatter","instance","number","join","getClassName","importJSON","json","exportJSON","options","toJSON","serialize","props","exclude","filter","_prioritize","equals","obj1","obj2","Array","isArray","keys","read","start","amount","peek","__index","readIndex","_readIndex","readNull","__read","filtered","__filtered","remain","readList","entry","readNamed","getNamed","hasValue","source","getSource","__unfiltered","readSupported","that","__source","arg","hasNamed","prioritize","processed","handleKey","isPlainValue","asString","compact","dictionary","isRoot","formatter","precision","definitions","references","add","item","id","ref","unshift","_serialize","_compactSerialize","deserialize","_data","_setDictionary","_isRoot","isFirst","hasDictionary","isDictionary","args","JSON","stringify","target","parse","useTarget","Item","Layer","insert","concat","INSERT","items","itemsLength","startLength","splice","index","remove","append","_index","removed","capitalize","str","replace","toUpperCase","camelize","chr","hyphenate","Emitter","on","func","types","_eventTypes","handlers","_callbacks","indexOf","install","off","uninstall","once","handler","emit","event","setTarget","currentTarget","stop","responds","attach","detach","fire","_installEvents","events","_events","isString","PaperScope","paper","settings","applyMatrix","insertItems","handleSize","hitTolerance","project","projects","tools","_scopes","support","ctx","CanvasProvider","getContext","nativeDash","nativeBlendModes","BlendMode","nativeModes","release","agent","user","navigator","userAgent","os","exec","platform","browser","n","v1","v2","rv","chrome","v","version","versionNumber","parseFloat","trident","jsdom","webkit","atom","getView","_view","getPaper","execute","code","PaperScript","View","updateFocus","scope","setup","element","Project","createCanvas","width","height","getCanvas","activate","clear","handleAttribute","el","attr","getAttribute","hasAttribute","PaperScopeItem","_scope","_list","_reference","isActive","CollisionDetection","findItemBoundsCollisions","items1","items2","tolerance","getBounds","bounds","rect","left","top","right","bottom","bounds1","bounds2","findBoundsCollisions","findCurveBoundsCollisions","curves1","curves2","bothAxis","curves","min","Math","max","hor","ver","boundsA","boundsB","sweepVertical","onlySweepAxisCollisions","allBounds","lengthA","lengthAll","binarySearch","indices","coord","lo","hi","mid","pri0","pri1","sec0","sec1","allIndicesByPri0","sort","i1","i2","activeIndicesByPri1","allCollisions","curIndex","curBounds","origIndex","isCurrentA","isCurrentB","curCollisions","pruneCount","j","activeIndex","curSec1","curSec0","activeBounds","isActiveA","isActiveB","collisions","multiplier","pow","round","pair","val1","val2","separator","point","x","y","size","rectangle","Numerical","abscissas","weights","abs","sqrt","log2","log","LOG2E","EPSILON","MACHINE_EPSILON","clamp","getDiscriminant","c","split","D","E","ad","bd","cd","p","q","getNormalizationFactor","norm","CURVETIME_EPSILON","GEOMETRIC_EPSILON","TRIGONOMETRIC_EPSILON","ANGULAR_EPSILON","KAPPA","isZero","isMachineZero","integrate","f","w","A","B","m","sum","Ax","findRoot","df","fx","dx","nx","solveQuadratic","roots","x1","x2","Infinity","Q","R","count","boundless","minB","maxB","isFinite","solveCubic","d","b1","c2","qd","evaluate","x0","tmp","t","r","s","td","rd","UID","_pools","pool","Point","arg0","arg1","reading","hasY","_set","setAngle","angle","getLength","setLength","_angle","cos","sin","scale","getAngle","getAngleInRadians","PI","setAngleInRadians","getAngleInDegrees","setAngleInDegrees","div","NaN","dot","acos","atan2","getQuadrant","getDirectedAngle","cross","getDistance","normalize","current","rotate","center","subtract","transform","matrix","_transformPoint","multiply","divide","modulo","negate","isInside","Rectangle","contains","isClose","isCollinear","isColinear","isOrthogonal","isNaN","isInQuadrant","point1","point2","random","y1","y2","op","LinkedPoint","owner","setter","_x","_y","_owner","_setter","_dontNotify","getX","setX","getY","setY","isSelected","_selection","_getSelection","setSelected","selected","_changeSelection","Size","hasHeight","size1","size2","LinkedSize","_width","_height","getWidth","setWidth","getHeight","setHeight","arg2","arg3","from","to","frm","next","rt","getPoint","_dontLink","setPoint","getSize","_fw","_fh","setSize","sx","_sx","sy","_sy","h","getLeft","setLeft","getTop","setTop","getRight","setRight","getBottom","setBottom","getCenterX","setCenterX","getCenterY","setCenterY","getCenter","setCenter","getArea","isEmpty","_containsRectangle","_containsPoint","intersects","epsilon","intersect","unite","include","expand","parts","xFirst","LinkedRectangle","internal","Matrix","ok","_a","_b","_c","_d","_tx","_ty","reset","Error","tx","ty","_changed","getValues","_applyMatrix","mx","recursively","_setApplyMatrix","isIdentity","translate","shear","skew","toRadians","tan","a1","c1","d1","a2","b2","d2","tx2","ty2","prepend","tx1","ty1","appended","prepended","invert","det","inverted","concatenate","preConcatenate","chain","_shiftless","_orNullIfIdentity","isInvertible","isSingular","_transformCoordinates","_transformCorners","coords","_transformBounds","inverseTransform","_inverseTransform","decompose","degrees","asin","translation","getTranslation","rotation","scaling","skewing","getScaling","getRotation","applyToContext","prop","Line","arg4","asVector","_px","_py","_vx","_vy","getVector","line","isInfinite","getSide","getSignedDistance","p1x","p1y","v1x","v1y","p2x","p2y","v2x","v2y","dy","u1","u2","uMin","uMax","px","py","vx","vy","ccw","_children","_namedChildren","_activeLayer","_currentStyle","Style","_selectionItems","_selectionCount","_updateVersion","flags","view","_needsUpdate","_requested","_autoUpdate","requestUpdate","changes","_changes","changesById","_changesById","children","getCurrentStyle","setCurrentStyle","style","getIndex","getOptions","getLayers","getActiveLayer","getSymbolDefinitions","ids","getItems","class","SymbolItem","definition","_definition","getSymbols","getSelectedItems","selectionItems","selection","isInserted","_updateSelection","selectAll","setFullySelected","deselectAll","addLayer","layer","insertLayer","_remove","_setProject","setName","_insertItem","_created","NO_INSERT","insertChild","_getItems","getItem","removeOn","sets","_removeSets","mousedrag","other","draw","pixelRatio","save","param","offset","viewMatrix","matrices","updateMatrix","restore","strokeWidth","_drawSelection","_serializeFields","_canApplyMatrix","_canScaleStroke","_pivot","_visible","_blendMode","_opacity","_locked","_guide","_clipMask","_selectBounds","_selectChildren","pivot","visible","blendMode","opacity","locked","guide","clipMask","data","_countItemEvent","onFrame","_animateItem","onLoad","onError","_itemHandlers","_initialize","hasProps","_matrix","_parent","_style","parent","fields","fontSize","Group","_defaults","symbol","_symbol","cacheParent","_project","_bounds","_position","_decomposed","_globalMatrix","_clearBoundsCache","getId","getName","_removeNamed","_getOwner","namedChildren","getStyle","setStyle","getSelection","setSelection","flag","isFullySelected","isClipMask","setClipMask","setFillColor","setStrokeColor","getData","setData","getPosition","position","_getPositionFromBounds","setPosition","getPivot","setPivot","getStrokeBounds","stroke","getHandleBounds","handle","getInternalBounds","hasMatrix","opts","_boundsOptions","getStrokeScaling","cacheItem","_getCachedBounds","setBounds","_backup","_getBounds","_updateBoundsCache","_getBoundsCacheKey","noInternal","cacheKey","cached","nonscaling","hasStroke","_getStrokeMatrix","_item","getViewMatrix","_boundsCache","cache","_decompose","decomposed","setRotation","setScaling","getMatrix","setMatrix","getGlobalMatrix","_dontClone","parents","getApplyMatrix","setApplyMatrix","getTransformContent","setTransformContent","getProject","installEvents","getLayer","getParent","setParent","addChild","getChildren","setChildren","removeChildren","addChildren","getFirstChild","getLastChild","getNextSibling","getPreviousSibling","_equals","copy","deep","copyAttributes","copyContent","insertAbove","orig","excludeMatrix","rasterize","resolution","raster","Raster","getResolution","topLeft","getTopLeft","floor","bottomRight","getBottomRight","ceil","boundsSize","rasterSize","_contains","_asPathItem","Path","getIntersections","hitTest","_hitTest","HitResult","hitTestAll","all","hitTestChildren","_exclude","child","_hitTestChildren","parentViewMatrix","guides","tolerancePadding","_tolerancePadding","_getStrokePadding","checkSelf","hit","checkPoint","pt","checkPosition","checkCenter","checkBounds","points","_hitTestSelf","fill","hasFill","matches","compare","matchObject","firstOnly","overlapping","inside","recursive","path","childMatrix","insertChildren","inserted","notifySelf","_insertAt","insertBelow","sendToBack","bringToFront","appendTop","appendBottom","moveAbove","moveBelow","addTo","copyTo","reduce","namedArray","notifyParent","_dispose","replaceWith","reverseChildren","reverse","numChildren","isEditable","hasShadow","_getOrder","getList","list1","list2","hasChildren","isAbove","isBelow","isParent","isChild","isDescendant","isAncestor","isSibling","isGroupedWith","_applyRecursively","transformMatrix","fillColor","getFillColor","strokeColor","getStrokeColor","_transformContent","decomp","applyRecursively","globalToLocal","localToGlobal","parentToLocal","localToParent","fitBounds","itemRatio","rectRatio","newBounds","_setStyles","fillStyle","toCanvasStyle","strokeStyle","lineWidth","getStrokeWidth","strokeJoin","getStrokeJoin","strokeCap","getStrokeCap","miterLimit","getMiterLimit","lineJoin","lineCap","dashArray","getDashArray","dashOffset","getDashOffset","setLineDash","lineDashOffset","mozDash","mozDashOffset","blur","getShadowBlur","getShadowOffset","shadowColor","getShadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","parentStrokeMatrix","globalMatrix","mainCtx","itemOffset","prevOffset","normalBlend","nativeBlend","direct","dontStart","clip","_canComposite","pop","strokeMatrix","clipItem","globalAlpha","globalCompositeOperation","setTransform","_draw","dontFinish","getFillRule","process","_isUpdated","updateVersion","CompoundPath","updated","itemSelected","boundsSelected","positionSelected","_drawSelected","color","getSelectedColor","half","pos","beginPath","arc","deltas","delta","moveTo","lineTo","closePath","fillRect","hash","tween","easing","duration","Tween","_handleFrame","time","running","tweenTo","tweenFrom","_clipItem","_getClipItem","isClipped","setClipped","clipped","Shape","radius","_type","_size","_radius","setType","setRadius","getType","getShape","setShape","getRadius","rad","toPath","toShape","dontPaint","untransformed","isCircle","rx","ry","kappa","cx","cy","bezierCurveTo","getCornerCenter","halfSize","dir","corner","quadrant","isOnEllipseStroke","padding","vector","hitStroke","hitFill","strokeRadius","strokePadding","outer","inner","createShape","Circle","Ellipse","ellipse","_readEllipse","crossOrigin","_smoothing","image","object","getElementById","naturalHeight","setImage","setSource","_loaded","_image","canvas","_canvas","_setImage","copyCanvas","drawImage","_crossOrigin","_clear","getElement","getLoaded","u","getPpi","getImage","Event","setTimeout","DomEvent","load","error","complete","naturalWidth","_context","e","setCanvas","_change","setContext","context","toDataURL","Image","getCrossOrigin","setCrossOrigin","getSmoothing","setSmoothing","smoothing","getSubCanvas","getSubRaster","getAverageColor","PathItem","_sampleContext","clearRect","sampleSize","pixels","getImageData","channels","total","alpha","Color","getPixel","setPixel","components","_convert","_alpha","imageData","createImageData","putImageData","setImageData","disabled","DomElement","setPrefixed","setDefinition","SymbolDefinition","getDefinition","getSymbol","setSymbol","dontCenter","setItem","_dontCenter","place","values","segments","handles","ends","Segment","arg5","handleIn","handleOut","SegmentPoint","_point","hasHandles","_handleIn","_handleOut","_path","curve","_curves","_closed","getHandleIn","setHandleIn","getHandleOut","setHandleOut","isSmooth","clearHandles","oldSelection","getPath","getCurve","_segments","getCurves","getLocation","CurveLocation","_segment1","getNext","smooth","_first","_last","factor","getPrevious","p0","p1","p2","k","d1_a","d1_2a","d2_a","d2_2a","N","isLast","reversed","removeSegment","segment","interpolate","handleIn1","handleIn2","handleOut2","handleOut1","change","Curve","arg6","arg7","seg1","seg2","handle1","handle2","segment1","segment2","_segment2","getPoint1","getHandle1","getHandle2","getPoint2","_length","classify","setPoint1","setPoint2","setHandle1","setHandle2","getSegment1","getSegment2","getPoints","getLine","getPart","getPartLength","divideAt","location","divideAtTime","getTimeAt","_setHandles","subdivide","setHandles","splitAt","splitAtTime","getLocationAtTime","isTime","straight","h1","h2","y0","x3","y3","x4","y4","x5","y5","x6","y6","x7","y7","x8","y8","x9","y9","getMonoCurves","io","o0","o1","o2","o3","isStraight","v0","v3","getTimeOf","p3","geomEpsilon","getNearestTime","minDist","minT","refine","dist","step","flip","isFlatEnough","flatness","ux","uy","_addBounds","minPad","maxPad","s1","s2","isLinear","third","hasLength","isHorizontal","getTangentAtTime","isVertical","getLocationAt","_isTime","getParameterAt","getTimesWithTangent","tangent","getOffsetAtTime","getLocationOf","getOffsetOf","loc","getOffset","getParameterOf","getNearestLocation","getNearestPoint","methods","_evaluateMethods","getLengthIntegrand","ax","bx","ay","by","getIterations","normalized","tMin","tMax","len","d3","serpentine","t1","t2","hasRoots","t1Ok","t2Ok","f1","f2","ds","forward","rangeLength","diff","guess","getTangent","getWeightedTangent","getNormal","getWeightedNormal","getCurvature","getPeaks","addLocation","locations","overlap","excludeStart","excludeEnd","loc1","loc2","_intersection","addCurveIntersections","recursion","calls","tMinClip","tMaxClip","q0x","q0y","q3x","q3y","dMin","dMax","dp0","dp1","dp2","dp3","hull","dq0","dq1","dq2","dq3","dist1","dist2","distRatio","getConvexHull","clipConvexHull","tMinNew","tMaxNew","uDiff","hullTop","hullBottom","clipConvexHullPart","threshold","qx","qy","getCurveLineIntersections","addCurveLineIntersections","addLineIntersection","getCurveIntersections","overlaps","getOverlaps","straight1","straight2","before","getSelfIntersection","info","getSquaredLineLength","straightBoth","l1","l2","pairs","matrix1","matrix2","_returnFirst","length1","length2","values1","values2","boundsCollisions","index1","curve1","collisions1","index2","curve2","den","times","t0","_overlap","_distance","_setCurve","_time","getPointAtTime","_next","_previous","_setPath","_version","_curve","_segment","_setSegment","getSegment","getTime","trySegment","_offset","_curveOffset","getParameter","getCurveOffset","getIntersection","getLastSegment","_ignoreOther","isTouching","inter","isCrossing","t1Inside","t2Inside","c4","c3","offsets","addOffsets","isInRange","getPointAt","v4","a3","a4","hasOverlap","merge","search","found","path1","path2","expanded","compound","pathData","first","isClockwise","setClockwise","clockwise","setPathData","previous","control","relative","getCoord","command","lower","move","cubicCurveTo","quadraticCurveTo","arcTo","winding","_getWinding","onPath","windingL","windingR","getCrossings","minLoc","isPath","itemsFrom","itemsTo","setClosed","paths1","paths2","matched","boundsOverlaps","pathBoundsOverlaps","closed","setSegments","_segmentSelection","_area","getSegments","fullySelected","last","_add","getFirstSegment","_countCurves","getFirstCurve","getLastCurve","isClosed","getPathData","_precision","curX","curY","prevX","prevY","inX","inY","outX","outY","addSegment","skipLine","segs","_adjustCurves","insertSegment","addSegments","insertSegments","removeSegments","_includeCurves","area","_selectSegments","newSelection","last1","last2","first2","first1","simplify","flatten","PathFlattener","PathFitter","fit","_default","loop","asymmetric","paddingLeft","paddingRight","knots","n_1","rf","hx","hy","topCenter","seg3","seg4","isArc","pt1","pt2","shape","pos2","end2","pos1","end1","start2","cap","numSegments","hitCurves","isCloseEnough","checkSegmentPoint","seg","anchor","checkSegmentPoints","addToArea","checkSegmentStroke","isJoin","_addBevelJoin","_addSquareCap","getOffsetsWithTangent","curveStart","curveTimes","drawSegments","drawSegment","dashLength","flattener","drawPart","pX","pY","miniSize","miniHalf","drawHandle","hX","hY","drawHandles","getCurrentSegment","moveBy","curveTo","through","extent","middle","large","rxSq","rySq","xSq","ySq","throughSide","centerSide","ext","inc","z","out","_in","lineBy","curveBy","parameter","cubicCurveBy","quadraticCurveBy","arcBy","method","prevCoords","processSegment","joinBounds","addPoint","addRound","addJoin","addCap","phi","isArea","normal1","getNormalAtTime","normal2","normal","joinPadding","joinRadius","SQRT2","paddingX","paddingY","xn","xx","yn","yx","ellipseSegments","createPath","createEllipse","bl","getBottomLeft","tl","tr","getTopRight","br","RoundRectangle","Oval","Arc","RegularPolygon","sides","three","Star","radius1","radius2","paths","getCurrentPath","check","operators","getPaths","preparePath","resolve","resolveCrossings","reorient","createResult","result","filterIntersection","traceBoolean","operation","trace","splitBoolean","_path1","_path2","operator","crossings","divideLocations","collectPaths","_overlapsOnly","curvesValues","curveCollisions","curveCollisionsMap","propagateWinding","_winding","tracePaths","reorientPaths","added","addPath","linkIntersections","clearCurveHandles","lookup","container","sorted","entry1","containerWinding","getInteriorPoint","entry2","clearLater","renormalizeLocs","prevCurve","prevTime","results","clearCurves","clearLookup","origTime","newCurve","getWinding","dontFlip","vPrev","vClose","curvesList","ia","pv","pa","po","qualityEpsilon","paL","paR","pathWindingL","pathWindingR","onAnyPath","quality","addWinding","a0","windingPrev","a3Prev","handleCurve","monoCurves","totalLength","curveLength","operand","SQRT1_2","wind","pathWinding","starts","isValid","_visited","isStart","visitPath","getCrossingSegments","collectStarts","collect","nextInter","inter1","inter2","over1","over2","branch","visited","valid","finished","branches","shift","hasOverlaps","hasCrossings","intersections","nonZero","intercepts","mv","mo0","mo3","maxRecursion","ignoreStraight","minSpan","addCurve","computeParts","halves","tMid","_get","fitCubic","tan1","tan2","uPrime","chordLengthParameterize","maxError","parametersInOrder","generateBezier","findMaxError","reparameterize","tanCenter","C","X","b0","b3","alpha1","alpha2","detC0C1","detC0X","c0","segLength","eps","degree","maxDist","TextItem","content","_content","_lines","setContent","getContent","getCharacterStyle","setCharacterStyle","getParagraphStyle","setParagraphStyle","PointText","lines","leading","getLeading","font","getFontStyle","textAlign","getJustification","fillText","strokeText","numLines","justification","getTextWidth","colorCtx","gray","rgb","hsb","hsl","gradient","componentParsers","namedColors","transparent","hsbIndices","converters","g","achromatic","t3s","t3","properties","parser","_components","Gradient","_removeOwner","_addOwner","_properties","argType","converted","string","parseInt","trim","isHSL","component","unit","turn","grad","willReadFrequently","fromCSS","parsers","stops","radial","getComponents","_canvasStyle","converter","convert","getAlpha","setAlpha","hasAlpha","col","isGradient","toCSS","hex","canvasGradient","_stops","origin","destination","highlight","inverse","_radial","createRadialGradient","createLinearGradient","addColorStop","_color","_types","_setOwner","components1","components2","setStops","setRadial","_owners","getStops","GradientStop","getRadial","stops1","stops2","rampPoint","setColor","setOffset","getRampPoint","setRampPoint","getColor","itemDefaults","fillRule","strokeScaling","shadowOffset","selectedColor","groupDefaults","fontFamily","fontWeight","textDefaults","_values","isColor","isPoint","applyToChildren","old","_dontMerge","childValue","Font","WindingRule","isStyle","style1","style2","secondary","defaults2","value1","value2","getFontSize","getFontWeight","getFontFamily","getFont","setFont","getPixelSize","handlePrefix","prefixes","suffix","prefix","getStyles","doc","nodeType","ownerDocument","defaultView","getComputedStyle","viewport","body","html","documentElement","getBoundingClientRect","clientLeft","clientTop","pageXOffset","scrollLeft","pageYOffset","scrollTop","getViewportBounds","innerWidth","clientWidth","innerHeight","clientHeight","isInvisible","isInView","getPrefixed","passive","addEventListener","removeEventListener","targetTouches","changedTouches","pageX","clientX","pageY","clientY","getTarget","srcElement","getRelatedTarget","relatedTarget","toElement","requestAnimationFrame","timer","nativeRequest","requested","callbacks","handleCallbacks","functions","callback","setInterval","getCanvasSize","setAttribute","_viewEvents","none","userDrag","userSelect","touchCallout","contentZooming","tapHighlightColor","_windowEvents","resize","setViewSize","Stats","_stats","stats","domElement","appendChild","_element","_pixelRatio","devicePixelRatio","_setElementSize","_viewSize","_views","_viewsById","_focused","_frameItems","_frameItemCount","_itemEvents","native","virtual","node","_animate","play","pause","_count","getAutoUpdate","setAutoUpdate","autoUpdate","update","now","Date","animate","_handleFrameItems","getPixelRatio","getViewSize","isVisible","parentNode","temp","createElement","removeChild","getZoom","setZoom","zoom","scrollBy","projectToView","viewToProject","getEventPoint","CanvasView","prevFocus","tempFocus","mousedown","mousemove","mouseup","dragging","mouseDown","pointerEnabled","msPointerEnabled","viewEvents","docEvents","mouseout","nodeName","handleMouseMove","scroll","_handleMouseEvent","downPoint","lastPoint","downItem","overItem","dragItem","clickItem","clickTime","dblClick","called","prevented","fallbacks","doubleclick","wasInView","itemEventsMap","click","mouseenter","mouseleave","itemEvents","hitItems","nativeMove","tool","inView","hitItem","mouse","substr","emitMouseEvent","drag","emitMouseEvents","down","up","cancelable","preventDefault","_handleKeyEvent","character","keyEvent","KeyEvent","sign","_resetState","prevPoint","stopItem","mouseEvent","stopped","MouseEvent","fallback","HTMLCanvasElement","deviceRatio","backingStoreRatio","firefox","prevFont","measureText","stopPropagation","getTimeStamp","timeStamp","getModifiers","Key","modifiers","metaFixMap","downKey","keyLookup","charLookup","keyMap","charMap","alt","meta","capsLock","space","option","mac","getKey","keyIdentifier","String","fromCharCode","keyCode","keydown","altKey","metaKey","ctrlKey","keypress","charCode","keyup","isDown","ToolEvent","_choosePoint","toolPoint","getLastPoint","_lastPoint","setLastPoint","getDownPoint","_downPoint","setDownPoint","getMiddlePoint","_middlePoint","setMiddlePoint","middlePoint","getDelta","_delta","setDelta","getCount","setCount","Tool","_moveCount","_downCount","getMinDistance","_minDistance","setMinDistance","minDistance","_maxDistance","getMaxDistance","setMaxDistance","maxDistance","getFixedDistance","setFixedDistance","distance","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","isFunction","_then","_startTime","state","_keys","_parsedKeys","_parseKeys","_from","_getState","_to","then","progress","getValue","__add","__subtract","__multiply","_setProperty","onUpdate","startTime","_getProperty","resolved","_resolveValue","_calculate","parsed","calculateBinary","Http","xhr","XMLHttpRequest","open","url","async","mimeType","overrideMimeType","onload","status","responseText","onerror","message","send","canvases","sr","sg","sb","sa","bg","bb","ba","dr","dg","db","getLum","setLum","mn","lmn","ln","mxl","getSat","setSat","md","modes","screen","overlay","darken","lighten","difference","exclusion","hue","saturation","luminosity","average","negation","mode","srcContext","dstContext","srcCanvas","dstData","SvgElement","svg","xmlns","xlink","attributeNamespace","href","attributes","namespace","setAttributeNS","tag","createElementNS","getAttributeNS","SvgStyles","true","false","property","attribute","toSVG","fromSVG","exportFilter","getTransform","coordinates","attrs","trans","exportGroup","childNode","exportSVG","exportShape","exporters","embedImages","matchShapes","definitionItem","viewBox","overflow","textContent","applyStyle","gradientNode","getGradient","getOrigin","getDestination","getHighlight","fy","gradientUnits","stopColor","exportGradient","visibility","svgs","__id","typeId","exportDefinitions","defs","insertBefore","firstChild","XMLSerializer","serializeToString","exporter","onExport","setOptions","rootSize","allowNull","allowPercent","defaultValue","defaultX","defaultY","convertValue","map","importGroup","nodes","childNodes","isClip","isDefs","currentStyle","applyAttributes","querySelectorAll","importNode","importPoly","importGradient","scaleToBounds","_scaleToBounds","importers","clippath","polygon","polyline","lineargradient","radialgradient","use","circle","text","switch","applyTransform","transforms","applyOpacity","gradientTransform","setVisible","display","percent","styles","group","tagName","isElement","nextSibling","importer","onImport","expandShapes","importSVG","DOMParser","parseFromString","File","reader","FileReader","readAsText","mod","global","acorn","input","inputLen","sourceFile","inpt","initTokenState","program","lastStart","lastEnd","tokPos","lastEndLoc","line_loc_t","inFunction","strict","labels","readToken","startNode","tokType","_eof","stmt","parseStatement","isUseStrict","setStrict","finishNode","parseTopLevel","defaultOptions","ecmaVersion","strictSemicolons","allowTrailingCommas","forbidReserved","allowReturnOutsideFunction","onComment","ranges","directSourceFile","opt","tokStart","tokEnd","tokStartLoc","tokEndLoc","tokVal","tokRegexpAllowed","tokCurLine","tokLineStart","getLineInfo","cur","lineBreak","lastIndex","column","raise","err","SyntaxError","raisedAt","tokenize","getToken","forceRegexp","startLoc","endLoc","jumpTo","reAllowed","skipSpace","empty","_num","_regexp","_string","_break","keyword","_case","beforeExpr","_catch","_continue","_debugger","_do","isLoop","_else","_finally","_for","_function","_if","_return","_switch","_throw","_try","_var","_while","_with","_new","_this","_null","atomValue","_true","_false","binop","keywordTypes","_bracketL","_bracketR","_braceL","_braceR","_parenL","_parenR","_comma","_semi","_colon","_dot","_question","_slash","_eq","isAssign","_assign","_incDec","postfix","isUpdate","_prefix","_logicalOR","_logicalAND","_bitwiseOR","_bitwiseXOR","_bitwiseAND","_equality","_relational","_bitShift","_plusMin","_multiplyModulo","kw","tokTypes","bracketL","bracketR","braceL","braceR","parenL","parenR","comma","semi","colon","question","slash","eq","eof","num","regexp","makePredicate","words","cats","compareTo","arr","cat","Function","containsEsc","isReservedWord3","isReservedWord5","isStrictReservedWord","isStrictBadIdWord","isKeyword","nonASCIIwhitespace","nonASCIIidentifierStartChars","nonASCIIidentifierStart","RegExp","nonASCIIidentifier","newline","isIdentifierStart","isIdentifierChar","finishToken","skipBlockComment","skipLineComment","ch","charCodeAt","getTokenFromCode","readNumber","readToken_dot","readInt","readHexNumber","quote","octal","readHexChar","readString","readRegexp","finishOp","readToken_slash","readToken_pipe_amp","readToken_plus_min","readToken_lt_gt","readToken_eq_excl","readWord","tok","escaped","inClass","charAt","mods","readWord1","radix","startsWithDot","isFloat","word","esc","escStr","strct","lastIndexOf","node_t","node_loc_t","range","startNodeFrom","expression","eat","canInsertSemicolon","semicolon","unexpected","expect","checkLVal","expr","loopLabel","kind","switchLabel","starttype","isBreak","label","parseIdent","lab","parseParenExpression","parseFor","init","parseVar","declarations","parseForIn","parseExpression","parseFunction","consequent","alternate","argument","discriminant","cases","sawDefault","isCase","block","parseBlock","clause","guard","guardedHandlers","finalizer","maybeName","allowStrict","oldStrict","noIn","decl","noComma","parseMaybeAssign","expressions","parseExprOp","parseMaybeUnary","parseExprOps","parseMaybeConditional","minPrec","prec","parseSubscripts","parseExprAtom","noCalls","computed","callee","parseExprList","raw","tokStartLoc1","tokStart1","elements","sawGetSet","parsePropertyName","isGetSet","conflict","parseObj","parseNew","isStatement","params","oldInFunc","oldLabels","close","allowTrailingComma","allowEmpty","elts","liberal","binaryOperators","unaryOperators","__self","__$__","$__","compile","insertions","insertion","getCode","replaceCode","handleOverloading","between","getBetween","parentType","exp","sourceMaps","paperFeatures","offsetCode","lineBreaks","getElementsByTagName","innerHTML","mappings","encodeVLQ","safari","file","names","sourceRoot","sources","sourcesContent","operatorOverloading","moduleExports","walkAST","declaration","specifiers","dec","specifier","handleExports","preserveParens","sourceType","btoa","unescape","encodeURIComponent","toolHandlers","compiled","expose","script","head","createTextNode","__paperscript__","onResize","setOnResize","setOnFrame","loadScript","canvasId","scopeAttribute","baseURI","loadAll","readyState","calculateUnary","Symbol","PlacedSymbol"],"sourceRoot":""}