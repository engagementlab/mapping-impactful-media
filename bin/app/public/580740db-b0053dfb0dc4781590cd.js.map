{"version":3,"file":"580740db-b0053dfb0dc4781590cd.js","mappings":"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","sources":["webpack://mapping-impactful-media/./node_modules/paper/dist/paper-core.js"],"sourcesContent":["/*!\n * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.\n * http://paperjs.org/\n *\n * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey\n * http://juerglehni.com/ & https://puckey.studio/\n *\n * Distributed under the MIT license. See LICENSE file for details.\n *\n * All rights reserved.\n *\n * Date: Thu Nov 3 21:15:36 2022 +0100\n *\n ***\n *\n * Straps.js - Class inheritance library with support for bean-style accessors\n *\n * Copyright (c) 2006 - 2020 Jürg Lehni\n * http://juerglehni.com/\n *\n * Distributed under the MIT license.\n *\n ***\n *\n * Acorn.js\n * https://marijnhaverbeke.nl/acorn/\n *\n * Acorn is a tiny, fast JavaScript parser written in JavaScript,\n * created by Marijn Haverbeke and released under an MIT license.\n *\n */\n\nvar paper = function (self, undefined) {\n  self = self || require('./node/self.js');\n  var window = self.window,\n    document = self.document;\n  var Base = new function () {\n    var hidden = /^(statics|enumerable|beans|preserve)$/,\n      array = [],\n      slice = array.slice,\n      create = Object.create,\n      describe = Object.getOwnPropertyDescriptor,\n      define = Object.defineProperty,\n      forEach = array.forEach || function (iter, bind) {\n        for (var i = 0, l = this.length; i < l; i++) {\n          iter.call(bind, this[i], i, this);\n        }\n      },\n      forIn = function (iter, bind) {\n        for (var i in this) {\n          if (this.hasOwnProperty(i)) iter.call(bind, this[i], i, this);\n        }\n      },\n      set = Object.assign || function (dst) {\n        for (var i = 1, l = arguments.length; i < l; i++) {\n          var src = arguments[i];\n          for (var key in src) {\n            if (src.hasOwnProperty(key)) dst[key] = src[key];\n          }\n        }\n        return dst;\n      },\n      each = function (obj, iter, bind) {\n        if (obj) {\n          var desc = describe(obj, 'length');\n          (desc && typeof desc.value === 'number' ? forEach : forIn).call(obj, iter, bind = bind || obj);\n        }\n        return bind;\n      };\n    function inject(dest, src, enumerable, beans, preserve) {\n      var beansNames = {};\n      function field(name, val) {\n        val = val || (val = describe(src, name)) && (val.get ? val : val.value);\n        if (typeof val === 'string' && val[0] === '#') val = dest[val.substring(1)] || val;\n        var isFunc = typeof val === 'function',\n          res = val,\n          prev = preserve || isFunc && !val.base ? val && val.get ? name in dest : dest[name] : null,\n          bean;\n        if (!preserve || !prev) {\n          if (isFunc && prev) val.base = prev;\n          if (isFunc && beans !== false && (bean = name.match(/^([gs]et|is)(([A-Z])(.*))$/))) beansNames[bean[3].toLowerCase() + bean[4]] = bean[2];\n          if (!res || isFunc || !res.get || typeof res.get !== 'function' || !Base.isPlainObject(res)) {\n            res = {\n              value: res,\n              writable: true\n            };\n          }\n          if ((describe(dest, name) || {\n            configurable: true\n          }).configurable) {\n            res.configurable = true;\n            res.enumerable = enumerable != null ? enumerable : !bean;\n          }\n          define(dest, name, res);\n        }\n      }\n      if (src) {\n        for (var name in src) {\n          if (src.hasOwnProperty(name) && !hidden.test(name)) field(name);\n        }\n        for (var name in beansNames) {\n          var part = beansNames[name],\n            set = dest['set' + part],\n            get = dest['get' + part] || set && dest['is' + part];\n          if (get && (beans === true || get.length === 0)) field(name, {\n            get: get,\n            set: set\n          });\n        }\n      }\n      return dest;\n    }\n    function Base() {\n      for (var i = 0, l = arguments.length; i < l; i++) {\n        var src = arguments[i];\n        if (src) set(this, src);\n      }\n      return this;\n    }\n    return inject(Base, {\n      inject: function (src) {\n        if (src) {\n          var statics = src.statics === true ? src : src.statics,\n            beans = src.beans,\n            preserve = src.preserve;\n          if (statics !== src) inject(this.prototype, src, src.enumerable, beans, preserve);\n          inject(this, statics, null, beans, preserve);\n        }\n        for (var i = 1, l = arguments.length; i < l; i++) this.inject(arguments[i]);\n        return this;\n      },\n      extend: function () {\n        var base = this,\n          ctor,\n          proto;\n        for (var i = 0, obj, l = arguments.length; i < l && !(ctor && proto); i++) {\n          obj = arguments[i];\n          ctor = ctor || obj.initialize;\n          proto = proto || obj.prototype;\n        }\n        ctor = ctor || function () {\n          base.apply(this, arguments);\n        };\n        proto = ctor.prototype = proto || create(this.prototype);\n        define(proto, 'constructor', {\n          value: ctor,\n          writable: true,\n          configurable: true\n        });\n        inject(ctor, this);\n        if (arguments.length) this.inject.apply(ctor, arguments);\n        ctor.base = base;\n        return ctor;\n      }\n    }).inject({\n      enumerable: false,\n      initialize: Base,\n      set: Base,\n      inject: function () {\n        for (var i = 0, l = arguments.length; i < l; i++) {\n          var src = arguments[i];\n          if (src) {\n            inject(this, src, src.enumerable, src.beans, src.preserve);\n          }\n        }\n        return this;\n      },\n      extend: function () {\n        var res = create(this);\n        return res.inject.apply(res, arguments);\n      },\n      each: function (iter, bind) {\n        return each(this, iter, bind);\n      },\n      clone: function () {\n        return new this.constructor(this);\n      },\n      statics: {\n        set: set,\n        each: each,\n        create: create,\n        define: define,\n        describe: describe,\n        clone: function (obj) {\n          return set(new obj.constructor(), obj);\n        },\n        isPlainObject: function (obj) {\n          var ctor = obj != null && obj.constructor;\n          return ctor && (ctor === Object || ctor === Base || ctor.name === 'Object');\n        },\n        pick: function (a, b) {\n          return a !== undefined ? a : b;\n        },\n        slice: function (list, begin, end) {\n          return slice.call(list, begin, end);\n        }\n      }\n    });\n  }();\n  if (typeof module !== 'undefined') module.exports = Base;\n  Base.inject({\n    enumerable: false,\n    toString: function () {\n      return this._id != null ? (this._class || 'Object') + (this._name ? \" '\" + this._name + \"'\" : ' @' + this._id) : '{ ' + Base.each(this, function (value, key) {\n        if (!/^_/.test(key)) {\n          var type = typeof value;\n          this.push(key + ': ' + (type === 'number' ? Formatter.instance.number(value) : type === 'string' ? \"'\" + value + \"'\" : value));\n        }\n      }, []).join(', ') + ' }';\n    },\n    getClassName: function () {\n      return this._class || '';\n    },\n    importJSON: function (json) {\n      return Base.importJSON(json, this);\n    },\n    exportJSON: function (options) {\n      return Base.exportJSON(this, options);\n    },\n    toJSON: function () {\n      return Base.serialize(this);\n    },\n    set: function (props, exclude) {\n      if (props) Base.filter(this, props, exclude, this._prioritize);\n      return this;\n    }\n  }, {\n    beans: false,\n    statics: {\n      exports: {},\n      extend: function extend() {\n        var res = extend.base.apply(this, arguments),\n          name = res.prototype._class;\n        if (name && !Base.exports[name]) Base.exports[name] = res;\n        return res;\n      },\n      equals: function (obj1, obj2) {\n        if (obj1 === obj2) return true;\n        if (obj1 && obj1.equals) return obj1.equals(obj2);\n        if (obj2 && obj2.equals) return obj2.equals(obj1);\n        if (obj1 && obj2 && typeof obj1 === 'object' && typeof obj2 === 'object') {\n          if (Array.isArray(obj1) && Array.isArray(obj2)) {\n            var length = obj1.length;\n            if (length !== obj2.length) return false;\n            while (length--) {\n              if (!Base.equals(obj1[length], obj2[length])) return false;\n            }\n          } else {\n            var keys = Object.keys(obj1),\n              length = keys.length;\n            if (length !== Object.keys(obj2).length) return false;\n            while (length--) {\n              var key = keys[length];\n              if (!(obj2.hasOwnProperty(key) && Base.equals(obj1[key], obj2[key]))) return false;\n            }\n          }\n          return true;\n        }\n        return false;\n      },\n      read: function (list, start, options, amount) {\n        if (this === Base) {\n          var value = this.peek(list, start);\n          list.__index++;\n          return value;\n        }\n        var proto = this.prototype,\n          readIndex = proto._readIndex,\n          begin = start || readIndex && list.__index || 0,\n          length = list.length,\n          obj = list[begin];\n        amount = amount || length - begin;\n        if (obj instanceof this || options && options.readNull && obj == null && amount <= 1) {\n          if (readIndex) list.__index = begin + 1;\n          return obj && options && options.clone ? obj.clone() : obj;\n        }\n        obj = Base.create(proto);\n        if (readIndex) obj.__read = true;\n        obj = obj.initialize.apply(obj, begin > 0 || begin + amount < length ? Base.slice(list, begin, begin + amount) : list) || obj;\n        if (readIndex) {\n          list.__index = begin + obj.__read;\n          var filtered = obj.__filtered;\n          if (filtered) {\n            list.__filtered = filtered;\n            obj.__filtered = undefined;\n          }\n          obj.__read = undefined;\n        }\n        return obj;\n      },\n      peek: function (list, start) {\n        return list[list.__index = start || list.__index || 0];\n      },\n      remain: function (list) {\n        return list.length - (list.__index || 0);\n      },\n      readList: function (list, start, options, amount) {\n        var res = [],\n          entry,\n          begin = start || 0,\n          end = amount ? begin + amount : list.length;\n        for (var i = begin; i < end; i++) {\n          res.push(Array.isArray(entry = list[i]) ? this.read(entry, 0, options) : this.read(list, i, options, 1));\n        }\n        return res;\n      },\n      readNamed: function (list, name, start, options, amount) {\n        var value = this.getNamed(list, name),\n          hasValue = value !== undefined;\n        if (hasValue) {\n          var filtered = list.__filtered;\n          if (!filtered) {\n            var source = this.getSource(list);\n            filtered = list.__filtered = Base.create(source);\n            filtered.__unfiltered = source;\n          }\n          filtered[name] = undefined;\n        }\n        return this.read(hasValue ? [value] : list, start, options, amount);\n      },\n      readSupported: function (list, dest) {\n        var source = this.getSource(list),\n          that = this,\n          read = false;\n        if (source) {\n          Object.keys(source).forEach(function (key) {\n            if (key in dest) {\n              var value = that.readNamed(list, key);\n              if (value !== undefined) {\n                dest[key] = value;\n              }\n              read = true;\n            }\n          });\n        }\n        return read;\n      },\n      getSource: function (list) {\n        var source = list.__source;\n        if (source === undefined) {\n          var arg = list.length === 1 && list[0];\n          source = list.__source = arg && Base.isPlainObject(arg) ? arg : null;\n        }\n        return source;\n      },\n      getNamed: function (list, name) {\n        var source = this.getSource(list);\n        if (source) {\n          return name ? source[name] : list.__filtered || source;\n        }\n      },\n      hasNamed: function (list, name) {\n        return !!this.getNamed(list, name);\n      },\n      filter: function (dest, source, exclude, prioritize) {\n        var processed;\n        function handleKey(key) {\n          if (!(exclude && key in exclude) && !(processed && key in processed)) {\n            var value = source[key];\n            if (value !== undefined) dest[key] = value;\n          }\n        }\n        if (prioritize) {\n          var keys = {};\n          for (var i = 0, key, l = prioritize.length; i < l; i++) {\n            if ((key = prioritize[i]) in source) {\n              handleKey(key);\n              keys[key] = true;\n            }\n          }\n          processed = keys;\n        }\n        Object.keys(source.__unfiltered || source).forEach(handleKey);\n        return dest;\n      },\n      isPlainValue: function (obj, asString) {\n        return Base.isPlainObject(obj) || Array.isArray(obj) || asString && typeof obj === 'string';\n      },\n      serialize: function (obj, options, compact, dictionary) {\n        options = options || {};\n        var isRoot = !dictionary,\n          res;\n        if (isRoot) {\n          options.formatter = new Formatter(options.precision);\n          dictionary = {\n            length: 0,\n            definitions: {},\n            references: {},\n            add: function (item, create) {\n              var id = '#' + item._id,\n                ref = this.references[id];\n              if (!ref) {\n                this.length++;\n                var res = create.call(item),\n                  name = item._class;\n                if (name && res[0] !== name) res.unshift(name);\n                this.definitions[id] = res;\n                ref = this.references[id] = [id];\n              }\n              return ref;\n            }\n          };\n        }\n        if (obj && obj._serialize) {\n          res = obj._serialize(options, dictionary);\n          var name = obj._class;\n          if (name && !obj._compactSerialize && (isRoot || !compact) && res[0] !== name) {\n            res.unshift(name);\n          }\n        } else if (Array.isArray(obj)) {\n          res = [];\n          for (var i = 0, l = obj.length; i < l; i++) res[i] = Base.serialize(obj[i], options, compact, dictionary);\n        } else if (Base.isPlainObject(obj)) {\n          res = {};\n          var keys = Object.keys(obj);\n          for (var i = 0, l = keys.length; i < l; i++) {\n            var key = keys[i];\n            res[key] = Base.serialize(obj[key], options, compact, dictionary);\n          }\n        } else if (typeof obj === 'number') {\n          res = options.formatter.number(obj, options.precision);\n        } else {\n          res = obj;\n        }\n        return isRoot && dictionary.length > 0 ? [['dictionary', dictionary.definitions], res] : res;\n      },\n      deserialize: function (json, create, _data, _setDictionary, _isRoot) {\n        var res = json,\n          isFirst = !_data,\n          hasDictionary = isFirst && json && json.length && json[0][0] === 'dictionary';\n        _data = _data || {};\n        if (Array.isArray(json)) {\n          var type = json[0],\n            isDictionary = type === 'dictionary';\n          if (json.length == 1 && /^#/.test(type)) {\n            return _data.dictionary[type];\n          }\n          type = Base.exports[type];\n          res = [];\n          for (var i = type ? 1 : 0, l = json.length; i < l; i++) {\n            res.push(Base.deserialize(json[i], create, _data, isDictionary, hasDictionary));\n          }\n          if (type) {\n            var args = res;\n            if (create) {\n              res = create(type, args, isFirst || _isRoot);\n            } else {\n              res = new type(args);\n            }\n          }\n        } else if (Base.isPlainObject(json)) {\n          res = {};\n          if (_setDictionary) _data.dictionary = res;\n          for (var key in json) res[key] = Base.deserialize(json[key], create, _data);\n        }\n        return hasDictionary ? res[1] : res;\n      },\n      exportJSON: function (obj, options) {\n        var json = Base.serialize(obj, options);\n        return options && options.asString == false ? json : JSON.stringify(json);\n      },\n      importJSON: function (json, target) {\n        return Base.deserialize(typeof json === 'string' ? JSON.parse(json) : json, function (ctor, args, isRoot) {\n          var useTarget = isRoot && target && target.constructor === ctor,\n            obj = useTarget ? target : Base.create(ctor.prototype);\n          if (args.length === 1 && obj instanceof Item && (useTarget || !(obj instanceof Layer))) {\n            var arg = args[0];\n            if (Base.isPlainObject(arg)) {\n              arg.insert = false;\n              if (useTarget) {\n                args = args.concat([Item.INSERT]);\n              }\n            }\n          }\n          (useTarget ? obj.set : ctor).apply(obj, args);\n          if (useTarget) target = null;\n          return obj;\n        });\n      },\n      push: function (list, items) {\n        var itemsLength = items.length;\n        if (itemsLength < 4096) {\n          list.push.apply(list, items);\n        } else {\n          var startLength = list.length;\n          list.length += itemsLength;\n          for (var i = 0; i < itemsLength; i++) {\n            list[startLength + i] = items[i];\n          }\n        }\n        return list;\n      },\n      splice: function (list, items, index, remove) {\n        var amount = items && items.length,\n          append = index === undefined;\n        index = append ? list.length : index;\n        if (index > list.length) index = list.length;\n        for (var i = 0; i < amount; i++) items[i]._index = index + i;\n        if (append) {\n          Base.push(list, items);\n          return [];\n        } else {\n          var args = [index, remove];\n          if (items) Base.push(args, items);\n          var removed = list.splice.apply(list, args);\n          for (var i = 0, l = removed.length; i < l; i++) removed[i]._index = undefined;\n          for (var i = index + amount, l = list.length; i < l; i++) list[i]._index = i;\n          return removed;\n        }\n      },\n      capitalize: function (str) {\n        return str.replace(/\\b[a-z]/g, function (match) {\n          return match.toUpperCase();\n        });\n      },\n      camelize: function (str) {\n        return str.replace(/-(.)/g, function (match, chr) {\n          return chr.toUpperCase();\n        });\n      },\n      hyphenate: function (str) {\n        return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n      }\n    }\n  });\n  var Emitter = {\n    on: function (type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.on(key, value);\n        }, this);\n      } else {\n        var types = this._eventTypes,\n          entry = types && types[type],\n          handlers = this._callbacks = this._callbacks || {};\n        handlers = handlers[type] = handlers[type] || [];\n        if (handlers.indexOf(func) === -1) {\n          handlers.push(func);\n          if (entry && entry.install && handlers.length === 1) entry.install.call(this, type);\n        }\n      }\n      return this;\n    },\n    off: function (type, func) {\n      if (typeof type !== 'string') {\n        Base.each(type, function (value, key) {\n          this.off(key, value);\n        }, this);\n        return;\n      }\n      var types = this._eventTypes,\n        entry = types && types[type],\n        handlers = this._callbacks && this._callbacks[type],\n        index;\n      if (handlers) {\n        if (!func || (index = handlers.indexOf(func)) !== -1 && handlers.length === 1) {\n          if (entry && entry.uninstall) entry.uninstall.call(this, type);\n          delete this._callbacks[type];\n        } else if (index !== -1) {\n          handlers.splice(index, 1);\n        }\n      }\n      return this;\n    },\n    once: function (type, func) {\n      return this.on(type, function handler() {\n        func.apply(this, arguments);\n        this.off(type, handler);\n      });\n    },\n    emit: function (type, event) {\n      var handlers = this._callbacks && this._callbacks[type];\n      if (!handlers) return false;\n      var args = Base.slice(arguments, 1),\n        setTarget = event && event.target && !event.currentTarget;\n      handlers = handlers.slice();\n      if (setTarget) event.currentTarget = this;\n      for (var i = 0, l = handlers.length; i < l; i++) {\n        if (handlers[i].apply(this, args) == false) {\n          if (event && event.stop) event.stop();\n          break;\n        }\n      }\n      if (setTarget) delete event.currentTarget;\n      return true;\n    },\n    responds: function (type) {\n      return !!(this._callbacks && this._callbacks[type]);\n    },\n    attach: '#on',\n    detach: '#off',\n    fire: '#emit',\n    _installEvents: function (install) {\n      var types = this._eventTypes,\n        handlers = this._callbacks,\n        key = install ? 'install' : 'uninstall';\n      if (types) {\n        for (var type in handlers) {\n          if (handlers[type].length > 0) {\n            var entry = types[type],\n              func = entry && entry[key];\n            if (func) func.call(this, type);\n          }\n        }\n      }\n    },\n    statics: {\n      inject: function inject(src) {\n        var events = src._events;\n        if (events) {\n          var types = {};\n          Base.each(events, function (entry, key) {\n            var isString = typeof entry === 'string',\n              name = isString ? entry : key,\n              part = Base.capitalize(name),\n              type = name.substring(2).toLowerCase();\n            types[type] = isString ? {} : entry;\n            name = '_' + name;\n            src['get' + part] = function () {\n              return this[name];\n            };\n            src['set' + part] = function (func) {\n              var prev = this[name];\n              if (prev) this.off(type, prev);\n              if (func) this.on(type, func);\n              this[name] = func;\n            };\n          });\n          src._eventTypes = types;\n        }\n        return inject.base.apply(this, arguments);\n      }\n    }\n  };\n  var PaperScope = Base.extend({\n    _class: 'PaperScope',\n    initialize: function PaperScope() {\n      paper = this;\n      this.settings = new Base({\n        applyMatrix: true,\n        insertItems: true,\n        handleSize: 4,\n        hitTolerance: 0\n      });\n      this.project = null;\n      this.projects = [];\n      this.tools = [];\n      this._id = PaperScope._id++;\n      PaperScope._scopes[this._id] = this;\n      var proto = PaperScope.prototype;\n      if (!this.support) {\n        var ctx = CanvasProvider.getContext(1, 1) || {};\n        proto.support = {\n          nativeDash: 'setLineDash' in ctx || 'mozDash' in ctx,\n          nativeBlendModes: BlendMode.nativeModes\n        };\n        CanvasProvider.release(ctx);\n      }\n      if (!this.agent) {\n        var user = self.navigator.userAgent.toLowerCase(),\n          os = (/(darwin|win|mac|linux|freebsd|sunos)/.exec(user) || [])[0],\n          platform = os === 'darwin' ? 'mac' : os,\n          agent = proto.agent = proto.browser = {\n            platform: platform\n          };\n        if (platform) agent[platform] = true;\n        user.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\\/?\\s*([.\\d]+)(?:.*version\\/([.\\d]+))?(?:.*rv\\:v?([.\\d]+))?/g, function (match, n, v1, v2, rv) {\n          if (!agent.chrome) {\n            var v = n === 'opera' ? v2 : /^(node|trident)$/.test(n) ? rv : v1;\n            agent.version = v;\n            agent.versionNumber = parseFloat(v);\n            n = {\n              trident: 'msie',\n              jsdom: 'node'\n            }[n] || n;\n            agent.name = n;\n            agent[n] = true;\n          }\n        });\n        if (agent.chrome) delete agent.webkit;\n        if (agent.atom) delete agent.chrome;\n      }\n    },\n    version: \"0.12.17\",\n    getView: function () {\n      var project = this.project;\n      return project && project._view;\n    },\n    getPaper: function () {\n      return this;\n    },\n    execute: function (code, options) {},\n    install: function (scope) {\n      var that = this;\n      Base.each(['project', 'view', 'tool'], function (key) {\n        Base.define(scope, key, {\n          configurable: true,\n          get: function () {\n            return that[key];\n          }\n        });\n      });\n      for (var key in this) if (!/^_/.test(key) && this[key]) scope[key] = this[key];\n    },\n    setup: function (element) {\n      paper = this;\n      this.project = new Project(element);\n      return this;\n    },\n    createCanvas: function (width, height) {\n      return CanvasProvider.getCanvas(width, height);\n    },\n    activate: function () {\n      paper = this;\n    },\n    clear: function () {\n      var projects = this.projects,\n        tools = this.tools;\n      for (var i = projects.length - 1; i >= 0; i--) projects[i].remove();\n      for (var i = tools.length - 1; i >= 0; i--) tools[i].remove();\n    },\n    remove: function () {\n      this.clear();\n      delete PaperScope._scopes[this._id];\n    },\n    statics: new function () {\n      function handleAttribute(name) {\n        name += 'Attribute';\n        return function (el, attr) {\n          return el[name](attr) || el[name]('data-paper-' + attr);\n        };\n      }\n      return {\n        _scopes: {},\n        _id: 0,\n        get: function (id) {\n          return this._scopes[id] || null;\n        },\n        getAttribute: handleAttribute('get'),\n        hasAttribute: handleAttribute('has')\n      };\n    }()\n  });\n  var PaperScopeItem = Base.extend(Emitter, {\n    initialize: function (activate) {\n      this._scope = paper;\n      this._index = this._scope[this._list].push(this) - 1;\n      if (activate || !this._scope[this._reference]) this.activate();\n    },\n    activate: function () {\n      if (!this._scope) return false;\n      var prev = this._scope[this._reference];\n      if (prev && prev !== this) prev.emit('deactivate');\n      this._scope[this._reference] = this;\n      this.emit('activate', prev);\n      return true;\n    },\n    isActive: function () {\n      return this._scope[this._reference] === this;\n    },\n    remove: function () {\n      if (this._index == null) return false;\n      Base.splice(this._scope[this._list], null, this._index, 1);\n      if (this._scope[this._reference] == this) this._scope[this._reference] = null;\n      this._scope = null;\n      return true;\n    },\n    getView: function () {\n      return this._scope.getView();\n    }\n  });\n  var CollisionDetection = {\n    findItemBoundsCollisions: function (items1, items2, tolerance) {\n      function getBounds(items) {\n        var bounds = new Array(items.length);\n        for (var i = 0; i < items.length; i++) {\n          var rect = items[i].getBounds();\n          bounds[i] = [rect.left, rect.top, rect.right, rect.bottom];\n        }\n        return bounds;\n      }\n      var bounds1 = getBounds(items1),\n        bounds2 = !items2 || items2 === items1 ? bounds1 : getBounds(items2);\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findCurveBoundsCollisions: function (curves1, curves2, tolerance, bothAxis) {\n      function getBounds(curves) {\n        var min = Math.min,\n          max = Math.max,\n          bounds = new Array(curves.length);\n        for (var i = 0; i < curves.length; i++) {\n          var v = curves[i];\n          bounds[i] = [min(v[0], v[2], v[4], v[6]), min(v[1], v[3], v[5], v[7]), max(v[0], v[2], v[4], v[6]), max(v[1], v[3], v[5], v[7])];\n        }\n        return bounds;\n      }\n      var bounds1 = getBounds(curves1),\n        bounds2 = !curves2 || curves2 === curves1 ? bounds1 : getBounds(curves2);\n      if (bothAxis) {\n        var hor = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, false, true),\n          ver = this.findBoundsCollisions(bounds1, bounds2, tolerance || 0, true, true),\n          list = [];\n        for (var i = 0, l = hor.length; i < l; i++) {\n          list[i] = {\n            hor: hor[i],\n            ver: ver[i]\n          };\n        }\n        return list;\n      }\n      return this.findBoundsCollisions(bounds1, bounds2, tolerance || 0);\n    },\n    findBoundsCollisions: function (boundsA, boundsB, tolerance, sweepVertical, onlySweepAxisCollisions) {\n      var self = !boundsB || boundsA === boundsB,\n        allBounds = self ? boundsA : boundsA.concat(boundsB),\n        lengthA = boundsA.length,\n        lengthAll = allBounds.length;\n      function binarySearch(indices, coord, value) {\n        var lo = 0,\n          hi = indices.length;\n        while (lo < hi) {\n          var mid = hi + lo >>> 1;\n          if (allBounds[indices[mid]][coord] < value) {\n            lo = mid + 1;\n          } else {\n            hi = mid;\n          }\n        }\n        return lo - 1;\n      }\n      var pri0 = sweepVertical ? 1 : 0,\n        pri1 = pri0 + 2,\n        sec0 = sweepVertical ? 0 : 1,\n        sec1 = sec0 + 2;\n      var allIndicesByPri0 = new Array(lengthAll);\n      for (var i = 0; i < lengthAll; i++) {\n        allIndicesByPri0[i] = i;\n      }\n      allIndicesByPri0.sort(function (i1, i2) {\n        return allBounds[i1][pri0] - allBounds[i2][pri0];\n      });\n      var activeIndicesByPri1 = [],\n        allCollisions = new Array(lengthA);\n      for (var i = 0; i < lengthAll; i++) {\n        var curIndex = allIndicesByPri0[i],\n          curBounds = allBounds[curIndex],\n          origIndex = self ? curIndex : curIndex - lengthA,\n          isCurrentA = curIndex < lengthA,\n          isCurrentB = self || !isCurrentA,\n          curCollisions = isCurrentA ? [] : null;\n        if (activeIndicesByPri1.length) {\n          var pruneCount = binarySearch(activeIndicesByPri1, pri1, curBounds[pri0] - tolerance) + 1;\n          activeIndicesByPri1.splice(0, pruneCount);\n          if (self && onlySweepAxisCollisions) {\n            curCollisions = curCollisions.concat(activeIndicesByPri1);\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j];\n              allCollisions[activeIndex].push(origIndex);\n            }\n          } else {\n            var curSec1 = curBounds[sec1],\n              curSec0 = curBounds[sec0];\n            for (var j = 0; j < activeIndicesByPri1.length; j++) {\n              var activeIndex = activeIndicesByPri1[j],\n                activeBounds = allBounds[activeIndex],\n                isActiveA = activeIndex < lengthA,\n                isActiveB = self || activeIndex >= lengthA;\n              if (onlySweepAxisCollisions || (isCurrentA && isActiveB || isCurrentB && isActiveA) && curSec1 >= activeBounds[sec0] - tolerance && curSec0 <= activeBounds[sec1] + tolerance) {\n                if (isCurrentA && isActiveB) {\n                  curCollisions.push(self ? activeIndex : activeIndex - lengthA);\n                }\n                if (isCurrentB && isActiveA) {\n                  allCollisions[activeIndex].push(origIndex);\n                }\n              }\n            }\n          }\n        }\n        if (isCurrentA) {\n          if (boundsA === boundsB) {\n            curCollisions.push(curIndex);\n          }\n          allCollisions[curIndex] = curCollisions;\n        }\n        if (activeIndicesByPri1.length) {\n          var curPri1 = curBounds[pri1],\n            index = binarySearch(activeIndicesByPri1, pri1, curPri1);\n          activeIndicesByPri1.splice(index + 1, 0, curIndex);\n        } else {\n          activeIndicesByPri1.push(curIndex);\n        }\n      }\n      for (var i = 0; i < allCollisions.length; i++) {\n        var collisions = allCollisions[i];\n        if (collisions) {\n          collisions.sort(function (i1, i2) {\n            return i1 - i2;\n          });\n        }\n      }\n      return allCollisions;\n    }\n  };\n  var Formatter = Base.extend({\n    initialize: function (precision) {\n      this.precision = Base.pick(precision, 5);\n      this.multiplier = Math.pow(10, this.precision);\n    },\n    number: function (val) {\n      return this.precision < 16 ? Math.round(val * this.multiplier) / this.multiplier : val;\n    },\n    pair: function (val1, val2, separator) {\n      return this.number(val1) + (separator || ',') + this.number(val2);\n    },\n    point: function (val, separator) {\n      return this.number(val.x) + (separator || ',') + this.number(val.y);\n    },\n    size: function (val, separator) {\n      return this.number(val.width) + (separator || ',') + this.number(val.height);\n    },\n    rectangle: function (val, separator) {\n      return this.point(val, separator) + (separator || ',') + this.size(val, separator);\n    }\n  });\n  Formatter.instance = new Formatter();\n  var Numerical = new function () {\n    var abscissas = [[0.5773502691896257645091488], [0, 0.7745966692414833770358531], [0.3399810435848562648026658, 0.8611363115940525752239465], [0, 0.5384693101056830910363144, 0.9061798459386639927976269], [0.2386191860831969086305017, 0.6612093864662645136613996, 0.9324695142031520278123016], [0, 0.4058451513773971669066064, 0.7415311855993944398638648, 0.9491079123427585245261897], [0.1834346424956498049394761, 0.5255324099163289858177390, 0.7966664774136267395915539, 0.9602898564975362316835609], [0, 0.3242534234038089290385380, 0.6133714327005903973087020, 0.8360311073266357942994298, 0.9681602395076260898355762], [0.1488743389816312108848260, 0.4333953941292471907992659, 0.6794095682990244062343274, 0.8650633666889845107320967, 0.9739065285171717200779640], [0, 0.2695431559523449723315320, 0.5190961292068118159257257, 0.7301520055740493240934163, 0.8870625997680952990751578, 0.9782286581460569928039380], [0.1252334085114689154724414, 0.3678314989981801937526915, 0.5873179542866174472967024, 0.7699026741943046870368938, 0.9041172563704748566784659, 0.9815606342467192506905491], [0, 0.2304583159551347940655281, 0.4484927510364468528779129, 0.6423493394403402206439846, 0.8015780907333099127942065, 0.9175983992229779652065478, 0.9841830547185881494728294], [0.1080549487073436620662447, 0.3191123689278897604356718, 0.5152486363581540919652907, 0.6872929048116854701480198, 0.8272013150697649931897947, 0.9284348836635735173363911, 0.9862838086968123388415973], [0, 0.2011940939974345223006283, 0.3941513470775633698972074, 0.5709721726085388475372267, 0.7244177313601700474161861, 0.8482065834104272162006483, 0.9372733924007059043077589, 0.9879925180204854284895657], [0.0950125098376374401853193, 0.2816035507792589132304605, 0.4580167776572273863424194, 0.6178762444026437484466718, 0.7554044083550030338951012, 0.8656312023878317438804679, 0.9445750230732325760779884, 0.9894009349916499325961542]];\n    var weights = [[1], [0.8888888888888888888888889, 0.5555555555555555555555556], [0.6521451548625461426269361, 0.3478548451374538573730639], [0.5688888888888888888888889, 0.4786286704993664680412915, 0.2369268850561890875142640], [0.4679139345726910473898703, 0.3607615730481386075698335, 0.1713244923791703450402961], [0.4179591836734693877551020, 0.3818300505051189449503698, 0.2797053914892766679014678, 0.1294849661688696932706114], [0.3626837833783619829651504, 0.3137066458778872873379622, 0.2223810344533744705443560, 0.1012285362903762591525314], [0.3302393550012597631645251, 0.3123470770400028400686304, 0.2606106964029354623187429, 0.1806481606948574040584720, 0.0812743883615744119718922], [0.2955242247147528701738930, 0.2692667193099963550912269, 0.2190863625159820439955349, 0.1494513491505805931457763, 0.0666713443086881375935688], [0.2729250867779006307144835, 0.2628045445102466621806889, 0.2331937645919904799185237, 0.1862902109277342514260976, 0.1255803694649046246346943, 0.0556685671161736664827537], [0.2491470458134027850005624, 0.2334925365383548087608499, 0.2031674267230659217490645, 0.1600783285433462263346525, 0.1069393259953184309602547, 0.0471753363865118271946160], [0.2325515532308739101945895, 0.2262831802628972384120902, 0.2078160475368885023125232, 0.1781459807619457382800467, 0.1388735102197872384636018, 0.0921214998377284479144218, 0.0404840047653158795200216], [0.2152638534631577901958764, 0.2051984637212956039659241, 0.1855383974779378137417166, 0.1572031671581935345696019, 0.1215185706879031846894148, 0.0801580871597602098056333, 0.0351194603317518630318329], [0.2025782419255612728806202, 0.1984314853271115764561183, 0.1861610000155622110268006, 0.1662692058169939335532009, 0.1395706779261543144478048, 0.1071592204671719350118695, 0.0703660474881081247092674, 0.0307532419961172683546284], [0.1894506104550684962853967, 0.1826034150449235888667637, 0.1691565193950025381893121, 0.1495959888165767320815017, 0.1246289712555338720524763, 0.0951585116824927848099251, 0.0622535239386478928628438, 0.0271524594117540948517806]];\n    var abs = Math.abs,\n      sqrt = Math.sqrt,\n      pow = Math.pow,\n      log2 = Math.log2 || function (x) {\n        return Math.log(x) * Math.LOG2E;\n      },\n      EPSILON = 1e-12,\n      MACHINE_EPSILON = 1.12e-16;\n    function clamp(value, min, max) {\n      return value < min ? min : value > max ? max : value;\n    }\n    function getDiscriminant(a, b, c) {\n      function split(v) {\n        var x = v * 134217729,\n          y = v - x,\n          hi = y + x,\n          lo = v - hi;\n        return [hi, lo];\n      }\n      var D = b * b - a * c,\n        E = b * b + a * c;\n      if (abs(D) * 3 < E) {\n        var ad = split(a),\n          bd = split(b),\n          cd = split(c),\n          p = b * b,\n          dp = bd[0] * bd[0] - p + 2 * bd[0] * bd[1] + bd[1] * bd[1],\n          q = a * c,\n          dq = ad[0] * cd[0] - q + ad[0] * cd[1] + ad[1] * cd[0] + ad[1] * cd[1];\n        D = p - q + (dp - dq);\n      }\n      return D;\n    }\n    function getNormalizationFactor() {\n      var norm = Math.max.apply(Math, arguments);\n      return norm && (norm < 1e-8 || norm > 1e8) ? pow(2, -Math.round(log2(norm))) : 0;\n    }\n    return {\n      EPSILON: EPSILON,\n      MACHINE_EPSILON: MACHINE_EPSILON,\n      CURVETIME_EPSILON: 1e-8,\n      GEOMETRIC_EPSILON: 1e-7,\n      TRIGONOMETRIC_EPSILON: 1e-8,\n      ANGULAR_EPSILON: 1e-5,\n      KAPPA: 4 * (sqrt(2) - 1) / 3,\n      isZero: function (val) {\n        return val >= -EPSILON && val <= EPSILON;\n      },\n      isMachineZero: function (val) {\n        return val >= -MACHINE_EPSILON && val <= MACHINE_EPSILON;\n      },\n      clamp: clamp,\n      integrate: function (f, a, b, n) {\n        var x = abscissas[n - 2],\n          w = weights[n - 2],\n          A = (b - a) * 0.5,\n          B = A + a,\n          i = 0,\n          m = n + 1 >> 1,\n          sum = n & 1 ? w[i++] * f(B) : 0;\n        while (i < m) {\n          var Ax = A * x[i];\n          sum += w[i++] * (f(B + Ax) + f(B - Ax));\n        }\n        return A * sum;\n      },\n      findRoot: function (f, df, x, a, b, n, tolerance) {\n        for (var i = 0; i < n; i++) {\n          var fx = f(x),\n            dx = fx / df(x),\n            nx = x - dx;\n          if (abs(dx) < tolerance) {\n            x = nx;\n            break;\n          }\n          if (fx > 0) {\n            b = x;\n            x = nx <= a ? (a + b) * 0.5 : nx;\n          } else {\n            a = x;\n            x = nx >= b ? (a + b) * 0.5 : nx;\n          }\n        }\n        return clamp(x, a, b);\n      },\n      solveQuadratic: function (a, b, c, roots, min, max) {\n        var x1,\n          x2 = Infinity;\n        if (abs(a) < EPSILON) {\n          if (abs(b) < EPSILON) return abs(c) < EPSILON ? -1 : 0;\n          x1 = -c / b;\n        } else {\n          b *= -0.5;\n          var D = getDiscriminant(a, b, c);\n          if (D && abs(D) < MACHINE_EPSILON) {\n            var f = getNormalizationFactor(abs(a), abs(b), abs(c));\n            if (f) {\n              a *= f;\n              b *= f;\n              c *= f;\n              D = getDiscriminant(a, b, c);\n            }\n          }\n          if (D >= -MACHINE_EPSILON) {\n            var Q = D < 0 ? 0 : sqrt(D),\n              R = b + (b < 0 ? -Q : Q);\n            if (R === 0) {\n              x1 = c / a;\n              x2 = -x1;\n            } else {\n              x1 = R / a;\n              x2 = c / R;\n            }\n          }\n        }\n        var count = 0,\n          boundless = min == null,\n          minB = min - EPSILON,\n          maxB = max + EPSILON;\n        if (isFinite(x1) && (boundless || x1 > minB && x1 < maxB)) roots[count++] = boundless ? x1 : clamp(x1, min, max);\n        if (x2 !== x1 && isFinite(x2) && (boundless || x2 > minB && x2 < maxB)) roots[count++] = boundless ? x2 : clamp(x2, min, max);\n        return count;\n      },\n      solveCubic: function (a, b, c, d, roots, min, max) {\n        var f = getNormalizationFactor(abs(a), abs(b), abs(c), abs(d)),\n          x,\n          b1,\n          c2,\n          qd,\n          q;\n        if (f) {\n          a *= f;\n          b *= f;\n          c *= f;\n          d *= f;\n        }\n        function evaluate(x0) {\n          x = x0;\n          var tmp = a * x;\n          b1 = tmp + b;\n          c2 = b1 * x + c;\n          qd = (tmp + b1) * x + c2;\n          q = c2 * x + d;\n        }\n        if (abs(a) < EPSILON) {\n          a = b;\n          b1 = c;\n          c2 = d;\n          x = Infinity;\n        } else if (abs(d) < EPSILON) {\n          b1 = b;\n          c2 = c;\n          x = 0;\n        } else {\n          evaluate(-(b / a) / 3);\n          var t = q / a,\n            r = pow(abs(t), 1 / 3),\n            s = t < 0 ? -1 : 1,\n            td = -qd / a,\n            rd = td > 0 ? 1.324717957244746 * Math.max(r, sqrt(td)) : r,\n            x0 = x - s * rd;\n          if (x0 !== x) {\n            do {\n              evaluate(x0);\n              x0 = qd === 0 ? x : x - q / qd / (1 + MACHINE_EPSILON);\n            } while (s * x0 > s * x);\n            if (abs(a) * x * x > abs(d / x)) {\n              c2 = -d / x;\n              b1 = (c2 - c) / x;\n            }\n          }\n        }\n        var count = Numerical.solveQuadratic(a, b1, c2, roots, min, max),\n          boundless = min == null;\n        if (isFinite(x) && (count === 0 || count > 0 && x !== roots[0] && x !== roots[1]) && (boundless || x > min - EPSILON && x < max + EPSILON)) roots[count++] = boundless ? x : clamp(x, min, max);\n        return count;\n      }\n    };\n  }();\n  var UID = {\n    _id: 1,\n    _pools: {},\n    get: function (name) {\n      if (name) {\n        var pool = this._pools[name];\n        if (!pool) pool = this._pools[name] = {\n          _id: 1\n        };\n        return pool._id++;\n      } else {\n        return this._id++;\n      }\n    }\n  };\n  var Point = Base.extend({\n    _class: 'Point',\n    _readIndex: true,\n    initialize: function Point(arg0, arg1) {\n      var type = typeof arg0,\n        reading = this.__read,\n        read = 0;\n      if (type === 'number') {\n        var hasY = typeof arg1 === 'number';\n        this._set(arg0, hasY ? arg1 : arg0);\n        if (reading) read = hasY ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('angle' in obj) {\n          this._set(obj.length || 0, 0);\n          this.setAngle(obj.angle || 0);\n        } else {\n          this._set(0, 0);\n          read = 0;\n        }\n      }\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n    equals: function (point) {\n      return this === point || point && (this.x === point.x && this.y === point.y || Array.isArray(point) && this.x === point[0] && this.y === point[1]) || false;\n    },\n    clone: function () {\n      return new Point(this.x, this.y);\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y)];\n    },\n    getLength: function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n    setLength: function (length) {\n      if (this.isZero()) {\n        var angle = this._angle || 0;\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      } else {\n        var scale = length / this.getLength();\n        if (Numerical.isZero(scale)) this.getAngle();\n        this._set(this.x * scale, this.y * scale);\n      }\n    },\n    getAngle: function () {\n      return this.getAngleInRadians.apply(this, arguments) * 180 / Math.PI;\n    },\n    setAngle: function (angle) {\n      this.setAngleInRadians.call(this, angle * Math.PI / 180);\n    },\n    getAngleInDegrees: '#getAngle',\n    setAngleInDegrees: '#setAngle',\n    getAngleInRadians: function () {\n      if (!arguments.length) {\n        return this.isZero() ? this._angle || 0 : this._angle = Math.atan2(this.y, this.x);\n      } else {\n        var point = Point.read(arguments),\n          div = this.getLength() * point.getLength();\n        if (Numerical.isZero(div)) {\n          return NaN;\n        } else {\n          var a = this.dot(point) / div;\n          return Math.acos(a < -1 ? -1 : a > 1 ? 1 : a);\n        }\n      }\n    },\n    setAngleInRadians: function (angle) {\n      this._angle = angle;\n      if (!this.isZero()) {\n        var length = this.getLength();\n        this._set(Math.cos(angle) * length, Math.sin(angle) * length);\n      }\n    },\n    getQuadrant: function () {\n      return this.x >= 0 ? this.y >= 0 ? 1 : 4 : this.y >= 0 ? 2 : 3;\n    }\n  }, {\n    beans: false,\n    getDirectedAngle: function () {\n      var point = Point.read(arguments);\n      return Math.atan2(this.cross(point), this.dot(point)) * 180 / Math.PI;\n    },\n    getDistance: function () {\n      var args = arguments,\n        point = Point.read(args),\n        x = point.x - this.x,\n        y = point.y - this.y,\n        d = x * x + y * y,\n        squared = Base.read(args);\n      return squared ? d : Math.sqrt(d);\n    },\n    normalize: function (length) {\n      if (length === undefined) length = 1;\n      var current = this.getLength(),\n        scale = current !== 0 ? length / current : 0,\n        point = new Point(this.x * scale, this.y * scale);\n      if (scale >= 0) point._angle = this._angle;\n      return point;\n    },\n    rotate: function (angle, center) {\n      if (angle === 0) return this.clone();\n      angle = angle * Math.PI / 180;\n      var point = center ? this.subtract(center) : this,\n        sin = Math.sin(angle),\n        cos = Math.cos(angle);\n      point = new Point(point.x * cos - point.y * sin, point.x * sin + point.y * cos);\n      return center ? point.add(center) : point;\n    },\n    transform: function (matrix) {\n      return matrix ? matrix._transformPoint(this) : this;\n    },\n    add: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x + point.x, this.y + point.y);\n    },\n    subtract: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x - point.x, this.y - point.y);\n    },\n    multiply: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x * point.x, this.y * point.y);\n    },\n    divide: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x / point.x, this.y / point.y);\n    },\n    modulo: function () {\n      var point = Point.read(arguments);\n      return new Point(this.x % point.x, this.y % point.y);\n    },\n    negate: function () {\n      return new Point(-this.x, -this.y);\n    },\n    isInside: function () {\n      return Rectangle.read(arguments).contains(this);\n    },\n    isClose: function () {\n      var args = arguments,\n        point = Point.read(args),\n        tolerance = Base.read(args);\n      return this.getDistance(point) <= tolerance;\n    },\n    isCollinear: function () {\n      var point = Point.read(arguments);\n      return Point.isCollinear(this.x, this.y, point.x, point.y);\n    },\n    isColinear: '#isCollinear',\n    isOrthogonal: function () {\n      var point = Point.read(arguments);\n      return Point.isOrthogonal(this.x, this.y, point.x, point.y);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this.x) && isZero(this.y);\n    },\n    isNaN: function () {\n      return isNaN(this.x) || isNaN(this.y);\n    },\n    isInQuadrant: function (q) {\n      return this.x * (q > 1 && q < 4 ? -1 : 1) >= 0 && this.y * (q > 2 ? -1 : 1) >= 0;\n    },\n    dot: function () {\n      var point = Point.read(arguments);\n      return this.x * point.x + this.y * point.y;\n    },\n    cross: function () {\n      var point = Point.read(arguments);\n      return this.x * point.y - this.y * point.x;\n    },\n    project: function () {\n      var point = Point.read(arguments),\n        scale = point.isZero() ? 0 : this.dot(point) / point.dot(point);\n      return new Point(point.x * scale, point.y * scale);\n    },\n    statics: {\n      min: function () {\n        var args = arguments,\n          point1 = Point.read(args),\n          point2 = Point.read(args);\n        return new Point(Math.min(point1.x, point2.x), Math.min(point1.y, point2.y));\n      },\n      max: function () {\n        var args = arguments,\n          point1 = Point.read(args),\n          point2 = Point.read(args);\n        return new Point(Math.max(point1.x, point2.x), Math.max(point1.y, point2.y));\n      },\n      random: function () {\n        return new Point(Math.random(), Math.random());\n      },\n      isCollinear: function (x1, y1, x2, y2) {\n        return Math.abs(x1 * y2 - y1 * x2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      },\n      isOrthogonal: function (x1, y1, x2, y2) {\n        return Math.abs(x1 * x2 + y1 * y2) <= Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2)) * 1e-8;\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n    this[key] = function () {\n      return new Point(op(this.x), op(this.y));\n    };\n  }, {}));\n  var LinkedPoint = Point.extend({\n    initialize: function Point(x, y, owner, setter) {\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (x, y, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getX: function () {\n      return this._x;\n    },\n    setX: function (x) {\n      this._x = x;\n      this._owner[this._setter](this);\n    },\n    getY: function () {\n      return this._y;\n    },\n    setY: function (y) {\n      this._y = y;\n      this._owner[this._setter](this);\n    },\n    isSelected: function () {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function (selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function () {\n      return this._setter === 'setPosition' ? 4 : 0;\n    }\n  });\n  var Size = Base.extend({\n    _class: 'Size',\n    _readIndex: true,\n    initialize: function Size(arg0, arg1) {\n      var type = typeof arg0,\n        reading = this.__read,\n        read = 0;\n      if (type === 'number') {\n        var hasHeight = typeof arg1 === 'number';\n        this._set(arg0, hasHeight ? arg1 : arg0);\n        if (reading) read = hasHeight ? 2 : 1;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0);\n        if (reading) read = arg0 === null ? 1 : 0;\n      } else {\n        var obj = type === 'string' ? arg0.split(/[\\s,]+/) || [] : arg0;\n        read = 1;\n        if (Array.isArray(obj)) {\n          this._set(+obj[0], +(obj.length > 1 ? obj[1] : obj[0]));\n        } else if ('width' in obj) {\n          this._set(obj.width || 0, obj.height || 0);\n        } else if ('x' in obj) {\n          this._set(obj.x || 0, obj.y || 0);\n        } else {\n          this._set(0, 0);\n          read = 0;\n        }\n      }\n      if (reading) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (width, height) {\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    equals: function (size) {\n      return size === this || size && (this.width === size.width && this.height === size.height || Array.isArray(size) && this.width === size[0] && this.height === size[1]) || false;\n    },\n    clone: function () {\n      return new Size(this.width, this.height);\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.width), f.number(this.height)];\n    },\n    add: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width + size.width, this.height + size.height);\n    },\n    subtract: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width - size.width, this.height - size.height);\n    },\n    multiply: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width * size.width, this.height * size.height);\n    },\n    divide: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width / size.width, this.height / size.height);\n    },\n    modulo: function () {\n      var size = Size.read(arguments);\n      return new Size(this.width % size.width, this.height % size.height);\n    },\n    negate: function () {\n      return new Size(-this.width, -this.height);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this.width) && isZero(this.height);\n    },\n    isNaN: function () {\n      return isNaN(this.width) || isNaN(this.height);\n    },\n    statics: {\n      min: function (size1, size2) {\n        return new Size(Math.min(size1.width, size2.width), Math.min(size1.height, size2.height));\n      },\n      max: function (size1, size2) {\n        return new Size(Math.max(size1.width, size2.width), Math.max(size1.height, size2.height));\n      },\n      random: function () {\n        return new Size(Math.random(), Math.random());\n      }\n    }\n  }, Base.each(['round', 'ceil', 'floor', 'abs'], function (key) {\n    var op = Math[key];\n    this[key] = function () {\n      return new Size(op(this.width), op(this.height));\n    };\n  }, {}));\n  var LinkedSize = Size.extend({\n    initialize: function Size(width, height, owner, setter) {\n      this._width = width;\n      this._height = height;\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (width, height, _dontNotify) {\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    },\n    getWidth: function () {\n      return this._width;\n    },\n    setWidth: function (width) {\n      this._width = width;\n      this._owner[this._setter](this);\n    },\n    getHeight: function () {\n      return this._height;\n    },\n    setHeight: function (height) {\n      this._height = height;\n      this._owner[this._setter](this);\n    }\n  });\n  var Rectangle = Base.extend({\n    _class: 'Rectangle',\n    _readIndex: true,\n    beans: true,\n    initialize: function Rectangle(arg0, arg1, arg2, arg3) {\n      var args = arguments,\n        type = typeof arg0,\n        read;\n      if (type === 'number') {\n        this._set(arg0, arg1, arg2, arg3);\n        read = 4;\n      } else if (type === 'undefined' || arg0 === null) {\n        this._set(0, 0, 0, 0);\n        read = arg0 === null ? 1 : 0;\n      } else if (args.length === 1) {\n        if (Array.isArray(arg0)) {\n          this._set.apply(this, arg0);\n          read = 1;\n        } else if (arg0.x !== undefined || arg0.width !== undefined) {\n          this._set(arg0.x || 0, arg0.y || 0, arg0.width || 0, arg0.height || 0);\n          read = 1;\n        } else if (arg0.from === undefined && arg0.to === undefined) {\n          this._set(0, 0, 0, 0);\n          if (Base.readSupported(args, this)) {\n            read = 1;\n          }\n        }\n      }\n      if (read === undefined) {\n        var frm = Point.readNamed(args, 'from'),\n          next = Base.peek(args),\n          x = frm.x,\n          y = frm.y,\n          width,\n          height;\n        if (next && next.x !== undefined || Base.hasNamed(args, 'to')) {\n          var to = Point.readNamed(args, 'to');\n          width = to.x - x;\n          height = to.y - y;\n          if (width < 0) {\n            x = to.x;\n            width = -width;\n          }\n          if (height < 0) {\n            y = to.y;\n            height = -height;\n          }\n        } else {\n          var size = Size.read(args);\n          width = size.width;\n          height = size.height;\n        }\n        this._set(x, y, width, height);\n        read = args.__index;\n      }\n      var filtered = args.__filtered;\n      if (filtered) this.__filtered = filtered;\n      if (this.__read) this.__read = read;\n      return this;\n    },\n    set: '#initialize',\n    _set: function (x, y, width, height) {\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n      return this;\n    },\n    clone: function () {\n      return new Rectangle(this.x, this.y, this.width, this.height);\n    },\n    equals: function (rect) {\n      var rt = Base.isPlainValue(rect) ? Rectangle.read(arguments) : rect;\n      return rt === this || rt && this.x === rt.x && this.y === rt.y && this.width === rt.width && this.height === rt.height || false;\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '{ x: ' + f.number(this.x) + ', y: ' + f.number(this.y) + ', width: ' + f.number(this.width) + ', height: ' + f.number(this.height) + ' }';\n    },\n    _serialize: function (options) {\n      var f = options.formatter;\n      return [f.number(this.x), f.number(this.y), f.number(this.width), f.number(this.height)];\n    },\n    getPoint: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.x, this.y, this, 'setPoint');\n    },\n    setPoint: function () {\n      var point = Point.read(arguments);\n      this.x = point.x;\n      this.y = point.y;\n    },\n    getSize: function (_dontLink) {\n      var ctor = _dontLink ? Size : LinkedSize;\n      return new ctor(this.width, this.height, this, 'setSize');\n    },\n    _fw: 1,\n    _fh: 1,\n    setSize: function () {\n      var size = Size.read(arguments),\n        sx = this._sx,\n        sy = this._sy,\n        w = size.width,\n        h = size.height;\n      if (sx) {\n        this.x += (this.width - w) * sx;\n      }\n      if (sy) {\n        this.y += (this.height - h) * sy;\n      }\n      this.width = w;\n      this.height = h;\n      this._fw = this._fh = 1;\n    },\n    getLeft: function () {\n      return this.x;\n    },\n    setLeft: function (left) {\n      if (!this._fw) {\n        var amount = left - this.x;\n        this.width -= this._sx === 0.5 ? amount * 2 : amount;\n      }\n      this.x = left;\n      this._sx = this._fw = 0;\n    },\n    getTop: function () {\n      return this.y;\n    },\n    setTop: function (top) {\n      if (!this._fh) {\n        var amount = top - this.y;\n        this.height -= this._sy === 0.5 ? amount * 2 : amount;\n      }\n      this.y = top;\n      this._sy = this._fh = 0;\n    },\n    getRight: function () {\n      return this.x + this.width;\n    },\n    setRight: function (right) {\n      if (!this._fw) {\n        var amount = right - this.x;\n        this.width = this._sx === 0.5 ? amount * 2 : amount;\n      }\n      this.x = right - this.width;\n      this._sx = 1;\n      this._fw = 0;\n    },\n    getBottom: function () {\n      return this.y + this.height;\n    },\n    setBottom: function (bottom) {\n      if (!this._fh) {\n        var amount = bottom - this.y;\n        this.height = this._sy === 0.5 ? amount * 2 : amount;\n      }\n      this.y = bottom - this.height;\n      this._sy = 1;\n      this._fh = 0;\n    },\n    getCenterX: function () {\n      return this.x + this.width / 2;\n    },\n    setCenterX: function (x) {\n      if (this._fw || this._sx === 0.5) {\n        this.x = x - this.width / 2;\n      } else {\n        if (this._sx) {\n          this.x += (x - this.x) * 2 * this._sx;\n        }\n        this.width = (x - this.x) * 2;\n      }\n      this._sx = 0.5;\n      this._fw = 0;\n    },\n    getCenterY: function () {\n      return this.y + this.height / 2;\n    },\n    setCenterY: function (y) {\n      if (this._fh || this._sy === 0.5) {\n        this.y = y - this.height / 2;\n      } else {\n        if (this._sy) {\n          this.y += (y - this.y) * 2 * this._sy;\n        }\n        this.height = (y - this.y) * 2;\n      }\n      this._sy = 0.5;\n      this._fh = 0;\n    },\n    getCenter: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this.getCenterX(), this.getCenterY(), this, 'setCenter');\n    },\n    setCenter: function () {\n      var point = Point.read(arguments);\n      this.setCenterX(point.x);\n      this.setCenterY(point.y);\n      return this;\n    },\n    getArea: function () {\n      return this.width * this.height;\n    },\n    isEmpty: function () {\n      return this.width === 0 || this.height === 0;\n    },\n    contains: function (arg) {\n      return arg && arg.width !== undefined || (Array.isArray(arg) ? arg : arguments).length === 4 ? this._containsRectangle(Rectangle.read(arguments)) : this._containsPoint(Point.read(arguments));\n    },\n    _containsPoint: function (point) {\n      var x = point.x,\n        y = point.y;\n      return x >= this.x && y >= this.y && x <= this.x + this.width && y <= this.y + this.height;\n    },\n    _containsRectangle: function (rect) {\n      var x = rect.x,\n        y = rect.y;\n      return x >= this.x && y >= this.y && x + rect.width <= this.x + this.width && y + rect.height <= this.y + this.height;\n    },\n    intersects: function () {\n      var rect = Rectangle.read(arguments),\n        epsilon = Base.read(arguments) || 0;\n      return rect.x + rect.width > this.x - epsilon && rect.y + rect.height > this.y - epsilon && rect.x < this.x + this.width + epsilon && rect.y < this.y + this.height + epsilon;\n    },\n    intersect: function () {\n      var rect = Rectangle.read(arguments),\n        x1 = Math.max(this.x, rect.x),\n        y1 = Math.max(this.y, rect.y),\n        x2 = Math.min(this.x + this.width, rect.x + rect.width),\n        y2 = Math.min(this.y + this.height, rect.y + rect.height);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    unite: function () {\n      var rect = Rectangle.read(arguments),\n        x1 = Math.min(this.x, rect.x),\n        y1 = Math.min(this.y, rect.y),\n        x2 = Math.max(this.x + this.width, rect.x + rect.width),\n        y2 = Math.max(this.y + this.height, rect.y + rect.height);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    include: function () {\n      var point = Point.read(arguments);\n      var x1 = Math.min(this.x, point.x),\n        y1 = Math.min(this.y, point.y),\n        x2 = Math.max(this.x + this.width, point.x),\n        y2 = Math.max(this.y + this.height, point.y);\n      return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    },\n    expand: function () {\n      var amount = Size.read(arguments),\n        hor = amount.width,\n        ver = amount.height;\n      return new Rectangle(this.x - hor / 2, this.y - ver / 2, this.width + hor, this.height + ver);\n    },\n    scale: function (hor, ver) {\n      return this.expand(this.width * hor - this.width, this.height * (ver === undefined ? hor : ver) - this.height);\n    }\n  }, Base.each([['Top', 'Left'], ['Top', 'Right'], ['Bottom', 'Left'], ['Bottom', 'Right'], ['Left', 'Center'], ['Top', 'Center'], ['Right', 'Center'], ['Bottom', 'Center']], function (parts, index) {\n    var part = parts.join(''),\n      xFirst = /^[RL]/.test(part);\n    if (index >= 4) parts[1] += xFirst ? 'Y' : 'X';\n    var x = parts[xFirst ? 0 : 1],\n      y = parts[xFirst ? 1 : 0],\n      getX = 'get' + x,\n      getY = 'get' + y,\n      setX = 'set' + x,\n      setY = 'set' + y,\n      get = 'get' + part,\n      set = 'set' + part;\n    this[get] = function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      return new ctor(this[getX](), this[getY](), this, set);\n    };\n    this[set] = function () {\n      var point = Point.read(arguments);\n      this[setX](point.x);\n      this[setY](point.y);\n    };\n  }, {\n    beans: true\n  }));\n  var LinkedRectangle = Rectangle.extend({\n    initialize: function Rectangle(x, y, width, height, owner, setter) {\n      this._set(x, y, width, height, true);\n      this._owner = owner;\n      this._setter = setter;\n    },\n    _set: function (x, y, width, height, _dontNotify) {\n      this._x = x;\n      this._y = y;\n      this._width = width;\n      this._height = height;\n      if (!_dontNotify) this._owner[this._setter](this);\n      return this;\n    }\n  }, new function () {\n    var proto = Rectangle.prototype;\n    return Base.each(['x', 'y', 'width', 'height'], function (key) {\n      var part = Base.capitalize(key),\n        internal = '_' + key;\n      this['get' + part] = function () {\n        return this[internal];\n      };\n      this['set' + part] = function (value) {\n        this[internal] = value;\n        if (!this._dontNotify) this._owner[this._setter](this);\n      };\n    }, Base.each(['Point', 'Size', 'Center', 'Left', 'Top', 'Right', 'Bottom', 'CenterX', 'CenterY', 'TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'], function (key) {\n      var name = 'set' + key;\n      this[name] = function () {\n        this._dontNotify = true;\n        proto[name].apply(this, arguments);\n        this._dontNotify = false;\n        this._owner[this._setter](this);\n      };\n    }, {\n      isSelected: function () {\n        return !!(this._owner._selection & 2);\n      },\n      setSelected: function (selected) {\n        var owner = this._owner;\n        if (owner._changeSelection) {\n          owner._changeSelection(2, selected);\n        }\n      }\n    }));\n  }());\n  var Matrix = Base.extend({\n    _class: 'Matrix',\n    initialize: function Matrix(arg, _dontNotify) {\n      var args = arguments,\n        count = args.length,\n        ok = true;\n      if (count >= 6) {\n        this._set.apply(this, args);\n      } else if (count === 1 || count === 2) {\n        if (arg instanceof Matrix) {\n          this._set(arg._a, arg._b, arg._c, arg._d, arg._tx, arg._ty, _dontNotify);\n        } else if (Array.isArray(arg)) {\n          this._set.apply(this, _dontNotify ? arg.concat([_dontNotify]) : arg);\n        } else {\n          ok = false;\n        }\n      } else if (!count) {\n        this.reset();\n      } else {\n        ok = false;\n      }\n      if (!ok) {\n        throw new Error('Unsupported matrix parameters');\n      }\n      return this;\n    },\n    set: '#initialize',\n    _set: function (a, b, c, d, tx, ty, _dontNotify) {\n      this._a = a;\n      this._b = b;\n      this._c = c;\n      this._d = d;\n      this._tx = tx;\n      this._ty = ty;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this.getValues(), options, true, dictionary);\n    },\n    _changed: function () {\n      var owner = this._owner;\n      if (owner) {\n        if (owner._applyMatrix) {\n          owner.transform(null, true);\n        } else {\n          owner._changed(25);\n        }\n      }\n    },\n    clone: function () {\n      return new Matrix(this._a, this._b, this._c, this._d, this._tx, this._ty);\n    },\n    equals: function (mx) {\n      return mx === this || mx && this._a === mx._a && this._b === mx._b && this._c === mx._c && this._d === mx._d && this._tx === mx._tx && this._ty === mx._ty;\n    },\n    toString: function () {\n      var f = Formatter.instance;\n      return '[[' + [f.number(this._a), f.number(this._c), f.number(this._tx)].join(', ') + '], [' + [f.number(this._b), f.number(this._d), f.number(this._ty)].join(', ') + ']]';\n    },\n    reset: function (_dontNotify) {\n      this._a = this._d = 1;\n      this._b = this._c = this._tx = this._ty = 0;\n      if (!_dontNotify) this._changed();\n      return this;\n    },\n    apply: function (recursively, _setApplyMatrix) {\n      var owner = this._owner;\n      if (owner) {\n        owner.transform(null, Base.pick(recursively, true), _setApplyMatrix);\n        return this.isIdentity();\n      }\n      return false;\n    },\n    translate: function () {\n      var point = Point.read(arguments),\n        x = point.x,\n        y = point.y;\n      this._tx += x * this._a + y * this._c;\n      this._ty += x * this._b + y * this._d;\n      this._changed();\n      return this;\n    },\n    scale: function () {\n      var args = arguments,\n        scale = Point.read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      if (center) this.translate(center);\n      this._a *= scale.x;\n      this._b *= scale.x;\n      this._c *= scale.y;\n      this._d *= scale.y;\n      if (center) this.translate(center.negate());\n      this._changed();\n      return this;\n    },\n    rotate: function (angle) {\n      angle *= Math.PI / 180;\n      var center = Point.read(arguments, 1),\n        x = center.x,\n        y = center.y,\n        cos = Math.cos(angle),\n        sin = Math.sin(angle),\n        tx = x - x * cos + y * sin,\n        ty = y - x * sin - y * cos,\n        a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d;\n      this._a = cos * a + sin * c;\n      this._b = cos * b + sin * d;\n      this._c = -sin * a + cos * c;\n      this._d = -sin * b + cos * d;\n      this._tx += tx * a + ty * c;\n      this._ty += tx * b + ty * d;\n      this._changed();\n      return this;\n    },\n    shear: function () {\n      var args = arguments,\n        shear = Point.read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      if (center) this.translate(center);\n      var a = this._a,\n        b = this._b;\n      this._a += shear.y * this._c;\n      this._b += shear.y * this._d;\n      this._c += shear.x * a;\n      this._d += shear.x * b;\n      if (center) this.translate(center.negate());\n      this._changed();\n      return this;\n    },\n    skew: function () {\n      var args = arguments,\n        skew = Point.read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        }),\n        toRadians = Math.PI / 180,\n        shear = new Point(Math.tan(skew.x * toRadians), Math.tan(skew.y * toRadians));\n      return this.shear(shear, center);\n    },\n    append: function (mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n          b1 = this._b,\n          c1 = this._c,\n          d1 = this._d,\n          a2 = mx._a,\n          b2 = mx._c,\n          c2 = mx._b,\n          d2 = mx._d,\n          tx2 = mx._tx,\n          ty2 = mx._ty;\n        this._a = a2 * a1 + c2 * c1;\n        this._c = b2 * a1 + d2 * c1;\n        this._b = a2 * b1 + c2 * d1;\n        this._d = b2 * b1 + d2 * d1;\n        this._tx += tx2 * a1 + ty2 * c1;\n        this._ty += tx2 * b1 + ty2 * d1;\n        if (!_dontNotify) this._changed();\n      }\n      return this;\n    },\n    prepend: function (mx, _dontNotify) {\n      if (mx) {\n        var a1 = this._a,\n          b1 = this._b,\n          c1 = this._c,\n          d1 = this._d,\n          tx1 = this._tx,\n          ty1 = this._ty,\n          a2 = mx._a,\n          b2 = mx._c,\n          c2 = mx._b,\n          d2 = mx._d,\n          tx2 = mx._tx,\n          ty2 = mx._ty;\n        this._a = a2 * a1 + b2 * b1;\n        this._c = a2 * c1 + b2 * d1;\n        this._b = c2 * a1 + d2 * b1;\n        this._d = c2 * c1 + d2 * d1;\n        this._tx = a2 * tx1 + b2 * ty1 + tx2;\n        this._ty = c2 * tx1 + d2 * ty1 + ty2;\n        if (!_dontNotify) this._changed();\n      }\n      return this;\n    },\n    appended: function (mx) {\n      return this.clone().append(mx);\n    },\n    prepended: function (mx) {\n      return this.clone().prepend(mx);\n    },\n    invert: function () {\n      var a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d,\n        tx = this._tx,\n        ty = this._ty,\n        det = a * d - b * c,\n        res = null;\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        this._a = d / det;\n        this._b = -b / det;\n        this._c = -c / det;\n        this._d = a / det;\n        this._tx = (c * ty - d * tx) / det;\n        this._ty = (b * tx - a * ty) / det;\n        res = this;\n      }\n      return res;\n    },\n    inverted: function () {\n      return this.clone().invert();\n    },\n    concatenate: '#append',\n    preConcatenate: '#prepend',\n    chain: '#appended',\n    _shiftless: function () {\n      return new Matrix(this._a, this._b, this._c, this._d, 0, 0);\n    },\n    _orNullIfIdentity: function () {\n      return this.isIdentity() ? null : this;\n    },\n    isIdentity: function () {\n      return this._a === 1 && this._b === 0 && this._c === 0 && this._d === 1 && this._tx === 0 && this._ty === 0;\n    },\n    isInvertible: function () {\n      var det = this._a * this._d - this._c * this._b;\n      return det && !isNaN(det) && isFinite(this._tx) && isFinite(this._ty);\n    },\n    isSingular: function () {\n      return !this.isInvertible();\n    },\n    transform: function (src, dst, count) {\n      return arguments.length < 3 ? this._transformPoint(Point.read(arguments)) : this._transformCoordinates(src, dst, count);\n    },\n    _transformPoint: function (point, dest, _dontNotify) {\n      var x = point.x,\n        y = point.y;\n      if (!dest) dest = new Point();\n      return dest._set(x * this._a + y * this._c + this._tx, x * this._b + y * this._d + this._ty, _dontNotify);\n    },\n    _transformCoordinates: function (src, dst, count) {\n      for (var i = 0, max = 2 * count; i < max; i += 2) {\n        var x = src[i],\n          y = src[i + 1];\n        dst[i] = x * this._a + y * this._c + this._tx;\n        dst[i + 1] = x * this._b + y * this._d + this._ty;\n      }\n      return dst;\n    },\n    _transformCorners: function (rect) {\n      var x1 = rect.x,\n        y1 = rect.y,\n        x2 = x1 + rect.width,\n        y2 = y1 + rect.height,\n        coords = [x1, y1, x2, y1, x2, y2, x1, y2];\n      return this._transformCoordinates(coords, coords, 4);\n    },\n    _transformBounds: function (bounds, dest, _dontNotify) {\n      var coords = this._transformCorners(bounds),\n        min = coords.slice(0, 2),\n        max = min.slice();\n      for (var i = 2; i < 8; i++) {\n        var val = coords[i],\n          j = i & 1;\n        if (val < min[j]) {\n          min[j] = val;\n        } else if (val > max[j]) {\n          max[j] = val;\n        }\n      }\n      if (!dest) dest = new Rectangle();\n      return dest._set(min[0], min[1], max[0] - min[0], max[1] - min[1], _dontNotify);\n    },\n    inverseTransform: function () {\n      return this._inverseTransform(Point.read(arguments));\n    },\n    _inverseTransform: function (point, dest, _dontNotify) {\n      var a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d,\n        tx = this._tx,\n        ty = this._ty,\n        det = a * d - b * c,\n        res = null;\n      if (det && !isNaN(det) && isFinite(tx) && isFinite(ty)) {\n        var x = point.x - this._tx,\n          y = point.y - this._ty;\n        if (!dest) dest = new Point();\n        res = dest._set((x * d - y * c) / det, (y * a - x * b) / det, _dontNotify);\n      }\n      return res;\n    },\n    decompose: function () {\n      var a = this._a,\n        b = this._b,\n        c = this._c,\n        d = this._d,\n        det = a * d - b * c,\n        sqrt = Math.sqrt,\n        atan2 = Math.atan2,\n        degrees = 180 / Math.PI,\n        rotate,\n        scale,\n        skew;\n      if (a !== 0 || b !== 0) {\n        var r = sqrt(a * a + b * b);\n        rotate = Math.acos(a / r) * (b > 0 ? 1 : -1);\n        scale = [r, det / r];\n        skew = [atan2(a * c + b * d, r * r), 0];\n      } else if (c !== 0 || d !== 0) {\n        var s = sqrt(c * c + d * d);\n        rotate = Math.asin(c / s) * (d > 0 ? 1 : -1);\n        scale = [det / s, s];\n        skew = [0, atan2(a * c + b * d, s * s)];\n      } else {\n        rotate = 0;\n        skew = scale = [0, 0];\n      }\n      return {\n        translation: this.getTranslation(),\n        rotation: rotate * degrees,\n        scaling: new Point(scale),\n        skewing: new Point(skew[0] * degrees, skew[1] * degrees)\n      };\n    },\n    getValues: function () {\n      return [this._a, this._b, this._c, this._d, this._tx, this._ty];\n    },\n    getTranslation: function () {\n      return new Point(this._tx, this._ty);\n    },\n    getScaling: function () {\n      return this.decompose().scaling;\n    },\n    getRotation: function () {\n      return this.decompose().rotation;\n    },\n    applyToContext: function (ctx) {\n      if (!this.isIdentity()) {\n        ctx.transform(this._a, this._b, this._c, this._d, this._tx, this._ty);\n      }\n    }\n  }, Base.each(['a', 'b', 'c', 'd', 'tx', 'ty'], function (key) {\n    var part = Base.capitalize(key),\n      prop = '_' + key;\n    this['get' + part] = function () {\n      return this[prop];\n    };\n    this['set' + part] = function (value) {\n      this[prop] = value;\n      this._changed();\n    };\n  }, {}));\n  var Line = Base.extend({\n    _class: 'Line',\n    initialize: function Line(arg0, arg1, arg2, arg3, arg4) {\n      var asVector = false;\n      if (arguments.length >= 4) {\n        this._px = arg0;\n        this._py = arg1;\n        this._vx = arg2;\n        this._vy = arg3;\n        asVector = arg4;\n      } else {\n        this._px = arg0.x;\n        this._py = arg0.y;\n        this._vx = arg1.x;\n        this._vy = arg1.y;\n        asVector = arg2;\n      }\n      if (!asVector) {\n        this._vx -= this._px;\n        this._vy -= this._py;\n      }\n    },\n    getPoint: function () {\n      return new Point(this._px, this._py);\n    },\n    getVector: function () {\n      return new Point(this._vx, this._vy);\n    },\n    getLength: function () {\n      return this.getVector().getLength();\n    },\n    intersect: function (line, isInfinite) {\n      return Line.intersect(this._px, this._py, this._vx, this._vy, line._px, line._py, line._vx, line._vy, true, isInfinite);\n    },\n    getSide: function (point, isInfinite) {\n      return Line.getSide(this._px, this._py, this._vx, this._vy, point.x, point.y, true, isInfinite);\n    },\n    getDistance: function (point) {\n      return Math.abs(this.getSignedDistance(point));\n    },\n    getSignedDistance: function (point) {\n      return Line.getSignedDistance(this._px, this._py, this._vx, this._vy, point.x, point.y, true);\n    },\n    isCollinear: function (line) {\n      return Point.isCollinear(this._vx, this._vy, line._vx, line._vy);\n    },\n    isOrthogonal: function (line) {\n      return Point.isOrthogonal(this._vx, this._vy, line._vx, line._vy);\n    },\n    statics: {\n      intersect: function (p1x, p1y, v1x, v1y, p2x, p2y, v2x, v2y, asVector, isInfinite) {\n        if (!asVector) {\n          v1x -= p1x;\n          v1y -= p1y;\n          v2x -= p2x;\n          v2y -= p2y;\n        }\n        var cross = v1x * v2y - v1y * v2x;\n        if (!Numerical.isMachineZero(cross)) {\n          var dx = p1x - p2x,\n            dy = p1y - p2y,\n            u1 = (v2x * dy - v2y * dx) / cross,\n            u2 = (v1x * dy - v1y * dx) / cross,\n            epsilon = 1e-12,\n            uMin = -epsilon,\n            uMax = 1 + epsilon;\n          if (isInfinite || uMin < u1 && u1 < uMax && uMin < u2 && u2 < uMax) {\n            if (!isInfinite) {\n              u1 = u1 <= 0 ? 0 : u1 >= 1 ? 1 : u1;\n            }\n            return new Point(p1x + u1 * v1x, p1y + u1 * v1y);\n          }\n        }\n      },\n      getSide: function (px, py, vx, vy, x, y, asVector, isInfinite) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n        var v2x = x - px,\n          v2y = y - py,\n          ccw = v2x * vy - v2y * vx;\n        if (!isInfinite && Numerical.isMachineZero(ccw)) {\n          ccw = (v2x * vx + v2x * vx) / (vx * vx + vy * vy);\n          if (ccw >= 0 && ccw <= 1) ccw = 0;\n        }\n        return ccw < 0 ? -1 : ccw > 0 ? 1 : 0;\n      },\n      getSignedDistance: function (px, py, vx, vy, x, y, asVector) {\n        if (!asVector) {\n          vx -= px;\n          vy -= py;\n        }\n        return vx === 0 ? vy > 0 ? x - px : px - x : vy === 0 ? vx < 0 ? y - py : py - y : ((x - px) * vy - (y - py) * vx) / (vy > vx ? vy * Math.sqrt(1 + vx * vx / (vy * vy)) : vx * Math.sqrt(1 + vy * vy / (vx * vx)));\n      },\n      getDistance: function (px, py, vx, vy, x, y, asVector) {\n        return Math.abs(Line.getSignedDistance(px, py, vx, vy, x, y, asVector));\n      }\n    }\n  });\n  var Project = PaperScopeItem.extend({\n    _class: 'Project',\n    _list: 'projects',\n    _reference: 'project',\n    _compactSerialize: true,\n    initialize: function Project(element) {\n      PaperScopeItem.call(this, true);\n      this._children = [];\n      this._namedChildren = {};\n      this._activeLayer = null;\n      this._currentStyle = new Style(null, null, this);\n      this._view = View.create(this, element || CanvasProvider.getCanvas(1, 1));\n      this._selectionItems = {};\n      this._selectionCount = 0;\n      this._updateVersion = 0;\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this._children, options, true, dictionary);\n    },\n    _changed: function (flags, item) {\n      if (flags & 1) {\n        var view = this._view;\n        if (view) {\n          view._needsUpdate = true;\n          if (!view._requested && view._autoUpdate) view.requestUpdate();\n        }\n      }\n      var changes = this._changes;\n      if (changes && item) {\n        var changesById = this._changesById,\n          id = item._id,\n          entry = changesById[id];\n        if (entry) {\n          entry.flags |= flags;\n        } else {\n          changes.push(changesById[id] = {\n            item: item,\n            flags: flags\n          });\n        }\n      }\n    },\n    clear: function () {\n      var children = this._children;\n      for (var i = children.length - 1; i >= 0; i--) children[i].remove();\n    },\n    isEmpty: function () {\n      return !this._children.length;\n    },\n    remove: function remove() {\n      if (!remove.base.call(this)) return false;\n      if (this._view) this._view.remove();\n      return true;\n    },\n    getView: function () {\n      return this._view;\n    },\n    getCurrentStyle: function () {\n      return this._currentStyle;\n    },\n    setCurrentStyle: function (style) {\n      this._currentStyle.set(style);\n    },\n    getIndex: function () {\n      return this._index;\n    },\n    getOptions: function () {\n      return this._scope.settings;\n    },\n    getLayers: function () {\n      return this._children;\n    },\n    getActiveLayer: function () {\n      return this._activeLayer || new Layer({\n        project: this,\n        insert: true\n      });\n    },\n    getSymbolDefinitions: function () {\n      var definitions = [],\n        ids = {};\n      this.getItems({\n        class: SymbolItem,\n        match: function (item) {\n          var definition = item._definition,\n            id = definition._id;\n          if (!ids[id]) {\n            ids[id] = true;\n            definitions.push(definition);\n          }\n          return false;\n        }\n      });\n      return definitions;\n    },\n    getSymbols: 'getSymbolDefinitions',\n    getSelectedItems: function () {\n      var selectionItems = this._selectionItems,\n        items = [];\n      for (var id in selectionItems) {\n        var item = selectionItems[id],\n          selection = item._selection;\n        if (selection & 1 && item.isInserted()) {\n          items.push(item);\n        } else if (!selection) {\n          this._updateSelection(item);\n        }\n      }\n      return items;\n    },\n    _updateSelection: function (item) {\n      var id = item._id,\n        selectionItems = this._selectionItems;\n      if (item._selection) {\n        if (selectionItems[id] !== item) {\n          this._selectionCount++;\n          selectionItems[id] = item;\n        }\n      } else if (selectionItems[id] === item) {\n        this._selectionCount--;\n        delete selectionItems[id];\n      }\n    },\n    selectAll: function () {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) children[i].setFullySelected(true);\n    },\n    deselectAll: function () {\n      var selectionItems = this._selectionItems;\n      for (var i in selectionItems) selectionItems[i].setFullySelected(false);\n    },\n    addLayer: function (layer) {\n      return this.insertLayer(undefined, layer);\n    },\n    insertLayer: function (index, layer) {\n      if (layer instanceof Layer) {\n        layer._remove(false, true);\n        Base.splice(this._children, [layer], index, 0);\n        layer._setProject(this, true);\n        var name = layer._name;\n        if (name) layer.setName(name);\n        if (this._changes) layer._changed(5);\n        if (!this._activeLayer) this._activeLayer = layer;\n      } else {\n        layer = null;\n      }\n      return layer;\n    },\n    _insertItem: function (index, item, _created) {\n      item = this.insertLayer(index, item) || (this._activeLayer || this._insertItem(undefined, new Layer(Item.NO_INSERT), true)).insertChild(index, item);\n      if (_created && item.activate) item.activate();\n      return item;\n    },\n    getItems: function (options) {\n      return Item._getItems(this, options);\n    },\n    getItem: function (options) {\n      return Item._getItems(this, options, null, null, true)[0] || null;\n    },\n    importJSON: function (json) {\n      this.activate();\n      var layer = this._activeLayer;\n      return Base.importJSON(json, layer && layer.isEmpty() && layer);\n    },\n    removeOn: function (type) {\n      var sets = this._removeSets;\n      if (sets) {\n        if (type === 'mouseup') sets.mousedrag = null;\n        var set = sets[type];\n        if (set) {\n          for (var id in set) {\n            var item = set[id];\n            for (var key in sets) {\n              var other = sets[key];\n              if (other && other != set) delete other[item._id];\n            }\n            item.remove();\n          }\n          sets[type] = null;\n        }\n      }\n    },\n    draw: function (ctx, matrix, pixelRatio) {\n      this._updateVersion++;\n      ctx.save();\n      matrix.applyToContext(ctx);\n      var children = this._children,\n        param = new Base({\n          offset: new Point(0, 0),\n          pixelRatio: pixelRatio,\n          viewMatrix: matrix.isIdentity() ? null : matrix,\n          matrices: [new Matrix()],\n          updateMatrix: true\n        });\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].draw(ctx, param);\n      }\n      ctx.restore();\n      if (this._selectionCount > 0) {\n        ctx.save();\n        ctx.strokeWidth = 1;\n        var items = this._selectionItems,\n          size = this._scope.settings.handleSize,\n          version = this._updateVersion;\n        for (var id in items) {\n          items[id]._drawSelection(ctx, matrix, size, items, version);\n        }\n        ctx.restore();\n      }\n    }\n  });\n  var Item = Base.extend(Emitter, {\n    statics: {\n      extend: function extend(src) {\n        if (src._serializeFields) src._serializeFields = Base.set({}, this.prototype._serializeFields, src._serializeFields);\n        return extend.base.apply(this, arguments);\n      },\n      INSERT: {\n        insert: true\n      },\n      NO_INSERT: {\n        insert: false\n      }\n    },\n    _class: 'Item',\n    _name: null,\n    _applyMatrix: true,\n    _canApplyMatrix: true,\n    _canScaleStroke: false,\n    _pivot: null,\n    _visible: true,\n    _blendMode: 'normal',\n    _opacity: 1,\n    _locked: false,\n    _guide: false,\n    _clipMask: false,\n    _selection: 0,\n    _selectBounds: true,\n    _selectChildren: false,\n    _serializeFields: {\n      name: null,\n      applyMatrix: null,\n      matrix: new Matrix(),\n      pivot: null,\n      visible: true,\n      blendMode: 'normal',\n      opacity: 1,\n      locked: false,\n      guide: false,\n      clipMask: false,\n      selected: false,\n      data: {}\n    },\n    _prioritize: ['applyMatrix']\n  }, new function () {\n    var handlers = ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onClick', 'onDoubleClick', 'onMouseMove', 'onMouseEnter', 'onMouseLeave'];\n    return Base.each(handlers, function (name) {\n      this._events[name] = {\n        install: function (type) {\n          this.getView()._countItemEvent(type, 1);\n        },\n        uninstall: function (type) {\n          this.getView()._countItemEvent(type, -1);\n        }\n      };\n    }, {\n      _events: {\n        onFrame: {\n          install: function () {\n            this.getView()._animateItem(this, true);\n          },\n          uninstall: function () {\n            this.getView()._animateItem(this, false);\n          }\n        },\n        onLoad: {},\n        onError: {}\n      },\n      statics: {\n        _itemHandlers: handlers\n      }\n    });\n  }(), {\n    initialize: function Item() {},\n    _initialize: function (props, point) {\n      var hasProps = props && Base.isPlainObject(props),\n        internal = hasProps && props.internal === true,\n        matrix = this._matrix = new Matrix(),\n        project = hasProps && props.project || paper.project,\n        settings = paper.settings;\n      this._id = internal ? null : UID.get();\n      this._parent = this._index = null;\n      this._applyMatrix = this._canApplyMatrix && settings.applyMatrix;\n      if (point) matrix.translate(point);\n      matrix._owner = this;\n      this._style = new Style(project._currentStyle, this, project);\n      if (internal || hasProps && props.insert == false || !settings.insertItems && !(hasProps && props.insert == true)) {\n        this._setProject(project);\n      } else {\n        (hasProps && props.parent || project)._insertItem(undefined, this, true);\n      }\n      if (hasProps && props !== Item.NO_INSERT && props !== Item.INSERT) {\n        this.set(props, {\n          internal: true,\n          insert: true,\n          project: true,\n          parent: true\n        });\n      }\n      return hasProps;\n    },\n    _serialize: function (options, dictionary) {\n      var props = {},\n        that = this;\n      function serialize(fields) {\n        for (var key in fields) {\n          var value = that[key];\n          if (!Base.equals(value, key === 'leading' ? fields.fontSize * 1.2 : fields[key])) {\n            props[key] = Base.serialize(value, options, key !== 'data', dictionary);\n          }\n        }\n      }\n      serialize(this._serializeFields);\n      if (!(this instanceof Group)) serialize(this._style._defaults);\n      return [this._class, props];\n    },\n    _changed: function (flags) {\n      var symbol = this._symbol,\n        cacheParent = this._parent || symbol,\n        project = this._project;\n      if (flags & 8) {\n        this._bounds = this._position = this._decomposed = undefined;\n      }\n      if (flags & 16) {\n        this._globalMatrix = undefined;\n      }\n      if (cacheParent && flags & 72) {\n        Item._clearBoundsCache(cacheParent);\n      }\n      if (flags & 2) {\n        Item._clearBoundsCache(this);\n      }\n      if (project) project._changed(flags, this);\n      if (symbol) symbol._changed(flags);\n    },\n    getId: function () {\n      return this._id;\n    },\n    getName: function () {\n      return this._name;\n    },\n    setName: function (name) {\n      if (this._name) this._removeNamed();\n      if (name === +name + '') throw new Error('Names consisting only of numbers are not supported.');\n      var owner = this._getOwner();\n      if (name && owner) {\n        var children = owner._children,\n          namedChildren = owner._namedChildren;\n        (namedChildren[name] = namedChildren[name] || []).push(this);\n        if (!(name in children)) children[name] = this;\n      }\n      this._name = name || undefined;\n      this._changed(256);\n    },\n    getStyle: function () {\n      return this._style;\n    },\n    setStyle: function (style) {\n      this.getStyle().set(style);\n    }\n  }, Base.each(['locked', 'visible', 'blendMode', 'opacity', 'guide'], function (name) {\n    var part = Base.capitalize(name),\n      key = '_' + name,\n      flags = {\n        locked: 256,\n        visible: 265\n      };\n    this['get' + part] = function () {\n      return this[key];\n    };\n    this['set' + part] = function (value) {\n      if (value != this[key]) {\n        this[key] = value;\n        this._changed(flags[name] || 257);\n      }\n    };\n  }, {}), {\n    beans: true,\n    getSelection: function () {\n      return this._selection;\n    },\n    setSelection: function (selection) {\n      if (selection !== this._selection) {\n        this._selection = selection;\n        var project = this._project;\n        if (project) {\n          project._updateSelection(this);\n          this._changed(257);\n        }\n      }\n    },\n    _changeSelection: function (flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function () {\n      if (this._selectChildren) {\n        var children = this._children;\n        for (var i = 0, l = children.length; i < l; i++) if (children[i].isSelected()) return true;\n      }\n      return !!(this._selection & 1);\n    },\n    setSelected: function (selected) {\n      if (this._selectChildren) {\n        var children = this._children;\n        for (var i = 0, l = children.length; i < l; i++) children[i].setSelected(selected);\n      }\n      this._changeSelection(1, selected);\n    },\n    isFullySelected: function () {\n      var children = this._children,\n        selected = !!(this._selection & 1);\n      if (children && selected) {\n        for (var i = 0, l = children.length; i < l; i++) if (!children[i].isFullySelected()) return false;\n        return true;\n      }\n      return selected;\n    },\n    setFullySelected: function (selected) {\n      var children = this._children;\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) children[i].setFullySelected(selected);\n      }\n      this._changeSelection(1, selected);\n    },\n    isClipMask: function () {\n      return this._clipMask;\n    },\n    setClipMask: function (clipMask) {\n      if (this._clipMask != (clipMask = !!clipMask)) {\n        this._clipMask = clipMask;\n        if (clipMask) {\n          this.setFillColor(null);\n          this.setStrokeColor(null);\n        }\n        this._changed(257);\n        if (this._parent) this._parent._changed(2048);\n      }\n    },\n    getData: function () {\n      if (!this._data) this._data = {};\n      return this._data;\n    },\n    setData: function (data) {\n      this._data = data;\n    },\n    getPosition: function (_dontLink) {\n      var ctor = _dontLink ? Point : LinkedPoint;\n      var position = this._position || (this._position = this._getPositionFromBounds());\n      return new ctor(position.x, position.y, this, 'setPosition');\n    },\n    setPosition: function () {\n      this.translate(Point.read(arguments).subtract(this.getPosition(true)));\n    },\n    _getPositionFromBounds: function (bounds) {\n      return this._pivot ? this._matrix._transformPoint(this._pivot) : (bounds || this.getBounds()).getCenter(true);\n    },\n    getPivot: function () {\n      var pivot = this._pivot;\n      return pivot ? new LinkedPoint(pivot.x, pivot.y, this, 'setPivot') : null;\n    },\n    setPivot: function () {\n      this._pivot = Point.read(arguments, 0, {\n        clone: true,\n        readNull: true\n      });\n      this._position = undefined;\n    }\n  }, Base.each({\n    getStrokeBounds: {\n      stroke: true\n    },\n    getHandleBounds: {\n      handle: true\n    },\n    getInternalBounds: {\n      internal: true\n    }\n  }, function (options, key) {\n    this[key] = function (matrix) {\n      return this.getBounds(matrix, options);\n    };\n  }, {\n    beans: true,\n    getBounds: function (matrix, options) {\n      var hasMatrix = options || matrix instanceof Matrix,\n        opts = Base.set({}, hasMatrix ? options : matrix, this._boundsOptions);\n      if (!opts.stroke || this.getStrokeScaling()) opts.cacheItem = this;\n      var rect = this._getCachedBounds(hasMatrix && matrix, opts).rect;\n      return !arguments.length ? new LinkedRectangle(rect.x, rect.y, rect.width, rect.height, this, 'setBounds') : rect;\n    },\n    setBounds: function () {\n      var rect = Rectangle.read(arguments),\n        bounds = this.getBounds(),\n        _matrix = this._matrix,\n        matrix = new Matrix(),\n        center = rect.getCenter();\n      matrix.translate(center);\n      if (rect.width != bounds.width || rect.height != bounds.height) {\n        if (!_matrix.isInvertible()) {\n          _matrix.set(_matrix._backup || new Matrix().translate(_matrix.getTranslation()));\n          bounds = this.getBounds();\n        }\n        matrix.scale(bounds.width !== 0 ? rect.width / bounds.width : 0, bounds.height !== 0 ? rect.height / bounds.height : 0);\n      }\n      center = bounds.getCenter();\n      matrix.translate(-center.x, -center.y);\n      this.transform(matrix);\n    },\n    _getBounds: function (matrix, options) {\n      var children = this._children;\n      if (!children || !children.length) return new Rectangle();\n      Item._updateBoundsCache(this, options.cacheItem);\n      return Item._getBounds(children, matrix, options);\n    },\n    _getBoundsCacheKey: function (options, internal) {\n      return [options.stroke ? 1 : 0, options.handle ? 1 : 0, internal ? 1 : 0].join('');\n    },\n    _getCachedBounds: function (matrix, options, noInternal) {\n      matrix = matrix && matrix._orNullIfIdentity();\n      var internal = options.internal && !noInternal,\n        cacheItem = options.cacheItem,\n        _matrix = internal ? null : this._matrix._orNullIfIdentity(),\n        cacheKey = cacheItem && (!matrix || matrix.equals(_matrix)) && this._getBoundsCacheKey(options, internal),\n        bounds = this._bounds;\n      Item._updateBoundsCache(this._parent || this._symbol, cacheItem);\n      if (cacheKey && bounds && cacheKey in bounds) {\n        var cached = bounds[cacheKey];\n        return {\n          rect: cached.rect.clone(),\n          nonscaling: cached.nonscaling\n        };\n      }\n      var res = this._getBounds(matrix || _matrix, options),\n        rect = res.rect || res,\n        style = this._style,\n        nonscaling = res.nonscaling || style.hasStroke() && !style.getStrokeScaling();\n      if (cacheKey) {\n        if (!bounds) {\n          this._bounds = bounds = {};\n        }\n        var cached = bounds[cacheKey] = {\n          rect: rect.clone(),\n          nonscaling: nonscaling,\n          internal: internal\n        };\n      }\n      return {\n        rect: rect,\n        nonscaling: nonscaling\n      };\n    },\n    _getStrokeMatrix: function (matrix, options) {\n      var parent = this.getStrokeScaling() ? null : options && options.internal ? this : this._parent || this._symbol && this._symbol._item,\n        mx = parent ? parent.getViewMatrix().invert() : matrix;\n      return mx && mx._shiftless();\n    },\n    statics: {\n      _updateBoundsCache: function (parent, item) {\n        if (parent && item) {\n          var id = item._id,\n            ref = parent._boundsCache = parent._boundsCache || {\n              ids: {},\n              list: []\n            };\n          if (!ref.ids[id]) {\n            ref.list.push(item);\n            ref.ids[id] = item;\n          }\n        }\n      },\n      _clearBoundsCache: function (item) {\n        var cache = item._boundsCache;\n        if (cache) {\n          item._bounds = item._position = item._boundsCache = undefined;\n          for (var i = 0, list = cache.list, l = list.length; i < l; i++) {\n            var other = list[i];\n            if (other !== item) {\n              other._bounds = other._position = undefined;\n              if (other._boundsCache) Item._clearBoundsCache(other);\n            }\n          }\n        }\n      },\n      _getBounds: function (items, matrix, options) {\n        var x1 = Infinity,\n          x2 = -x1,\n          y1 = x1,\n          y2 = x2,\n          nonscaling = false;\n        options = options || {};\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i];\n          if (item._visible && !item.isEmpty(true)) {\n            var bounds = item._getCachedBounds(matrix && matrix.appended(item._matrix), options, true),\n              rect = bounds.rect;\n            x1 = Math.min(rect.x, x1);\n            y1 = Math.min(rect.y, y1);\n            x2 = Math.max(rect.x + rect.width, x2);\n            y2 = Math.max(rect.y + rect.height, y2);\n            if (bounds.nonscaling) nonscaling = true;\n          }\n        }\n        return {\n          rect: isFinite(x1) ? new Rectangle(x1, y1, x2 - x1, y2 - y1) : new Rectangle(),\n          nonscaling: nonscaling\n        };\n      }\n    }\n  }), {\n    beans: true,\n    _decompose: function () {\n      return this._applyMatrix ? null : this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    getRotation: function () {\n      var decomposed = this._decompose();\n      return decomposed ? decomposed.rotation : 0;\n    },\n    setRotation: function (rotation) {\n      var current = this.getRotation();\n      if (current != null && rotation != null) {\n        var decomposed = this._decomposed;\n        this.rotate(rotation - current);\n        if (decomposed) {\n          decomposed.rotation = rotation;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getScaling: function () {\n      var decomposed = this._decompose(),\n        s = decomposed && decomposed.scaling;\n      return new LinkedPoint(s ? s.x : 1, s ? s.y : 1, this, 'setScaling');\n    },\n    setScaling: function () {\n      var current = this.getScaling(),\n        scaling = Point.read(arguments, 0, {\n          clone: true,\n          readNull: true\n        });\n      if (current && scaling && !current.equals(scaling)) {\n        var rotation = this.getRotation(),\n          decomposed = this._decomposed,\n          matrix = new Matrix(),\n          isZero = Numerical.isZero;\n        if (isZero(current.x) || isZero(current.y)) {\n          matrix.translate(decomposed.translation);\n          if (rotation) {\n            matrix.rotate(rotation);\n          }\n          matrix.scale(scaling.x, scaling.y);\n          this._matrix.set(matrix);\n        } else {\n          var center = this.getPosition(true);\n          matrix.translate(center);\n          if (rotation) matrix.rotate(rotation);\n          matrix.scale(scaling.x / current.x, scaling.y / current.y);\n          if (rotation) matrix.rotate(-rotation);\n          matrix.translate(center.negate());\n          this.transform(matrix);\n        }\n        if (decomposed) {\n          decomposed.scaling = scaling;\n          this._decomposed = decomposed;\n        }\n      }\n    },\n    getMatrix: function () {\n      return this._matrix;\n    },\n    setMatrix: function () {\n      var matrix = this._matrix;\n      matrix.set.apply(matrix, arguments);\n    },\n    getGlobalMatrix: function (_dontClone) {\n      var matrix = this._globalMatrix;\n      if (matrix) {\n        var parent = this._parent;\n        var parents = [];\n        while (parent) {\n          if (!parent._globalMatrix) {\n            matrix = null;\n            for (var i = 0, l = parents.length; i < l; i++) {\n              parents[i]._globalMatrix = null;\n            }\n            break;\n          }\n          parents.push(parent);\n          parent = parent._parent;\n        }\n      }\n      if (!matrix) {\n        matrix = this._globalMatrix = this._matrix.clone();\n        var parent = this._parent;\n        if (parent) matrix.prepend(parent.getGlobalMatrix(true));\n      }\n      return _dontClone ? matrix : matrix.clone();\n    },\n    getViewMatrix: function () {\n      return this.getGlobalMatrix().prepend(this.getView()._matrix);\n    },\n    getApplyMatrix: function () {\n      return this._applyMatrix;\n    },\n    setApplyMatrix: function (apply) {\n      if (this._applyMatrix = this._canApplyMatrix && !!apply) this.transform(null, true);\n    },\n    getTransformContent: '#getApplyMatrix',\n    setTransformContent: '#setApplyMatrix'\n  }, {\n    getProject: function () {\n      return this._project;\n    },\n    _setProject: function (project, installEvents) {\n      if (this._project !== project) {\n        if (this._project) this._installEvents(false);\n        this._project = project;\n        var children = this._children;\n        for (var i = 0, l = children && children.length; i < l; i++) children[i]._setProject(project);\n        installEvents = true;\n      }\n      if (installEvents) this._installEvents(true);\n    },\n    getView: function () {\n      return this._project._view;\n    },\n    _installEvents: function _installEvents(install) {\n      _installEvents.base.call(this, install);\n      var children = this._children;\n      for (var i = 0, l = children && children.length; i < l; i++) children[i]._installEvents(install);\n    },\n    getLayer: function () {\n      var parent = this;\n      while (parent = parent._parent) {\n        if (parent instanceof Layer) return parent;\n      }\n      return null;\n    },\n    getParent: function () {\n      return this._parent;\n    },\n    setParent: function (item) {\n      return item.addChild(this);\n    },\n    _getOwner: '#getParent',\n    getChildren: function () {\n      return this._children;\n    },\n    setChildren: function (items) {\n      this.removeChildren();\n      this.addChildren(items);\n    },\n    getFirstChild: function () {\n      return this._children && this._children[0] || null;\n    },\n    getLastChild: function () {\n      return this._children && this._children[this._children.length - 1] || null;\n    },\n    getNextSibling: function () {\n      var owner = this._getOwner();\n      return owner && owner._children[this._index + 1] || null;\n    },\n    getPreviousSibling: function () {\n      var owner = this._getOwner();\n      return owner && owner._children[this._index - 1] || null;\n    },\n    getIndex: function () {\n      return this._index;\n    },\n    equals: function (item) {\n      return item === this || item && this._class === item._class && this._style.equals(item._style) && this._matrix.equals(item._matrix) && this._locked === item._locked && this._visible === item._visible && this._blendMode === item._blendMode && this._opacity === item._opacity && this._clipMask === item._clipMask && this._guide === item._guide && this._equals(item) || false;\n    },\n    _equals: function (item) {\n      return Base.equals(this._children, item._children);\n    },\n    clone: function (options) {\n      var copy = new this.constructor(Item.NO_INSERT),\n        children = this._children,\n        insert = Base.pick(options ? options.insert : undefined, options === undefined || options === true),\n        deep = Base.pick(options ? options.deep : undefined, true);\n      if (children) copy.copyAttributes(this);\n      if (!children || deep) copy.copyContent(this);\n      if (!children) copy.copyAttributes(this);\n      if (insert) copy.insertAbove(this);\n      var name = this._name,\n        parent = this._parent;\n      if (name && parent) {\n        var children = parent._children,\n          orig = name,\n          i = 1;\n        while (children[name]) name = orig + ' ' + i++;\n        if (name !== orig) copy.setName(name);\n      }\n      return copy;\n    },\n    copyContent: function (source) {\n      var children = source._children;\n      for (var i = 0, l = children && children.length; i < l; i++) {\n        this.addChild(children[i].clone(false), true);\n      }\n    },\n    copyAttributes: function (source, excludeMatrix) {\n      this.setStyle(source._style);\n      var keys = ['_locked', '_visible', '_blendMode', '_opacity', '_clipMask', '_guide'];\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i];\n        if (source.hasOwnProperty(key)) this[key] = source[key];\n      }\n      if (!excludeMatrix) this._matrix.set(source._matrix, true);\n      this.setApplyMatrix(source._applyMatrix);\n      this.setPivot(source._pivot);\n      this.setSelection(source._selection);\n      var data = source._data,\n        name = source._name;\n      this._data = data ? Base.clone(data) : null;\n      if (name) this.setName(name);\n    },\n    rasterize: function (arg0, arg1) {\n      var resolution, insert, raster;\n      if (Base.isPlainObject(arg0)) {\n        resolution = arg0.resolution;\n        insert = arg0.insert;\n        raster = arg0.raster;\n      } else {\n        resolution = arg0;\n        insert = arg1;\n      }\n      if (!raster) {\n        raster = new Raster(Item.NO_INSERT);\n      }\n      var bounds = this.getStrokeBounds(),\n        scale = (resolution || this.getView().getResolution()) / 72,\n        topLeft = bounds.getTopLeft().floor(),\n        bottomRight = bounds.getBottomRight().ceil(),\n        boundsSize = new Size(bottomRight.subtract(topLeft)),\n        rasterSize = boundsSize.multiply(scale);\n      raster.setSize(rasterSize, true);\n      if (!rasterSize.isZero()) {\n        var ctx = raster.getContext(true),\n          matrix = new Matrix().scale(scale).translate(topLeft.negate());\n        ctx.save();\n        matrix.applyToContext(ctx);\n        this.draw(ctx, new Base({\n          matrices: [matrix]\n        }));\n        ctx.restore();\n      }\n      raster._matrix.set(new Matrix().translate(topLeft.add(boundsSize.divide(2))).scale(1 / scale));\n      if (insert === undefined || insert) {\n        raster.insertAbove(this);\n      }\n      return raster;\n    },\n    contains: function () {\n      var matrix = this._matrix;\n      return matrix.isInvertible() && !!this._contains(matrix._inverseTransform(Point.read(arguments)));\n    },\n    _contains: function (point) {\n      var children = this._children;\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          if (children[i].contains(point)) return true;\n        }\n        return false;\n      }\n      return point.isInside(this.getInternalBounds());\n    },\n    isInside: function () {\n      return Rectangle.read(arguments).contains(this.getBounds());\n    },\n    _asPathItem: function () {\n      return new Path.Rectangle({\n        rectangle: this.getInternalBounds(),\n        matrix: this._matrix,\n        insert: false\n      });\n    },\n    intersects: function (item, _matrix) {\n      if (!(item instanceof Item)) return false;\n      return this._asPathItem().getIntersections(item._asPathItem(), null, _matrix, true).length > 0;\n    }\n  }, new function () {\n    function hitTest() {\n      var args = arguments;\n      return this._hitTest(Point.read(args), HitResult.getOptions(args));\n    }\n    function hitTestAll() {\n      var args = arguments,\n        point = Point.read(args),\n        options = HitResult.getOptions(args),\n        all = [];\n      this._hitTest(point, new Base({\n        all: all\n      }, options));\n      return all;\n    }\n    function hitTestChildren(point, options, viewMatrix, _exclude) {\n      var children = this._children;\n      if (children) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          var child = children[i];\n          var res = child !== _exclude && child._hitTest(point, options, viewMatrix);\n          if (res && !options.all) return res;\n        }\n      }\n      return null;\n    }\n    Project.inject({\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTest: hitTestChildren\n    });\n    return {\n      hitTest: hitTest,\n      hitTestAll: hitTestAll,\n      _hitTestChildren: hitTestChildren\n    };\n  }(), {\n    _hitTest: function (point, options, parentViewMatrix) {\n      if (this._locked || !this._visible || this._guide && !options.guides || this.isEmpty()) {\n        return null;\n      }\n      var matrix = this._matrix,\n        viewMatrix = parentViewMatrix ? parentViewMatrix.appended(matrix) : this.getGlobalMatrix().prepend(this.getView()._matrix),\n        tolerance = Math.max(options.tolerance, 1e-12),\n        tolerancePadding = options._tolerancePadding = new Size(Path._getStrokePadding(tolerance, matrix._shiftless().invert()));\n      point = matrix._inverseTransform(point);\n      if (!point || !this._children && !this.getBounds({\n        internal: true,\n        stroke: true,\n        handle: true\n      }).expand(tolerancePadding.multiply(2))._containsPoint(point)) {\n        return null;\n      }\n      var checkSelf = !(options.guides && !this._guide || options.selected && !this.isSelected() || options.type && options.type !== Base.hyphenate(this._class) || options.class && !(this instanceof options.class)),\n        match = options.match,\n        that = this,\n        bounds,\n        res;\n      function filter(hit) {\n        if (hit && match && !match(hit)) hit = null;\n        if (hit && options.all) options.all.push(hit);\n        return hit;\n      }\n      function checkPoint(type, part) {\n        var pt = part ? bounds['get' + part]() : that.getPosition();\n        if (point.subtract(pt).divide(tolerancePadding).length <= 1) {\n          return new HitResult(type, that, {\n            name: part ? Base.hyphenate(part) : type,\n            point: pt\n          });\n        }\n      }\n      var checkPosition = options.position,\n        checkCenter = options.center,\n        checkBounds = options.bounds;\n      if (checkSelf && this._parent && (checkPosition || checkCenter || checkBounds)) {\n        if (checkCenter || checkBounds) {\n          bounds = this.getInternalBounds();\n        }\n        res = checkPosition && checkPoint('position') || checkCenter && checkPoint('center', 'Center');\n        if (!res && checkBounds) {\n          var points = ['TopLeft', 'TopRight', 'BottomLeft', 'BottomRight', 'LeftCenter', 'TopCenter', 'RightCenter', 'BottomCenter'];\n          for (var i = 0; i < 8 && !res; i++) {\n            res = checkPoint('bounds', points[i]);\n          }\n        }\n        res = filter(res);\n      }\n      if (!res) {\n        res = this._hitTestChildren(point, options, viewMatrix) || checkSelf && filter(this._hitTestSelf(point, options, viewMatrix, this.getStrokeScaling() ? null : viewMatrix._shiftless().invert())) || null;\n      }\n      if (res && res.point) {\n        res.point = matrix.transform(res.point);\n      }\n      return res;\n    },\n    _hitTestSelf: function (point, options) {\n      if (options.fill && this.hasFill() && this._contains(point)) return new HitResult('fill', this);\n    },\n    matches: function (name, compare) {\n      function matchObject(obj1, obj2) {\n        for (var i in obj1) {\n          if (obj1.hasOwnProperty(i)) {\n            var val1 = obj1[i],\n              val2 = obj2[i];\n            if (Base.isPlainObject(val1) && Base.isPlainObject(val2)) {\n              if (!matchObject(val1, val2)) return false;\n            } else if (!Base.equals(val1, val2)) {\n              return false;\n            }\n          }\n        }\n        return true;\n      }\n      var type = typeof name;\n      if (type === 'object') {\n        for (var key in name) {\n          if (name.hasOwnProperty(key) && !this.matches(key, name[key])) return false;\n        }\n        return true;\n      } else if (type === 'function') {\n        return name(this);\n      } else if (name === 'match') {\n        return compare(this);\n      } else {\n        var value = /^(empty|editable)$/.test(name) ? this['is' + Base.capitalize(name)]() : name === 'type' ? Base.hyphenate(this._class) : this[name];\n        if (name === 'class') {\n          if (typeof compare === 'function') return this instanceof compare;\n          value = this._class;\n        }\n        if (typeof compare === 'function') {\n          return !!compare(value);\n        } else if (compare) {\n          if (compare.test) {\n            return compare.test(value);\n          } else if (Base.isPlainObject(compare)) {\n            return matchObject(compare, value);\n          }\n        }\n        return Base.equals(value, compare);\n      }\n    },\n    getItems: function (options) {\n      return Item._getItems(this, options, this._matrix);\n    },\n    getItem: function (options) {\n      return Item._getItems(this, options, this._matrix, null, true)[0] || null;\n    },\n    statics: {\n      _getItems: function _getItems(item, options, matrix, param, firstOnly) {\n        if (!param) {\n          var obj = typeof options === 'object' && options,\n            overlapping = obj && obj.overlapping,\n            inside = obj && obj.inside,\n            bounds = overlapping || inside,\n            rect = bounds && Rectangle.read([bounds]);\n          param = {\n            items: [],\n            recursive: obj && obj.recursive !== false,\n            inside: !!inside,\n            overlapping: !!overlapping,\n            rect: rect,\n            path: overlapping && new Path.Rectangle({\n              rectangle: rect,\n              insert: false\n            })\n          };\n          if (obj) {\n            options = Base.filter({}, options, {\n              recursive: true,\n              inside: true,\n              overlapping: true\n            });\n          }\n        }\n        var children = item._children,\n          items = param.items,\n          rect = param.rect;\n        matrix = rect && (matrix || new Matrix());\n        for (var i = 0, l = children && children.length; i < l; i++) {\n          var child = children[i],\n            childMatrix = matrix && matrix.appended(child._matrix),\n            add = true;\n          if (rect) {\n            var bounds = child.getBounds(childMatrix);\n            if (!rect.intersects(bounds)) continue;\n            if (!(rect.contains(bounds) || param.overlapping && (bounds.contains(rect) || param.path.intersects(child, childMatrix)))) add = false;\n          }\n          if (add && child.matches(options)) {\n            items.push(child);\n            if (firstOnly) break;\n          }\n          if (param.recursive !== false) {\n            _getItems(child, options, childMatrix, param, firstOnly);\n          }\n          if (firstOnly && items.length > 0) break;\n        }\n        return items;\n      }\n    }\n  }, {\n    importJSON: function (json) {\n      var res = Base.importJSON(json, this);\n      return res !== this ? this.addChild(res) : res;\n    },\n    addChild: function (item) {\n      return this.insertChild(undefined, item);\n    },\n    insertChild: function (index, item) {\n      var res = item ? this.insertChildren(index, [item]) : null;\n      return res && res[0];\n    },\n    addChildren: function (items) {\n      return this.insertChildren(this._children.length, items);\n    },\n    insertChildren: function (index, items) {\n      var children = this._children;\n      if (children && items && items.length > 0) {\n        items = Base.slice(items);\n        var inserted = {};\n        for (var i = items.length - 1; i >= 0; i--) {\n          var item = items[i],\n            id = item && item._id;\n          if (!item || inserted[id]) {\n            items.splice(i, 1);\n          } else {\n            item._remove(false, true);\n            inserted[id] = true;\n          }\n        }\n        Base.splice(children, items, index, 0);\n        var project = this._project,\n          notifySelf = project._changes;\n        for (var i = 0, l = items.length; i < l; i++) {\n          var item = items[i],\n            name = item._name;\n          item._parent = this;\n          item._setProject(project, true);\n          if (name) item.setName(name);\n          if (notifySelf) item._changed(5);\n        }\n        this._changed(11);\n      } else {\n        items = null;\n      }\n      return items;\n    },\n    _insertItem: '#insertChild',\n    _insertAt: function (item, offset) {\n      var owner = item && item._getOwner(),\n        res = item !== this && owner ? this : null;\n      if (res) {\n        res._remove(false, true);\n        owner._insertItem(item._index + offset, res);\n      }\n      return res;\n    },\n    insertAbove: function (item) {\n      return this._insertAt(item, 1);\n    },\n    insertBelow: function (item) {\n      return this._insertAt(item, 0);\n    },\n    sendToBack: function () {\n      var owner = this._getOwner();\n      return owner ? owner._insertItem(0, this) : null;\n    },\n    bringToFront: function () {\n      var owner = this._getOwner();\n      return owner ? owner._insertItem(undefined, this) : null;\n    },\n    appendTop: '#addChild',\n    appendBottom: function (item) {\n      return this.insertChild(0, item);\n    },\n    moveAbove: '#insertAbove',\n    moveBelow: '#insertBelow',\n    addTo: function (owner) {\n      return owner._insertItem(undefined, this);\n    },\n    copyTo: function (owner) {\n      return this.clone(false).addTo(owner);\n    },\n    reduce: function (options) {\n      var children = this._children;\n      if (children && children.length === 1) {\n        var child = children[0].reduce(options);\n        if (this._parent) {\n          child.insertAbove(this);\n          this.remove();\n        } else {\n          child.remove();\n        }\n        return child;\n      }\n      return this;\n    },\n    _removeNamed: function () {\n      var owner = this._getOwner();\n      if (owner) {\n        var children = owner._children,\n          namedChildren = owner._namedChildren,\n          name = this._name,\n          namedArray = namedChildren[name],\n          index = namedArray ? namedArray.indexOf(this) : -1;\n        if (index !== -1) {\n          if (children[name] == this) delete children[name];\n          namedArray.splice(index, 1);\n          if (namedArray.length) {\n            children[name] = namedArray[0];\n          } else {\n            delete namedChildren[name];\n          }\n        }\n      }\n    },\n    _remove: function (notifySelf, notifyParent) {\n      var owner = this._getOwner(),\n        project = this._project,\n        index = this._index;\n      if (this._style) this._style._dispose();\n      if (owner) {\n        if (this._name) this._removeNamed();\n        if (index != null) {\n          if (project._activeLayer === this) project._activeLayer = this.getNextSibling() || this.getPreviousSibling();\n          Base.splice(owner._children, null, index, 1);\n        }\n        this._installEvents(false);\n        if (notifySelf && project._changes) this._changed(5);\n        if (notifyParent) owner._changed(11, this);\n        this._parent = null;\n        return true;\n      }\n      return false;\n    },\n    remove: function () {\n      return this._remove(true, true);\n    },\n    replaceWith: function (item) {\n      var ok = item && item.insertBelow(this);\n      if (ok) this.remove();\n      return ok;\n    },\n    removeChildren: function (start, end) {\n      if (!this._children) return null;\n      start = start || 0;\n      end = Base.pick(end, this._children.length);\n      var removed = Base.splice(this._children, null, start, end - start);\n      for (var i = removed.length - 1; i >= 0; i--) {\n        removed[i]._remove(true, false);\n      }\n      if (removed.length > 0) this._changed(11);\n      return removed;\n    },\n    clear: '#removeChildren',\n    reverseChildren: function () {\n      if (this._children) {\n        this._children.reverse();\n        for (var i = 0, l = this._children.length; i < l; i++) this._children[i]._index = i;\n        this._changed(11);\n      }\n    },\n    isEmpty: function (recursively) {\n      var children = this._children;\n      var numChildren = children ? children.length : 0;\n      if (recursively) {\n        for (var i = 0; i < numChildren; i++) {\n          if (!children[i].isEmpty(recursively)) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return !numChildren;\n    },\n    isEditable: function () {\n      var item = this;\n      while (item) {\n        if (!item._visible || item._locked) return false;\n        item = item._parent;\n      }\n      return true;\n    },\n    hasFill: function () {\n      return this.getStyle().hasFill();\n    },\n    hasStroke: function () {\n      return this.getStyle().hasStroke();\n    },\n    hasShadow: function () {\n      return this.getStyle().hasShadow();\n    },\n    _getOrder: function (item) {\n      function getList(item) {\n        var list = [];\n        do {\n          list.unshift(item);\n        } while (item = item._parent);\n        return list;\n      }\n      var list1 = getList(this),\n        list2 = getList(item);\n      for (var i = 0, l = Math.min(list1.length, list2.length); i < l; i++) {\n        if (list1[i] != list2[i]) {\n          return list1[i]._index < list2[i]._index ? 1 : -1;\n        }\n      }\n      return 0;\n    },\n    hasChildren: function () {\n      return this._children && this._children.length > 0;\n    },\n    isInserted: function () {\n      return this._parent ? this._parent.isInserted() : false;\n    },\n    isAbove: function (item) {\n      return this._getOrder(item) === -1;\n    },\n    isBelow: function (item) {\n      return this._getOrder(item) === 1;\n    },\n    isParent: function (item) {\n      return this._parent === item;\n    },\n    isChild: function (item) {\n      return item && item._parent === this;\n    },\n    isDescendant: function (item) {\n      var parent = this;\n      while (parent = parent._parent) {\n        if (parent === item) return true;\n      }\n      return false;\n    },\n    isAncestor: function (item) {\n      return item ? item.isDescendant(this) : false;\n    },\n    isSibling: function (item) {\n      return this._parent === item._parent;\n    },\n    isGroupedWith: function (item) {\n      var parent = this._parent;\n      while (parent) {\n        if (parent._parent && /^(Group|Layer|CompoundPath)$/.test(parent._class) && item.isDescendant(parent)) return true;\n        parent = parent._parent;\n      }\n      return false;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n    this[key] = function () {\n      var args = arguments,\n        value = (rotate ? Base : Point).read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      return this.transform(new Matrix()[key](value, center || this.getPosition(true)));\n    };\n  }, {\n    translate: function () {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    transform: function (matrix, _applyRecursively, _setApplyMatrix) {\n      var _matrix = this._matrix,\n        transformMatrix = matrix && !matrix.isIdentity(),\n        applyMatrix = _setApplyMatrix && this._canApplyMatrix || this._applyMatrix && (transformMatrix || !_matrix.isIdentity() || _applyRecursively && this._children);\n      if (!transformMatrix && !applyMatrix) return this;\n      if (transformMatrix) {\n        if (!matrix.isInvertible() && _matrix.isInvertible()) _matrix._backup = _matrix.getValues();\n        _matrix.prepend(matrix, true);\n        var style = this._style,\n          fillColor = style.getFillColor(true),\n          strokeColor = style.getStrokeColor(true);\n        if (fillColor) fillColor.transform(matrix);\n        if (strokeColor) strokeColor.transform(matrix);\n      }\n      if (applyMatrix && (applyMatrix = this._transformContent(_matrix, _applyRecursively, _setApplyMatrix))) {\n        var pivot = this._pivot;\n        if (pivot) _matrix._transformPoint(pivot, pivot, true);\n        _matrix.reset(true);\n        if (_setApplyMatrix && this._canApplyMatrix) this._applyMatrix = true;\n      }\n      var bounds = this._bounds,\n        position = this._position;\n      if (transformMatrix || applyMatrix) {\n        this._changed(25);\n      }\n      var decomp = transformMatrix && bounds && matrix.decompose();\n      if (decomp && decomp.skewing.isZero() && decomp.rotation % 90 === 0) {\n        for (var key in bounds) {\n          var cache = bounds[key];\n          if (cache.nonscaling) {\n            delete bounds[key];\n          } else if (applyMatrix || !cache.internal) {\n            var rect = cache.rect;\n            matrix._transformBounds(rect, rect);\n          }\n        }\n        this._bounds = bounds;\n        var cached = bounds[this._getBoundsCacheKey(this._boundsOptions || {})];\n        if (cached) {\n          this._position = this._getPositionFromBounds(cached.rect);\n        }\n      } else if (transformMatrix && position && this._pivot) {\n        this._position = matrix._transformPoint(position, position);\n      }\n      return this;\n    },\n    _transformContent: function (matrix, applyRecursively, setApplyMatrix) {\n      var children = this._children;\n      if (children) {\n        for (var i = 0, l = children.length; i < l; i++) {\n          children[i].transform(matrix, applyRecursively, setApplyMatrix);\n        }\n        return true;\n      }\n    },\n    globalToLocal: function () {\n      return this.getGlobalMatrix(true)._inverseTransform(Point.read(arguments));\n    },\n    localToGlobal: function () {\n      return this.getGlobalMatrix(true)._transformPoint(Point.read(arguments));\n    },\n    parentToLocal: function () {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    localToParent: function () {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    fitBounds: function (rectangle, fill) {\n      rectangle = Rectangle.read(arguments);\n      var bounds = this.getBounds(),\n        itemRatio = bounds.height / bounds.width,\n        rectRatio = rectangle.height / rectangle.width,\n        scale = (fill ? itemRatio > rectRatio : itemRatio < rectRatio) ? rectangle.width / bounds.width : rectangle.height / bounds.height,\n        newBounds = new Rectangle(new Point(), new Size(bounds.width * scale, bounds.height * scale));\n      newBounds.setCenter(rectangle.getCenter());\n      this.setBounds(newBounds);\n    }\n  }), {\n    _setStyles: function (ctx, param, viewMatrix) {\n      var style = this._style,\n        matrix = this._matrix;\n      if (style.hasFill()) {\n        ctx.fillStyle = style.getFillColor().toCanvasStyle(ctx, matrix);\n      }\n      if (style.hasStroke()) {\n        ctx.strokeStyle = style.getStrokeColor().toCanvasStyle(ctx, matrix);\n        ctx.lineWidth = style.getStrokeWidth();\n        var strokeJoin = style.getStrokeJoin(),\n          strokeCap = style.getStrokeCap(),\n          miterLimit = style.getMiterLimit();\n        if (strokeJoin) ctx.lineJoin = strokeJoin;\n        if (strokeCap) ctx.lineCap = strokeCap;\n        if (miterLimit) ctx.miterLimit = miterLimit;\n        if (paper.support.nativeDash) {\n          var dashArray = style.getDashArray(),\n            dashOffset = style.getDashOffset();\n          if (dashArray && dashArray.length) {\n            if ('setLineDash' in ctx) {\n              ctx.setLineDash(dashArray);\n              ctx.lineDashOffset = dashOffset;\n            } else {\n              ctx.mozDash = dashArray;\n              ctx.mozDashOffset = dashOffset;\n            }\n          }\n        }\n      }\n      if (style.hasShadow()) {\n        var pixelRatio = param.pixelRatio || 1,\n          mx = viewMatrix._shiftless().prepend(new Matrix().scale(pixelRatio, pixelRatio)),\n          blur = mx.transform(new Point(style.getShadowBlur(), 0)),\n          offset = mx.transform(this.getShadowOffset());\n        ctx.shadowColor = style.getShadowColor().toCanvasStyle(ctx);\n        ctx.shadowBlur = blur.getLength();\n        ctx.shadowOffsetX = offset.x;\n        ctx.shadowOffsetY = offset.y;\n      }\n    },\n    draw: function (ctx, param, parentStrokeMatrix) {\n      var updateVersion = this._updateVersion = this._project._updateVersion;\n      if (!this._visible || this._opacity === 0) return;\n      var matrices = param.matrices,\n        viewMatrix = param.viewMatrix,\n        matrix = this._matrix,\n        globalMatrix = matrices[matrices.length - 1].appended(matrix);\n      if (!globalMatrix.isInvertible()) return;\n      viewMatrix = viewMatrix ? viewMatrix.appended(globalMatrix) : globalMatrix;\n      matrices.push(globalMatrix);\n      if (param.updateMatrix) {\n        this._globalMatrix = globalMatrix;\n      }\n      var blendMode = this._blendMode,\n        opacity = Numerical.clamp(this._opacity, 0, 1),\n        normalBlend = blendMode === 'normal',\n        nativeBlend = BlendMode.nativeModes[blendMode],\n        direct = normalBlend && opacity === 1 || param.dontStart || param.clip || (nativeBlend || normalBlend && opacity < 1) && this._canComposite(),\n        pixelRatio = param.pixelRatio || 1,\n        mainCtx,\n        itemOffset,\n        prevOffset;\n      if (!direct) {\n        var bounds = this.getStrokeBounds(viewMatrix);\n        if (!bounds.width || !bounds.height) {\n          matrices.pop();\n          return;\n        }\n        prevOffset = param.offset;\n        itemOffset = param.offset = bounds.getTopLeft().floor();\n        mainCtx = ctx;\n        ctx = CanvasProvider.getContext(bounds.getSize().ceil().add(1).multiply(pixelRatio));\n        if (pixelRatio !== 1) ctx.scale(pixelRatio, pixelRatio);\n      }\n      ctx.save();\n      var strokeMatrix = parentStrokeMatrix ? parentStrokeMatrix.appended(matrix) : this._canScaleStroke && !this.getStrokeScaling(true) && viewMatrix,\n        clip = !direct && param.clipItem,\n        transform = !strokeMatrix || clip;\n      if (direct) {\n        ctx.globalAlpha = opacity;\n        if (nativeBlend) ctx.globalCompositeOperation = blendMode;\n      } else if (transform) {\n        ctx.translate(-itemOffset.x, -itemOffset.y);\n      }\n      if (transform) {\n        (direct ? matrix : viewMatrix).applyToContext(ctx);\n      }\n      if (clip) {\n        param.clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n      if (strokeMatrix) {\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        var offset = param.offset;\n        if (offset) ctx.translate(-offset.x, -offset.y);\n      }\n      this._draw(ctx, param, viewMatrix, strokeMatrix);\n      ctx.restore();\n      matrices.pop();\n      if (param.clip && !param.dontFinish) {\n        ctx.clip(this.getFillRule());\n      }\n      if (!direct) {\n        BlendMode.process(blendMode, ctx, mainCtx, opacity, itemOffset.subtract(prevOffset).multiply(pixelRatio));\n        CanvasProvider.release(ctx);\n        param.offset = prevOffset;\n      }\n    },\n    _isUpdated: function (updateVersion) {\n      var parent = this._parent;\n      if (parent instanceof CompoundPath) return parent._isUpdated(updateVersion);\n      var updated = this._updateVersion === updateVersion;\n      if (!updated && parent && parent._visible && parent._isUpdated(updateVersion)) {\n        this._updateVersion = updateVersion;\n        updated = true;\n      }\n      return updated;\n    },\n    _drawSelection: function (ctx, matrix, size, selectionItems, updateVersion) {\n      var selection = this._selection,\n        itemSelected = selection & 1,\n        boundsSelected = selection & 2 || itemSelected && this._selectBounds,\n        positionSelected = selection & 4;\n      if (!this._drawSelected) itemSelected = false;\n      if ((itemSelected || boundsSelected || positionSelected) && this._isUpdated(updateVersion)) {\n        var layer,\n          color = this.getSelectedColor(true) || (layer = this.getLayer()) && layer.getSelectedColor(true),\n          mx = matrix.appended(this.getGlobalMatrix(true)),\n          half = size / 2;\n        ctx.strokeStyle = ctx.fillStyle = color ? color.toCanvasStyle(ctx) : '#009dec';\n        if (itemSelected) this._drawSelected(ctx, mx, selectionItems);\n        if (positionSelected) {\n          var pos = this.getPosition(true),\n            parent = this._parent,\n            point = parent ? parent.localToGlobal(pos) : pos,\n            x = point.x,\n            y = point.y;\n          ctx.beginPath();\n          ctx.arc(x, y, half, 0, Math.PI * 2, true);\n          ctx.stroke();\n          var deltas = [[0, -1], [1, 0], [0, 1], [-1, 0]],\n            start = half,\n            end = size + 1;\n          for (var i = 0; i < 4; i++) {\n            var delta = deltas[i],\n              dx = delta[0],\n              dy = delta[1];\n            ctx.moveTo(x + dx * start, y + dy * start);\n            ctx.lineTo(x + dx * end, y + dy * end);\n            ctx.stroke();\n          }\n        }\n        if (boundsSelected) {\n          var coords = mx._transformCorners(this.getInternalBounds());\n          ctx.beginPath();\n          for (var i = 0; i < 8; i++) {\n            ctx[!i ? 'moveTo' : 'lineTo'](coords[i], coords[++i]);\n          }\n          ctx.closePath();\n          ctx.stroke();\n          for (var i = 0; i < 8; i++) {\n            ctx.fillRect(coords[i] - half, coords[++i] - half, size, size);\n          }\n        }\n      }\n    },\n    _canComposite: function () {\n      return false;\n    }\n  }, Base.each(['down', 'drag', 'up', 'move'], function (key) {\n    this['removeOn' + Base.capitalize(key)] = function () {\n      var hash = {};\n      hash[key] = true;\n      return this.removeOn(hash);\n    };\n  }, {\n    removeOn: function (obj) {\n      for (var name in obj) {\n        if (obj[name]) {\n          var key = 'mouse' + name,\n            project = this._project,\n            sets = project._removeSets = project._removeSets || {};\n          sets[key] = sets[key] || {};\n          sets[key][this._id] = this;\n        }\n      }\n      return this;\n    }\n  }), {\n    tween: function (from, to, options) {\n      if (!options) {\n        options = to;\n        to = from;\n        from = null;\n        if (!options) {\n          options = to;\n          to = null;\n        }\n      }\n      var easing = options && options.easing,\n        start = options && options.start,\n        duration = options != null && (typeof options === 'number' ? options : options.duration),\n        tween = new Tween(this, from, to, duration, easing, start);\n      function onFrame(event) {\n        tween._handleFrame(event.time * 1000);\n        if (!tween.running) {\n          this.off('frame', onFrame);\n        }\n      }\n      if (duration) {\n        this.on('frame', onFrame);\n      }\n      return tween;\n    },\n    tweenTo: function (to, options) {\n      return this.tween(null, to, options);\n    },\n    tweenFrom: function (from, options) {\n      return this.tween(from, null, options);\n    }\n  });\n  var Group = Item.extend({\n    _class: 'Group',\n    _selectBounds: false,\n    _selectChildren: true,\n    _serializeFields: {\n      children: []\n    },\n    initialize: function Group(arg) {\n      this._children = [];\n      this._namedChildren = {};\n      if (!this._initialize(arg)) this.addChildren(Array.isArray(arg) ? arg : arguments);\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n      if (flags & 2050) {\n        this._clipItem = undefined;\n      }\n    },\n    _getClipItem: function () {\n      var clipItem = this._clipItem;\n      if (clipItem === undefined) {\n        clipItem = null;\n        var children = this._children;\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i]._clipMask) {\n            clipItem = children[i];\n            break;\n          }\n        }\n        this._clipItem = clipItem;\n      }\n      return clipItem;\n    },\n    isClipped: function () {\n      return !!this._getClipItem();\n    },\n    setClipped: function (clipped) {\n      var child = this.getFirstChild();\n      if (child) child.setClipMask(clipped);\n    },\n    _getBounds: function _getBounds(matrix, options) {\n      var clipItem = this._getClipItem();\n      return clipItem ? clipItem._getCachedBounds(clipItem._matrix.prepended(matrix), Base.set({}, options, {\n        stroke: false\n      })) : _getBounds.base.call(this, matrix, options);\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      var clipItem = this._getClipItem();\n      return (!clipItem || clipItem.contains(point)) && _hitTestChildren.base.call(this, point, options, viewMatrix, clipItem);\n    },\n    _draw: function (ctx, param) {\n      var clip = param.clip,\n        clipItem = !clip && this._getClipItem();\n      param = param.extend({\n        clipItem: clipItem,\n        clip: false\n      });\n      if (clip) {\n        ctx.beginPath();\n        param.dontStart = param.dontFinish = true;\n      } else if (clipItem) {\n        clipItem.draw(ctx, param.extend({\n          clip: true\n        }));\n      }\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        var item = children[i];\n        if (item !== clipItem) item.draw(ctx, param);\n      }\n    }\n  });\n  var Layer = Group.extend({\n    _class: 'Layer',\n    initialize: function Layer() {\n      Group.apply(this, arguments);\n    },\n    _getOwner: function () {\n      return this._parent || this._index != null && this._project;\n    },\n    isInserted: function isInserted() {\n      return this._parent ? isInserted.base.call(this) : this._index != null;\n    },\n    activate: function () {\n      this._project._activeLayer = this;\n    },\n    _hitTestSelf: function () {}\n  });\n  var Shape = Item.extend({\n    _class: 'Shape',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _canScaleStroke: true,\n    _serializeFields: {\n      type: null,\n      size: null,\n      radius: null\n    },\n    initialize: function Shape(props, point) {\n      this._initialize(props, point);\n    },\n    _equals: function (item) {\n      return this._type === item._type && this._size.equals(item._size) && Base.equals(this._radius, item._radius);\n    },\n    copyContent: function (source) {\n      this.setType(source._type);\n      this.setSize(source._size);\n      this.setRadius(source._radius);\n    },\n    getType: function () {\n      return this._type;\n    },\n    setType: function (type) {\n      this._type = type;\n    },\n    getShape: '#getType',\n    setShape: '#setType',\n    getSize: function () {\n      var size = this._size;\n      return new LinkedSize(size.width, size.height, this, 'setSize');\n    },\n    setSize: function () {\n      var size = Size.read(arguments);\n      if (!this._size) {\n        this._size = size.clone();\n      } else if (!this._size.equals(size)) {\n        var type = this._type,\n          width = size.width,\n          height = size.height;\n        if (type === 'rectangle') {\n          this._radius.set(Size.min(this._radius, size.divide(2).abs()));\n        } else if (type === 'circle') {\n          width = height = (width + height) / 2;\n          this._radius = width / 2;\n        } else if (type === 'ellipse') {\n          this._radius._set(width / 2, height / 2);\n        }\n        this._size._set(width, height);\n        this._changed(9);\n      }\n    },\n    getRadius: function () {\n      var rad = this._radius;\n      return this._type === 'circle' ? rad : new LinkedSize(rad.width, rad.height, this, 'setRadius');\n    },\n    setRadius: function (radius) {\n      var type = this._type;\n      if (type === 'circle') {\n        if (radius === this._radius) return;\n        var size = radius * 2;\n        this._radius = radius;\n        this._size._set(size, size);\n      } else {\n        radius = Size.read(arguments);\n        if (!this._radius) {\n          this._radius = radius.clone();\n        } else {\n          if (this._radius.equals(radius)) return;\n          this._radius.set(radius);\n          if (type === 'rectangle') {\n            var size = Size.max(this._size, radius.multiply(2));\n            this._size.set(size);\n          } else if (type === 'ellipse') {\n            this._size._set(radius.width * 2, radius.height * 2);\n          }\n        }\n      }\n      this._changed(9);\n    },\n    isEmpty: function () {\n      return false;\n    },\n    toPath: function (insert) {\n      var path = new Path[Base.capitalize(this._type)]({\n        center: new Point(),\n        size: this._size,\n        radius: this._radius,\n        insert: false\n      });\n      path.copyAttributes(this);\n      if (paper.settings.applyMatrix) path.setApplyMatrix(true);\n      if (insert === undefined || insert) path.insertAbove(this);\n      return path;\n    },\n    toShape: '#clone',\n    _asPathItem: function () {\n      return this.toPath(false);\n    },\n    _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n      var style = this._style,\n        hasFill = style.hasFill(),\n        hasStroke = style.hasStroke(),\n        dontPaint = param.dontFinish || param.clip,\n        untransformed = !strokeMatrix;\n      if (hasFill || hasStroke || dontPaint) {\n        var type = this._type,\n          radius = this._radius,\n          isCircle = type === 'circle';\n        if (!param.dontStart) ctx.beginPath();\n        if (untransformed && isCircle) {\n          ctx.arc(0, 0, radius, 0, Math.PI * 2, true);\n        } else {\n          var rx = isCircle ? radius : radius.width,\n            ry = isCircle ? radius : radius.height,\n            size = this._size,\n            width = size.width,\n            height = size.height;\n          if (untransformed && type === 'rectangle' && rx === 0 && ry === 0) {\n            ctx.rect(-width / 2, -height / 2, width, height);\n          } else {\n            var x = width / 2,\n              y = height / 2,\n              kappa = 1 - 0.5522847498307936,\n              cx = rx * kappa,\n              cy = ry * kappa,\n              c = [-x, -y + ry, -x, -y + cy, -x + cx, -y, -x + rx, -y, x - rx, -y, x - cx, -y, x, -y + cy, x, -y + ry, x, y - ry, x, y - cy, x - cx, y, x - rx, y, -x + rx, y, -x + cx, y, -x, y - cy, -x, y - ry];\n            if (strokeMatrix) strokeMatrix.transform(c, c, 32);\n            ctx.moveTo(c[0], c[1]);\n            ctx.bezierCurveTo(c[2], c[3], c[4], c[5], c[6], c[7]);\n            if (x !== rx) ctx.lineTo(c[8], c[9]);\n            ctx.bezierCurveTo(c[10], c[11], c[12], c[13], c[14], c[15]);\n            if (y !== ry) ctx.lineTo(c[16], c[17]);\n            ctx.bezierCurveTo(c[18], c[19], c[20], c[21], c[22], c[23]);\n            if (x !== rx) ctx.lineTo(c[24], c[25]);\n            ctx.bezierCurveTo(c[26], c[27], c[28], c[29], c[30], c[31]);\n          }\n        }\n        ctx.closePath();\n      }\n      if (!dontPaint && (hasFill || hasStroke)) {\n        this._setStyles(ctx, param, viewMatrix);\n        if (hasFill) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n        if (hasStroke) ctx.stroke();\n      }\n    },\n    _canComposite: function () {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _getBounds: function (matrix, options) {\n      var rect = new Rectangle(this._size).setCenter(0, 0),\n        style = this._style,\n        strokeWidth = options.stroke && style.hasStroke() && style.getStrokeWidth();\n      if (matrix) rect = matrix._transformBounds(rect);\n      return strokeWidth ? rect.expand(Path._getStrokePadding(strokeWidth, this._getStrokeMatrix(matrix, options))) : rect;\n    }\n  }, new function () {\n    function getCornerCenter(that, point, expand) {\n      var radius = that._radius;\n      if (!radius.isZero()) {\n        var halfSize = that._size.divide(2);\n        for (var q = 1; q <= 4; q++) {\n          var dir = new Point(q > 1 && q < 4 ? -1 : 1, q > 2 ? -1 : 1),\n            corner = dir.multiply(halfSize),\n            center = corner.subtract(dir.multiply(radius)),\n            rect = new Rectangle(expand ? corner.add(dir.multiply(expand)) : corner, center);\n          if (rect.contains(point)) return {\n            point: center,\n            quadrant: q\n          };\n        }\n      }\n    }\n    function isOnEllipseStroke(point, radius, padding, quadrant) {\n      var vector = point.divide(radius);\n      return (!quadrant || vector.isInQuadrant(quadrant)) && vector.subtract(vector.normalize()).multiply(radius).divide(padding).length <= 1;\n    }\n    return {\n      _contains: function _contains(point) {\n        if (this._type === 'rectangle') {\n          var center = getCornerCenter(this, point);\n          return center ? point.subtract(center.point).divide(this._radius).getLength() <= 1 : _contains.base.call(this, point);\n        } else {\n          return point.divide(this.size).getLength() <= 0.5;\n        }\n      },\n      _hitTestSelf: function _hitTestSelf(point, options, viewMatrix, strokeMatrix) {\n        var hit = false,\n          style = this._style,\n          hitStroke = options.stroke && style.hasStroke(),\n          hitFill = options.fill && style.hasFill();\n        if (hitStroke || hitFill) {\n          var type = this._type,\n            radius = this._radius,\n            strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : 0,\n            strokePadding = options._tolerancePadding.add(Path._getStrokePadding(strokeRadius, !style.getStrokeScaling() && strokeMatrix));\n          if (type === 'rectangle') {\n            var padding = strokePadding.multiply(2),\n              center = getCornerCenter(this, point, padding);\n            if (center) {\n              hit = isOnEllipseStroke(point.subtract(center.point), radius, strokePadding, center.quadrant);\n            } else {\n              var rect = new Rectangle(this._size).setCenter(0, 0),\n                outer = rect.expand(padding),\n                inner = rect.expand(padding.negate());\n              hit = outer._containsPoint(point) && !inner._containsPoint(point);\n            }\n          } else {\n            hit = isOnEllipseStroke(point, radius, strokePadding);\n          }\n        }\n        return hit ? new HitResult(hitStroke ? 'stroke' : 'fill', this) : _hitTestSelf.base.apply(this, arguments);\n      }\n    };\n  }(), {\n    statics: new function () {\n      function createShape(type, point, size, radius, args) {\n        var item = Base.create(Shape.prototype);\n        item._type = type;\n        item._size = size;\n        item._radius = radius;\n        item._initialize(Base.getNamed(args), point);\n        return item;\n      }\n      return {\n        Circle: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            radius = Base.readNamed(args, 'radius');\n          return createShape('circle', center, new Size(radius * 2), radius, args);\n        },\n        Rectangle: function () {\n          var args = arguments,\n            rect = Rectangle.readNamed(args, 'rectangle'),\n            radius = Size.min(Size.readNamed(args, 'radius'), rect.getSize(true).divide(2));\n          return createShape('rectangle', rect.getCenter(true), rect.getSize(true), radius, args);\n        },\n        Ellipse: function () {\n          var args = arguments,\n            ellipse = Shape._readEllipse(args),\n            radius = ellipse.radius;\n          return createShape('ellipse', ellipse.center, radius.multiply(2), radius, args);\n        },\n        _readEllipse: function (args) {\n          var center, radius;\n          if (Base.hasNamed(args, 'radius')) {\n            center = Point.readNamed(args, 'center');\n            radius = Size.readNamed(args, 'radius');\n          } else {\n            var rect = Rectangle.readNamed(args, 'rectangle');\n            center = rect.getCenter(true);\n            radius = rect.getSize(true).divide(2);\n          }\n          return {\n            center: center,\n            radius: radius\n          };\n        }\n      };\n    }()\n  });\n  var Raster = Item.extend({\n    _class: 'Raster',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    _serializeFields: {\n      crossOrigin: null,\n      source: null\n    },\n    _prioritize: ['crossOrigin'],\n    _smoothing: 'low',\n    beans: true,\n    initialize: function Raster(source, position) {\n      if (!this._initialize(source, position !== undefined && Point.read(arguments))) {\n        var image,\n          type = typeof source,\n          object = type === 'string' ? document.getElementById(source) : type === 'object' ? source : null;\n        if (object && object !== Item.NO_INSERT) {\n          if (object.getContext || object.naturalHeight != null) {\n            image = object;\n          } else if (object) {\n            var size = Size.read(arguments);\n            if (!size.isZero()) {\n              image = CanvasProvider.getCanvas(size);\n            }\n          }\n        }\n        if (image) {\n          this.setImage(image);\n        } else {\n          this.setSource(source);\n        }\n      }\n      if (!this._size) {\n        this._size = new Size();\n        this._loaded = false;\n      }\n    },\n    _equals: function (item) {\n      return this.getSource() === item.getSource();\n    },\n    copyContent: function (source) {\n      var image = source._image,\n        canvas = source._canvas;\n      if (image) {\n        this._setImage(image);\n      } else if (canvas) {\n        var copyCanvas = CanvasProvider.getCanvas(source._size);\n        copyCanvas.getContext('2d').drawImage(canvas, 0, 0);\n        this._setImage(copyCanvas);\n      }\n      this._crossOrigin = source._crossOrigin;\n    },\n    getSize: function () {\n      var size = this._size;\n      return new LinkedSize(size ? size.width : 0, size ? size.height : 0, this, 'setSize');\n    },\n    setSize: function (_size, _clear) {\n      var size = Size.read(arguments);\n      if (!size.equals(this._size)) {\n        if (size.width > 0 && size.height > 0) {\n          var element = !_clear && this.getElement();\n          this._setImage(CanvasProvider.getCanvas(size));\n          if (element) {\n            this.getContext(true).drawImage(element, 0, 0, size.width, size.height);\n          }\n        } else {\n          if (this._canvas) CanvasProvider.release(this._canvas);\n          this._size = size.clone();\n        }\n      } else if (_clear) {\n        this.clear();\n      }\n    },\n    getWidth: function () {\n      return this._size ? this._size.width : 0;\n    },\n    setWidth: function (width) {\n      this.setSize(width, this.getHeight());\n    },\n    getHeight: function () {\n      return this._size ? this._size.height : 0;\n    },\n    setHeight: function (height) {\n      this.setSize(this.getWidth(), height);\n    },\n    getLoaded: function () {\n      return this._loaded;\n    },\n    isEmpty: function () {\n      var size = this._size;\n      return !size || size.width === 0 && size.height === 0;\n    },\n    getResolution: function () {\n      var matrix = this._matrix,\n        orig = new Point(0, 0).transform(matrix),\n        u = new Point(1, 0).transform(matrix).subtract(orig),\n        v = new Point(0, 1).transform(matrix).subtract(orig);\n      return new Size(72 / u.getLength(), 72 / v.getLength());\n    },\n    getPpi: '#getResolution',\n    getImage: function () {\n      return this._image;\n    },\n    setImage: function (image) {\n      var that = this;\n      function emit(event) {\n        var view = that.getView(),\n          type = event && event.type || 'load';\n        if (view && that.responds(type)) {\n          paper = view._scope;\n          that.emit(type, new Event(event));\n        }\n      }\n      this._setImage(image);\n      if (this._loaded) {\n        setTimeout(emit, 0);\n      } else if (image) {\n        DomEvent.add(image, {\n          load: function (event) {\n            that._setImage(image);\n            emit(event);\n          },\n          error: emit\n        });\n      }\n    },\n    _setImage: function (image) {\n      if (this._canvas) CanvasProvider.release(this._canvas);\n      if (image && image.getContext) {\n        this._image = null;\n        this._canvas = image;\n        this._loaded = true;\n      } else {\n        this._image = image;\n        this._canvas = null;\n        this._loaded = !!(image && image.src && image.complete);\n      }\n      this._size = new Size(image ? image.naturalWidth || image.width : 0, image ? image.naturalHeight || image.height : 0);\n      this._context = null;\n      this._changed(1033);\n    },\n    getCanvas: function () {\n      if (!this._canvas) {\n        var ctx = CanvasProvider.getContext(this._size);\n        try {\n          if (this._image) ctx.drawImage(this._image, 0, 0);\n          this._canvas = ctx.canvas;\n        } catch (e) {\n          CanvasProvider.release(ctx);\n        }\n      }\n      return this._canvas;\n    },\n    setCanvas: '#setImage',\n    getContext: function (_change) {\n      if (!this._context) this._context = this.getCanvas().getContext('2d');\n      if (_change) {\n        this._image = null;\n        this._changed(1025);\n      }\n      return this._context;\n    },\n    setContext: function (context) {\n      this._context = context;\n    },\n    getSource: function () {\n      var image = this._image;\n      return image && image.src || this.toDataURL();\n    },\n    setSource: function (src) {\n      var image = new self.Image(),\n        crossOrigin = this._crossOrigin;\n      if (crossOrigin) image.crossOrigin = crossOrigin;\n      if (src) image.src = src;\n      this.setImage(image);\n    },\n    getCrossOrigin: function () {\n      var image = this._image;\n      return image && image.crossOrigin || this._crossOrigin || '';\n    },\n    setCrossOrigin: function (crossOrigin) {\n      this._crossOrigin = crossOrigin;\n      var image = this._image;\n      if (image) image.crossOrigin = crossOrigin;\n    },\n    getSmoothing: function () {\n      return this._smoothing;\n    },\n    setSmoothing: function (smoothing) {\n      this._smoothing = typeof smoothing === 'string' ? smoothing : smoothing ? 'low' : 'off';\n      this._changed(257);\n    },\n    getElement: function () {\n      return this._canvas || this._loaded && this._image;\n    }\n  }, {\n    beans: false,\n    getSubCanvas: function () {\n      var rect = Rectangle.read(arguments),\n        ctx = CanvasProvider.getContext(rect.getSize());\n      ctx.drawImage(this.getCanvas(), rect.x, rect.y, rect.width, rect.height, 0, 0, rect.width, rect.height);\n      return ctx.canvas;\n    },\n    getSubRaster: function () {\n      var rect = Rectangle.read(arguments),\n        raster = new Raster(Item.NO_INSERT);\n      raster._setImage(this.getSubCanvas(rect));\n      raster.translate(rect.getCenter().subtract(this.getSize().divide(2)));\n      raster._matrix.prepend(this._matrix);\n      raster.insertAbove(this);\n      return raster;\n    },\n    toDataURL: function () {\n      var image = this._image,\n        src = image && image.src;\n      if (/^data:/.test(src)) return src;\n      var canvas = this.getCanvas();\n      return canvas ? canvas.toDataURL.apply(canvas, arguments) : null;\n    },\n    drawImage: function (image) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).drawImage(image, point.x, point.y);\n    },\n    getAverageColor: function (object) {\n      var bounds, path;\n      if (!object) {\n        bounds = this.getBounds();\n      } else if (object instanceof PathItem) {\n        path = object;\n        bounds = object.getBounds();\n      } else if (typeof object === 'object') {\n        if ('width' in object) {\n          bounds = new Rectangle(object);\n        } else if ('x' in object) {\n          bounds = new Rectangle(object.x - 0.5, object.y - 0.5, 1, 1);\n        }\n      }\n      if (!bounds) return null;\n      var sampleSize = 32,\n        width = Math.min(bounds.width, sampleSize),\n        height = Math.min(bounds.height, sampleSize);\n      var ctx = Raster._sampleContext;\n      if (!ctx) {\n        ctx = Raster._sampleContext = CanvasProvider.getContext(new Size(sampleSize));\n      } else {\n        ctx.clearRect(0, 0, sampleSize + 1, sampleSize + 1);\n      }\n      ctx.save();\n      var matrix = new Matrix().scale(width / bounds.width, height / bounds.height).translate(-bounds.x, -bounds.y);\n      matrix.applyToContext(ctx);\n      if (path) path.draw(ctx, new Base({\n        clip: true,\n        matrices: [matrix]\n      }));\n      this._matrix.applyToContext(ctx);\n      var element = this.getElement(),\n        size = this._size;\n      if (element) ctx.drawImage(element, -size.width / 2, -size.height / 2);\n      ctx.restore();\n      var pixels = ctx.getImageData(0.5, 0.5, Math.ceil(width), Math.ceil(height)).data,\n        channels = [0, 0, 0],\n        total = 0;\n      for (var i = 0, l = pixels.length; i < l; i += 4) {\n        var alpha = pixels[i + 3];\n        total += alpha;\n        alpha /= 255;\n        channels[0] += pixels[i] * alpha;\n        channels[1] += pixels[i + 1] * alpha;\n        channels[2] += pixels[i + 2] * alpha;\n      }\n      for (var i = 0; i < 3; i++) channels[i] /= total;\n      return total ? Color.read(channels) : null;\n    },\n    getPixel: function () {\n      var point = Point.read(arguments);\n      var data = this.getContext().getImageData(point.x, point.y, 1, 1).data;\n      return new Color('rgb', [data[0] / 255, data[1] / 255, data[2] / 255], data[3] / 255);\n    },\n    setPixel: function () {\n      var args = arguments,\n        point = Point.read(args),\n        color = Color.read(args),\n        components = color._convert('rgb'),\n        alpha = color._alpha,\n        ctx = this.getContext(true),\n        imageData = ctx.createImageData(1, 1),\n        data = imageData.data;\n      data[0] = components[0] * 255;\n      data[1] = components[1] * 255;\n      data[2] = components[2] * 255;\n      data[3] = alpha != null ? alpha * 255 : 255;\n      ctx.putImageData(imageData, point.x, point.y);\n    },\n    clear: function () {\n      var size = this._size;\n      this.getContext(true).clearRect(0, 0, size.width + 1, size.height + 1);\n    },\n    createImageData: function () {\n      var size = Size.read(arguments);\n      return this.getContext().createImageData(size.width, size.height);\n    },\n    getImageData: function () {\n      var rect = Rectangle.read(arguments);\n      if (rect.isEmpty()) rect = new Rectangle(this._size);\n      return this.getContext().getImageData(rect.x, rect.y, rect.width, rect.height);\n    },\n    putImageData: function (data) {\n      var point = Point.read(arguments, 1);\n      this.getContext(true).putImageData(data, point.x, point.y);\n    },\n    setImageData: function (data) {\n      this.setSize(data);\n      this.getContext(true).putImageData(data, 0, 0);\n    },\n    _getBounds: function (matrix, options) {\n      var rect = new Rectangle(this._size).setCenter(0, 0);\n      return matrix ? matrix._transformBounds(rect) : rect;\n    },\n    _hitTestSelf: function (point) {\n      if (this._contains(point)) {\n        var that = this;\n        return new HitResult('pixel', that, {\n          offset: point.add(that._size.divide(2)).round(),\n          color: {\n            get: function () {\n              return that.getPixel(this.offset);\n            }\n          }\n        });\n      }\n    },\n    _draw: function (ctx, param, viewMatrix) {\n      var element = this.getElement();\n      if (element && element.width > 0 && element.height > 0) {\n        ctx.globalAlpha = Numerical.clamp(this._opacity, 0, 1);\n        this._setStyles(ctx, param, viewMatrix);\n        var smoothing = this._smoothing,\n          disabled = smoothing === 'off';\n        DomElement.setPrefixed(ctx, disabled ? 'imageSmoothingEnabled' : 'imageSmoothingQuality', disabled ? false : smoothing);\n        ctx.drawImage(element, -this._size.width / 2, -this._size.height / 2);\n      }\n    },\n    _canComposite: function () {\n      return true;\n    }\n  });\n  var SymbolItem = Item.extend({\n    _class: 'SymbolItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _boundsOptions: {\n      stroke: true\n    },\n    _serializeFields: {\n      symbol: null\n    },\n    initialize: function SymbolItem(arg0, arg1) {\n      if (!this._initialize(arg0, arg1 !== undefined && Point.read(arguments, 1))) this.setDefinition(arg0 instanceof SymbolDefinition ? arg0 : new SymbolDefinition(arg0));\n    },\n    _equals: function (item) {\n      return this._definition === item._definition;\n    },\n    copyContent: function (source) {\n      this.setDefinition(source._definition);\n    },\n    getDefinition: function () {\n      return this._definition;\n    },\n    setDefinition: function (definition) {\n      this._definition = definition;\n      this._changed(9);\n    },\n    getSymbol: '#getDefinition',\n    setSymbol: '#setDefinition',\n    isEmpty: function () {\n      return this._definition._item.isEmpty();\n    },\n    _getBounds: function (matrix, options) {\n      var item = this._definition._item;\n      return item._getCachedBounds(item._matrix.prepended(matrix), options);\n    },\n    _hitTestSelf: function (point, options, viewMatrix) {\n      var opts = options.extend({\n        all: false\n      });\n      var res = this._definition._item._hitTest(point, opts, viewMatrix);\n      if (res) res.item = this;\n      return res;\n    },\n    _draw: function (ctx, param) {\n      this._definition._item.draw(ctx, param);\n    }\n  });\n  var SymbolDefinition = Base.extend({\n    _class: 'SymbolDefinition',\n    initialize: function SymbolDefinition(item, dontCenter) {\n      this._id = UID.get();\n      this.project = paper.project;\n      if (item) this.setItem(item, dontCenter);\n    },\n    _serialize: function (options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._class, this._item], options, false, dictionary);\n      });\n    },\n    _changed: function (flags) {\n      if (flags & 8) Item._clearBoundsCache(this);\n      if (flags & 1) this.project._changed(flags);\n    },\n    getItem: function () {\n      return this._item;\n    },\n    setItem: function (item, _dontCenter) {\n      if (item._symbol) item = item.clone();\n      if (this._item) this._item._symbol = null;\n      this._item = item;\n      item.remove();\n      item.setSelected(false);\n      if (!_dontCenter) item.setPosition(new Point());\n      item._symbol = this;\n      this._changed(9);\n    },\n    getDefinition: '#getItem',\n    setDefinition: '#setItem',\n    place: function (position) {\n      return new SymbolItem(this, position);\n    },\n    clone: function () {\n      return new SymbolDefinition(this._item.clone(false));\n    },\n    equals: function (symbol) {\n      return symbol === this || symbol && this._item.equals(symbol._item) || false;\n    }\n  });\n  var HitResult = Base.extend({\n    _class: 'HitResult',\n    initialize: function HitResult(type, item, values) {\n      this.type = type;\n      this.item = item;\n      if (values) this.inject(values);\n    },\n    statics: {\n      getOptions: function (args) {\n        var options = args && Base.read(args);\n        return new Base({\n          type: null,\n          tolerance: paper.settings.hitTolerance,\n          fill: !options,\n          stroke: !options,\n          segments: !options,\n          handles: false,\n          ends: false,\n          position: false,\n          center: false,\n          bounds: false,\n          guides: false,\n          selected: false\n        }, options);\n      }\n    }\n  });\n  var Segment = Base.extend({\n    _class: 'Segment',\n    beans: true,\n    _selection: 0,\n    initialize: function Segment(arg0, arg1, arg2, arg3, arg4, arg5) {\n      var count = arguments.length,\n        point,\n        handleIn,\n        handleOut,\n        selection;\n      if (count > 0) {\n        if (arg0 == null || typeof arg0 === 'object') {\n          if (count === 1 && arg0 && 'point' in arg0) {\n            point = arg0.point;\n            handleIn = arg0.handleIn;\n            handleOut = arg0.handleOut;\n            selection = arg0.selection;\n          } else {\n            point = arg0;\n            handleIn = arg1;\n            handleOut = arg2;\n            selection = arg3;\n          }\n        } else {\n          point = [arg0, arg1];\n          handleIn = arg2 !== undefined ? [arg2, arg3] : null;\n          handleOut = arg4 !== undefined ? [arg4, arg5] : null;\n        }\n      }\n      new SegmentPoint(point, this, '_point');\n      new SegmentPoint(handleIn, this, '_handleIn');\n      new SegmentPoint(handleOut, this, '_handleOut');\n      if (selection) this.setSelection(selection);\n    },\n    _serialize: function (options, dictionary) {\n      var point = this._point,\n        selection = this._selection,\n        obj = selection || this.hasHandles() ? [point, this._handleIn, this._handleOut] : point;\n      if (selection) obj.push(selection);\n      return Base.serialize(obj, options, true, dictionary);\n    },\n    _changed: function (point) {\n      var path = this._path;\n      if (!path) return;\n      var curves = path._curves,\n        index = this._index,\n        curve;\n      if (curves) {\n        if ((!point || point === this._point || point === this._handleIn) && (curve = index > 0 ? curves[index - 1] : path._closed ? curves[curves.length - 1] : null)) curve._changed();\n        if ((!point || point === this._point || point === this._handleOut) && (curve = curves[index])) curve._changed();\n      }\n      path._changed(41);\n    },\n    getPoint: function () {\n      return this._point;\n    },\n    setPoint: function () {\n      this._point.set(Point.read(arguments));\n    },\n    getHandleIn: function () {\n      return this._handleIn;\n    },\n    setHandleIn: function () {\n      this._handleIn.set(Point.read(arguments));\n    },\n    getHandleOut: function () {\n      return this._handleOut;\n    },\n    setHandleOut: function () {\n      this._handleOut.set(Point.read(arguments));\n    },\n    hasHandles: function () {\n      return !this._handleIn.isZero() || !this._handleOut.isZero();\n    },\n    isSmooth: function () {\n      var handleIn = this._handleIn,\n        handleOut = this._handleOut;\n      return !handleIn.isZero() && !handleOut.isZero() && handleIn.isCollinear(handleOut);\n    },\n    clearHandles: function () {\n      this._handleIn._set(0, 0);\n      this._handleOut._set(0, 0);\n    },\n    getSelection: function () {\n      return this._selection;\n    },\n    setSelection: function (selection) {\n      var oldSelection = this._selection,\n        path = this._path;\n      this._selection = selection = selection || 0;\n      if (path && selection !== oldSelection) {\n        path._updateSelection(this, oldSelection, selection);\n        path._changed(257);\n      }\n    },\n    _changeSelection: function (flag, selected) {\n      var selection = this._selection;\n      this.setSelection(selected ? selection | flag : selection & ~flag);\n    },\n    isSelected: function () {\n      return !!(this._selection & 7);\n    },\n    setSelected: function (selected) {\n      this._changeSelection(7, selected);\n    },\n    getIndex: function () {\n      return this._index !== undefined ? this._index : null;\n    },\n    getPath: function () {\n      return this._path || null;\n    },\n    getCurve: function () {\n      var path = this._path,\n        index = this._index;\n      if (path) {\n        if (index > 0 && !path._closed && index === path._segments.length - 1) index--;\n        return path.getCurves()[index] || null;\n      }\n      return null;\n    },\n    getLocation: function () {\n      var curve = this.getCurve();\n      return curve ? new CurveLocation(curve, this === curve._segment1 ? 0 : 1) : null;\n    },\n    getNext: function () {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index + 1] || this._path._closed && segments[0]) || null;\n    },\n    smooth: function (options, _first, _last) {\n      var opts = options || {},\n        type = opts.type,\n        factor = opts.factor,\n        prev = this.getPrevious(),\n        next = this.getNext(),\n        p0 = (prev || this)._point,\n        p1 = this._point,\n        p2 = (next || this)._point,\n        d1 = p0.getDistance(p1),\n        d2 = p1.getDistance(p2);\n      if (!type || type === 'catmull-rom') {\n        var a = factor === undefined ? 0.5 : factor,\n          d1_a = Math.pow(d1, a),\n          d1_2a = d1_a * d1_a,\n          d2_a = Math.pow(d2, a),\n          d2_2a = d2_a * d2_a;\n        if (!_first && prev) {\n          var A = 2 * d2_2a + 3 * d2_a * d1_a + d1_2a,\n            N = 3 * d2_a * (d2_a + d1_a);\n          this.setHandleIn(N !== 0 ? new Point((d2_2a * p0._x + A * p1._x - d1_2a * p2._x) / N - p1._x, (d2_2a * p0._y + A * p1._y - d1_2a * p2._y) / N - p1._y) : new Point());\n        }\n        if (!_last && next) {\n          var A = 2 * d1_2a + 3 * d1_a * d2_a + d2_2a,\n            N = 3 * d1_a * (d1_a + d2_a);\n          this.setHandleOut(N !== 0 ? new Point((d1_2a * p2._x + A * p1._x - d2_2a * p0._x) / N - p1._x, (d1_2a * p2._y + A * p1._y - d2_2a * p0._y) / N - p1._y) : new Point());\n        }\n      } else if (type === 'geometric') {\n        if (prev && next) {\n          var vector = p0.subtract(p2),\n            t = factor === undefined ? 0.4 : factor,\n            k = t * d1 / (d1 + d2);\n          if (!_first) this.setHandleIn(vector.multiply(k));\n          if (!_last) this.setHandleOut(vector.multiply(k - t));\n        }\n      } else {\n        throw new Error('Smoothing method \\'' + type + '\\' not supported.');\n      }\n    },\n    getPrevious: function () {\n      var segments = this._path && this._path._segments;\n      return segments && (segments[this._index - 1] || this._path._closed && segments[segments.length - 1]) || null;\n    },\n    isFirst: function () {\n      return !this._index;\n    },\n    isLast: function () {\n      var path = this._path;\n      return path && this._index === path._segments.length - 1 || false;\n    },\n    reverse: function () {\n      var handleIn = this._handleIn,\n        handleOut = this._handleOut,\n        tmp = handleIn.clone();\n      handleIn.set(handleOut);\n      handleOut.set(tmp);\n    },\n    reversed: function () {\n      return new Segment(this._point, this._handleOut, this._handleIn);\n    },\n    remove: function () {\n      return this._path ? !!this._path.removeSegment(this._index) : false;\n    },\n    clone: function () {\n      return new Segment(this._point, this._handleIn, this._handleOut);\n    },\n    equals: function (segment) {\n      return segment === this || segment && this._class === segment._class && this._point.equals(segment._point) && this._handleIn.equals(segment._handleIn) && this._handleOut.equals(segment._handleOut) || false;\n    },\n    toString: function () {\n      var parts = ['point: ' + this._point];\n      if (!this._handleIn.isZero()) parts.push('handleIn: ' + this._handleIn);\n      if (!this._handleOut.isZero()) parts.push('handleOut: ' + this._handleOut);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    transform: function (matrix) {\n      this._transformCoordinates(matrix, new Array(6), true);\n      this._changed();\n    },\n    interpolate: function (from, to, factor) {\n      var u = 1 - factor,\n        v = factor,\n        point1 = from._point,\n        point2 = to._point,\n        handleIn1 = from._handleIn,\n        handleIn2 = to._handleIn,\n        handleOut2 = to._handleOut,\n        handleOut1 = from._handleOut;\n      this._point._set(u * point1._x + v * point2._x, u * point1._y + v * point2._y, true);\n      this._handleIn._set(u * handleIn1._x + v * handleIn2._x, u * handleIn1._y + v * handleIn2._y, true);\n      this._handleOut._set(u * handleOut1._x + v * handleOut2._x, u * handleOut1._y + v * handleOut2._y, true);\n      this._changed();\n    },\n    _transformCoordinates: function (matrix, coords, change) {\n      var point = this._point,\n        handleIn = !change || !this._handleIn.isZero() ? this._handleIn : null,\n        handleOut = !change || !this._handleOut.isZero() ? this._handleOut : null,\n        x = point._x,\n        y = point._y,\n        i = 2;\n      coords[0] = x;\n      coords[1] = y;\n      if (handleIn) {\n        coords[i++] = handleIn._x + x;\n        coords[i++] = handleIn._y + y;\n      }\n      if (handleOut) {\n        coords[i++] = handleOut._x + x;\n        coords[i++] = handleOut._y + y;\n      }\n      if (matrix) {\n        matrix._transformCoordinates(coords, coords, i / 2);\n        x = coords[0];\n        y = coords[1];\n        if (change) {\n          point._x = x;\n          point._y = y;\n          i = 2;\n          if (handleIn) {\n            handleIn._x = coords[i++] - x;\n            handleIn._y = coords[i++] - y;\n          }\n          if (handleOut) {\n            handleOut._x = coords[i++] - x;\n            handleOut._y = coords[i++] - y;\n          }\n        } else {\n          if (!handleIn) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n          if (!handleOut) {\n            coords[i++] = x;\n            coords[i++] = y;\n          }\n        }\n      }\n      return coords;\n    }\n  });\n  var SegmentPoint = Point.extend({\n    initialize: function SegmentPoint(point, owner, key) {\n      var x, y, selected;\n      if (!point) {\n        x = y = 0;\n      } else if ((x = point[0]) !== undefined) {\n        y = point[1];\n      } else {\n        var pt = point;\n        if ((x = pt.x) === undefined) {\n          pt = Point.read(arguments);\n          x = pt.x;\n        }\n        y = pt.y;\n        selected = pt.selected;\n      }\n      this._x = x;\n      this._y = y;\n      this._owner = owner;\n      owner[key] = this;\n      if (selected) this.setSelected(true);\n    },\n    _set: function (x, y) {\n      this._x = x;\n      this._y = y;\n      this._owner._changed(this);\n      return this;\n    },\n    getX: function () {\n      return this._x;\n    },\n    setX: function (x) {\n      this._x = x;\n      this._owner._changed(this);\n    },\n    getY: function () {\n      return this._y;\n    },\n    setY: function (y) {\n      this._y = y;\n      this._owner._changed(this);\n    },\n    isZero: function () {\n      var isZero = Numerical.isZero;\n      return isZero(this._x) && isZero(this._y);\n    },\n    isSelected: function () {\n      return !!(this._owner._selection & this._getSelection());\n    },\n    setSelected: function (selected) {\n      this._owner._changeSelection(this._getSelection(), selected);\n    },\n    _getSelection: function () {\n      var owner = this._owner;\n      return this === owner._point ? 1 : this === owner._handleIn ? 2 : this === owner._handleOut ? 4 : 0;\n    }\n  });\n  var Curve = Base.extend({\n    _class: 'Curve',\n    beans: true,\n    initialize: function Curve(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n      var count = arguments.length,\n        seg1,\n        seg2,\n        point1,\n        point2,\n        handle1,\n        handle2;\n      if (count === 3) {\n        this._path = arg0;\n        seg1 = arg1;\n        seg2 = arg2;\n      } else if (!count) {\n        seg1 = new Segment();\n        seg2 = new Segment();\n      } else if (count === 1) {\n        if ('segment1' in arg0) {\n          seg1 = new Segment(arg0.segment1);\n          seg2 = new Segment(arg0.segment2);\n        } else if ('point1' in arg0) {\n          point1 = arg0.point1;\n          handle1 = arg0.handle1;\n          handle2 = arg0.handle2;\n          point2 = arg0.point2;\n        } else if (Array.isArray(arg0)) {\n          point1 = [arg0[0], arg0[1]];\n          point2 = [arg0[6], arg0[7]];\n          handle1 = [arg0[2] - arg0[0], arg0[3] - arg0[1]];\n          handle2 = [arg0[4] - arg0[6], arg0[5] - arg0[7]];\n        }\n      } else if (count === 2) {\n        seg1 = new Segment(arg0);\n        seg2 = new Segment(arg1);\n      } else if (count === 4) {\n        point1 = arg0;\n        handle1 = arg1;\n        handle2 = arg2;\n        point2 = arg3;\n      } else if (count === 8) {\n        point1 = [arg0, arg1];\n        point2 = [arg6, arg7];\n        handle1 = [arg2 - arg0, arg3 - arg1];\n        handle2 = [arg4 - arg6, arg5 - arg7];\n      }\n      this._segment1 = seg1 || new Segment(point1, null, handle1);\n      this._segment2 = seg2 || new Segment(point2, handle2, null);\n    },\n    _serialize: function (options, dictionary) {\n      return Base.serialize(this.hasHandles() ? [this.getPoint1(), this.getHandle1(), this.getHandle2(), this.getPoint2()] : [this.getPoint1(), this.getPoint2()], options, true, dictionary);\n    },\n    _changed: function () {\n      this._length = this._bounds = undefined;\n    },\n    clone: function () {\n      return new Curve(this._segment1, this._segment2);\n    },\n    toString: function () {\n      var parts = ['point1: ' + this._segment1._point];\n      if (!this._segment1._handleOut.isZero()) parts.push('handle1: ' + this._segment1._handleOut);\n      if (!this._segment2._handleIn.isZero()) parts.push('handle2: ' + this._segment2._handleIn);\n      parts.push('point2: ' + this._segment2._point);\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    classify: function () {\n      return Curve.classify(this.getValues());\n    },\n    remove: function () {\n      var removed = false;\n      if (this._path) {\n        var segment2 = this._segment2,\n          handleOut = segment2._handleOut;\n        removed = segment2.remove();\n        if (removed) this._segment1._handleOut.set(handleOut);\n      }\n      return removed;\n    },\n    getPoint1: function () {\n      return this._segment1._point;\n    },\n    setPoint1: function () {\n      this._segment1._point.set(Point.read(arguments));\n    },\n    getPoint2: function () {\n      return this._segment2._point;\n    },\n    setPoint2: function () {\n      this._segment2._point.set(Point.read(arguments));\n    },\n    getHandle1: function () {\n      return this._segment1._handleOut;\n    },\n    setHandle1: function () {\n      this._segment1._handleOut.set(Point.read(arguments));\n    },\n    getHandle2: function () {\n      return this._segment2._handleIn;\n    },\n    setHandle2: function () {\n      this._segment2._handleIn.set(Point.read(arguments));\n    },\n    getSegment1: function () {\n      return this._segment1;\n    },\n    getSegment2: function () {\n      return this._segment2;\n    },\n    getPath: function () {\n      return this._path;\n    },\n    getIndex: function () {\n      return this._segment1._index;\n    },\n    getNext: function () {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index + 1] || this._path._closed && curves[0]) || null;\n    },\n    getPrevious: function () {\n      var curves = this._path && this._path._curves;\n      return curves && (curves[this._segment1._index - 1] || this._path._closed && curves[curves.length - 1]) || null;\n    },\n    isFirst: function () {\n      return !this._segment1._index;\n    },\n    isLast: function () {\n      var path = this._path;\n      return path && this._segment1._index === path._curves.length - 1 || false;\n    },\n    isSelected: function () {\n      return this.getPoint1().isSelected() && this.getHandle1().isSelected() && this.getHandle2().isSelected() && this.getPoint2().isSelected();\n    },\n    setSelected: function (selected) {\n      this.getPoint1().setSelected(selected);\n      this.getHandle1().setSelected(selected);\n      this.getHandle2().setSelected(selected);\n      this.getPoint2().setSelected(selected);\n    },\n    getValues: function (matrix) {\n      return Curve.getValues(this._segment1, this._segment2, matrix);\n    },\n    getPoints: function () {\n      var coords = this.getValues(),\n        points = [];\n      for (var i = 0; i < 8; i += 2) points.push(new Point(coords[i], coords[i + 1]));\n      return points;\n    }\n  }, {\n    getLength: function () {\n      if (this._length == null) this._length = Curve.getLength(this.getValues(), 0, 1);\n      return this._length;\n    },\n    getArea: function () {\n      return Curve.getArea(this.getValues());\n    },\n    getLine: function () {\n      return new Line(this._segment1._point, this._segment2._point);\n    },\n    getPart: function (from, to) {\n      return new Curve(Curve.getPart(this.getValues(), from, to));\n    },\n    getPartLength: function (from, to) {\n      return Curve.getLength(this.getValues(), from, to);\n    },\n    divideAt: function (location) {\n      return this.divideAtTime(location && location.curve === this ? location.time : this.getTimeAt(location));\n    },\n    divideAtTime: function (time, _setHandles) {\n      var tMin = 1e-8,\n        tMax = 1 - tMin,\n        res = null;\n      if (time >= tMin && time <= tMax) {\n        var parts = Curve.subdivide(this.getValues(), time),\n          left = parts[0],\n          right = parts[1],\n          setHandles = _setHandles || this.hasHandles(),\n          seg1 = this._segment1,\n          seg2 = this._segment2,\n          path = this._path;\n        if (setHandles) {\n          seg1._handleOut._set(left[2] - left[0], left[3] - left[1]);\n          seg2._handleIn._set(right[4] - right[6], right[5] - right[7]);\n        }\n        var x = left[6],\n          y = left[7],\n          segment = new Segment(new Point(x, y), setHandles && new Point(left[4] - x, left[5] - y), setHandles && new Point(right[2] - x, right[3] - y));\n        if (path) {\n          path.insert(seg1._index + 1, segment);\n          res = this.getNext();\n        } else {\n          this._segment2 = segment;\n          this._changed();\n          res = new Curve(segment, seg2);\n        }\n      }\n      return res;\n    },\n    splitAt: function (location) {\n      var path = this._path;\n      return path ? path.splitAt(location) : null;\n    },\n    splitAtTime: function (time) {\n      return this.splitAt(this.getLocationAtTime(time));\n    },\n    divide: function (offset, isTime) {\n      return this.divideAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    split: function (offset, isTime) {\n      return this.splitAtTime(offset === undefined ? 0.5 : isTime ? offset : this.getTimeAt(offset));\n    },\n    reversed: function () {\n      return new Curve(this._segment2.reversed(), this._segment1.reversed());\n    },\n    clearHandles: function () {\n      this._segment1._handleOut._set(0, 0);\n      this._segment2._handleIn._set(0, 0);\n    },\n    statics: {\n      getValues: function (segment1, segment2, matrix, straight) {\n        var p1 = segment1._point,\n          h1 = segment1._handleOut,\n          h2 = segment2._handleIn,\n          p2 = segment2._point,\n          x1 = p1.x,\n          y1 = p1.y,\n          x2 = p2.x,\n          y2 = p2.y,\n          values = straight ? [x1, y1, x1, y1, x2, y2, x2, y2] : [x1, y1, x1 + h1._x, y1 + h1._y, x2 + h2._x, y2 + h2._y, x2, y2];\n        if (matrix) matrix._transformCoordinates(values, values, 4);\n        return values;\n      },\n      subdivide: function (v, t) {\n        var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7];\n        if (t === undefined) t = 0.5;\n        var u = 1 - t,\n          x4 = u * x0 + t * x1,\n          y4 = u * y0 + t * y1,\n          x5 = u * x1 + t * x2,\n          y5 = u * y1 + t * y2,\n          x6 = u * x2 + t * x3,\n          y6 = u * y2 + t * y3,\n          x7 = u * x4 + t * x5,\n          y7 = u * y4 + t * y5,\n          x8 = u * x5 + t * x6,\n          y8 = u * y5 + t * y6,\n          x9 = u * x7 + t * x8,\n          y9 = u * y7 + t * y8;\n        return [[x0, y0, x4, y4, x7, y7, x9, y9], [x9, y9, x8, y8, x6, y6, x3, y3]];\n      },\n      getMonoCurves: function (v, dir) {\n        var curves = [],\n          io = dir ? 0 : 1,\n          o0 = v[io + 0],\n          o1 = v[io + 2],\n          o2 = v[io + 4],\n          o3 = v[io + 6];\n        if (o0 >= o1 === o1 >= o2 && o1 >= o2 === o2 >= o3 || Curve.isStraight(v)) {\n          curves.push(v);\n        } else {\n          var a = 3 * (o1 - o2) - o0 + o3,\n            b = 2 * (o0 + o2) - 4 * o1,\n            c = o1 - o0,\n            tMin = 1e-8,\n            tMax = 1 - tMin,\n            roots = [],\n            n = Numerical.solveQuadratic(a, b, c, roots, tMin, tMax);\n          if (!n) {\n            curves.push(v);\n          } else {\n            roots.sort();\n            var t = roots[0],\n              parts = Curve.subdivide(v, t);\n            curves.push(parts[0]);\n            if (n > 1) {\n              t = (roots[1] - t) / (1 - t);\n              parts = Curve.subdivide(parts[1], t);\n              curves.push(parts[0]);\n            }\n            curves.push(parts[1]);\n          }\n        }\n        return curves;\n      },\n      solveCubic: function (v, coord, val, roots, min, max) {\n        var v0 = v[coord],\n          v1 = v[coord + 2],\n          v2 = v[coord + 4],\n          v3 = v[coord + 6],\n          res = 0;\n        if (!(v0 < val && v3 < val && v1 < val && v2 < val || v0 > val && v3 > val && v1 > val && v2 > val)) {\n          var c = 3 * (v1 - v0),\n            b = 3 * (v2 - v1) - c,\n            a = v3 - v0 - c - b;\n          res = Numerical.solveCubic(a, b, c, v0 - val, roots, min, max);\n        }\n        return res;\n      },\n      getTimeOf: function (v, point) {\n        var p0 = new Point(v[0], v[1]),\n          p3 = new Point(v[6], v[7]),\n          epsilon = 1e-12,\n          geomEpsilon = 1e-7,\n          t = point.isClose(p0, epsilon) ? 0 : point.isClose(p3, epsilon) ? 1 : null;\n        if (t === null) {\n          var coords = [point.x, point.y],\n            roots = [];\n          for (var c = 0; c < 2; c++) {\n            var count = Curve.solveCubic(v, c, coords[c], roots, 0, 1);\n            for (var i = 0; i < count; i++) {\n              var u = roots[i];\n              if (point.isClose(Curve.getPoint(v, u), geomEpsilon)) return u;\n            }\n          }\n        }\n        return point.isClose(p0, geomEpsilon) ? 0 : point.isClose(p3, geomEpsilon) ? 1 : null;\n      },\n      getNearestTime: function (v, point) {\n        if (Curve.isStraight(v)) {\n          var x0 = v[0],\n            y0 = v[1],\n            x3 = v[6],\n            y3 = v[7],\n            vx = x3 - x0,\n            vy = y3 - y0,\n            det = vx * vx + vy * vy;\n          if (det === 0) return 0;\n          var u = ((point.x - x0) * vx + (point.y - y0) * vy) / det;\n          return u < 1e-12 ? 0 : u > 0.999999999999 ? 1 : Curve.getTimeOf(v, new Point(x0 + u * vx, y0 + u * vy));\n        }\n        var count = 100,\n          minDist = Infinity,\n          minT = 0;\n        function refine(t) {\n          if (t >= 0 && t <= 1) {\n            var dist = point.getDistance(Curve.getPoint(v, t), true);\n            if (dist < minDist) {\n              minDist = dist;\n              minT = t;\n              return true;\n            }\n          }\n        }\n        for (var i = 0; i <= count; i++) refine(i / count);\n        var step = 1 / (count * 2);\n        while (step > 1e-8) {\n          if (!refine(minT - step) && !refine(minT + step)) step /= 2;\n        }\n        return minT;\n      },\n      getPart: function (v, from, to) {\n        var flip = from > to;\n        if (flip) {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n        if (from > 0) v = Curve.subdivide(v, from)[1];\n        if (to < 1) v = Curve.subdivide(v, (to - from) / (1 - from))[0];\n        return flip ? [v[6], v[7], v[4], v[5], v[2], v[3], v[0], v[1]] : v;\n      },\n      isFlatEnough: function (v, flatness) {\n        var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7],\n          ux = 3 * x1 - 2 * x0 - x3,\n          uy = 3 * y1 - 2 * y0 - y3,\n          vx = 3 * x2 - 2 * x3 - x0,\n          vy = 3 * y2 - 2 * y3 - y0;\n        return Math.max(ux * ux, vx * vx) + Math.max(uy * uy, vy * vy) <= 16 * flatness * flatness;\n      },\n      getArea: function (v) {\n        var x0 = v[0],\n          y0 = v[1],\n          x1 = v[2],\n          y1 = v[3],\n          x2 = v[4],\n          y2 = v[5],\n          x3 = v[6],\n          y3 = v[7];\n        return 3 * ((y3 - y0) * (x1 + x2) - (x3 - x0) * (y1 + y2) + y1 * (x0 - x2) - x1 * (y0 - y2) + y3 * (x2 + x0 / 3) - x3 * (y2 + y0 / 3)) / 20;\n      },\n      getBounds: function (v) {\n        var min = v.slice(0, 2),\n          max = min.slice(),\n          roots = [0, 0];\n        for (var i = 0; i < 2; i++) Curve._addBounds(v[i], v[i + 2], v[i + 4], v[i + 6], i, 0, min, max, roots);\n        return new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      _addBounds: function (v0, v1, v2, v3, coord, padding, min, max, roots) {\n        function add(value, padding) {\n          var left = value - padding,\n            right = value + padding;\n          if (left < min[coord]) min[coord] = left;\n          if (right > max[coord]) max[coord] = right;\n        }\n        padding /= 2;\n        var minPad = min[coord] + padding,\n          maxPad = max[coord] - padding;\n        if (v0 < minPad || v1 < minPad || v2 < minPad || v3 < minPad || v0 > maxPad || v1 > maxPad || v2 > maxPad || v3 > maxPad) {\n          if (v1 < v0 != v1 < v3 && v2 < v0 != v2 < v3) {\n            add(v0, 0);\n            add(v3, 0);\n          } else {\n            var a = 3 * (v1 - v2) - v0 + v3,\n              b = 2 * (v0 + v2) - 4 * v1,\n              c = v1 - v0,\n              count = Numerical.solveQuadratic(a, b, c, roots),\n              tMin = 1e-8,\n              tMax = 1 - tMin;\n            add(v3, 0);\n            for (var i = 0; i < count; i++) {\n              var t = roots[i],\n                u = 1 - t;\n              if (tMin <= t && t <= tMax) add(u * u * u * v0 + 3 * u * u * t * v1 + 3 * u * t * t * v2 + t * t * t * v3, padding);\n            }\n          }\n        }\n      }\n    }\n  }, Base.each(['getBounds', 'getStrokeBounds', 'getHandleBounds'], function (name) {\n    this[name] = function () {\n      if (!this._bounds) this._bounds = {};\n      var bounds = this._bounds[name];\n      if (!bounds) {\n        bounds = this._bounds[name] = Path[name]([this._segment1, this._segment2], false, this._path);\n      }\n      return bounds.clone();\n    };\n  }, {}), Base.each({\n    isStraight: function (p1, h1, h2, p2) {\n      if (h1.isZero() && h2.isZero()) {\n        return true;\n      } else {\n        var v = p2.subtract(p1);\n        if (v.isZero()) {\n          return false;\n        } else if (v.isCollinear(h1) && v.isCollinear(h2)) {\n          var l = new Line(p1, p2),\n            epsilon = 1e-7;\n          if (l.getDistance(p1.add(h1)) < epsilon && l.getDistance(p2.add(h2)) < epsilon) {\n            var div = v.dot(v),\n              s1 = v.dot(h1) / div,\n              s2 = v.dot(h2) / div;\n            return s1 >= 0 && s1 <= 1 && s2 <= 0 && s2 >= -1;\n          }\n        }\n      }\n      return false;\n    },\n    isLinear: function (p1, h1, h2, p2) {\n      var third = p2.subtract(p1).divide(3);\n      return h1.equals(third) && h2.negate().equals(third);\n    }\n  }, function (test, name) {\n    this[name] = function (epsilon) {\n      var seg1 = this._segment1,\n        seg2 = this._segment2;\n      return test(seg1._point, seg1._handleOut, seg2._handleIn, seg2._point, epsilon);\n    };\n    this.statics[name] = function (v, epsilon) {\n      var x0 = v[0],\n        y0 = v[1],\n        x3 = v[6],\n        y3 = v[7];\n      return test(new Point(x0, y0), new Point(v[2] - x0, v[3] - y0), new Point(v[4] - x3, v[5] - y3), new Point(x3, y3), epsilon);\n    };\n  }, {\n    statics: {},\n    hasHandles: function () {\n      return !this._segment1._handleOut.isZero() || !this._segment2._handleIn.isZero();\n    },\n    hasLength: function (epsilon) {\n      return (!this.getPoint1().equals(this.getPoint2()) || this.hasHandles()) && this.getLength() > (epsilon || 0);\n    },\n    isCollinear: function (curve) {\n      return curve && this.isStraight() && curve.isStraight() && this.getLine().isCollinear(curve.getLine());\n    },\n    isHorizontal: function () {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).y) < 1e-8;\n    },\n    isVertical: function () {\n      return this.isStraight() && Math.abs(this.getTangentAtTime(0.5).x) < 1e-8;\n    }\n  }), {\n    beans: false,\n    getLocationAt: function (offset, _isTime) {\n      return this.getLocationAtTime(_isTime ? offset : this.getTimeAt(offset));\n    },\n    getLocationAtTime: function (t) {\n      return t != null && t >= 0 && t <= 1 ? new CurveLocation(this, t) : null;\n    },\n    getTimeAt: function (offset, start) {\n      return Curve.getTimeAt(this.getValues(), offset, start);\n    },\n    getParameterAt: '#getTimeAt',\n    getTimesWithTangent: function () {\n      var tangent = Point.read(arguments);\n      return tangent.isZero() ? [] : Curve.getTimesWithTangent(this.getValues(), tangent);\n    },\n    getOffsetAtTime: function (t) {\n      return this.getPartLength(0, t);\n    },\n    getLocationOf: function () {\n      return this.getLocationAtTime(this.getTimeOf(Point.read(arguments)));\n    },\n    getOffsetOf: function () {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getTimeOf: function () {\n      return Curve.getTimeOf(this.getValues(), Point.read(arguments));\n    },\n    getParameterOf: '#getTimeOf',\n    getNearestLocation: function () {\n      var point = Point.read(arguments),\n        values = this.getValues(),\n        t = Curve.getNearestTime(values, point),\n        pt = Curve.getPoint(values, t);\n      return new CurveLocation(this, t, pt, null, point.getDistance(pt));\n    },\n    getNearestPoint: function () {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    }\n  }, new function () {\n    var methods = ['getPoint', 'getTangent', 'getNormal', 'getWeightedTangent', 'getWeightedNormal', 'getCurvature'];\n    return Base.each(methods, function (name) {\n      this[name + 'At'] = function (location, _isTime) {\n        var values = this.getValues();\n        return Curve[name](values, _isTime ? location : Curve.getTimeAt(values, location));\n      };\n      this[name + 'AtTime'] = function (time) {\n        return Curve[name](this.getValues(), time);\n      };\n    }, {\n      statics: {\n        _evaluateMethods: methods\n      }\n    });\n  }(), new function () {\n    function getLengthIntegrand(v) {\n      var x0 = v[0],\n        y0 = v[1],\n        x1 = v[2],\n        y1 = v[3],\n        x2 = v[4],\n        y2 = v[5],\n        x3 = v[6],\n        y3 = v[7],\n        ax = 9 * (x1 - x2) + 3 * (x3 - x0),\n        bx = 6 * (x0 + x2) - 12 * x1,\n        cx = 3 * (x1 - x0),\n        ay = 9 * (y1 - y2) + 3 * (y3 - y0),\n        by = 6 * (y0 + y2) - 12 * y1,\n        cy = 3 * (y1 - y0);\n      return function (t) {\n        var dx = (ax * t + bx) * t + cx,\n          dy = (ay * t + by) * t + cy;\n        return Math.sqrt(dx * dx + dy * dy);\n      };\n    }\n    function getIterations(a, b) {\n      return Math.max(2, Math.min(16, Math.ceil(Math.abs(b - a) * 32)));\n    }\n    function evaluate(v, t, type, normalized) {\n      if (t == null || t < 0 || t > 1) return null;\n      var x0 = v[0],\n        y0 = v[1],\n        x1 = v[2],\n        y1 = v[3],\n        x2 = v[4],\n        y2 = v[5],\n        x3 = v[6],\n        y3 = v[7],\n        isZero = Numerical.isZero;\n      if (isZero(x1 - x0) && isZero(y1 - y0)) {\n        x1 = x0;\n        y1 = y0;\n      }\n      if (isZero(x2 - x3) && isZero(y2 - y3)) {\n        x2 = x3;\n        y2 = y3;\n      }\n      var cx = 3 * (x1 - x0),\n        bx = 3 * (x2 - x1) - cx,\n        ax = x3 - x0 - cx - bx,\n        cy = 3 * (y1 - y0),\n        by = 3 * (y2 - y1) - cy,\n        ay = y3 - y0 - cy - by,\n        x,\n        y;\n      if (type === 0) {\n        x = t === 0 ? x0 : t === 1 ? x3 : ((ax * t + bx) * t + cx) * t + x0;\n        y = t === 0 ? y0 : t === 1 ? y3 : ((ay * t + by) * t + cy) * t + y0;\n      } else {\n        var tMin = 1e-8,\n          tMax = 1 - tMin;\n        if (t < tMin) {\n          x = cx;\n          y = cy;\n        } else if (t > tMax) {\n          x = 3 * (x3 - x2);\n          y = 3 * (y3 - y2);\n        } else {\n          x = (3 * ax * t + 2 * bx) * t + cx;\n          y = (3 * ay * t + 2 * by) * t + cy;\n        }\n        if (normalized) {\n          if (x === 0 && y === 0 && (t < tMin || t > tMax)) {\n            x = x2 - x1;\n            y = y2 - y1;\n          }\n          var len = Math.sqrt(x * x + y * y);\n          if (len) {\n            x /= len;\n            y /= len;\n          }\n        }\n        if (type === 3) {\n          var x2 = 6 * ax * t + 2 * bx,\n            y2 = 6 * ay * t + 2 * by,\n            d = Math.pow(x * x + y * y, 3 / 2);\n          x = d !== 0 ? (x * y2 - y * x2) / d : 0;\n          y = 0;\n        }\n      }\n      return type === 2 ? new Point(y, -x) : new Point(x, y);\n    }\n    return {\n      statics: {\n        classify: function (v) {\n          var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7],\n            a1 = x0 * (y3 - y2) + y0 * (x2 - x3) + x3 * y2 - y3 * x2,\n            a2 = x1 * (y0 - y3) + y1 * (x3 - x0) + x0 * y3 - y0 * x3,\n            a3 = x2 * (y1 - y0) + y2 * (x0 - x1) + x1 * y0 - y1 * x0,\n            d3 = 3 * a3,\n            d2 = d3 - a2,\n            d1 = d2 - a2 + a1,\n            l = Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3),\n            s = l !== 0 ? 1 / l : 0,\n            isZero = Numerical.isZero,\n            serpentine = 'serpentine';\n          d1 *= s;\n          d2 *= s;\n          d3 *= s;\n          function type(type, t1, t2) {\n            var hasRoots = t1 !== undefined,\n              t1Ok = hasRoots && t1 > 0 && t1 < 1,\n              t2Ok = hasRoots && t2 > 0 && t2 < 1;\n            if (hasRoots && (!(t1Ok || t2Ok) || type === 'loop' && !(t1Ok && t2Ok))) {\n              type = 'arch';\n              t1Ok = t2Ok = false;\n            }\n            return {\n              type: type,\n              roots: t1Ok || t2Ok ? t1Ok && t2Ok ? t1 < t2 ? [t1, t2] : [t2, t1] : [t1Ok ? t1 : t2] : null\n            };\n          }\n          if (isZero(d1)) {\n            return isZero(d2) ? type(isZero(d3) ? 'line' : 'quadratic') : type(serpentine, d3 / (3 * d2));\n          }\n          var d = 3 * d2 * d2 - 4 * d1 * d3;\n          if (isZero(d)) {\n            return type('cusp', d2 / (2 * d1));\n          }\n          var f1 = d > 0 ? Math.sqrt(d / 3) : Math.sqrt(-d),\n            f2 = 2 * d1;\n          return type(d > 0 ? serpentine : 'loop', (d2 + f1) / f2, (d2 - f1) / f2);\n        },\n        getLength: function (v, a, b, ds) {\n          if (a === undefined) a = 0;\n          if (b === undefined) b = 1;\n          if (Curve.isStraight(v)) {\n            var c = v;\n            if (b < 1) {\n              c = Curve.subdivide(c, b)[0];\n              a /= b;\n            }\n            if (a > 0) {\n              c = Curve.subdivide(c, a)[1];\n            }\n            var dx = c[6] - c[0],\n              dy = c[7] - c[1];\n            return Math.sqrt(dx * dx + dy * dy);\n          }\n          return Numerical.integrate(ds || getLengthIntegrand(v), a, b, getIterations(a, b));\n        },\n        getTimeAt: function (v, offset, start) {\n          if (start === undefined) start = offset < 0 ? 1 : 0;\n          if (offset === 0) return start;\n          var abs = Math.abs,\n            epsilon = 1e-12,\n            forward = offset > 0,\n            a = forward ? start : 0,\n            b = forward ? 1 : start,\n            ds = getLengthIntegrand(v),\n            rangeLength = Curve.getLength(v, a, b, ds),\n            diff = abs(offset) - rangeLength;\n          if (abs(diff) < epsilon) {\n            return forward ? b : a;\n          } else if (diff > epsilon) {\n            return null;\n          }\n          var guess = offset / rangeLength,\n            length = 0;\n          function f(t) {\n            length += Numerical.integrate(ds, start, t, getIterations(start, t));\n            start = t;\n            return length - offset;\n          }\n          return Numerical.findRoot(f, ds, start + guess, a, b, 32, 1e-12);\n        },\n        getPoint: function (v, t) {\n          return evaluate(v, t, 0, false);\n        },\n        getTangent: function (v, t) {\n          return evaluate(v, t, 1, true);\n        },\n        getWeightedTangent: function (v, t) {\n          return evaluate(v, t, 1, false);\n        },\n        getNormal: function (v, t) {\n          return evaluate(v, t, 2, true);\n        },\n        getWeightedNormal: function (v, t) {\n          return evaluate(v, t, 2, false);\n        },\n        getCurvature: function (v, t) {\n          return evaluate(v, t, 3, false).x;\n        },\n        getPeaks: function (v) {\n          var x0 = v[0],\n            y0 = v[1],\n            x1 = v[2],\n            y1 = v[3],\n            x2 = v[4],\n            y2 = v[5],\n            x3 = v[6],\n            y3 = v[7],\n            ax = -x0 + 3 * x1 - 3 * x2 + x3,\n            bx = 3 * x0 - 6 * x1 + 3 * x2,\n            cx = -3 * x0 + 3 * x1,\n            ay = -y0 + 3 * y1 - 3 * y2 + y3,\n            by = 3 * y0 - 6 * y1 + 3 * y2,\n            cy = -3 * y0 + 3 * y1,\n            tMin = 1e-8,\n            tMax = 1 - tMin,\n            roots = [];\n          Numerical.solveCubic(9 * (ax * ax + ay * ay), 9 * (ax * bx + by * ay), 2 * (bx * bx + by * by) + 3 * (cx * ax + cy * ay), cx * bx + by * cy, roots, tMin, tMax);\n          return roots.sort();\n        }\n      }\n    };\n  }(), new function () {\n    function addLocation(locations, include, c1, t1, c2, t2, overlap) {\n      var excludeStart = !overlap && c1.getPrevious() === c2,\n        excludeEnd = !overlap && c1 !== c2 && c1.getNext() === c2,\n        tMin = 1e-8,\n        tMax = 1 - tMin;\n      if (t1 !== null && t1 >= (excludeStart ? tMin : 0) && t1 <= (excludeEnd ? tMax : 1)) {\n        if (t2 !== null && t2 >= (excludeEnd ? tMin : 0) && t2 <= (excludeStart ? tMax : 1)) {\n          var loc1 = new CurveLocation(c1, t1, null, overlap),\n            loc2 = new CurveLocation(c2, t2, null, overlap);\n          loc1._intersection = loc2;\n          loc2._intersection = loc1;\n          if (!include || include(loc1)) {\n            CurveLocation.insert(locations, loc1, true);\n          }\n        }\n      }\n    }\n    function addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMin, tMax, uMin, uMax) {\n      if (++calls >= 4096 || ++recursion >= 40) return calls;\n      var fatLineEpsilon = 1e-9,\n        q0x = v2[0],\n        q0y = v2[1],\n        q3x = v2[6],\n        q3y = v2[7],\n        getSignedDistance = Line.getSignedDistance,\n        d1 = getSignedDistance(q0x, q0y, q3x, q3y, v2[2], v2[3]),\n        d2 = getSignedDistance(q0x, q0y, q3x, q3y, v2[4], v2[5]),\n        factor = d1 * d2 > 0 ? 3 / 4 : 4 / 9,\n        dMin = factor * Math.min(0, d1, d2),\n        dMax = factor * Math.max(0, d1, d2),\n        dp0 = getSignedDistance(q0x, q0y, q3x, q3y, v1[0], v1[1]),\n        dp1 = getSignedDistance(q0x, q0y, q3x, q3y, v1[2], v1[3]),\n        dp2 = getSignedDistance(q0x, q0y, q3x, q3y, v1[4], v1[5]),\n        dp3 = getSignedDistance(q0x, q0y, q3x, q3y, v1[6], v1[7]),\n        hull = getConvexHull(dp0, dp1, dp2, dp3),\n        top = hull[0],\n        bottom = hull[1],\n        tMinClip,\n        tMaxClip;\n      if (d1 === 0 && d2 === 0 && dp0 === 0 && dp1 === 0 && dp2 === 0 && dp3 === 0 || (tMinClip = clipConvexHull(top, bottom, dMin, dMax)) == null || (tMaxClip = clipConvexHull(top.reverse(), bottom.reverse(), dMin, dMax)) == null) return calls;\n      var tMinNew = tMin + (tMax - tMin) * tMinClip,\n        tMaxNew = tMin + (tMax - tMin) * tMaxClip;\n      if (Math.max(uMax - uMin, tMaxNew - tMinNew) < fatLineEpsilon) {\n        var t = (tMinNew + tMaxNew) / 2,\n          u = (uMin + uMax) / 2;\n        addLocation(locations, include, flip ? c2 : c1, flip ? u : t, flip ? c1 : c2, flip ? t : u);\n      } else {\n        v1 = Curve.getPart(v1, tMinClip, tMaxClip);\n        var uDiff = uMax - uMin;\n        if (tMaxClip - tMinClip > 0.8) {\n          if (tMaxNew - tMinNew > uDiff) {\n            var parts = Curve.subdivide(v1, 0.5),\n              t = (tMinNew + tMaxNew) / 2;\n            calls = addCurveIntersections(v2, parts[0], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, t);\n            calls = addCurveIntersections(v2, parts[1], c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, t, tMaxNew);\n          } else {\n            var parts = Curve.subdivide(v2, 0.5),\n              u = (uMin + uMax) / 2;\n            calls = addCurveIntersections(parts[0], v1, c2, c1, locations, include, !flip, recursion, calls, uMin, u, tMinNew, tMaxNew);\n            calls = addCurveIntersections(parts[1], v1, c2, c1, locations, include, !flip, recursion, calls, u, uMax, tMinNew, tMaxNew);\n          }\n        } else {\n          if (uDiff === 0 || uDiff >= fatLineEpsilon) {\n            calls = addCurveIntersections(v2, v1, c2, c1, locations, include, !flip, recursion, calls, uMin, uMax, tMinNew, tMaxNew);\n          } else {\n            calls = addCurveIntersections(v1, v2, c1, c2, locations, include, flip, recursion, calls, tMinNew, tMaxNew, uMin, uMax);\n          }\n        }\n      }\n      return calls;\n    }\n    function getConvexHull(dq0, dq1, dq2, dq3) {\n      var p0 = [0, dq0],\n        p1 = [1 / 3, dq1],\n        p2 = [2 / 3, dq2],\n        p3 = [1, dq3],\n        dist1 = dq1 - (2 * dq0 + dq3) / 3,\n        dist2 = dq2 - (dq0 + 2 * dq3) / 3,\n        hull;\n      if (dist1 * dist2 < 0) {\n        hull = [[p0, p1, p3], [p0, p2, p3]];\n      } else {\n        var distRatio = dist1 / dist2;\n        hull = [distRatio >= 2 ? [p0, p1, p3] : distRatio <= 0.5 ? [p0, p2, p3] : [p0, p1, p2, p3], [p0, p3]];\n      }\n      return (dist1 || dist2) < 0 ? hull.reverse() : hull;\n    }\n    function clipConvexHull(hullTop, hullBottom, dMin, dMax) {\n      if (hullTop[0][1] < dMin) {\n        return clipConvexHullPart(hullTop, true, dMin);\n      } else if (hullBottom[0][1] > dMax) {\n        return clipConvexHullPart(hullBottom, false, dMax);\n      } else {\n        return hullTop[0][0];\n      }\n    }\n    function clipConvexHullPart(part, top, threshold) {\n      var px = part[0][0],\n        py = part[0][1];\n      for (var i = 1, l = part.length; i < l; i++) {\n        var qx = part[i][0],\n          qy = part[i][1];\n        if (top ? qy >= threshold : qy <= threshold) {\n          return qy === threshold ? qx : px + (threshold - py) * (qx - px) / (qy - py);\n        }\n        px = qx;\n        py = qy;\n      }\n      return null;\n    }\n    function getCurveLineIntersections(v, px, py, vx, vy) {\n      var isZero = Numerical.isZero;\n      if (isZero(vx) && isZero(vy)) {\n        var t = Curve.getTimeOf(v, new Point(px, py));\n        return t === null ? [] : [t];\n      }\n      var angle = Math.atan2(-vy, vx),\n        sin = Math.sin(angle),\n        cos = Math.cos(angle),\n        rv = [],\n        roots = [];\n      for (var i = 0; i < 8; i += 2) {\n        var x = v[i] - px,\n          y = v[i + 1] - py;\n        rv.push(x * cos - y * sin, x * sin + y * cos);\n      }\n      Curve.solveCubic(rv, 1, 0, roots, 0, 1);\n      return roots;\n    }\n    function addCurveLineIntersections(v1, v2, c1, c2, locations, include, flip) {\n      var x1 = v2[0],\n        y1 = v2[1],\n        x2 = v2[6],\n        y2 = v2[7],\n        roots = getCurveLineIntersections(v1, x1, y1, x2 - x1, y2 - y1);\n      for (var i = 0, l = roots.length; i < l; i++) {\n        var t1 = roots[i],\n          p1 = Curve.getPoint(v1, t1),\n          t2 = Curve.getTimeOf(v2, p1);\n        if (t2 !== null) {\n          addLocation(locations, include, flip ? c2 : c1, flip ? t2 : t1, flip ? c1 : c2, flip ? t1 : t2);\n        }\n      }\n    }\n    function addLineIntersection(v1, v2, c1, c2, locations, include) {\n      var pt = Line.intersect(v1[0], v1[1], v1[6], v1[7], v2[0], v2[1], v2[6], v2[7]);\n      if (pt) {\n        addLocation(locations, include, c1, Curve.getTimeOf(v1, pt), c2, Curve.getTimeOf(v2, pt));\n      }\n    }\n    function getCurveIntersections(v1, v2, c1, c2, locations, include) {\n      var epsilon = 1e-12,\n        min = Math.min,\n        max = Math.max;\n      if (max(v1[0], v1[2], v1[4], v1[6]) + epsilon > min(v2[0], v2[2], v2[4], v2[6]) && min(v1[0], v1[2], v1[4], v1[6]) - epsilon < max(v2[0], v2[2], v2[4], v2[6]) && max(v1[1], v1[3], v1[5], v1[7]) + epsilon > min(v2[1], v2[3], v2[5], v2[7]) && min(v1[1], v1[3], v1[5], v1[7]) - epsilon < max(v2[1], v2[3], v2[5], v2[7])) {\n        var overlaps = getOverlaps(v1, v2);\n        if (overlaps) {\n          for (var i = 0; i < 2; i++) {\n            var overlap = overlaps[i];\n            addLocation(locations, include, c1, overlap[0], c2, overlap[1], true);\n          }\n        } else {\n          var straight1 = Curve.isStraight(v1),\n            straight2 = Curve.isStraight(v2),\n            straight = straight1 && straight2,\n            flip = straight1 && !straight2,\n            before = locations.length;\n          (straight ? addLineIntersection : straight1 || straight2 ? addCurveLineIntersections : addCurveIntersections)(flip ? v2 : v1, flip ? v1 : v2, flip ? c2 : c1, flip ? c1 : c2, locations, include, flip, 0, 0, 0, 1, 0, 1);\n          if (!straight || locations.length === before) {\n            for (var i = 0; i < 4; i++) {\n              var t1 = i >> 1,\n                t2 = i & 1,\n                i1 = t1 * 6,\n                i2 = t2 * 6,\n                p1 = new Point(v1[i1], v1[i1 + 1]),\n                p2 = new Point(v2[i2], v2[i2 + 1]);\n              if (p1.isClose(p2, epsilon)) {\n                addLocation(locations, include, c1, t1, c2, t2);\n              }\n            }\n          }\n        }\n      }\n      return locations;\n    }\n    function getSelfIntersection(v1, c1, locations, include) {\n      var info = Curve.classify(v1);\n      if (info.type === 'loop') {\n        var roots = info.roots;\n        addLocation(locations, include, c1, roots[0], c1, roots[1]);\n      }\n      return locations;\n    }\n    function getIntersections(curves1, curves2, include, matrix1, matrix2, _returnFirst) {\n      var epsilon = 1e-7,\n        self = !curves2;\n      if (self) curves2 = curves1;\n      var length1 = curves1.length,\n        length2 = curves2.length,\n        values1 = new Array(length1),\n        values2 = self ? values1 : new Array(length2),\n        locations = [];\n      for (var i = 0; i < length1; i++) {\n        values1[i] = curves1[i].getValues(matrix1);\n      }\n      if (!self) {\n        for (var i = 0; i < length2; i++) {\n          values2[i] = curves2[i].getValues(matrix2);\n        }\n      }\n      var boundsCollisions = CollisionDetection.findCurveBoundsCollisions(values1, values2, epsilon);\n      for (var index1 = 0; index1 < length1; index1++) {\n        var curve1 = curves1[index1],\n          v1 = values1[index1];\n        if (self) {\n          getSelfIntersection(v1, curve1, locations, include);\n        }\n        var collisions1 = boundsCollisions[index1];\n        if (collisions1) {\n          for (var j = 0; j < collisions1.length; j++) {\n            if (_returnFirst && locations.length) return locations;\n            var index2 = collisions1[j];\n            if (!self || index2 > index1) {\n              var curve2 = curves2[index2],\n                v2 = values2[index2];\n              getCurveIntersections(v1, v2, curve1, curve2, locations, include);\n            }\n          }\n        }\n      }\n      return locations;\n    }\n    function getOverlaps(v1, v2) {\n      function getSquaredLineLength(v) {\n        var x = v[6] - v[0],\n          y = v[7] - v[1];\n        return x * x + y * y;\n      }\n      var abs = Math.abs,\n        getDistance = Line.getDistance,\n        timeEpsilon = 1e-8,\n        geomEpsilon = 1e-7,\n        straight1 = Curve.isStraight(v1),\n        straight2 = Curve.isStraight(v2),\n        straightBoth = straight1 && straight2,\n        flip = getSquaredLineLength(v1) < getSquaredLineLength(v2),\n        l1 = flip ? v2 : v1,\n        l2 = flip ? v1 : v2,\n        px = l1[0],\n        py = l1[1],\n        vx = l1[6] - px,\n        vy = l1[7] - py;\n      if (getDistance(px, py, vx, vy, l2[0], l2[1], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[6], l2[7], true) < geomEpsilon) {\n        if (!straightBoth && getDistance(px, py, vx, vy, l1[2], l1[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l1[4], l1[5], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[2], l2[3], true) < geomEpsilon && getDistance(px, py, vx, vy, l2[4], l2[5], true) < geomEpsilon) {\n          straight1 = straight2 = straightBoth = true;\n        }\n      } else if (straightBoth) {\n        return null;\n      }\n      if (straight1 ^ straight2) {\n        return null;\n      }\n      var v = [v1, v2],\n        pairs = [];\n      for (var i = 0; i < 4 && pairs.length < 2; i++) {\n        var i1 = i & 1,\n          i2 = i1 ^ 1,\n          t1 = i >> 1,\n          t2 = Curve.getTimeOf(v[i1], new Point(v[i2][t1 ? 6 : 0], v[i2][t1 ? 7 : 1]));\n        if (t2 != null) {\n          var pair = i1 ? [t1, t2] : [t2, t1];\n          if (!pairs.length || abs(pair[0] - pairs[0][0]) > timeEpsilon && abs(pair[1] - pairs[0][1]) > timeEpsilon) {\n            pairs.push(pair);\n          }\n        }\n        if (i > 2 && !pairs.length) break;\n      }\n      if (pairs.length !== 2) {\n        pairs = null;\n      } else if (!straightBoth) {\n        var o1 = Curve.getPart(v1, pairs[0][0], pairs[1][0]),\n          o2 = Curve.getPart(v2, pairs[0][1], pairs[1][1]);\n        if (abs(o2[2] - o1[2]) > geomEpsilon || abs(o2[3] - o1[3]) > geomEpsilon || abs(o2[4] - o1[4]) > geomEpsilon || abs(o2[5] - o1[5]) > geomEpsilon) pairs = null;\n      }\n      return pairs;\n    }\n    function getTimesWithTangent(v, tangent) {\n      var x0 = v[0],\n        y0 = v[1],\n        x1 = v[2],\n        y1 = v[3],\n        x2 = v[4],\n        y2 = v[5],\n        x3 = v[6],\n        y3 = v[7],\n        normalized = tangent.normalize(),\n        tx = normalized.x,\n        ty = normalized.y,\n        ax = 3 * x3 - 9 * x2 + 9 * x1 - 3 * x0,\n        ay = 3 * y3 - 9 * y2 + 9 * y1 - 3 * y0,\n        bx = 6 * x2 - 12 * x1 + 6 * x0,\n        by = 6 * y2 - 12 * y1 + 6 * y0,\n        cx = 3 * x1 - 3 * x0,\n        cy = 3 * y1 - 3 * y0,\n        den = 2 * ax * ty - 2 * ay * tx,\n        times = [];\n      if (Math.abs(den) < Numerical.CURVETIME_EPSILON) {\n        var num = ax * cy - ay * cx,\n          den = ax * by - ay * bx;\n        if (den != 0) {\n          var t = -num / den;\n          if (t >= 0 && t <= 1) times.push(t);\n        }\n      } else {\n        var delta = (bx * bx - 4 * ax * cx) * ty * ty + (-2 * bx * by + 4 * ay * cx + 4 * ax * cy) * tx * ty + (by * by - 4 * ay * cy) * tx * tx,\n          k = bx * ty - by * tx;\n        if (delta >= 0 && den != 0) {\n          var d = Math.sqrt(delta),\n            t0 = -(k + d) / den,\n            t1 = (-k + d) / den;\n          if (t0 >= 0 && t0 <= 1) times.push(t0);\n          if (t1 >= 0 && t1 <= 1) times.push(t1);\n        }\n      }\n      return times;\n    }\n    return {\n      getIntersections: function (curve) {\n        var v1 = this.getValues(),\n          v2 = curve && curve !== this && curve.getValues();\n        return v2 ? getCurveIntersections(v1, v2, this, curve, []) : getSelfIntersection(v1, this, []);\n      },\n      statics: {\n        getOverlaps: getOverlaps,\n        getIntersections: getIntersections,\n        getCurveLineIntersections: getCurveLineIntersections,\n        getTimesWithTangent: getTimesWithTangent\n      }\n    };\n  }());\n  var CurveLocation = Base.extend({\n    _class: 'CurveLocation',\n    initialize: function CurveLocation(curve, time, point, _overlap, _distance) {\n      if (time >= 0.99999999) {\n        var next = curve.getNext();\n        if (next) {\n          time = 0;\n          curve = next;\n        }\n      }\n      this._setCurve(curve);\n      this._time = time;\n      this._point = point || curve.getPointAtTime(time);\n      this._overlap = _overlap;\n      this._distance = _distance;\n      this._intersection = this._next = this._previous = null;\n    },\n    _setPath: function (path) {\n      this._path = path;\n      this._version = path ? path._version : 0;\n    },\n    _setCurve: function (curve) {\n      this._setPath(curve._path);\n      this._curve = curve;\n      this._segment = null;\n      this._segment1 = curve._segment1;\n      this._segment2 = curve._segment2;\n    },\n    _setSegment: function (segment) {\n      var curve = segment.getCurve();\n      if (curve) {\n        this._setCurve(curve);\n      } else {\n        this._setPath(segment._path);\n        this._segment1 = segment;\n        this._segment2 = null;\n      }\n      this._segment = segment;\n      this._time = segment === this._segment1 ? 0 : 1;\n      this._point = segment._point.clone();\n    },\n    getSegment: function () {\n      var segment = this._segment;\n      if (!segment) {\n        var curve = this.getCurve(),\n          time = this.getTime();\n        if (time === 0) {\n          segment = curve._segment1;\n        } else if (time === 1) {\n          segment = curve._segment2;\n        } else if (time != null) {\n          segment = curve.getPartLength(0, time) < curve.getPartLength(time, 1) ? curve._segment1 : curve._segment2;\n        }\n        this._segment = segment;\n      }\n      return segment;\n    },\n    getCurve: function () {\n      var path = this._path,\n        that = this;\n      if (path && path._version !== this._version) {\n        this._time = this._offset = this._curveOffset = this._curve = null;\n      }\n      function trySegment(segment) {\n        var curve = segment && segment.getCurve();\n        if (curve && (that._time = curve.getTimeOf(that._point)) != null) {\n          that._setCurve(curve);\n          return curve;\n        }\n      }\n      return this._curve || trySegment(this._segment) || trySegment(this._segment1) || trySegment(this._segment2.getPrevious());\n    },\n    getPath: function () {\n      var curve = this.getCurve();\n      return curve && curve._path;\n    },\n    getIndex: function () {\n      var curve = this.getCurve();\n      return curve && curve.getIndex();\n    },\n    getTime: function () {\n      var curve = this.getCurve(),\n        time = this._time;\n      return curve && time == null ? this._time = curve.getTimeOf(this._point) : time;\n    },\n    getParameter: '#getTime',\n    getPoint: function () {\n      return this._point;\n    },\n    getOffset: function () {\n      var offset = this._offset;\n      if (offset == null) {\n        offset = 0;\n        var path = this.getPath(),\n          index = this.getIndex();\n        if (path && index != null) {\n          var curves = path.getCurves();\n          for (var i = 0; i < index; i++) offset += curves[i].getLength();\n        }\n        this._offset = offset += this.getCurveOffset();\n      }\n      return offset;\n    },\n    getCurveOffset: function () {\n      var offset = this._curveOffset;\n      if (offset == null) {\n        var curve = this.getCurve(),\n          time = this.getTime();\n        this._curveOffset = offset = time != null && curve && curve.getPartLength(0, time);\n      }\n      return offset;\n    },\n    getIntersection: function () {\n      return this._intersection;\n    },\n    getDistance: function () {\n      return this._distance;\n    },\n    divide: function () {\n      var curve = this.getCurve(),\n        res = curve && curve.divideAtTime(this.getTime());\n      if (res) {\n        this._setSegment(res._segment1);\n      }\n      return res;\n    },\n    split: function () {\n      var curve = this.getCurve(),\n        path = curve._path,\n        res = curve && curve.splitAtTime(this.getTime());\n      if (res) {\n        this._setSegment(path.getLastSegment());\n      }\n      return res;\n    },\n    equals: function (loc, _ignoreOther) {\n      var res = this === loc;\n      if (!res && loc instanceof CurveLocation) {\n        var c1 = this.getCurve(),\n          c2 = loc.getCurve(),\n          p1 = c1._path,\n          p2 = c2._path;\n        if (p1 === p2) {\n          var abs = Math.abs,\n            epsilon = 1e-7,\n            diff = abs(this.getOffset() - loc.getOffset()),\n            i1 = !_ignoreOther && this._intersection,\n            i2 = !_ignoreOther && loc._intersection;\n          res = (diff < epsilon || p1 && abs(p1.getLength() - diff) < epsilon) && (!i1 && !i2 || i1 && i2 && i1.equals(i2, true));\n        }\n      }\n      return res;\n    },\n    toString: function () {\n      var parts = [],\n        point = this.getPoint(),\n        f = Formatter.instance;\n      if (point) parts.push('point: ' + point);\n      var index = this.getIndex();\n      if (index != null) parts.push('index: ' + index);\n      var time = this.getTime();\n      if (time != null) parts.push('time: ' + f.number(time));\n      if (this._distance != null) parts.push('distance: ' + f.number(this._distance));\n      return '{ ' + parts.join(', ') + ' }';\n    },\n    isTouching: function () {\n      var inter = this._intersection;\n      if (inter && this.getTangent().isCollinear(inter.getTangent())) {\n        var curve1 = this.getCurve(),\n          curve2 = inter.getCurve();\n        return !(curve1.isStraight() && curve2.isStraight() && curve1.getLine().intersect(curve2.getLine()));\n      }\n      return false;\n    },\n    isCrossing: function () {\n      var inter = this._intersection;\n      if (!inter) return false;\n      var t1 = this.getTime(),\n        t2 = inter.getTime(),\n        tMin = 1e-8,\n        tMax = 1 - tMin,\n        t1Inside = t1 >= tMin && t1 <= tMax,\n        t2Inside = t2 >= tMin && t2 <= tMax;\n      if (t1Inside && t2Inside) return !this.isTouching();\n      var c2 = this.getCurve(),\n        c1 = c2 && t1 < tMin ? c2.getPrevious() : c2,\n        c4 = inter.getCurve(),\n        c3 = c4 && t2 < tMin ? c4.getPrevious() : c4;\n      if (t1 > tMax) c2 = c2.getNext();\n      if (t2 > tMax) c4 = c4.getNext();\n      if (!c1 || !c2 || !c3 || !c4) return false;\n      var offsets = [];\n      function addOffsets(curve, end) {\n        var v = curve.getValues(),\n          roots = Curve.classify(v).roots || Curve.getPeaks(v),\n          count = roots.length,\n          offset = Curve.getLength(v, end && count ? roots[count - 1] : 0, !end && count ? roots[0] : 1);\n        offsets.push(count ? offset : offset / 32);\n      }\n      function isInRange(angle, min, max) {\n        return min < max ? angle > min && angle < max : angle > min || angle < max;\n      }\n      if (!t1Inside) {\n        addOffsets(c1, true);\n        addOffsets(c2, false);\n      }\n      if (!t2Inside) {\n        addOffsets(c3, true);\n        addOffsets(c4, false);\n      }\n      var pt = this.getPoint(),\n        offset = Math.min.apply(Math, offsets),\n        v2 = t1Inside ? c2.getTangentAtTime(t1) : c2.getPointAt(offset).subtract(pt),\n        v1 = t1Inside ? v2.negate() : c1.getPointAt(-offset).subtract(pt),\n        v4 = t2Inside ? c4.getTangentAtTime(t2) : c4.getPointAt(offset).subtract(pt),\n        v3 = t2Inside ? v4.negate() : c3.getPointAt(-offset).subtract(pt),\n        a1 = v1.getAngle(),\n        a2 = v2.getAngle(),\n        a3 = v3.getAngle(),\n        a4 = v4.getAngle();\n      return !!(t1Inside ? isInRange(a1, a3, a4) ^ isInRange(a2, a3, a4) && isInRange(a1, a4, a3) ^ isInRange(a2, a4, a3) : isInRange(a3, a1, a2) ^ isInRange(a4, a1, a2) && isInRange(a3, a2, a1) ^ isInRange(a4, a2, a1));\n    },\n    hasOverlap: function () {\n      return !!this._overlap;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    var get = name + 'At';\n    this[name] = function () {\n      var curve = this.getCurve(),\n        time = this.getTime();\n      return time != null && curve && curve[get](time, true);\n    };\n  }, {\n    preserve: true\n  }), new function () {\n    function insert(locations, loc, merge) {\n      var length = locations.length,\n        l = 0,\n        r = length - 1;\n      function search(index, dir) {\n        for (var i = index + dir; i >= -1 && i <= length; i += dir) {\n          var loc2 = locations[(i % length + length) % length];\n          if (!loc.getPoint().isClose(loc2.getPoint(), 1e-7)) break;\n          if (loc.equals(loc2)) return loc2;\n        }\n        return null;\n      }\n      while (l <= r) {\n        var m = l + r >>> 1,\n          loc2 = locations[m],\n          found;\n        if (merge && (found = loc.equals(loc2) ? loc2 : search(m, -1) || search(m, 1))) {\n          if (loc._overlap) {\n            found._overlap = found._intersection._overlap = true;\n          }\n          return found;\n        }\n        var path1 = loc.getPath(),\n          path2 = loc2.getPath(),\n          diff = path1 !== path2 ? path1._id - path2._id : loc.getIndex() + loc.getTime() - (loc2.getIndex() + loc2.getTime());\n        if (diff < 0) {\n          r = m - 1;\n        } else {\n          l = m + 1;\n        }\n      }\n      locations.splice(l, 0, loc);\n      return loc;\n    }\n    return {\n      statics: {\n        insert: insert,\n        expand: function (locations) {\n          var expanded = locations.slice();\n          for (var i = locations.length - 1; i >= 0; i--) {\n            insert(expanded, locations[i]._intersection, false);\n          }\n          return expanded;\n        }\n      }\n    };\n  }());\n  var PathItem = Item.extend({\n    _class: 'PathItem',\n    _selectBounds: false,\n    _canScaleStroke: true,\n    beans: true,\n    initialize: function PathItem() {},\n    statics: {\n      create: function (arg) {\n        var data, segments, compound;\n        if (Base.isPlainObject(arg)) {\n          segments = arg.segments;\n          data = arg.pathData;\n        } else if (Array.isArray(arg)) {\n          segments = arg;\n        } else if (typeof arg === 'string') {\n          data = arg;\n        }\n        if (segments) {\n          var first = segments[0];\n          compound = first && Array.isArray(first[0]);\n        } else if (data) {\n          compound = (data.match(/m/gi) || []).length > 1 || /z\\s*\\S+/i.test(data);\n        }\n        var ctor = compound ? CompoundPath : Path;\n        return new ctor(arg);\n      }\n    },\n    _asPathItem: function () {\n      return this;\n    },\n    isClockwise: function () {\n      return this.getArea() >= 0;\n    },\n    setClockwise: function (clockwise) {\n      if (this.isClockwise() != (clockwise = !!clockwise)) this.reverse();\n    },\n    setPathData: function (data) {\n      var parts = data && data.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),\n        coords,\n        relative = false,\n        previous,\n        control,\n        current = new Point(),\n        start = new Point();\n      function getCoord(index, coord) {\n        var val = +coords[index];\n        if (relative) val += current[coord];\n        return val;\n      }\n      function getPoint(index) {\n        return new Point(getCoord(index, 'x'), getCoord(index + 1, 'y'));\n      }\n      this.clear();\n      for (var i = 0, l = parts && parts.length; i < l; i++) {\n        var part = parts[i],\n          command = part[0],\n          lower = command.toLowerCase();\n        coords = part.match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g);\n        var length = coords && coords.length;\n        relative = command === lower;\n        if (previous === 'z' && !/[mz]/.test(lower)) this.moveTo(current);\n        switch (lower) {\n          case 'm':\n          case 'l':\n            var move = lower === 'm';\n            for (var j = 0; j < length; j += 2) {\n              this[move ? 'moveTo' : 'lineTo'](current = getPoint(j));\n              if (move) {\n                start = current;\n                move = false;\n              }\n            }\n            control = current;\n            break;\n          case 'h':\n          case 'v':\n            var coord = lower === 'h' ? 'x' : 'y';\n            current = current.clone();\n            for (var j = 0; j < length; j++) {\n              current[coord] = getCoord(j, coord);\n              this.lineTo(current);\n            }\n            control = current;\n            break;\n          case 'c':\n            for (var j = 0; j < length; j += 6) {\n              this.cubicCurveTo(getPoint(j), control = getPoint(j + 2), current = getPoint(j + 4));\n            }\n            break;\n          case 's':\n            for (var j = 0; j < length; j += 4) {\n              this.cubicCurveTo(/[cs]/.test(previous) ? current.multiply(2).subtract(control) : current, control = getPoint(j), current = getPoint(j + 2));\n              previous = lower;\n            }\n            break;\n          case 'q':\n            for (var j = 0; j < length; j += 4) {\n              this.quadraticCurveTo(control = getPoint(j), current = getPoint(j + 2));\n            }\n            break;\n          case 't':\n            for (var j = 0; j < length; j += 2) {\n              this.quadraticCurveTo(control = /[qt]/.test(previous) ? current.multiply(2).subtract(control) : current, current = getPoint(j));\n              previous = lower;\n            }\n            break;\n          case 'a':\n            for (var j = 0; j < length; j += 7) {\n              this.arcTo(current = getPoint(j + 5), new Size(+coords[j], +coords[j + 1]), +coords[j + 2], +coords[j + 4], +coords[j + 3]);\n            }\n            break;\n          case 'z':\n            this.closePath(1e-12);\n            current = start;\n            break;\n        }\n        previous = lower;\n      }\n    },\n    _canComposite: function () {\n      return !(this.hasFill() && this.hasStroke());\n    },\n    _contains: function (point) {\n      var winding = point.isInside(this.getBounds({\n        internal: true,\n        handle: true\n      })) ? this._getWinding(point) : {};\n      return winding.onPath || !!(this.getFillRule() === 'evenodd' ? winding.windingL & 1 || winding.windingR & 1 : winding.winding);\n    },\n    getIntersections: function (path, include, _matrix, _returnFirst) {\n      var self = this === path || !path,\n        matrix1 = this._matrix._orNullIfIdentity(),\n        matrix2 = self ? matrix1 : (_matrix || path._matrix)._orNullIfIdentity();\n      return self || this.getBounds(matrix1).intersects(path.getBounds(matrix2), 1e-12) ? Curve.getIntersections(this.getCurves(), !self && path.getCurves(), include, matrix1, matrix2, _returnFirst) : [];\n    },\n    getCrossings: function (path) {\n      return this.getIntersections(path, function (inter) {\n        return inter.isCrossing();\n      });\n    },\n    getNearestLocation: function () {\n      var point = Point.read(arguments),\n        curves = this.getCurves(),\n        minDist = Infinity,\n        minLoc = null;\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getNearestLocation(point);\n        if (loc._distance < minDist) {\n          minDist = loc._distance;\n          minLoc = loc;\n        }\n      }\n      return minLoc;\n    },\n    getNearestPoint: function () {\n      var loc = this.getNearestLocation.apply(this, arguments);\n      return loc ? loc.getPoint() : loc;\n    },\n    interpolate: function (from, to, factor) {\n      var isPath = !this._children,\n        name = isPath ? '_segments' : '_children',\n        itemsFrom = from[name],\n        itemsTo = to[name],\n        items = this[name];\n      if (!itemsFrom || !itemsTo || itemsFrom.length !== itemsTo.length) {\n        throw new Error('Invalid operands in interpolate() call: ' + from + ', ' + to);\n      }\n      var current = items.length,\n        length = itemsTo.length;\n      if (current < length) {\n        var ctor = isPath ? Segment : Path;\n        for (var i = current; i < length; i++) {\n          this.add(new ctor());\n        }\n      } else if (current > length) {\n        this[isPath ? 'removeSegments' : 'removeChildren'](length, current);\n      }\n      for (var i = 0; i < length; i++) {\n        items[i].interpolate(itemsFrom[i], itemsTo[i], factor);\n      }\n      if (isPath) {\n        this.setClosed(from._closed);\n        this._changed(9);\n      }\n    },\n    compare: function (path) {\n      var ok = false;\n      if (path) {\n        var paths1 = this._children || [this],\n          paths2 = path._children ? path._children.slice() : [path],\n          length1 = paths1.length,\n          length2 = paths2.length,\n          matched = [],\n          count = 0;\n        ok = true;\n        var boundsOverlaps = CollisionDetection.findItemBoundsCollisions(paths1, paths2, Numerical.GEOMETRIC_EPSILON);\n        for (var i1 = length1 - 1; i1 >= 0 && ok; i1--) {\n          var path1 = paths1[i1];\n          ok = false;\n          var pathBoundsOverlaps = boundsOverlaps[i1];\n          if (pathBoundsOverlaps) {\n            for (var i2 = pathBoundsOverlaps.length - 1; i2 >= 0 && !ok; i2--) {\n              if (path1.compare(paths2[pathBoundsOverlaps[i2]])) {\n                if (!matched[pathBoundsOverlaps[i2]]) {\n                  matched[pathBoundsOverlaps[i2]] = true;\n                  count++;\n                }\n                ok = true;\n              }\n            }\n          }\n        }\n        ok = ok && count === length2;\n      }\n      return ok;\n    }\n  });\n  var Path = PathItem.extend({\n    _class: 'Path',\n    _serializeFields: {\n      segments: [],\n      closed: false\n    },\n    initialize: function Path(arg) {\n      this._closed = false;\n      this._segments = [];\n      this._version = 0;\n      var args = arguments,\n        segments = Array.isArray(arg) ? typeof arg[0] === 'object' ? arg : args : arg && arg.size === undefined && (arg.x !== undefined || arg.point !== undefined) ? args : null;\n      if (segments && segments.length > 0) {\n        this.setSegments(segments);\n      } else {\n        this._curves = undefined;\n        this._segmentSelection = 0;\n        if (!segments && typeof arg === 'string') {\n          this.setPathData(arg);\n          arg = null;\n        }\n      }\n      this._initialize(!segments && arg);\n    },\n    _equals: function (item) {\n      return this._closed === item._closed && Base.equals(this._segments, item._segments);\n    },\n    copyContent: function (source) {\n      this.setSegments(source._segments);\n      this._closed = source._closed;\n    },\n    _changed: function _changed(flags) {\n      _changed.base.call(this, flags);\n      if (flags & 8) {\n        this._length = this._area = undefined;\n        if (flags & 32) {\n          this._version++;\n        } else if (this._curves) {\n          for (var i = 0, l = this._curves.length; i < l; i++) this._curves[i]._changed();\n        }\n      } else if (flags & 64) {\n        this._bounds = undefined;\n      }\n    },\n    getStyle: function () {\n      var parent = this._parent;\n      return (parent instanceof CompoundPath ? parent : this)._style;\n    },\n    getSegments: function () {\n      return this._segments;\n    },\n    setSegments: function (segments) {\n      var fullySelected = this.isFullySelected(),\n        length = segments && segments.length;\n      this._segments.length = 0;\n      this._segmentSelection = 0;\n      this._curves = undefined;\n      if (length) {\n        var last = segments[length - 1];\n        if (typeof last === 'boolean') {\n          this.setClosed(last);\n          length--;\n        }\n        this._add(Segment.readList(segments, 0, {}, length));\n      }\n      if (fullySelected) this.setFullySelected(true);\n    },\n    getFirstSegment: function () {\n      return this._segments[0];\n    },\n    getLastSegment: function () {\n      return this._segments[this._segments.length - 1];\n    },\n    getCurves: function () {\n      var curves = this._curves,\n        segments = this._segments;\n      if (!curves) {\n        var length = this._countCurves();\n        curves = this._curves = new Array(length);\n        for (var i = 0; i < length; i++) curves[i] = new Curve(this, segments[i], segments[i + 1] || segments[0]);\n      }\n      return curves;\n    },\n    getFirstCurve: function () {\n      return this.getCurves()[0];\n    },\n    getLastCurve: function () {\n      var curves = this.getCurves();\n      return curves[curves.length - 1];\n    },\n    isClosed: function () {\n      return this._closed;\n    },\n    setClosed: function (closed) {\n      if (this._closed != (closed = !!closed)) {\n        this._closed = closed;\n        if (this._curves) {\n          var length = this._curves.length = this._countCurves();\n          if (closed) this._curves[length - 1] = new Curve(this, this._segments[length - 1], this._segments[0]);\n        }\n        this._changed(41);\n      }\n    }\n  }, {\n    beans: true,\n    getPathData: function (_matrix, _precision) {\n      var segments = this._segments,\n        length = segments.length,\n        f = new Formatter(_precision),\n        coords = new Array(6),\n        first = true,\n        curX,\n        curY,\n        prevX,\n        prevY,\n        inX,\n        inY,\n        outX,\n        outY,\n        parts = [];\n      function addSegment(segment, skipLine) {\n        segment._transformCoordinates(_matrix, coords);\n        curX = coords[0];\n        curY = coords[1];\n        if (first) {\n          parts.push('M' + f.pair(curX, curY));\n          first = false;\n        } else {\n          inX = coords[2];\n          inY = coords[3];\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            if (!skipLine) {\n              var dx = curX - prevX,\n                dy = curY - prevY;\n              parts.push(dx === 0 ? 'v' + f.number(dy) : dy === 0 ? 'h' + f.number(dx) : 'l' + f.pair(dx, dy));\n            }\n          } else {\n            parts.push('c' + f.pair(outX - prevX, outY - prevY) + ' ' + f.pair(inX - prevX, inY - prevY) + ' ' + f.pair(curX - prevX, curY - prevY));\n          }\n        }\n        prevX = curX;\n        prevY = curY;\n        outX = coords[4];\n        outY = coords[5];\n      }\n      if (!length) return '';\n      for (var i = 0; i < length; i++) addSegment(segments[i]);\n      if (this._closed && length > 0) {\n        addSegment(segments[0], true);\n        parts.push('z');\n      }\n      return parts.join('');\n    },\n    isEmpty: function () {\n      return !this._segments.length;\n    },\n    _transformContent: function (matrix) {\n      var segments = this._segments,\n        coords = new Array(6);\n      for (var i = 0, l = segments.length; i < l; i++) segments[i]._transformCoordinates(matrix, coords, true);\n      return true;\n    },\n    _add: function (segs, index) {\n      var segments = this._segments,\n        curves = this._curves,\n        amount = segs.length,\n        append = index == null,\n        index = append ? segments.length : index;\n      for (var i = 0; i < amount; i++) {\n        var segment = segs[i];\n        if (segment._path) segment = segs[i] = segment.clone();\n        segment._path = this;\n        segment._index = index + i;\n        if (segment._selection) this._updateSelection(segment, 0, segment._selection);\n      }\n      if (append) {\n        Base.push(segments, segs);\n      } else {\n        segments.splice.apply(segments, [index, 0].concat(segs));\n        for (var i = index + amount, l = segments.length; i < l; i++) segments[i]._index = i;\n      }\n      if (curves) {\n        var total = this._countCurves(),\n          start = index > 0 && index + amount - 1 === total ? index - 1 : index,\n          insert = start,\n          end = Math.min(start + amount, total);\n        if (segs._curves) {\n          curves.splice.apply(curves, [start, 0].concat(segs._curves));\n          insert += segs._curves.length;\n        }\n        for (var i = insert; i < end; i++) curves.splice(i, 0, new Curve(this, null, null));\n        this._adjustCurves(start, end);\n      }\n      this._changed(41);\n      return segs;\n    },\n    _adjustCurves: function (start, end) {\n      var segments = this._segments,\n        curves = this._curves,\n        curve;\n      for (var i = start; i < end; i++) {\n        curve = curves[i];\n        curve._path = this;\n        curve._segment1 = segments[i];\n        curve._segment2 = segments[i + 1] || segments[0];\n        curve._changed();\n      }\n      if (curve = curves[this._closed && !start ? segments.length - 1 : start - 1]) {\n        curve._segment2 = segments[start] || segments[0];\n        curve._changed();\n      }\n      if (curve = curves[end]) {\n        curve._segment1 = segments[end];\n        curve._changed();\n      }\n    },\n    _countCurves: function () {\n      var length = this._segments.length;\n      return !this._closed && length > 0 ? length - 1 : length;\n    },\n    add: function (segment1) {\n      var args = arguments;\n      return args.length > 1 && typeof segment1 !== 'number' ? this._add(Segment.readList(args)) : this._add([Segment.read(args)])[0];\n    },\n    insert: function (index, segment1) {\n      var args = arguments;\n      return args.length > 2 && typeof segment1 !== 'number' ? this._add(Segment.readList(args, 1), index) : this._add([Segment.read(args, 1)], index)[0];\n    },\n    addSegment: function () {\n      return this._add([Segment.read(arguments)])[0];\n    },\n    insertSegment: function (index) {\n      return this._add([Segment.read(arguments, 1)], index)[0];\n    },\n    addSegments: function (segments) {\n      return this._add(Segment.readList(segments));\n    },\n    insertSegments: function (index, segments) {\n      return this._add(Segment.readList(segments), index);\n    },\n    removeSegment: function (index) {\n      return this.removeSegments(index, index + 1)[0] || null;\n    },\n    removeSegments: function (start, end, _includeCurves) {\n      start = start || 0;\n      end = Base.pick(end, this._segments.length);\n      var segments = this._segments,\n        curves = this._curves,\n        count = segments.length,\n        removed = segments.splice(start, end - start),\n        amount = removed.length;\n      if (!amount) return removed;\n      for (var i = 0; i < amount; i++) {\n        var segment = removed[i];\n        if (segment._selection) this._updateSelection(segment, segment._selection, 0);\n        segment._index = segment._path = null;\n      }\n      for (var i = start, l = segments.length; i < l; i++) segments[i]._index = i;\n      if (curves) {\n        var index = start > 0 && end === count + (this._closed ? 1 : 0) ? start - 1 : start,\n          curves = curves.splice(index, amount);\n        for (var i = curves.length - 1; i >= 0; i--) curves[i]._path = null;\n        if (_includeCurves) removed._curves = curves.slice(1);\n        this._adjustCurves(index, index);\n      }\n      this._changed(41);\n      return removed;\n    },\n    clear: '#removeSegments',\n    hasHandles: function () {\n      var segments = this._segments;\n      for (var i = 0, l = segments.length; i < l; i++) {\n        if (segments[i].hasHandles()) return true;\n      }\n      return false;\n    },\n    clearHandles: function () {\n      var segments = this._segments;\n      for (var i = 0, l = segments.length; i < l; i++) segments[i].clearHandles();\n    },\n    getLength: function () {\n      if (this._length == null) {\n        var curves = this.getCurves(),\n          length = 0;\n        for (var i = 0, l = curves.length; i < l; i++) length += curves[i].getLength();\n        this._length = length;\n      }\n      return this._length;\n    },\n    getArea: function () {\n      var area = this._area;\n      if (area == null) {\n        var segments = this._segments,\n          closed = this._closed;\n        area = 0;\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var last = i + 1 === l;\n          area += Curve.getArea(Curve.getValues(segments[i], segments[last ? 0 : i + 1], null, last && !closed));\n        }\n        this._area = area;\n      }\n      return area;\n    },\n    isFullySelected: function () {\n      var length = this._segments.length;\n      return this.isSelected() && length > 0 && this._segmentSelection === length * 7;\n    },\n    setFullySelected: function (selected) {\n      if (selected) this._selectSegments(true);\n      this.setSelected(selected);\n    },\n    setSelection: function setSelection(selection) {\n      if (!(selection & 1)) this._selectSegments(false);\n      setSelection.base.call(this, selection);\n    },\n    _selectSegments: function (selected) {\n      var segments = this._segments,\n        length = segments.length,\n        selection = selected ? 7 : 0;\n      this._segmentSelection = selection * length;\n      for (var i = 0; i < length; i++) segments[i]._selection = selection;\n    },\n    _updateSelection: function (segment, oldSelection, newSelection) {\n      segment._selection = newSelection;\n      var selection = this._segmentSelection += newSelection - oldSelection;\n      if (selection > 0) this.setSelected(true);\n    },\n    divideAt: function (location) {\n      var loc = this.getLocationAt(location),\n        curve;\n      return loc && (curve = loc.getCurve().divideAt(loc.getCurveOffset())) ? curve._segment1 : null;\n    },\n    splitAt: function (location) {\n      var loc = this.getLocationAt(location),\n        index = loc && loc.index,\n        time = loc && loc.time,\n        tMin = 1e-8,\n        tMax = 1 - tMin;\n      if (time > tMax) {\n        index++;\n        time = 0;\n      }\n      var curves = this.getCurves();\n      if (index >= 0 && index < curves.length) {\n        if (time >= tMin) {\n          curves[index++].divideAtTime(time);\n        }\n        var segs = this.removeSegments(index, this._segments.length, true),\n          path;\n        if (this._closed) {\n          this.setClosed(false);\n          path = this;\n        } else {\n          path = new Path(Item.NO_INSERT);\n          path.insertAbove(this);\n          path.copyAttributes(this);\n        }\n        path._add(segs, 0);\n        this.addSegment(segs[0]);\n        return path;\n      }\n      return null;\n    },\n    split: function (index, time) {\n      var curve,\n        location = time === undefined ? index : (curve = this.getCurves()[index]) && curve.getLocationAtTime(time);\n      return location != null ? this.splitAt(location) : null;\n    },\n    join: function (path, tolerance) {\n      var epsilon = tolerance || 0;\n      if (path && path !== this) {\n        var segments = path._segments,\n          last1 = this.getLastSegment(),\n          last2 = path.getLastSegment();\n        if (!last2) return this;\n        if (last1 && last1._point.isClose(last2._point, epsilon)) path.reverse();\n        var first2 = path.getFirstSegment();\n        if (last1 && last1._point.isClose(first2._point, epsilon)) {\n          last1.setHandleOut(first2._handleOut);\n          this._add(segments.slice(1));\n        } else {\n          var first1 = this.getFirstSegment();\n          if (first1 && first1._point.isClose(first2._point, epsilon)) path.reverse();\n          last2 = path.getLastSegment();\n          if (first1 && first1._point.isClose(last2._point, epsilon)) {\n            first1.setHandleIn(last2._handleIn);\n            this._add(segments.slice(0, segments.length - 1), 0);\n          } else {\n            this._add(segments.slice());\n          }\n        }\n        if (path._closed) this._add([segments[0]]);\n        path.remove();\n      }\n      var first = this.getFirstSegment(),\n        last = this.getLastSegment();\n      if (first !== last && first._point.isClose(last._point, epsilon)) {\n        first.setHandleIn(last._handleIn);\n        last.remove();\n        this.setClosed(true);\n      }\n      return this;\n    },\n    reduce: function (options) {\n      var curves = this.getCurves(),\n        simplify = options && options.simplify,\n        tolerance = simplify ? 1e-7 : 0;\n      for (var i = curves.length - 1; i >= 0; i--) {\n        var curve = curves[i];\n        if (!curve.hasHandles() && (!curve.hasLength(tolerance) || simplify && curve.isCollinear(curve.getNext()))) curve.remove();\n      }\n      return this;\n    },\n    reverse: function () {\n      this._segments.reverse();\n      for (var i = 0, l = this._segments.length; i < l; i++) {\n        var segment = this._segments[i];\n        var handleIn = segment._handleIn;\n        segment._handleIn = segment._handleOut;\n        segment._handleOut = handleIn;\n        segment._index = i;\n      }\n      this._curves = null;\n      this._changed(9);\n    },\n    flatten: function (flatness) {\n      var flattener = new PathFlattener(this, flatness || 0.25, 256, true),\n        parts = flattener.parts,\n        length = parts.length,\n        segments = [];\n      for (var i = 0; i < length; i++) {\n        segments.push(new Segment(parts[i].curve.slice(0, 2)));\n      }\n      if (!this._closed && length > 0) {\n        segments.push(new Segment(parts[length - 1].curve.slice(6)));\n      }\n      this.setSegments(segments);\n    },\n    simplify: function (tolerance) {\n      var segments = new PathFitter(this).fit(tolerance || 2.5);\n      if (segments) this.setSegments(segments);\n      return !!segments;\n    },\n    smooth: function (options) {\n      var that = this,\n        opts = options || {},\n        type = opts.type || 'asymmetric',\n        segments = this._segments,\n        length = segments.length,\n        closed = this._closed;\n      function getIndex(value, _default) {\n        var index = value && value.index;\n        if (index != null) {\n          var path = value.path;\n          if (path && path !== that) throw new Error(value._class + ' ' + index + ' of ' + path + ' is not part of ' + that);\n          if (_default && value instanceof Curve) index++;\n        } else {\n          index = typeof value === 'number' ? value : _default;\n        }\n        return Math.min(index < 0 && closed ? index % length : index < 0 ? index + length : index, length - 1);\n      }\n      var loop = closed && opts.from === undefined && opts.to === undefined,\n        from = getIndex(opts.from, 0),\n        to = getIndex(opts.to, length - 1);\n      if (from > to) {\n        if (closed) {\n          from -= length;\n        } else {\n          var tmp = from;\n          from = to;\n          to = tmp;\n        }\n      }\n      if (/^(?:asymmetric|continuous)$/.test(type)) {\n        var asymmetric = type === 'asymmetric',\n          min = Math.min,\n          amount = to - from + 1,\n          n = amount - 1,\n          padding = loop ? min(amount, 4) : 1,\n          paddingLeft = padding,\n          paddingRight = padding,\n          knots = [];\n        if (!closed) {\n          paddingLeft = min(1, from);\n          paddingRight = min(1, length - to - 1);\n        }\n        n += paddingLeft + paddingRight;\n        if (n <= 1) return;\n        for (var i = 0, j = from - paddingLeft; i <= n; i++, j++) {\n          knots[i] = segments[(j < 0 ? j + length : j) % length]._point;\n        }\n        var x = knots[0]._x + 2 * knots[1]._x,\n          y = knots[0]._y + 2 * knots[1]._y,\n          f = 2,\n          n_1 = n - 1,\n          rx = [x],\n          ry = [y],\n          rf = [f],\n          px = [],\n          py = [];\n        for (var i = 1; i < n; i++) {\n          var internal = i < n_1,\n            a = internal ? 1 : asymmetric ? 1 : 2,\n            b = internal ? 4 : asymmetric ? 2 : 7,\n            u = internal ? 4 : asymmetric ? 3 : 8,\n            v = internal ? 2 : asymmetric ? 0 : 1,\n            m = a / f;\n          f = rf[i] = b - m;\n          x = rx[i] = u * knots[i]._x + v * knots[i + 1]._x - m * x;\n          y = ry[i] = u * knots[i]._y + v * knots[i + 1]._y - m * y;\n        }\n        px[n_1] = rx[n_1] / rf[n_1];\n        py[n_1] = ry[n_1] / rf[n_1];\n        for (var i = n - 2; i >= 0; i--) {\n          px[i] = (rx[i] - px[i + 1]) / rf[i];\n          py[i] = (ry[i] - py[i + 1]) / rf[i];\n        }\n        px[n] = (3 * knots[n]._x - px[n_1]) / 2;\n        py[n] = (3 * knots[n]._y - py[n_1]) / 2;\n        for (var i = paddingLeft, max = n - paddingRight, j = from; i <= max; i++, j++) {\n          var segment = segments[j < 0 ? j + length : j],\n            pt = segment._point,\n            hx = px[i] - pt._x,\n            hy = py[i] - pt._y;\n          if (loop || i < max) segment.setHandleOut(hx, hy);\n          if (loop || i > paddingLeft) segment.setHandleIn(-hx, -hy);\n        }\n      } else {\n        for (var i = from; i <= to; i++) {\n          segments[i < 0 ? i + length : i].smooth(opts, !loop && i === from, !loop && i === to);\n        }\n      }\n    },\n    toShape: function (insert) {\n      if (!this._closed) return null;\n      var segments = this._segments,\n        type,\n        size,\n        radius,\n        topCenter;\n      function isCollinear(i, j) {\n        var seg1 = segments[i],\n          seg2 = seg1.getNext(),\n          seg3 = segments[j],\n          seg4 = seg3.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg3._handleOut.isZero() && seg4._handleIn.isZero() && seg2._point.subtract(seg1._point).isCollinear(seg4._point.subtract(seg3._point));\n      }\n      function isOrthogonal(i) {\n        var seg2 = segments[i],\n          seg1 = seg2.getPrevious(),\n          seg3 = seg2.getNext();\n        return seg1._handleOut.isZero() && seg2._handleIn.isZero() && seg2._handleOut.isZero() && seg3._handleIn.isZero() && seg2._point.subtract(seg1._point).isOrthogonal(seg3._point.subtract(seg2._point));\n      }\n      function isArc(i) {\n        var seg1 = segments[i],\n          seg2 = seg1.getNext(),\n          handle1 = seg1._handleOut,\n          handle2 = seg2._handleIn,\n          kappa = 0.5522847498307936;\n        if (handle1.isOrthogonal(handle2)) {\n          var pt1 = seg1._point,\n            pt2 = seg2._point,\n            corner = new Line(pt1, handle1, true).intersect(new Line(pt2, handle2, true), true);\n          return corner && Numerical.isZero(handle1.getLength() / corner.subtract(pt1).getLength() - kappa) && Numerical.isZero(handle2.getLength() / corner.subtract(pt2).getLength() - kappa);\n        }\n        return false;\n      }\n      function getDistance(i, j) {\n        return segments[i]._point.getDistance(segments[j]._point);\n      }\n      if (!this.hasHandles() && segments.length === 4 && isCollinear(0, 2) && isCollinear(1, 3) && isOrthogonal(1)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(0, 3), getDistance(0, 1));\n        topCenter = segments[1]._point.add(segments[2]._point).divide(2);\n      } else if (segments.length === 8 && isArc(0) && isArc(2) && isArc(4) && isArc(6) && isCollinear(1, 5) && isCollinear(3, 7)) {\n        type = Shape.Rectangle;\n        size = new Size(getDistance(1, 6), getDistance(0, 3));\n        radius = size.subtract(new Size(getDistance(0, 7), getDistance(1, 2))).divide(2);\n        topCenter = segments[3]._point.add(segments[4]._point).divide(2);\n      } else if (segments.length === 4 && isArc(0) && isArc(1) && isArc(2) && isArc(3)) {\n        if (Numerical.isZero(getDistance(0, 2) - getDistance(1, 3))) {\n          type = Shape.Circle;\n          radius = getDistance(0, 2) / 2;\n        } else {\n          type = Shape.Ellipse;\n          radius = new Size(getDistance(2, 0) / 2, getDistance(3, 1) / 2);\n        }\n        topCenter = segments[1]._point;\n      }\n      if (type) {\n        var center = this.getPosition(true),\n          shape = new type({\n            center: center,\n            size: size,\n            radius: radius,\n            insert: false\n          });\n        shape.copyAttributes(this, true);\n        shape._matrix.prepend(this._matrix);\n        shape.rotate(topCenter.subtract(center).getAngle() + 90);\n        if (insert === undefined || insert) shape.insertAbove(this);\n        return shape;\n      }\n      return null;\n    },\n    toPath: '#clone',\n    compare: function compare(path) {\n      if (!path || path instanceof CompoundPath) return compare.base.call(this, path);\n      var curves1 = this.getCurves(),\n        curves2 = path.getCurves(),\n        length1 = curves1.length,\n        length2 = curves2.length;\n      if (!length1 || !length2) {\n        return length1 == length2;\n      }\n      var v1 = curves1[0].getValues(),\n        values2 = [],\n        pos1 = 0,\n        pos2,\n        end1 = 0,\n        end2;\n      for (var i = 0; i < length2; i++) {\n        var v2 = curves2[i].getValues();\n        values2.push(v2);\n        var overlaps = Curve.getOverlaps(v1, v2);\n        if (overlaps) {\n          pos2 = !i && overlaps[0][0] > 0 ? length2 - 1 : i;\n          end2 = overlaps[0][1];\n          break;\n        }\n      }\n      var abs = Math.abs,\n        epsilon = 1e-8,\n        v2 = values2[pos2],\n        start2;\n      while (v1 && v2) {\n        var overlaps = Curve.getOverlaps(v1, v2);\n        if (overlaps) {\n          var t1 = overlaps[0][0];\n          if (abs(t1 - end1) < epsilon) {\n            end1 = overlaps[1][0];\n            if (end1 === 1) {\n              v1 = ++pos1 < length1 ? curves1[pos1].getValues() : null;\n              end1 = 0;\n            }\n            var t2 = overlaps[0][1];\n            if (abs(t2 - end2) < epsilon) {\n              if (!start2) start2 = [pos2, t2];\n              end2 = overlaps[1][1];\n              if (end2 === 1) {\n                if (++pos2 >= length2) pos2 = 0;\n                v2 = values2[pos2] || curves2[pos2].getValues();\n                end2 = 0;\n              }\n              if (!v1) {\n                return start2[0] === pos2 && start2[1] === end2;\n              }\n              continue;\n            }\n          }\n        }\n        break;\n      }\n      return false;\n    },\n    _hitTestSelf: function (point, options, viewMatrix, strokeMatrix) {\n      var that = this,\n        style = this.getStyle(),\n        segments = this._segments,\n        numSegments = segments.length,\n        closed = this._closed,\n        tolerancePadding = options._tolerancePadding,\n        strokePadding = tolerancePadding,\n        join,\n        cap,\n        miterLimit,\n        area,\n        loc,\n        res,\n        hitStroke = options.stroke && style.hasStroke(),\n        hitFill = options.fill && style.hasFill(),\n        hitCurves = options.curves,\n        strokeRadius = hitStroke ? style.getStrokeWidth() / 2 : hitFill && options.tolerance > 0 || hitCurves ? 0 : null;\n      if (strokeRadius !== null) {\n        if (strokeRadius > 0) {\n          join = style.getStrokeJoin();\n          cap = style.getStrokeCap();\n          miterLimit = style.getMiterLimit();\n          strokePadding = strokePadding.add(Path._getStrokePadding(strokeRadius, strokeMatrix));\n        } else {\n          join = cap = 'round';\n        }\n      }\n      function isCloseEnough(pt, padding) {\n        return point.subtract(pt).divide(padding).length <= 1;\n      }\n      function checkSegmentPoint(seg, pt, name) {\n        if (!options.selected || pt.isSelected()) {\n          var anchor = seg._point;\n          if (pt !== anchor) pt = pt.add(anchor);\n          if (isCloseEnough(pt, strokePadding)) {\n            return new HitResult(name, that, {\n              segment: seg,\n              point: pt\n            });\n          }\n        }\n      }\n      function checkSegmentPoints(seg, ends) {\n        return (ends || options.segments) && checkSegmentPoint(seg, seg._point, 'segment') || !ends && options.handles && (checkSegmentPoint(seg, seg._handleIn, 'handle-in') || checkSegmentPoint(seg, seg._handleOut, 'handle-out'));\n      }\n      function addToArea(point) {\n        area.add(point);\n      }\n      function checkSegmentStroke(segment) {\n        var isJoin = closed || segment._index > 0 && segment._index < numSegments - 1;\n        if ((isJoin ? join : cap) === 'round') {\n          return isCloseEnough(segment._point, strokePadding);\n        } else {\n          area = new Path({\n            internal: true,\n            closed: true\n          });\n          if (isJoin) {\n            if (!segment.isSmooth()) {\n              Path._addBevelJoin(segment, join, strokeRadius, miterLimit, null, strokeMatrix, addToArea, true);\n            }\n          } else if (cap === 'square') {\n            Path._addSquareCap(segment, cap, strokeRadius, null, strokeMatrix, addToArea, true);\n          }\n          if (!area.isEmpty()) {\n            var loc;\n            return area.contains(point) || (loc = area.getNearestLocation(point)) && isCloseEnough(loc.getPoint(), tolerancePadding);\n          }\n        }\n      }\n      if (options.ends && !options.segments && !closed) {\n        if (res = checkSegmentPoints(segments[0], true) || checkSegmentPoints(segments[numSegments - 1], true)) return res;\n      } else if (options.segments || options.handles) {\n        for (var i = 0; i < numSegments; i++) if (res = checkSegmentPoints(segments[i])) return res;\n      }\n      if (strokeRadius !== null) {\n        loc = this.getNearestLocation(point);\n        if (loc) {\n          var time = loc.getTime();\n          if (time === 0 || time === 1 && numSegments > 1) {\n            if (!checkSegmentStroke(loc.getSegment())) loc = null;\n          } else if (!isCloseEnough(loc.getPoint(), strokePadding)) {\n            loc = null;\n          }\n        }\n        if (!loc && join === 'miter' && numSegments > 1) {\n          for (var i = 0; i < numSegments; i++) {\n            var segment = segments[i];\n            if (point.getDistance(segment._point) <= miterLimit * strokeRadius && checkSegmentStroke(segment)) {\n              loc = segment.getLocation();\n              break;\n            }\n          }\n        }\n      }\n      return !loc && hitFill && this._contains(point) || loc && !hitStroke && !hitCurves ? new HitResult('fill', this) : loc ? new HitResult(hitStroke ? 'stroke' : 'curve', this, {\n        location: loc,\n        point: loc.getPoint()\n      }) : null;\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var loc = this.getLocationAt(offset);\n      return loc && loc[name]();\n    };\n  }, {\n    beans: false,\n    getLocationOf: function () {\n      var point = Point.read(arguments),\n        curves = this.getCurves();\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var loc = curves[i].getLocationOf(point);\n        if (loc) return loc;\n      }\n      return null;\n    },\n    getOffsetOf: function () {\n      var loc = this.getLocationOf.apply(this, arguments);\n      return loc ? loc.getOffset() : null;\n    },\n    getLocationAt: function (offset) {\n      if (typeof offset === 'number') {\n        var curves = this.getCurves(),\n          length = 0;\n        for (var i = 0, l = curves.length; i < l; i++) {\n          var start = length,\n            curve = curves[i];\n          length += curve.getLength();\n          if (length > offset) {\n            return curve.getLocationAt(offset - start);\n          }\n        }\n        if (curves.length > 0 && offset <= this.getLength()) {\n          return new CurveLocation(curves[curves.length - 1], 1);\n        }\n      } else if (offset && offset.getPath && offset.getPath() === this) {\n        return offset;\n      }\n      return null;\n    },\n    getOffsetsWithTangent: function () {\n      var tangent = Point.read(arguments);\n      if (tangent.isZero()) {\n        return [];\n      }\n      var offsets = [];\n      var curveStart = 0;\n      var curves = this.getCurves();\n      for (var i = 0, l = curves.length; i < l; i++) {\n        var curve = curves[i];\n        var curveTimes = curve.getTimesWithTangent(tangent);\n        for (var j = 0, m = curveTimes.length; j < m; j++) {\n          var offset = curveStart + curve.getOffsetAtTime(curveTimes[j]);\n          if (offsets.indexOf(offset) < 0) {\n            offsets.push(offset);\n          }\n        }\n        curveStart += curve.length;\n      }\n      return offsets;\n    }\n  }), new function () {\n    function drawHandles(ctx, segments, matrix, size) {\n      if (size <= 0) return;\n      var half = size / 2,\n        miniSize = size - 2,\n        miniHalf = half - 1,\n        coords = new Array(6),\n        pX,\n        pY;\n      function drawHandle(index) {\n        var hX = coords[index],\n          hY = coords[index + 1];\n        if (pX != hX || pY != hY) {\n          ctx.beginPath();\n          ctx.moveTo(pX, pY);\n          ctx.lineTo(hX, hY);\n          ctx.stroke();\n          ctx.beginPath();\n          ctx.arc(hX, hY, half, 0, Math.PI * 2, true);\n          ctx.fill();\n        }\n      }\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var segment = segments[i],\n          selection = segment._selection;\n        segment._transformCoordinates(matrix, coords);\n        pX = coords[0];\n        pY = coords[1];\n        if (selection & 2) drawHandle(2);\n        if (selection & 4) drawHandle(4);\n        ctx.fillRect(pX - half, pY - half, size, size);\n        if (miniSize > 0 && !(selection & 1)) {\n          var fillStyle = ctx.fillStyle;\n          ctx.fillStyle = '#ffffff';\n          ctx.fillRect(pX - miniHalf, pY - miniHalf, miniSize, miniSize);\n          ctx.fillStyle = fillStyle;\n        }\n      }\n    }\n    function drawSegments(ctx, path, matrix) {\n      var segments = path._segments,\n        length = segments.length,\n        coords = new Array(6),\n        first = true,\n        curX,\n        curY,\n        prevX,\n        prevY,\n        inX,\n        inY,\n        outX,\n        outY;\n      function drawSegment(segment) {\n        if (matrix) {\n          segment._transformCoordinates(matrix, coords);\n          curX = coords[0];\n          curY = coords[1];\n        } else {\n          var point = segment._point;\n          curX = point._x;\n          curY = point._y;\n        }\n        if (first) {\n          ctx.moveTo(curX, curY);\n          first = false;\n        } else {\n          if (matrix) {\n            inX = coords[2];\n            inY = coords[3];\n          } else {\n            var handle = segment._handleIn;\n            inX = curX + handle._x;\n            inY = curY + handle._y;\n          }\n          if (inX === curX && inY === curY && outX === prevX && outY === prevY) {\n            ctx.lineTo(curX, curY);\n          } else {\n            ctx.bezierCurveTo(outX, outY, inX, inY, curX, curY);\n          }\n        }\n        prevX = curX;\n        prevY = curY;\n        if (matrix) {\n          outX = coords[4];\n          outY = coords[5];\n        } else {\n          var handle = segment._handleOut;\n          outX = prevX + handle._x;\n          outY = prevY + handle._y;\n        }\n      }\n      for (var i = 0; i < length; i++) drawSegment(segments[i]);\n      if (path._closed && length > 0) drawSegment(segments[0]);\n    }\n    return {\n      _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n        var dontStart = param.dontStart,\n          dontPaint = param.dontFinish || param.clip,\n          style = this.getStyle(),\n          hasFill = style.hasFill(),\n          hasStroke = style.hasStroke(),\n          dashArray = style.getDashArray(),\n          dashLength = !paper.support.nativeDash && hasStroke && dashArray && dashArray.length;\n        if (!dontStart) ctx.beginPath();\n        if (hasFill || hasStroke && !dashLength || dontPaint) {\n          drawSegments(ctx, this, strokeMatrix);\n          if (this._closed) ctx.closePath();\n        }\n        function getOffset(i) {\n          return dashArray[(i % dashLength + dashLength) % dashLength];\n        }\n        if (!dontPaint && (hasFill || hasStroke)) {\n          this._setStyles(ctx, param, viewMatrix);\n          if (hasFill) {\n            ctx.fill(style.getFillRule());\n            ctx.shadowColor = 'rgba(0,0,0,0)';\n          }\n          if (hasStroke) {\n            if (dashLength) {\n              if (!dontStart) ctx.beginPath();\n              var flattener = new PathFlattener(this, 0.25, 32, false, strokeMatrix),\n                length = flattener.length,\n                from = -style.getDashOffset(),\n                to,\n                i = 0;\n              while (from > 0) {\n                from -= getOffset(i--) + getOffset(i--);\n              }\n              while (from < length) {\n                to = from + getOffset(i++);\n                if (from > 0 || to > 0) flattener.drawPart(ctx, Math.max(from, 0), Math.max(to, 0));\n                from = to + getOffset(i++);\n              }\n            }\n            ctx.stroke();\n          }\n        }\n      },\n      _drawSelected: function (ctx, matrix) {\n        ctx.beginPath();\n        drawSegments(ctx, this, matrix);\n        ctx.stroke();\n        drawHandles(ctx, this._segments, matrix, paper.settings.handleSize);\n      }\n    };\n  }(), new function () {\n    function getCurrentSegment(that) {\n      var segments = that._segments;\n      if (!segments.length) throw new Error('Use a moveTo() command first');\n      return segments[segments.length - 1];\n    }\n    return {\n      moveTo: function () {\n        var segments = this._segments;\n        if (segments.length === 1) this.removeSegment(0);\n        if (!segments.length) this._add([new Segment(Point.read(arguments))]);\n      },\n      moveBy: function () {\n        throw new Error('moveBy() is unsupported on Path items.');\n      },\n      lineTo: function () {\n        this._add([new Segment(Point.read(arguments))]);\n      },\n      cubicCurveTo: function () {\n        var args = arguments,\n          handle1 = Point.read(args),\n          handle2 = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this);\n        current.setHandleOut(handle1.subtract(current._point));\n        this._add([new Segment(to, handle2.subtract(to))]);\n      },\n      quadraticCurveTo: function () {\n        var args = arguments,\n          handle = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this)._point;\n        this.cubicCurveTo(handle.add(current.subtract(handle).multiply(1 / 3)), handle.add(to.subtract(handle).multiply(1 / 3)), to);\n      },\n      curveTo: function () {\n        var args = arguments,\n          through = Point.read(args),\n          to = Point.read(args),\n          t = Base.pick(Base.read(args), 0.5),\n          t1 = 1 - t,\n          current = getCurrentSegment(this)._point,\n          handle = through.subtract(current.multiply(t1 * t1)).subtract(to.multiply(t * t)).divide(2 * t * t1);\n        if (handle.isNaN()) throw new Error('Cannot put a curve through points with parameter = ' + t);\n        this.quadraticCurveTo(handle, to);\n      },\n      arcTo: function () {\n        var args = arguments,\n          abs = Math.abs,\n          sqrt = Math.sqrt,\n          current = getCurrentSegment(this),\n          from = current._point,\n          to = Point.read(args),\n          through,\n          peek = Base.peek(args),\n          clockwise = Base.pick(peek, true),\n          center,\n          extent,\n          vector,\n          matrix;\n        if (typeof clockwise === 'boolean') {\n          var middle = from.add(to).divide(2),\n            through = middle.add(middle.subtract(from).rotate(clockwise ? -90 : 90));\n        } else if (Base.remain(args) <= 2) {\n          through = to;\n          to = Point.read(args);\n        } else if (!from.equals(to)) {\n          var radius = Size.read(args),\n            isZero = Numerical.isZero;\n          if (isZero(radius.width) || isZero(radius.height)) return this.lineTo(to);\n          var rotation = Base.read(args),\n            clockwise = !!Base.read(args),\n            large = !!Base.read(args),\n            middle = from.add(to).divide(2),\n            pt = from.subtract(middle).rotate(-rotation),\n            x = pt.x,\n            y = pt.y,\n            rx = abs(radius.width),\n            ry = abs(radius.height),\n            rxSq = rx * rx,\n            rySq = ry * ry,\n            xSq = x * x,\n            ySq = y * y;\n          var factor = sqrt(xSq / rxSq + ySq / rySq);\n          if (factor > 1) {\n            rx *= factor;\n            ry *= factor;\n            rxSq = rx * rx;\n            rySq = ry * ry;\n          }\n          factor = (rxSq * rySq - rxSq * ySq - rySq * xSq) / (rxSq * ySq + rySq * xSq);\n          if (abs(factor) < 1e-12) factor = 0;\n          if (factor < 0) throw new Error('Cannot create an arc with the given arguments');\n          center = new Point(rx * y / ry, -ry * x / rx).multiply((large === clockwise ? -1 : 1) * sqrt(factor)).rotate(rotation).add(middle);\n          matrix = new Matrix().translate(center).rotate(rotation).scale(rx, ry);\n          vector = matrix._inverseTransform(from);\n          extent = vector.getDirectedAngle(matrix._inverseTransform(to));\n          if (!clockwise && extent > 0) extent -= 360;else if (clockwise && extent < 0) extent += 360;\n        }\n        if (through) {\n          var l1 = new Line(from.add(through).divide(2), through.subtract(from).rotate(90), true),\n            l2 = new Line(through.add(to).divide(2), to.subtract(through).rotate(90), true),\n            line = new Line(from, to),\n            throughSide = line.getSide(through);\n          center = l1.intersect(l2, true);\n          if (!center) {\n            if (!throughSide) return this.lineTo(to);\n            throw new Error('Cannot create an arc with the given arguments');\n          }\n          vector = from.subtract(center);\n          extent = vector.getDirectedAngle(to.subtract(center));\n          var centerSide = line.getSide(center, true);\n          if (centerSide === 0) {\n            extent = throughSide * abs(extent);\n          } else if (throughSide === centerSide) {\n            extent += extent < 0 ? 360 : -360;\n          }\n        }\n        if (extent) {\n          var epsilon = 1e-5,\n            ext = abs(extent),\n            count = ext >= 360 ? 4 : Math.ceil((ext - epsilon) / 90),\n            inc = extent / count,\n            half = inc * Math.PI / 360,\n            z = 4 / 3 * Math.sin(half) / (1 + Math.cos(half)),\n            segments = [];\n          for (var i = 0; i <= count; i++) {\n            var pt = to,\n              out = null;\n            if (i < count) {\n              out = vector.rotate(90).multiply(z);\n              if (matrix) {\n                pt = matrix._transformPoint(vector);\n                out = matrix._transformPoint(vector.add(out)).subtract(pt);\n              } else {\n                pt = center.add(vector);\n              }\n            }\n            if (!i) {\n              current.setHandleOut(out);\n            } else {\n              var _in = vector.rotate(-90).multiply(z);\n              if (matrix) {\n                _in = matrix._transformPoint(vector.add(_in)).subtract(pt);\n              }\n              segments.push(new Segment(pt, _in, out));\n            }\n            vector = vector.rotate(inc);\n          }\n          this._add(segments);\n        }\n      },\n      lineBy: function () {\n        var to = Point.read(arguments),\n          current = getCurrentSegment(this)._point;\n        this.lineTo(current.add(to));\n      },\n      curveBy: function () {\n        var args = arguments,\n          through = Point.read(args),\n          to = Point.read(args),\n          parameter = Base.read(args),\n          current = getCurrentSegment(this)._point;\n        this.curveTo(current.add(through), current.add(to), parameter);\n      },\n      cubicCurveBy: function () {\n        var args = arguments,\n          handle1 = Point.read(args),\n          handle2 = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this)._point;\n        this.cubicCurveTo(current.add(handle1), current.add(handle2), current.add(to));\n      },\n      quadraticCurveBy: function () {\n        var args = arguments,\n          handle = Point.read(args),\n          to = Point.read(args),\n          current = getCurrentSegment(this)._point;\n        this.quadraticCurveTo(current.add(handle), current.add(to));\n      },\n      arcBy: function () {\n        var args = arguments,\n          current = getCurrentSegment(this)._point,\n          point = current.add(Point.read(args)),\n          clockwise = Base.pick(Base.peek(args), true);\n        if (typeof clockwise === 'boolean') {\n          this.arcTo(point, clockwise);\n        } else {\n          this.arcTo(point, current.add(Point.read(args)));\n        }\n      },\n      closePath: function (tolerance) {\n        this.setClosed(true);\n        this.join(this, tolerance);\n      }\n    };\n  }(), {\n    _getBounds: function (matrix, options) {\n      var method = options.handle ? 'getHandleBounds' : options.stroke ? 'getStrokeBounds' : 'getBounds';\n      return Path[method](this._segments, this._closed, this, matrix, options);\n    },\n    statics: {\n      getBounds: function (segments, closed, path, matrix, options, strokePadding) {\n        var first = segments[0];\n        if (!first) return new Rectangle();\n        var coords = new Array(6),\n          prevCoords = first._transformCoordinates(matrix, new Array(6)),\n          min = prevCoords.slice(0, 2),\n          max = min.slice(),\n          roots = new Array(2);\n        function processSegment(segment) {\n          segment._transformCoordinates(matrix, coords);\n          for (var i = 0; i < 2; i++) {\n            Curve._addBounds(prevCoords[i], prevCoords[i + 4], coords[i + 2], coords[i], i, strokePadding ? strokePadding[i] : 0, min, max, roots);\n          }\n          var tmp = prevCoords;\n          prevCoords = coords;\n          coords = tmp;\n        }\n        for (var i = 1, l = segments.length; i < l; i++) processSegment(segments[i]);\n        if (closed) processSegment(first);\n        return new Rectangle(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n      },\n      getStrokeBounds: function (segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n          stroke = style.hasStroke(),\n          strokeWidth = style.getStrokeWidth(),\n          strokeMatrix = stroke && path._getStrokeMatrix(matrix, options),\n          strokePadding = stroke && Path._getStrokePadding(strokeWidth, strokeMatrix),\n          bounds = Path.getBounds(segments, closed, path, matrix, options, strokePadding);\n        if (!stroke) return bounds;\n        var strokeRadius = strokeWidth / 2,\n          join = style.getStrokeJoin(),\n          cap = style.getStrokeCap(),\n          miterLimit = style.getMiterLimit(),\n          joinBounds = new Rectangle(new Size(strokePadding));\n        function addPoint(point) {\n          bounds = bounds.include(point);\n        }\n        function addRound(segment) {\n          bounds = bounds.unite(joinBounds.setCenter(segment._point.transform(matrix)));\n        }\n        function addJoin(segment, join) {\n          if (join === 'round' || segment.isSmooth()) {\n            addRound(segment);\n          } else {\n            Path._addBevelJoin(segment, join, strokeRadius, miterLimit, matrix, strokeMatrix, addPoint);\n          }\n        }\n        function addCap(segment, cap) {\n          if (cap === 'round') {\n            addRound(segment);\n          } else {\n            Path._addSquareCap(segment, cap, strokeRadius, matrix, strokeMatrix, addPoint);\n          }\n        }\n        var length = segments.length - (closed ? 0 : 1);\n        if (length > 0) {\n          for (var i = 1; i < length; i++) {\n            addJoin(segments[i], join);\n          }\n          if (closed) {\n            addJoin(segments[0], join);\n          } else {\n            addCap(segments[0], cap);\n            addCap(segments[segments.length - 1], cap);\n          }\n        }\n        return bounds;\n      },\n      _getStrokePadding: function (radius, matrix) {\n        if (!matrix) return [radius, radius];\n        var hor = new Point(radius, 0).transform(matrix),\n          ver = new Point(0, radius).transform(matrix),\n          phi = hor.getAngleInRadians(),\n          a = hor.getLength(),\n          b = ver.getLength();\n        var sin = Math.sin(phi),\n          cos = Math.cos(phi),\n          tan = Math.tan(phi),\n          tx = Math.atan2(b * tan, a),\n          ty = Math.atan2(b, tan * a);\n        return [Math.abs(a * Math.cos(tx) * cos + b * Math.sin(tx) * sin), Math.abs(b * Math.sin(ty) * cos + a * Math.cos(ty) * sin)];\n      },\n      _addBevelJoin: function (segment, join, radius, miterLimit, matrix, strokeMatrix, addPoint, isArea) {\n        var curve2 = segment.getCurve(),\n          curve1 = curve2.getPrevious(),\n          point = curve2.getPoint1().transform(matrix),\n          normal1 = curve1.getNormalAtTime(1).multiply(radius).transform(strokeMatrix),\n          normal2 = curve2.getNormalAtTime(0).multiply(radius).transform(strokeMatrix),\n          angle = normal1.getDirectedAngle(normal2);\n        if (angle < 0 || angle >= 180) {\n          normal1 = normal1.negate();\n          normal2 = normal2.negate();\n        }\n        if (isArea) addPoint(point);\n        addPoint(point.add(normal1));\n        if (join === 'miter') {\n          var corner = new Line(point.add(normal1), new Point(-normal1.y, normal1.x), true).intersect(new Line(point.add(normal2), new Point(-normal2.y, normal2.x), true), true);\n          if (corner && point.getDistance(corner) <= miterLimit * radius) {\n            addPoint(corner);\n          }\n        }\n        addPoint(point.add(normal2));\n      },\n      _addSquareCap: function (segment, cap, radius, matrix, strokeMatrix, addPoint, isArea) {\n        var point = segment._point.transform(matrix),\n          loc = segment.getLocation(),\n          normal = loc.getNormal().multiply(loc.getTime() === 0 ? radius : -radius).transform(strokeMatrix);\n        if (cap === 'square') {\n          if (isArea) {\n            addPoint(point.subtract(normal));\n            addPoint(point.add(normal));\n          }\n          point = point.add(normal.rotate(-90));\n        }\n        addPoint(point.add(normal));\n        addPoint(point.subtract(normal));\n      },\n      getHandleBounds: function (segments, closed, path, matrix, options) {\n        var style = path.getStyle(),\n          stroke = options.stroke && style.hasStroke(),\n          strokePadding,\n          joinPadding;\n        if (stroke) {\n          var strokeMatrix = path._getStrokeMatrix(matrix, options),\n            strokeRadius = style.getStrokeWidth() / 2,\n            joinRadius = strokeRadius;\n          if (style.getStrokeJoin() === 'miter') joinRadius = strokeRadius * style.getMiterLimit();\n          if (style.getStrokeCap() === 'square') joinRadius = Math.max(joinRadius, strokeRadius * Math.SQRT2);\n          strokePadding = Path._getStrokePadding(strokeRadius, strokeMatrix);\n          joinPadding = Path._getStrokePadding(joinRadius, strokeMatrix);\n        }\n        var coords = new Array(6),\n          x1 = Infinity,\n          x2 = -x1,\n          y1 = x1,\n          y2 = x2;\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i];\n          segment._transformCoordinates(matrix, coords);\n          for (var j = 0; j < 6; j += 2) {\n            var padding = !j ? joinPadding : strokePadding,\n              paddingX = padding ? padding[0] : 0,\n              paddingY = padding ? padding[1] : 0,\n              x = coords[j],\n              y = coords[j + 1],\n              xn = x - paddingX,\n              xx = x + paddingX,\n              yn = y - paddingY,\n              yx = y + paddingY;\n            if (xn < x1) x1 = xn;\n            if (xx > x2) x2 = xx;\n            if (yn < y1) y1 = yn;\n            if (yx > y2) y2 = yx;\n          }\n        }\n        return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n      }\n    }\n  });\n  Path.inject({\n    statics: new function () {\n      var kappa = 0.5522847498307936,\n        ellipseSegments = [new Segment([-1, 0], [0, kappa], [0, -kappa]), new Segment([0, -1], [-kappa, 0], [kappa, 0]), new Segment([1, 0], [0, -kappa], [0, kappa]), new Segment([0, 1], [kappa, 0], [-kappa, 0])];\n      function createPath(segments, closed, args) {\n        var props = Base.getNamed(args),\n          path = new Path(props && (props.insert == true ? Item.INSERT : props.insert == false ? Item.NO_INSERT : null));\n        path._add(segments);\n        path._closed = closed;\n        return path.set(props, Item.INSERT);\n      }\n      function createEllipse(center, radius, args) {\n        var segments = new Array(4);\n        for (var i = 0; i < 4; i++) {\n          var segment = ellipseSegments[i];\n          segments[i] = new Segment(segment._point.multiply(radius).add(center), segment._handleIn.multiply(radius), segment._handleOut.multiply(radius));\n        }\n        return createPath(segments, true, args);\n      }\n      return {\n        Line: function () {\n          var args = arguments;\n          return createPath([new Segment(Point.readNamed(args, 'from')), new Segment(Point.readNamed(args, 'to'))], false, args);\n        },\n        Circle: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            radius = Base.readNamed(args, 'radius');\n          return createEllipse(center, new Size(radius), args);\n        },\n        Rectangle: function () {\n          var args = arguments,\n            rect = Rectangle.readNamed(args, 'rectangle'),\n            radius = Size.readNamed(args, 'radius', 0, {\n              readNull: true\n            }),\n            bl = rect.getBottomLeft(true),\n            tl = rect.getTopLeft(true),\n            tr = rect.getTopRight(true),\n            br = rect.getBottomRight(true),\n            segments;\n          if (!radius || radius.isZero()) {\n            segments = [new Segment(bl), new Segment(tl), new Segment(tr), new Segment(br)];\n          } else {\n            radius = Size.min(radius, rect.getSize(true).divide(2));\n            var rx = radius.width,\n              ry = radius.height,\n              hx = rx * kappa,\n              hy = ry * kappa;\n            segments = [new Segment(bl.add(rx, 0), null, [-hx, 0]), new Segment(bl.subtract(0, ry), [0, hy]), new Segment(tl.add(0, ry), null, [0, -hy]), new Segment(tl.add(rx, 0), [-hx, 0], null), new Segment(tr.subtract(rx, 0), null, [hx, 0]), new Segment(tr.add(0, ry), [0, -hy], null), new Segment(br.subtract(0, ry), null, [0, hy]), new Segment(br.subtract(rx, 0), [hx, 0])];\n          }\n          return createPath(segments, true, args);\n        },\n        RoundRectangle: '#Rectangle',\n        Ellipse: function () {\n          var args = arguments,\n            ellipse = Shape._readEllipse(args);\n          return createEllipse(ellipse.center, ellipse.radius, args);\n        },\n        Oval: '#Ellipse',\n        Arc: function () {\n          var args = arguments,\n            from = Point.readNamed(args, 'from'),\n            through = Point.readNamed(args, 'through'),\n            to = Point.readNamed(args, 'to'),\n            props = Base.getNamed(args),\n            path = new Path(props && props.insert == false && Item.NO_INSERT);\n          path.moveTo(from);\n          path.arcTo(through, to);\n          return path.set(props);\n        },\n        RegularPolygon: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            sides = Base.readNamed(args, 'sides'),\n            radius = Base.readNamed(args, 'radius'),\n            step = 360 / sides,\n            three = sides % 3 === 0,\n            vector = new Point(0, three ? -radius : radius),\n            offset = three ? -1 : 0.5,\n            segments = new Array(sides);\n          for (var i = 0; i < sides; i++) segments[i] = new Segment(center.add(vector.rotate((i + offset) * step)));\n          return createPath(segments, true, args);\n        },\n        Star: function () {\n          var args = arguments,\n            center = Point.readNamed(args, 'center'),\n            points = Base.readNamed(args, 'points') * 2,\n            radius1 = Base.readNamed(args, 'radius1'),\n            radius2 = Base.readNamed(args, 'radius2'),\n            step = 360 / points,\n            vector = new Point(0, -1),\n            segments = new Array(points);\n          for (var i = 0; i < points; i++) segments[i] = new Segment(center.add(vector.rotate(step * i).multiply(i % 2 ? radius2 : radius1)));\n          return createPath(segments, true, args);\n        }\n      };\n    }()\n  });\n  var CompoundPath = PathItem.extend({\n    _class: 'CompoundPath',\n    _serializeFields: {\n      children: []\n    },\n    beans: true,\n    initialize: function CompoundPath(arg) {\n      this._children = [];\n      this._namedChildren = {};\n      if (!this._initialize(arg)) {\n        if (typeof arg === 'string') {\n          this.setPathData(arg);\n        } else {\n          this.addChildren(Array.isArray(arg) ? arg : arguments);\n        }\n      }\n    },\n    insertChildren: function insertChildren(index, items) {\n      var list = items,\n        first = list[0];\n      if (first && typeof first[0] === 'number') list = [list];\n      for (var i = items.length - 1; i >= 0; i--) {\n        var item = list[i];\n        if (list === items && !(item instanceof Path)) list = Base.slice(list);\n        if (Array.isArray(item)) {\n          list[i] = new Path({\n            segments: item,\n            insert: false\n          });\n        } else if (item instanceof CompoundPath) {\n          list.splice.apply(list, [i, 1].concat(item.removeChildren()));\n          item.remove();\n        }\n      }\n      return insertChildren.base.call(this, index, list);\n    },\n    reduce: function reduce(options) {\n      var children = this._children;\n      for (var i = children.length - 1; i >= 0; i--) {\n        var path = children[i].reduce(options);\n        if (path.isEmpty()) path.remove();\n      }\n      if (!children.length) {\n        var path = new Path(Item.NO_INSERT);\n        path.copyAttributes(this);\n        path.insertAbove(this);\n        this.remove();\n        return path;\n      }\n      return reduce.base.call(this);\n    },\n    isClosed: function () {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        if (!children[i]._closed) return false;\n      }\n      return true;\n    },\n    setClosed: function (closed) {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        children[i].setClosed(closed);\n      }\n    },\n    getFirstSegment: function () {\n      var first = this.getFirstChild();\n      return first && first.getFirstSegment();\n    },\n    getLastSegment: function () {\n      var last = this.getLastChild();\n      return last && last.getLastSegment();\n    },\n    getCurves: function () {\n      var children = this._children,\n        curves = [];\n      for (var i = 0, l = children.length; i < l; i++) {\n        Base.push(curves, children[i].getCurves());\n      }\n      return curves;\n    },\n    getFirstCurve: function () {\n      var first = this.getFirstChild();\n      return first && first.getFirstCurve();\n    },\n    getLastCurve: function () {\n      var last = this.getLastChild();\n      return last && last.getLastCurve();\n    },\n    getArea: function () {\n      var children = this._children,\n        area = 0;\n      for (var i = 0, l = children.length; i < l; i++) area += children[i].getArea();\n      return area;\n    },\n    getLength: function () {\n      var children = this._children,\n        length = 0;\n      for (var i = 0, l = children.length; i < l; i++) length += children[i].getLength();\n      return length;\n    },\n    getPathData: function (_matrix, _precision) {\n      var children = this._children,\n        paths = [];\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n          mx = child._matrix;\n        paths.push(child.getPathData(_matrix && !mx.isIdentity() ? _matrix.appended(mx) : _matrix, _precision));\n      }\n      return paths.join('');\n    },\n    _hitTestChildren: function _hitTestChildren(point, options, viewMatrix) {\n      return _hitTestChildren.base.call(this, point, options.class === Path || options.type === 'path' ? options : Base.set({}, options, {\n        fill: false\n      }), viewMatrix);\n    },\n    _draw: function (ctx, param, viewMatrix, strokeMatrix) {\n      var children = this._children;\n      if (!children.length) return;\n      param = param.extend({\n        dontStart: true,\n        dontFinish: true\n      });\n      ctx.beginPath();\n      for (var i = 0, l = children.length; i < l; i++) children[i].draw(ctx, param, strokeMatrix);\n      if (!param.clip) {\n        this._setStyles(ctx, param, viewMatrix);\n        var style = this._style;\n        if (style.hasFill()) {\n          ctx.fill(style.getFillRule());\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n        if (style.hasStroke()) ctx.stroke();\n      }\n    },\n    _drawSelected: function (ctx, matrix, selectionItems) {\n      var children = this._children;\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i],\n          mx = child._matrix;\n        if (!selectionItems[child._id]) {\n          child._drawSelected(ctx, mx.isIdentity() ? matrix : matrix.appended(mx));\n        }\n      }\n    }\n  }, new function () {\n    function getCurrentPath(that, check) {\n      var children = that._children;\n      if (check && !children.length) throw new Error('Use a moveTo() command first');\n      return children[children.length - 1];\n    }\n    return Base.each(['lineTo', 'cubicCurveTo', 'quadraticCurveTo', 'curveTo', 'arcTo', 'lineBy', 'cubicCurveBy', 'quadraticCurveBy', 'curveBy', 'arcBy'], function (key) {\n      this[key] = function () {\n        var path = getCurrentPath(this, true);\n        path[key].apply(path, arguments);\n      };\n    }, {\n      moveTo: function () {\n        var current = getCurrentPath(this),\n          path = current && current.isEmpty() ? current : new Path(Item.NO_INSERT);\n        if (path !== current) this.addChild(path);\n        path.moveTo.apply(path, arguments);\n      },\n      moveBy: function () {\n        var current = getCurrentPath(this, true),\n          last = current && current.getLastSegment(),\n          point = Point.read(arguments);\n        this.moveTo(last ? point.add(last._point) : point);\n      },\n      closePath: function (tolerance) {\n        getCurrentPath(this, true).closePath(tolerance);\n      }\n    });\n  }(), Base.each(['reverse', 'flatten', 'simplify', 'smooth'], function (key) {\n    this[key] = function (param) {\n      var children = this._children,\n        res;\n      for (var i = 0, l = children.length; i < l; i++) {\n        res = children[i][key](param) || res;\n      }\n      return res;\n    };\n  }, {}));\n  PathItem.inject(new function () {\n    var min = Math.min,\n      max = Math.max,\n      abs = Math.abs,\n      operators = {\n        unite: {\n          '1': true,\n          '2': true\n        },\n        intersect: {\n          '2': true\n        },\n        subtract: {\n          '1': true\n        },\n        exclude: {\n          '1': true,\n          '-1': true\n        }\n      };\n    function getPaths(path) {\n      return path._children || [path];\n    }\n    function preparePath(path, resolve) {\n      var res = path.clone(false).reduce({\n        simplify: true\n      }).transform(null, true, true);\n      if (resolve) {\n        var paths = getPaths(res);\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n          if (!path._closed && !path.isEmpty()) {\n            path.closePath(1e-12);\n            path.getFirstSegment().setHandleIn(0, 0);\n            path.getLastSegment().setHandleOut(0, 0);\n          }\n        }\n        res = res.resolveCrossings().reorient(res.getFillRule() === 'nonzero', true);\n      }\n      return res;\n    }\n    function createResult(paths, simplify, path1, path2, options) {\n      var result = new CompoundPath(Item.NO_INSERT);\n      result.addChildren(paths, true);\n      result = result.reduce({\n        simplify: simplify\n      });\n      if (!(options && options.insert == false)) {\n        result.insertAbove(path2 && path1.isSibling(path2) && path1.getIndex() < path2.getIndex() ? path2 : path1);\n      }\n      result.copyAttributes(path1, true);\n      return result;\n    }\n    function filterIntersection(inter) {\n      return inter.hasOverlap() || inter.isCrossing();\n    }\n    function traceBoolean(path1, path2, operation, options) {\n      if (options && (options.trace == false || options.stroke) && /^(subtract|intersect)$/.test(operation)) return splitBoolean(path1, path2, operation);\n      var _path1 = preparePath(path1, true),\n        _path2 = path2 && path1 !== path2 && preparePath(path2, true),\n        operator = operators[operation];\n      operator[operation] = true;\n      if (_path2 && (operator.subtract || operator.exclude) ^ (_path2.isClockwise() ^ _path1.isClockwise())) _path2.reverse();\n      var crossings = divideLocations(CurveLocation.expand(_path1.getIntersections(_path2, filterIntersection))),\n        paths1 = getPaths(_path1),\n        paths2 = _path2 && getPaths(_path2),\n        segments = [],\n        curves = [],\n        paths;\n      function collectPaths(paths) {\n        for (var i = 0, l = paths.length; i < l; i++) {\n          var path = paths[i];\n          Base.push(segments, path._segments);\n          Base.push(curves, path.getCurves());\n          path._overlapsOnly = true;\n        }\n      }\n      function getCurves(indices) {\n        var list = [];\n        for (var i = 0, l = indices && indices.length; i < l; i++) {\n          list.push(curves[indices[i]]);\n        }\n        return list;\n      }\n      if (crossings.length) {\n        collectPaths(paths1);\n        if (paths2) collectPaths(paths2);\n        var curvesValues = new Array(curves.length);\n        for (var i = 0, l = curves.length; i < l; i++) {\n          curvesValues[i] = curves[i].getValues();\n        }\n        var curveCollisions = CollisionDetection.findCurveBoundsCollisions(curvesValues, curvesValues, 0, true);\n        var curveCollisionsMap = {};\n        for (var i = 0; i < curves.length; i++) {\n          var curve = curves[i],\n            id = curve._path._id,\n            map = curveCollisionsMap[id] = curveCollisionsMap[id] || {};\n          map[curve.getIndex()] = {\n            hor: getCurves(curveCollisions[i].hor),\n            ver: getCurves(curveCollisions[i].ver)\n          };\n        }\n        for (var i = 0, l = crossings.length; i < l; i++) {\n          propagateWinding(crossings[i]._segment, _path1, _path2, curveCollisionsMap, operator);\n        }\n        for (var i = 0, l = segments.length; i < l; i++) {\n          var segment = segments[i],\n            inter = segment._intersection;\n          if (!segment._winding) {\n            propagateWinding(segment, _path1, _path2, curveCollisionsMap, operator);\n          }\n          if (!(inter && inter._overlap)) segment._path._overlapsOnly = false;\n        }\n        paths = tracePaths(segments, operator);\n      } else {\n        paths = reorientPaths(paths2 ? paths1.concat(paths2) : paths1.slice(), function (w) {\n          return !!operator[w];\n        });\n      }\n      return createResult(paths, true, path1, path2, options);\n    }\n    function splitBoolean(path1, path2, operation) {\n      var _path1 = preparePath(path1),\n        _path2 = preparePath(path2),\n        crossings = _path1.getIntersections(_path2, filterIntersection),\n        subtract = operation === 'subtract',\n        divide = operation === 'divide',\n        added = {},\n        paths = [];\n      function addPath(path) {\n        if (!added[path._id] && (divide || _path2.contains(path.getPointAt(path.getLength() / 2)) ^ subtract)) {\n          paths.unshift(path);\n          return added[path._id] = true;\n        }\n      }\n      for (var i = crossings.length - 1; i >= 0; i--) {\n        var path = crossings[i].split();\n        if (path) {\n          if (addPath(path)) path.getFirstSegment().setHandleIn(0, 0);\n          _path1.getLastSegment().setHandleOut(0, 0);\n        }\n      }\n      addPath(_path1);\n      return createResult(paths, false, path1, path2);\n    }\n    function linkIntersections(from, to) {\n      var prev = from;\n      while (prev) {\n        if (prev === to) return;\n        prev = prev._previous;\n      }\n      while (from._next && from._next !== to) from = from._next;\n      if (!from._next) {\n        while (to._previous) to = to._previous;\n        from._next = to;\n        to._previous = from;\n      }\n    }\n    function clearCurveHandles(curves) {\n      for (var i = curves.length - 1; i >= 0; i--) curves[i].clearHandles();\n    }\n    function reorientPaths(paths, isInside, clockwise) {\n      var length = paths && paths.length;\n      if (length) {\n        var lookup = Base.each(paths, function (path, i) {\n            this[path._id] = {\n              container: null,\n              winding: path.isClockwise() ? 1 : -1,\n              index: i\n            };\n          }, {}),\n          sorted = paths.slice().sort(function (a, b) {\n            return abs(b.getArea()) - abs(a.getArea());\n          }),\n          first = sorted[0];\n        var collisions = CollisionDetection.findItemBoundsCollisions(sorted, null, Numerical.GEOMETRIC_EPSILON);\n        if (clockwise == null) clockwise = first.isClockwise();\n        for (var i = 0; i < length; i++) {\n          var path1 = sorted[i],\n            entry1 = lookup[path1._id],\n            containerWinding = 0,\n            indices = collisions[i];\n          if (indices) {\n            var point = null;\n            for (var j = indices.length - 1; j >= 0; j--) {\n              if (indices[j] < i) {\n                point = point || path1.getInteriorPoint();\n                var path2 = sorted[indices[j]];\n                if (path2.contains(point)) {\n                  var entry2 = lookup[path2._id];\n                  containerWinding = entry2.winding;\n                  entry1.winding += containerWinding;\n                  entry1.container = entry2.exclude ? entry2.container : path2;\n                  break;\n                }\n              }\n            }\n          }\n          if (isInside(entry1.winding) === isInside(containerWinding)) {\n            entry1.exclude = true;\n            paths[entry1.index] = null;\n          } else {\n            var container = entry1.container;\n            path1.setClockwise(container ? !container.isClockwise() : clockwise);\n          }\n        }\n      }\n      return paths;\n    }\n    function divideLocations(locations, include, clearLater) {\n      var results = include && [],\n        tMin = 1e-8,\n        tMax = 1 - tMin,\n        clearHandles = false,\n        clearCurves = clearLater || [],\n        clearLookup = clearLater && {},\n        renormalizeLocs,\n        prevCurve,\n        prevTime;\n      function getId(curve) {\n        return curve._path._id + '.' + curve._segment1._index;\n      }\n      for (var i = (clearLater && clearLater.length) - 1; i >= 0; i--) {\n        var curve = clearLater[i];\n        if (curve._path) clearLookup[getId(curve)] = true;\n      }\n      for (var i = locations.length - 1; i >= 0; i--) {\n        var loc = locations[i],\n          time = loc._time,\n          origTime = time,\n          exclude = include && !include(loc),\n          curve = loc._curve,\n          segment;\n        if (curve) {\n          if (curve !== prevCurve) {\n            clearHandles = !curve.hasHandles() || clearLookup && clearLookup[getId(curve)];\n            renormalizeLocs = [];\n            prevTime = null;\n            prevCurve = curve;\n          } else if (prevTime >= tMin) {\n            time /= prevTime;\n          }\n        }\n        if (exclude) {\n          if (renormalizeLocs) renormalizeLocs.push(loc);\n          continue;\n        } else if (include) {\n          results.unshift(loc);\n        }\n        prevTime = origTime;\n        if (time < tMin) {\n          segment = curve._segment1;\n        } else if (time > tMax) {\n          segment = curve._segment2;\n        } else {\n          var newCurve = curve.divideAtTime(time, true);\n          if (clearHandles) clearCurves.push(curve, newCurve);\n          segment = newCurve._segment1;\n          for (var j = renormalizeLocs.length - 1; j >= 0; j--) {\n            var l = renormalizeLocs[j];\n            l._time = (l._time - time) / (1 - time);\n          }\n        }\n        loc._setSegment(segment);\n        var inter = segment._intersection,\n          dest = loc._intersection;\n        if (inter) {\n          linkIntersections(inter, dest);\n          var other = inter;\n          while (other) {\n            linkIntersections(other._intersection, inter);\n            other = other._next;\n          }\n        } else {\n          segment._intersection = dest;\n        }\n      }\n      if (!clearLater) clearCurveHandles(clearCurves);\n      return results || locations;\n    }\n    function getWinding(point, curves, dir, closed, dontFlip) {\n      var curvesList = Array.isArray(curves) ? curves : curves[dir ? 'hor' : 'ver'];\n      var ia = dir ? 1 : 0,\n        io = ia ^ 1,\n        pv = [point.x, point.y],\n        pa = pv[ia],\n        po = pv[io],\n        windingEpsilon = 1e-9,\n        qualityEpsilon = 1e-6,\n        paL = pa - windingEpsilon,\n        paR = pa + windingEpsilon,\n        windingL = 0,\n        windingR = 0,\n        pathWindingL = 0,\n        pathWindingR = 0,\n        onPath = false,\n        onAnyPath = false,\n        quality = 1,\n        roots = [],\n        vPrev,\n        vClose;\n      function addWinding(v) {\n        var o0 = v[io + 0],\n          o3 = v[io + 6];\n        if (po < min(o0, o3) || po > max(o0, o3)) {\n          return;\n        }\n        var a0 = v[ia + 0],\n          a1 = v[ia + 2],\n          a2 = v[ia + 4],\n          a3 = v[ia + 6];\n        if (o0 === o3) {\n          if (a0 < paR && a3 > paL || a3 < paR && a0 > paL) {\n            onPath = true;\n          }\n          return;\n        }\n        var t = po === o0 ? 0 : po === o3 ? 1 : paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? 1 : Curve.solveCubic(v, io, po, roots, 0, 1) > 0 ? roots[0] : 1,\n          a = t === 0 ? a0 : t === 1 ? a3 : Curve.getPoint(v, t)[dir ? 'y' : 'x'],\n          winding = o0 > o3 ? 1 : -1,\n          windingPrev = vPrev[io] > vPrev[io + 6] ? 1 : -1,\n          a3Prev = vPrev[ia + 6];\n        if (po !== o0) {\n          if (a < paL) {\n            pathWindingL += winding;\n          } else if (a > paR) {\n            pathWindingR += winding;\n          } else {\n            onPath = true;\n          }\n          if (a > pa - qualityEpsilon && a < pa + qualityEpsilon) quality /= 2;\n        } else {\n          if (winding !== windingPrev) {\n            if (a0 < paL) {\n              pathWindingL += winding;\n            } else if (a0 > paR) {\n              pathWindingR += winding;\n            }\n          } else if (a0 != a3Prev) {\n            if (a3Prev < paR && a > paR) {\n              pathWindingR += winding;\n              onPath = true;\n            } else if (a3Prev > paL && a < paL) {\n              pathWindingL += winding;\n              onPath = true;\n            }\n          }\n          quality /= 4;\n        }\n        vPrev = v;\n        return !dontFlip && a > paL && a < paR && Curve.getTangent(v, t)[dir ? 'x' : 'y'] === 0 && getWinding(point, curves, !dir, closed, true);\n      }\n      function handleCurve(v) {\n        var o0 = v[io + 0],\n          o1 = v[io + 2],\n          o2 = v[io + 4],\n          o3 = v[io + 6];\n        if (po <= max(o0, o1, o2, o3) && po >= min(o0, o1, o2, o3)) {\n          var a0 = v[ia + 0],\n            a1 = v[ia + 2],\n            a2 = v[ia + 4],\n            a3 = v[ia + 6],\n            monoCurves = paL > max(a0, a1, a2, a3) || paR < min(a0, a1, a2, a3) ? [v] : Curve.getMonoCurves(v, dir),\n            res;\n          for (var i = 0, l = monoCurves.length; i < l; i++) {\n            if (res = addWinding(monoCurves[i])) return res;\n          }\n        }\n      }\n      for (var i = 0, l = curvesList.length; i < l; i++) {\n        var curve = curvesList[i],\n          path = curve._path,\n          v = curve.getValues(),\n          res;\n        if (!i || curvesList[i - 1]._path !== path) {\n          vPrev = null;\n          if (!path._closed) {\n            vClose = Curve.getValues(path.getLastCurve().getSegment2(), curve.getSegment1(), null, !closed);\n            if (vClose[io] !== vClose[io + 6]) {\n              vPrev = vClose;\n            }\n          }\n          if (!vPrev) {\n            vPrev = v;\n            var prev = path.getLastCurve();\n            while (prev && prev !== curve) {\n              var v2 = prev.getValues();\n              if (v2[io] !== v2[io + 6]) {\n                vPrev = v2;\n                break;\n              }\n              prev = prev.getPrevious();\n            }\n          }\n        }\n        if (res = handleCurve(v)) return res;\n        if (i + 1 === l || curvesList[i + 1]._path !== path) {\n          if (vClose && (res = handleCurve(vClose))) return res;\n          if (onPath && !pathWindingL && !pathWindingR) {\n            pathWindingL = pathWindingR = path.isClockwise(closed) ^ dir ? 1 : -1;\n          }\n          windingL += pathWindingL;\n          windingR += pathWindingR;\n          pathWindingL = pathWindingR = 0;\n          if (onPath) {\n            onAnyPath = true;\n            onPath = false;\n          }\n          vClose = null;\n        }\n      }\n      windingL = abs(windingL);\n      windingR = abs(windingR);\n      return {\n        winding: max(windingL, windingR),\n        windingL: windingL,\n        windingR: windingR,\n        quality: quality,\n        onPath: onAnyPath\n      };\n    }\n    function propagateWinding(segment, path1, path2, curveCollisionsMap, operator) {\n      var chain = [],\n        start = segment,\n        totalLength = 0,\n        winding;\n      do {\n        var curve = segment.getCurve();\n        if (curve) {\n          var length = curve.getLength();\n          chain.push({\n            segment: segment,\n            curve: curve,\n            length: length\n          });\n          totalLength += length;\n        }\n        segment = segment.getNext();\n      } while (segment && !segment._intersection && segment !== start);\n      var offsets = [0.5, 0.25, 0.75],\n        winding = {\n          winding: 0,\n          quality: -1\n        },\n        tMin = 1e-3,\n        tMax = 1 - tMin;\n      for (var i = 0; i < offsets.length && winding.quality < 0.5; i++) {\n        var length = totalLength * offsets[i];\n        for (var j = 0, l = chain.length; j < l; j++) {\n          var entry = chain[j],\n            curveLength = entry.length;\n          if (length <= curveLength) {\n            var curve = entry.curve,\n              path = curve._path,\n              parent = path._parent,\n              operand = parent instanceof CompoundPath ? parent : path,\n              t = Numerical.clamp(curve.getTimeAt(length), tMin, tMax),\n              pt = curve.getPointAtTime(t),\n              dir = abs(curve.getTangentAtTime(t).y) < Math.SQRT1_2;\n            var wind = null;\n            if (operator.subtract && path2) {\n              var otherPath = operand === path1 ? path2 : path1,\n                pathWinding = otherPath._getWinding(pt, dir, true);\n              if (operand === path1 && pathWinding.winding || operand === path2 && !pathWinding.winding) {\n                if (pathWinding.quality < 1) {\n                  continue;\n                } else {\n                  wind = {\n                    winding: 0,\n                    quality: 1\n                  };\n                }\n              }\n            }\n            wind = wind || getWinding(pt, curveCollisionsMap[path._id][curve.getIndex()], dir, true);\n            if (wind.quality > winding.quality) winding = wind;\n            break;\n          }\n          length -= curveLength;\n        }\n      }\n      for (var j = chain.length - 1; j >= 0; j--) {\n        chain[j].segment._winding = winding;\n      }\n    }\n    function tracePaths(segments, operator) {\n      var paths = [],\n        starts;\n      function isValid(seg) {\n        var winding;\n        return !!(seg && !seg._visited && (!operator || operator[(winding = seg._winding || {}).winding] && !(operator.unite && winding.winding === 2 && winding.windingL && winding.windingR)));\n      }\n      function isStart(seg) {\n        if (seg) {\n          for (var i = 0, l = starts.length; i < l; i++) {\n            if (seg === starts[i]) return true;\n          }\n        }\n        return false;\n      }\n      function visitPath(path) {\n        var segments = path._segments;\n        for (var i = 0, l = segments.length; i < l; i++) {\n          segments[i]._visited = true;\n        }\n      }\n      function getCrossingSegments(segment, collectStarts) {\n        var inter = segment._intersection,\n          start = inter,\n          crossings = [];\n        if (collectStarts) starts = [segment];\n        function collect(inter, end) {\n          while (inter && inter !== end) {\n            var other = inter._segment,\n              path = other && other._path;\n            if (path) {\n              var next = other.getNext() || path.getFirstSegment(),\n                nextInter = next._intersection;\n              if (other !== segment && (isStart(other) || isStart(next) || next && isValid(other) && (isValid(next) || nextInter && isValid(nextInter._segment)))) {\n                crossings.push(other);\n              }\n              if (collectStarts) starts.push(other);\n            }\n            inter = inter._next;\n          }\n        }\n        if (inter) {\n          collect(inter);\n          while (inter && inter._previous) inter = inter._previous;\n          collect(inter, start);\n        }\n        return crossings;\n      }\n      segments.sort(function (seg1, seg2) {\n        var inter1 = seg1._intersection,\n          inter2 = seg2._intersection,\n          over1 = !!(inter1 && inter1._overlap),\n          over2 = !!(inter2 && inter2._overlap),\n          path1 = seg1._path,\n          path2 = seg2._path;\n        return over1 ^ over2 ? over1 ? 1 : -1 : !inter1 ^ !inter2 ? inter1 ? 1 : -1 : path1 !== path2 ? path1._id - path2._id : seg1._index - seg2._index;\n      });\n      for (var i = 0, l = segments.length; i < l; i++) {\n        var seg = segments[i],\n          valid = isValid(seg),\n          path = null,\n          finished = false,\n          closed = true,\n          branches = [],\n          branch,\n          visited,\n          handleIn;\n        if (valid && seg._path._overlapsOnly) {\n          var path1 = seg._path,\n            path2 = seg._intersection._segment._path;\n          if (path1.compare(path2)) {\n            if (path1.getArea()) paths.push(path1.clone(false));\n            visitPath(path1);\n            visitPath(path2);\n            valid = false;\n          }\n        }\n        while (valid) {\n          var first = !path,\n            crossings = getCrossingSegments(seg, first),\n            other = crossings.shift(),\n            finished = !first && (isStart(seg) || isStart(other)),\n            cross = !finished && other;\n          if (first) {\n            path = new Path(Item.NO_INSERT);\n            branch = null;\n          }\n          if (finished) {\n            if (seg.isFirst() || seg.isLast()) closed = seg._path._closed;\n            seg._visited = true;\n            break;\n          }\n          if (cross && branch) {\n            branches.push(branch);\n            branch = null;\n          }\n          if (!branch) {\n            if (cross) crossings.push(seg);\n            branch = {\n              start: path._segments.length,\n              crossings: crossings,\n              visited: visited = [],\n              handleIn: handleIn\n            };\n          }\n          if (cross) seg = other;\n          if (!isValid(seg)) {\n            path.removeSegments(branch.start);\n            for (var j = 0, k = visited.length; j < k; j++) {\n              visited[j]._visited = false;\n            }\n            visited.length = 0;\n            do {\n              seg = branch && branch.crossings.shift();\n              if (!seg || !seg._path) {\n                seg = null;\n                branch = branches.pop();\n                if (branch) {\n                  visited = branch.visited;\n                  handleIn = branch.handleIn;\n                }\n              }\n            } while (branch && !isValid(seg));\n            if (!seg) break;\n          }\n          var next = seg.getNext();\n          path.add(new Segment(seg._point, handleIn, next && seg._handleOut));\n          seg._visited = true;\n          visited.push(seg);\n          seg = next || seg._path.getFirstSegment();\n          handleIn = next && next._handleIn;\n        }\n        if (finished) {\n          if (closed) {\n            path.getFirstSegment().setHandleIn(handleIn);\n            path.setClosed(closed);\n          }\n          if (path.getArea() !== 0) {\n            paths.push(path);\n          }\n        }\n      }\n      return paths;\n    }\n    return {\n      _getWinding: function (point, dir, closed) {\n        return getWinding(point, this.getCurves(), dir, closed);\n      },\n      unite: function (path, options) {\n        return traceBoolean(this, path, 'unite', options);\n      },\n      intersect: function (path, options) {\n        return traceBoolean(this, path, 'intersect', options);\n      },\n      subtract: function (path, options) {\n        return traceBoolean(this, path, 'subtract', options);\n      },\n      exclude: function (path, options) {\n        return traceBoolean(this, path, 'exclude', options);\n      },\n      divide: function (path, options) {\n        return options && (options.trace == false || options.stroke) ? splitBoolean(this, path, 'divide') : createResult([this.subtract(path, options), this.intersect(path, options)], true, this, path, options);\n      },\n      resolveCrossings: function () {\n        var children = this._children,\n          paths = children || [this];\n        function hasOverlap(seg, path) {\n          var inter = seg && seg._intersection;\n          return inter && inter._overlap && inter._path === path;\n        }\n        var hasOverlaps = false,\n          hasCrossings = false,\n          intersections = this.getIntersections(null, function (inter) {\n            return inter.hasOverlap() && (hasOverlaps = true) || inter.isCrossing() && (hasCrossings = true);\n          }),\n          clearCurves = hasOverlaps && hasCrossings && [];\n        intersections = CurveLocation.expand(intersections);\n        if (hasOverlaps) {\n          var overlaps = divideLocations(intersections, function (inter) {\n            return inter.hasOverlap();\n          }, clearCurves);\n          for (var i = overlaps.length - 1; i >= 0; i--) {\n            var overlap = overlaps[i],\n              path = overlap._path,\n              seg = overlap._segment,\n              prev = seg.getPrevious(),\n              next = seg.getNext();\n            if (hasOverlap(prev, path) && hasOverlap(next, path)) {\n              seg.remove();\n              prev._handleOut._set(0, 0);\n              next._handleIn._set(0, 0);\n              if (prev !== seg && !prev.getCurve().hasLength()) {\n                next._handleIn.set(prev._handleIn);\n                prev.remove();\n              }\n            }\n          }\n        }\n        if (hasCrossings) {\n          divideLocations(intersections, hasOverlaps && function (inter) {\n            var curve1 = inter.getCurve(),\n              seg1 = inter.getSegment(),\n              other = inter._intersection,\n              curve2 = other._curve,\n              seg2 = other._segment;\n            if (curve1 && curve2 && curve1._path && curve2._path) return true;\n            if (seg1) seg1._intersection = null;\n            if (seg2) seg2._intersection = null;\n          }, clearCurves);\n          if (clearCurves) clearCurveHandles(clearCurves);\n          paths = tracePaths(Base.each(paths, function (path) {\n            Base.push(this, path._segments);\n          }, []));\n        }\n        var length = paths.length,\n          item;\n        if (length > 1 && children) {\n          if (paths !== children) this.setChildren(paths);\n          item = this;\n        } else if (length === 1 && !children) {\n          if (paths[0] !== this) this.setSegments(paths[0].removeSegments());\n          item = this;\n        }\n        if (!item) {\n          item = new CompoundPath(Item.NO_INSERT);\n          item.addChildren(paths);\n          item = item.reduce();\n          item.copyAttributes(this);\n          this.replaceWith(item);\n        }\n        return item;\n      },\n      reorient: function (nonZero, clockwise) {\n        var children = this._children;\n        if (children && children.length) {\n          this.setChildren(reorientPaths(this.removeChildren(), function (w) {\n            return !!(nonZero ? w : w & 1);\n          }, clockwise));\n        } else if (clockwise !== undefined) {\n          this.setClockwise(clockwise);\n        }\n        return this;\n      },\n      getInteriorPoint: function () {\n        var bounds = this.getBounds(),\n          point = bounds.getCenter(true);\n        if (!this.contains(point)) {\n          var curves = this.getCurves(),\n            y = point.y,\n            intercepts = [],\n            roots = [];\n          for (var i = 0, l = curves.length; i < l; i++) {\n            var v = curves[i].getValues(),\n              o0 = v[1],\n              o1 = v[3],\n              o2 = v[5],\n              o3 = v[7];\n            if (y >= min(o0, o1, o2, o3) && y <= max(o0, o1, o2, o3)) {\n              var monoCurves = Curve.getMonoCurves(v);\n              for (var j = 0, m = monoCurves.length; j < m; j++) {\n                var mv = monoCurves[j],\n                  mo0 = mv[1],\n                  mo3 = mv[7];\n                if (mo0 !== mo3 && (y >= mo0 && y <= mo3 || y >= mo3 && y <= mo0)) {\n                  var x = y === mo0 ? mv[0] : y === mo3 ? mv[6] : Curve.solveCubic(mv, 1, y, roots, 0, 1) === 1 ? Curve.getPoint(mv, roots[0]).x : (mv[0] + mv[6]) / 2;\n                  intercepts.push(x);\n                }\n              }\n            }\n          }\n          if (intercepts.length > 1) {\n            intercepts.sort(function (a, b) {\n              return a - b;\n            });\n            point.x = (intercepts[0] + intercepts[1]) / 2;\n          }\n        }\n        return point;\n      }\n    };\n  }());\n  var PathFlattener = Base.extend({\n    _class: 'PathFlattener',\n    initialize: function (path, flatness, maxRecursion, ignoreStraight, matrix) {\n      var curves = [],\n        parts = [],\n        length = 0,\n        minSpan = 1 / (maxRecursion || 32),\n        segments = path._segments,\n        segment1 = segments[0],\n        segment2;\n      function addCurve(segment1, segment2) {\n        var curve = Curve.getValues(segment1, segment2, matrix);\n        curves.push(curve);\n        computeParts(curve, segment1._index, 0, 1);\n      }\n      function computeParts(curve, index, t1, t2) {\n        if (t2 - t1 > minSpan && !(ignoreStraight && Curve.isStraight(curve)) && !Curve.isFlatEnough(curve, flatness || 0.25)) {\n          var halves = Curve.subdivide(curve, 0.5),\n            tMid = (t1 + t2) / 2;\n          computeParts(halves[0], index, t1, tMid);\n          computeParts(halves[1], index, tMid, t2);\n        } else {\n          var dx = curve[6] - curve[0],\n            dy = curve[7] - curve[1],\n            dist = Math.sqrt(dx * dx + dy * dy);\n          if (dist > 0) {\n            length += dist;\n            parts.push({\n              offset: length,\n              curve: curve,\n              index: index,\n              time: t2\n            });\n          }\n        }\n      }\n      for (var i = 1, l = segments.length; i < l; i++) {\n        segment2 = segments[i];\n        addCurve(segment1, segment2);\n        segment1 = segment2;\n      }\n      if (path._closed) addCurve(segment2 || segment1, segments[0]);\n      this.curves = curves;\n      this.parts = parts;\n      this.length = length;\n      this.index = 0;\n    },\n    _get: function (offset) {\n      var parts = this.parts,\n        length = parts.length,\n        start,\n        i,\n        j = this.index;\n      for (;;) {\n        i = j;\n        if (!j || parts[--j].offset < offset) break;\n      }\n      for (; i < length; i++) {\n        var part = parts[i];\n        if (part.offset >= offset) {\n          this.index = i;\n          var prev = parts[i - 1],\n            prevTime = prev && prev.index === part.index ? prev.time : 0,\n            prevOffset = prev ? prev.offset : 0;\n          return {\n            index: part.index,\n            time: prevTime + (part.time - prevTime) * (offset - prevOffset) / (part.offset - prevOffset)\n          };\n        }\n      }\n      return {\n        index: parts[length - 1].index,\n        time: 1\n      };\n    },\n    drawPart: function (ctx, from, to) {\n      var start = this._get(from),\n        end = this._get(to);\n      for (var i = start.index, l = end.index; i <= l; i++) {\n        var curve = Curve.getPart(this.curves[i], i === start.index ? start.time : 0, i === end.index ? end.time : 1);\n        if (i === start.index) ctx.moveTo(curve[0], curve[1]);\n        ctx.bezierCurveTo.apply(ctx, curve.slice(2));\n      }\n    }\n  }, Base.each(Curve._evaluateMethods, function (name) {\n    this[name + 'At'] = function (offset) {\n      var param = this._get(offset);\n      return Curve[name](this.curves[param.index], param.time);\n    };\n  }, {}));\n  var PathFitter = Base.extend({\n    initialize: function (path) {\n      var points = this.points = [],\n        segments = path._segments,\n        closed = path._closed;\n      for (var i = 0, prev, l = segments.length; i < l; i++) {\n        var point = segments[i].point;\n        if (!prev || !prev.equals(point)) {\n          points.push(prev = point.clone());\n        }\n      }\n      if (closed) {\n        points.unshift(points[points.length - 1]);\n        points.push(points[1]);\n      }\n      this.closed = closed;\n    },\n    fit: function (error) {\n      var points = this.points,\n        length = points.length,\n        segments = null;\n      if (length > 0) {\n        segments = [new Segment(points[0])];\n        if (length > 1) {\n          this.fitCubic(segments, error, 0, length - 1, points[1].subtract(points[0]), points[length - 2].subtract(points[length - 1]));\n          if (this.closed) {\n            segments.shift();\n            segments.pop();\n          }\n        }\n      }\n      return segments;\n    },\n    fitCubic: function (segments, error, first, last, tan1, tan2) {\n      var points = this.points;\n      if (last - first === 1) {\n        var pt1 = points[first],\n          pt2 = points[last],\n          dist = pt1.getDistance(pt2) / 3;\n        this.addCurve(segments, [pt1, pt1.add(tan1.normalize(dist)), pt2.add(tan2.normalize(dist)), pt2]);\n        return;\n      }\n      var uPrime = this.chordLengthParameterize(first, last),\n        maxError = Math.max(error, error * error),\n        split,\n        parametersInOrder = true;\n      for (var i = 0; i <= 4; i++) {\n        var curve = this.generateBezier(first, last, uPrime, tan1, tan2);\n        var max = this.findMaxError(first, last, curve, uPrime);\n        if (max.error < error && parametersInOrder) {\n          this.addCurve(segments, curve);\n          return;\n        }\n        split = max.index;\n        if (max.error >= maxError) break;\n        parametersInOrder = this.reparameterize(first, last, uPrime, curve);\n        maxError = max.error;\n      }\n      var tanCenter = points[split - 1].subtract(points[split + 1]);\n      this.fitCubic(segments, error, first, split, tan1, tanCenter);\n      this.fitCubic(segments, error, split, last, tanCenter.negate(), tan2);\n    },\n    addCurve: function (segments, curve) {\n      var prev = segments[segments.length - 1];\n      prev.setHandleOut(curve[1].subtract(curve[0]));\n      segments.push(new Segment(curve[3], curve[2].subtract(curve[3])));\n    },\n    generateBezier: function (first, last, uPrime, tan1, tan2) {\n      var epsilon = 1e-12,\n        abs = Math.abs,\n        points = this.points,\n        pt1 = points[first],\n        pt2 = points[last],\n        C = [[0, 0], [0, 0]],\n        X = [0, 0];\n      for (var i = 0, l = last - first + 1; i < l; i++) {\n        var u = uPrime[i],\n          t = 1 - u,\n          b = 3 * u * t,\n          b0 = t * t * t,\n          b1 = b * t,\n          b2 = b * u,\n          b3 = u * u * u,\n          a1 = tan1.normalize(b1),\n          a2 = tan2.normalize(b2),\n          tmp = points[first + i].subtract(pt1.multiply(b0 + b1)).subtract(pt2.multiply(b2 + b3));\n        C[0][0] += a1.dot(a1);\n        C[0][1] += a1.dot(a2);\n        C[1][0] = C[0][1];\n        C[1][1] += a2.dot(a2);\n        X[0] += a1.dot(tmp);\n        X[1] += a2.dot(tmp);\n      }\n      var detC0C1 = C[0][0] * C[1][1] - C[1][0] * C[0][1],\n        alpha1,\n        alpha2;\n      if (abs(detC0C1) > epsilon) {\n        var detC0X = C[0][0] * X[1] - C[1][0] * X[0],\n          detXC1 = X[0] * C[1][1] - X[1] * C[0][1];\n        alpha1 = detXC1 / detC0C1;\n        alpha2 = detC0X / detC0C1;\n      } else {\n        var c0 = C[0][0] + C[0][1],\n          c1 = C[1][0] + C[1][1];\n        alpha1 = alpha2 = abs(c0) > epsilon ? X[0] / c0 : abs(c1) > epsilon ? X[1] / c1 : 0;\n      }\n      var segLength = pt2.getDistance(pt1),\n        eps = epsilon * segLength,\n        handle1,\n        handle2;\n      if (alpha1 < eps || alpha2 < eps) {\n        alpha1 = alpha2 = segLength / 3;\n      } else {\n        var line = pt2.subtract(pt1);\n        handle1 = tan1.normalize(alpha1);\n        handle2 = tan2.normalize(alpha2);\n        if (handle1.dot(line) - handle2.dot(line) > segLength * segLength) {\n          alpha1 = alpha2 = segLength / 3;\n          handle1 = handle2 = null;\n        }\n      }\n      return [pt1, pt1.add(handle1 || tan1.normalize(alpha1)), pt2.add(handle2 || tan2.normalize(alpha2)), pt2];\n    },\n    reparameterize: function (first, last, u, curve) {\n      for (var i = first; i <= last; i++) {\n        u[i - first] = this.findRoot(curve, this.points[i], u[i - first]);\n      }\n      for (var i = 1, l = u.length; i < l; i++) {\n        if (u[i] <= u[i - 1]) return false;\n      }\n      return true;\n    },\n    findRoot: function (curve, point, u) {\n      var curve1 = [],\n        curve2 = [];\n      for (var i = 0; i <= 2; i++) {\n        curve1[i] = curve[i + 1].subtract(curve[i]).multiply(3);\n      }\n      for (var i = 0; i <= 1; i++) {\n        curve2[i] = curve1[i + 1].subtract(curve1[i]).multiply(2);\n      }\n      var pt = this.evaluate(3, curve, u),\n        pt1 = this.evaluate(2, curve1, u),\n        pt2 = this.evaluate(1, curve2, u),\n        diff = pt.subtract(point),\n        df = pt1.dot(pt1) + diff.dot(pt2);\n      return Numerical.isMachineZero(df) ? u : u - diff.dot(pt1) / df;\n    },\n    evaluate: function (degree, curve, t) {\n      var tmp = curve.slice();\n      for (var i = 1; i <= degree; i++) {\n        for (var j = 0; j <= degree - i; j++) {\n          tmp[j] = tmp[j].multiply(1 - t).add(tmp[j + 1].multiply(t));\n        }\n      }\n      return tmp[0];\n    },\n    chordLengthParameterize: function (first, last) {\n      var u = [0];\n      for (var i = first + 1; i <= last; i++) {\n        u[i - first] = u[i - first - 1] + this.points[i].getDistance(this.points[i - 1]);\n      }\n      for (var i = 1, m = last - first; i <= m; i++) {\n        u[i] /= u[m];\n      }\n      return u;\n    },\n    findMaxError: function (first, last, curve, u) {\n      var index = Math.floor((last - first + 1) / 2),\n        maxDist = 0;\n      for (var i = first + 1; i < last; i++) {\n        var P = this.evaluate(3, curve, u[i - first]);\n        var v = P.subtract(this.points[i]);\n        var dist = v.x * v.x + v.y * v.y;\n        if (dist >= maxDist) {\n          maxDist = dist;\n          index = i;\n        }\n      }\n      return {\n        error: maxDist,\n        index: index\n      };\n    }\n  });\n  var TextItem = Item.extend({\n    _class: 'TextItem',\n    _applyMatrix: false,\n    _canApplyMatrix: false,\n    _serializeFields: {\n      content: null\n    },\n    _boundsOptions: {\n      stroke: false,\n      handle: false\n    },\n    initialize: function TextItem(arg) {\n      this._content = '';\n      this._lines = [];\n      var hasProps = arg && Base.isPlainObject(arg) && arg.x === undefined && arg.y === undefined;\n      this._initialize(hasProps && arg, !hasProps && Point.read(arguments));\n    },\n    _equals: function (item) {\n      return this._content === item._content;\n    },\n    copyContent: function (source) {\n      this.setContent(source._content);\n    },\n    getContent: function () {\n      return this._content;\n    },\n    setContent: function (content) {\n      this._content = '' + content;\n      this._lines = this._content.split(/\\r\\n|\\n|\\r/mg);\n      this._changed(521);\n    },\n    isEmpty: function () {\n      return !this._content;\n    },\n    getCharacterStyle: '#getStyle',\n    setCharacterStyle: '#setStyle',\n    getParagraphStyle: '#getStyle',\n    setParagraphStyle: '#setStyle'\n  });\n  var PointText = TextItem.extend({\n    _class: 'PointText',\n    initialize: function PointText() {\n      TextItem.apply(this, arguments);\n    },\n    getPoint: function () {\n      var point = this._matrix.getTranslation();\n      return new LinkedPoint(point.x, point.y, this, 'setPoint');\n    },\n    setPoint: function () {\n      var point = Point.read(arguments);\n      this.translate(point.subtract(this._matrix.getTranslation()));\n    },\n    _draw: function (ctx, param, viewMatrix) {\n      if (!this._content) return;\n      this._setStyles(ctx, param, viewMatrix);\n      var lines = this._lines,\n        style = this._style,\n        hasFill = style.hasFill(),\n        hasStroke = style.hasStroke(),\n        leading = style.getLeading(),\n        shadowColor = ctx.shadowColor;\n      ctx.font = style.getFontStyle();\n      ctx.textAlign = style.getJustification();\n      for (var i = 0, l = lines.length; i < l; i++) {\n        ctx.shadowColor = shadowColor;\n        var line = lines[i];\n        if (hasFill) {\n          ctx.fillText(line, 0, 0);\n          ctx.shadowColor = 'rgba(0,0,0,0)';\n        }\n        if (hasStroke) ctx.strokeText(line, 0, 0);\n        ctx.translate(0, leading);\n      }\n    },\n    _getBounds: function (matrix, options) {\n      var style = this._style,\n        lines = this._lines,\n        numLines = lines.length,\n        justification = style.getJustification(),\n        leading = style.getLeading(),\n        width = this.getView().getTextWidth(style.getFontStyle(), lines),\n        x = 0;\n      if (justification !== 'left') x -= width / (justification === 'center' ? 2 : 1);\n      var rect = new Rectangle(x, numLines ? -0.75 * leading : 0, width, numLines * leading);\n      return matrix ? matrix._transformBounds(rect, rect) : rect;\n    }\n  });\n  var Color = Base.extend(new function () {\n    var types = {\n      gray: ['gray'],\n      rgb: ['red', 'green', 'blue'],\n      hsb: ['hue', 'saturation', 'brightness'],\n      hsl: ['hue', 'saturation', 'lightness'],\n      gradient: ['gradient', 'origin', 'destination', 'highlight']\n    };\n    var componentParsers = {},\n      namedColors = {\n        transparent: [0, 0, 0, 0]\n      },\n      colorCtx;\n    function fromCSS(string) {\n      var match = string.match(/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})?$/i) || string.match(/^#([\\da-f])([\\da-f])([\\da-f])([\\da-f])?$/i),\n        type = 'rgb',\n        components;\n      if (match) {\n        var amount = match[4] ? 4 : 3;\n        components = new Array(amount);\n        for (var i = 0; i < amount; i++) {\n          var value = match[i + 1];\n          components[i] = parseInt(value.length == 1 ? value + value : value, 16) / 255;\n        }\n      } else if (match = string.match(/^(rgb|hsl)a?\\((.*)\\)$/)) {\n        type = match[1];\n        components = match[2].trim().split(/[,\\s]+/g);\n        var isHSL = type === 'hsl';\n        for (var i = 0, l = Math.min(components.length, 4); i < l; i++) {\n          var component = components[i];\n          var value = parseFloat(component);\n          if (isHSL) {\n            if (i === 0) {\n              var unit = component.match(/([a-z]*)$/)[1];\n              value *= {\n                turn: 360,\n                rad: 180 / Math.PI,\n                grad: 0.9\n              }[unit] || 1;\n            } else if (i < 3) {\n              value /= 100;\n            }\n          } else if (i < 3) {\n            value /= /%$/.test(component) ? 100 : 255;\n          }\n          components[i] = value;\n        }\n      } else {\n        var color = namedColors[string];\n        if (!color) {\n          if (window) {\n            if (!colorCtx) {\n              colorCtx = CanvasProvider.getContext(1, 1, {\n                willReadFrequently: true\n              });\n              colorCtx.globalCompositeOperation = 'copy';\n            }\n            colorCtx.fillStyle = 'rgba(0,0,0,0)';\n            colorCtx.fillStyle = string;\n            colorCtx.fillRect(0, 0, 1, 1);\n            var data = colorCtx.getImageData(0, 0, 1, 1).data;\n            color = namedColors[string] = [data[0] / 255, data[1] / 255, data[2] / 255];\n          } else {\n            color = [0, 0, 0];\n          }\n        }\n        components = color.slice();\n      }\n      return [type, components];\n    }\n    var hsbIndices = [[0, 3, 1], [2, 0, 1], [1, 0, 3], [1, 2, 0], [3, 1, 0], [0, 1, 2]];\n    var converters = {\n      'rgb-hsb': function (r, g, b) {\n        var max = Math.max(r, g, b),\n          min = Math.min(r, g, b),\n          delta = max - min,\n          h = delta === 0 ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60;\n        return [h, max === 0 ? 0 : delta / max, max];\n      },\n      'hsb-rgb': function (h, s, b) {\n        h = (h / 60 % 6 + 6) % 6;\n        var i = Math.floor(h),\n          f = h - i,\n          i = hsbIndices[i],\n          v = [b, b * (1 - s), b * (1 - s * f), b * (1 - s * (1 - f))];\n        return [v[i[0]], v[i[1]], v[i[2]]];\n      },\n      'rgb-hsl': function (r, g, b) {\n        var max = Math.max(r, g, b),\n          min = Math.min(r, g, b),\n          delta = max - min,\n          achromatic = delta === 0,\n          h = achromatic ? 0 : (max == r ? (g - b) / delta + (g < b ? 6 : 0) : max == g ? (b - r) / delta + 2 : (r - g) / delta + 4) * 60,\n          l = (max + min) / 2,\n          s = achromatic ? 0 : l < 0.5 ? delta / (max + min) : delta / (2 - max - min);\n        return [h, s, l];\n      },\n      'hsl-rgb': function (h, s, l) {\n        h = (h / 360 % 1 + 1) % 1;\n        if (s === 0) return [l, l, l];\n        var t3s = [h + 1 / 3, h, h - 1 / 3],\n          t2 = l < 0.5 ? l * (1 + s) : l + s - l * s,\n          t1 = 2 * l - t2,\n          c = [];\n        for (var i = 0; i < 3; i++) {\n          var t3 = t3s[i];\n          if (t3 < 0) t3 += 1;\n          if (t3 > 1) t3 -= 1;\n          c[i] = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 : 2 * t3 < 1 ? t2 : 3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 : t1;\n        }\n        return c;\n      },\n      'rgb-gray': function (r, g, b) {\n        return [r * 0.2989 + g * 0.587 + b * 0.114];\n      },\n      'gray-rgb': function (g) {\n        return [g, g, g];\n      },\n      'gray-hsb': function (g) {\n        return [0, 0, g];\n      },\n      'gray-hsl': function (g) {\n        return [0, 0, g];\n      },\n      'gradient-rgb': function () {\n        return [];\n      },\n      'rgb-gradient': function () {\n        return [];\n      }\n    };\n    return Base.each(types, function (properties, type) {\n      componentParsers[type] = [];\n      Base.each(properties, function (name, index) {\n        var part = Base.capitalize(name),\n          hasOverlap = /^(hue|saturation)$/.test(name),\n          parser = componentParsers[type][index] = type === 'gradient' ? name === 'gradient' ? function (value) {\n            var current = this._components[0];\n            value = Gradient.read(Array.isArray(value) ? value : arguments, 0, {\n              readNull: true\n            });\n            if (current !== value) {\n              if (current) current._removeOwner(this);\n              if (value) value._addOwner(this);\n            }\n            return value;\n          } : function () {\n            return Point.read(arguments, 0, {\n              readNull: name === 'highlight',\n              clone: true\n            });\n          } : function (value) {\n            return value == null || isNaN(value) ? 0 : +value;\n          };\n        this['get' + part] = function () {\n          return this._type === type || hasOverlap && /^hs[bl]$/.test(this._type) ? this._components[index] : this._convert(type)[index];\n        };\n        this['set' + part] = function (value) {\n          if (this._type !== type && !(hasOverlap && /^hs[bl]$/.test(this._type))) {\n            this._components = this._convert(type);\n            this._properties = types[type];\n            this._type = type;\n          }\n          this._components[index] = parser.call(this, value);\n          this._changed();\n        };\n      }, this);\n    }, {\n      _class: 'Color',\n      _readIndex: true,\n      initialize: function Color(arg) {\n        var args = arguments,\n          reading = this.__read,\n          read = 0,\n          type,\n          components,\n          alpha,\n          values;\n        if (Array.isArray(arg)) {\n          args = arg;\n          arg = args[0];\n        }\n        var argType = arg != null && typeof arg;\n        if (argType === 'string' && arg in types) {\n          type = arg;\n          arg = args[1];\n          if (Array.isArray(arg)) {\n            components = arg;\n            alpha = args[2];\n          } else {\n            if (reading) read = 1;\n            args = Base.slice(args, 1);\n            argType = typeof arg;\n          }\n        }\n        if (!components) {\n          values = argType === 'number' ? args : argType === 'object' && arg.length != null ? arg : null;\n          if (values) {\n            if (!type) type = values.length >= 3 ? 'rgb' : 'gray';\n            var length = types[type].length;\n            alpha = values[length];\n            if (reading) {\n              read += values === arguments ? length + (alpha != null ? 1 : 0) : 1;\n            }\n            if (values.length > length) values = Base.slice(values, 0, length);\n          } else if (argType === 'string') {\n            var converted = fromCSS(arg);\n            type = converted[0];\n            components = converted[1];\n            if (components.length === 4) {\n              alpha = components[3];\n              components.length--;\n            }\n          } else if (argType === 'object') {\n            if (arg.constructor === Color) {\n              type = arg._type;\n              components = arg._components.slice();\n              alpha = arg._alpha;\n              if (type === 'gradient') {\n                for (var i = 1, l = components.length; i < l; i++) {\n                  var point = components[i];\n                  if (point) components[i] = point.clone();\n                }\n              }\n            } else if (arg.constructor === Gradient) {\n              type = 'gradient';\n              values = args;\n            } else {\n              type = 'hue' in arg ? 'lightness' in arg ? 'hsl' : 'hsb' : 'gradient' in arg || 'stops' in arg || 'radial' in arg ? 'gradient' : 'gray' in arg ? 'gray' : 'rgb';\n              var properties = types[type],\n                parsers = componentParsers[type];\n              this._components = components = [];\n              for (var i = 0, l = properties.length; i < l; i++) {\n                var value = arg[properties[i]];\n                if (value == null && !i && type === 'gradient' && 'stops' in arg) {\n                  value = {\n                    stops: arg.stops,\n                    radial: arg.radial\n                  };\n                }\n                value = parsers[i].call(this, value);\n                if (value != null) components[i] = value;\n              }\n              alpha = arg.alpha;\n            }\n          }\n          if (reading && type) read = 1;\n        }\n        this._type = type || 'rgb';\n        if (!components) {\n          this._components = components = [];\n          var parsers = componentParsers[this._type];\n          for (var i = 0, l = parsers.length; i < l; i++) {\n            var value = parsers[i].call(this, values && values[i]);\n            if (value != null) components[i] = value;\n          }\n        }\n        this._components = components;\n        this._properties = types[this._type];\n        this._alpha = alpha;\n        if (reading) this.__read = read;\n        return this;\n      },\n      set: '#initialize',\n      _serialize: function (options, dictionary) {\n        var components = this.getComponents();\n        return Base.serialize(/^(gray|rgb)$/.test(this._type) ? components : [this._type].concat(components), options, true, dictionary);\n      },\n      _changed: function () {\n        this._canvasStyle = null;\n        if (this._owner) {\n          if (this._setter) {\n            this._owner[this._setter](this);\n          } else {\n            this._owner._changed(129);\n          }\n        }\n      },\n      _convert: function (type) {\n        var converter;\n        return this._type === type ? this._components.slice() : (converter = converters[this._type + '-' + type]) ? converter.apply(this, this._components) : converters['rgb-' + type].apply(this, converters[this._type + '-rgb'].apply(this, this._components));\n      },\n      convert: function (type) {\n        return new Color(type, this._convert(type), this._alpha);\n      },\n      getType: function () {\n        return this._type;\n      },\n      setType: function (type) {\n        this._components = this._convert(type);\n        this._properties = types[type];\n        this._type = type;\n      },\n      getComponents: function () {\n        var components = this._components.slice();\n        if (this._alpha != null) components.push(this._alpha);\n        return components;\n      },\n      getAlpha: function () {\n        return this._alpha != null ? this._alpha : 1;\n      },\n      setAlpha: function (alpha) {\n        this._alpha = alpha == null ? null : Math.min(Math.max(alpha, 0), 1);\n        this._changed();\n      },\n      hasAlpha: function () {\n        return this._alpha != null;\n      },\n      equals: function (color) {\n        var col = Base.isPlainValue(color, true) ? Color.read(arguments) : color;\n        return col === this || col && this._class === col._class && this._type === col._type && this.getAlpha() === col.getAlpha() && Base.equals(this._components, col._components) || false;\n      },\n      toString: function () {\n        var properties = this._properties,\n          parts = [],\n          isGradient = this._type === 'gradient',\n          f = Formatter.instance;\n        for (var i = 0, l = properties.length; i < l; i++) {\n          var value = this._components[i];\n          if (value != null) parts.push(properties[i] + ': ' + (isGradient ? value : f.number(value)));\n        }\n        if (this._alpha != null) parts.push('alpha: ' + f.number(this._alpha));\n        return '{ ' + parts.join(', ') + ' }';\n      },\n      toCSS: function (hex) {\n        var components = this._convert('rgb'),\n          alpha = hex || this._alpha == null ? 1 : this._alpha;\n        function convert(val) {\n          return Math.round((val < 0 ? 0 : val > 1 ? 1 : val) * 255);\n        }\n        components = [convert(components[0]), convert(components[1]), convert(components[2])];\n        if (alpha < 1) components.push(alpha < 0 ? 0 : alpha);\n        return hex ? '#' + ((1 << 24) + (components[0] << 16) + (components[1] << 8) + components[2]).toString(16).slice(1) : (components.length == 4 ? 'rgba(' : 'rgb(') + components.join(',') + ')';\n      },\n      toCanvasStyle: function (ctx, matrix) {\n        if (this._canvasStyle) return this._canvasStyle;\n        if (this._type !== 'gradient') return this._canvasStyle = this.toCSS();\n        var components = this._components,\n          gradient = components[0],\n          stops = gradient._stops,\n          origin = components[1],\n          destination = components[2],\n          highlight = components[3],\n          inverse = matrix && matrix.inverted(),\n          canvasGradient;\n        if (inverse) {\n          origin = inverse._transformPoint(origin);\n          destination = inverse._transformPoint(destination);\n          if (highlight) highlight = inverse._transformPoint(highlight);\n        }\n        if (gradient._radial) {\n          var radius = destination.getDistance(origin);\n          if (highlight) {\n            var vector = highlight.subtract(origin);\n            if (vector.getLength() > radius) highlight = origin.add(vector.normalize(radius - 0.1));\n          }\n          var start = highlight || origin;\n          canvasGradient = ctx.createRadialGradient(start.x, start.y, 0, origin.x, origin.y, radius);\n        } else {\n          canvasGradient = ctx.createLinearGradient(origin.x, origin.y, destination.x, destination.y);\n        }\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n            offset = stop._offset;\n          canvasGradient.addColorStop(offset == null ? i / (l - 1) : offset, stop._color.toCanvasStyle());\n        }\n        return this._canvasStyle = canvasGradient;\n      },\n      transform: function (matrix) {\n        if (this._type === 'gradient') {\n          var components = this._components;\n          for (var i = 1, l = components.length; i < l; i++) {\n            var point = components[i];\n            matrix._transformPoint(point, point, true);\n          }\n          this._changed();\n        }\n      },\n      statics: {\n        _types: types,\n        random: function () {\n          var random = Math.random;\n          return new Color(random(), random(), random());\n        },\n        _setOwner: function (color, owner, setter) {\n          if (color) {\n            if (color._owner && owner && color._owner !== owner) {\n              color = color.clone();\n            }\n            if (!color._owner ^ !owner) {\n              color._owner = owner || null;\n              color._setter = setter || null;\n            }\n          }\n          return color;\n        }\n      }\n    });\n  }(), new function () {\n    var operators = {\n      add: function (a, b) {\n        return a + b;\n      },\n      subtract: function (a, b) {\n        return a - b;\n      },\n      multiply: function (a, b) {\n        return a * b;\n      },\n      divide: function (a, b) {\n        return a / b;\n      }\n    };\n    return Base.each(operators, function (operator, name) {\n      this[name] = function (color) {\n        color = Color.read(arguments);\n        var type = this._type,\n          components1 = this._components,\n          components2 = color._convert(type);\n        for (var i = 0, l = components1.length; i < l; i++) components2[i] = operator(components1[i], components2[i]);\n        return new Color(type, components2, this._alpha != null ? operator(this._alpha, color.getAlpha()) : null);\n      };\n    }, {});\n  }());\n  var Gradient = Base.extend({\n    _class: 'Gradient',\n    initialize: function Gradient(stops, radial) {\n      this._id = UID.get();\n      if (stops && Base.isPlainObject(stops)) {\n        this.set(stops);\n        stops = radial = null;\n      }\n      if (this._stops == null) {\n        this.setStops(stops || ['white', 'black']);\n      }\n      if (this._radial == null) {\n        this.setRadial(typeof radial === 'string' && radial === 'radial' || radial || false);\n      }\n    },\n    _serialize: function (options, dictionary) {\n      return dictionary.add(this, function () {\n        return Base.serialize([this._stops, this._radial], options, true, dictionary);\n      });\n    },\n    _changed: function () {\n      for (var i = 0, l = this._owners && this._owners.length; i < l; i++) {\n        this._owners[i]._changed();\n      }\n    },\n    _addOwner: function (color) {\n      if (!this._owners) this._owners = [];\n      this._owners.push(color);\n    },\n    _removeOwner: function (color) {\n      var index = this._owners ? this._owners.indexOf(color) : -1;\n      if (index != -1) {\n        this._owners.splice(index, 1);\n        if (!this._owners.length) this._owners = undefined;\n      }\n    },\n    clone: function () {\n      var stops = [];\n      for (var i = 0, l = this._stops.length; i < l; i++) {\n        stops[i] = this._stops[i].clone();\n      }\n      return new Gradient(stops, this._radial);\n    },\n    getStops: function () {\n      return this._stops;\n    },\n    setStops: function (stops) {\n      if (stops.length < 2) {\n        throw new Error('Gradient stop list needs to contain at least two stops.');\n      }\n      var _stops = this._stops;\n      if (_stops) {\n        for (var i = 0, l = _stops.length; i < l; i++) _stops[i]._owner = undefined;\n      }\n      _stops = this._stops = GradientStop.readList(stops, 0, {\n        clone: true\n      });\n      for (var i = 0, l = _stops.length; i < l; i++) _stops[i]._owner = this;\n      this._changed();\n    },\n    getRadial: function () {\n      return this._radial;\n    },\n    setRadial: function (radial) {\n      this._radial = radial;\n      this._changed();\n    },\n    equals: function (gradient) {\n      if (gradient === this) return true;\n      if (gradient && this._class === gradient._class) {\n        var stops1 = this._stops,\n          stops2 = gradient._stops,\n          length = stops1.length;\n        if (length === stops2.length) {\n          for (var i = 0; i < length; i++) {\n            if (!stops1[i].equals(stops2[i])) return false;\n          }\n          return true;\n        }\n      }\n      return false;\n    }\n  });\n  var GradientStop = Base.extend({\n    _class: 'GradientStop',\n    initialize: function GradientStop(arg0, arg1) {\n      var color = arg0,\n        offset = arg1;\n      if (typeof arg0 === 'object' && arg1 === undefined) {\n        if (Array.isArray(arg0) && typeof arg0[0] !== 'number') {\n          color = arg0[0];\n          offset = arg0[1];\n        } else if ('color' in arg0 || 'offset' in arg0 || 'rampPoint' in arg0) {\n          color = arg0.color;\n          offset = arg0.offset || arg0.rampPoint || 0;\n        }\n      }\n      this.setColor(color);\n      this.setOffset(offset);\n    },\n    clone: function () {\n      return new GradientStop(this._color.clone(), this._offset);\n    },\n    _serialize: function (options, dictionary) {\n      var color = this._color,\n        offset = this._offset;\n      return Base.serialize(offset == null ? [color] : [color, offset], options, true, dictionary);\n    },\n    _changed: function () {\n      if (this._owner) this._owner._changed(129);\n    },\n    getOffset: function () {\n      return this._offset;\n    },\n    setOffset: function (offset) {\n      this._offset = offset;\n      this._changed();\n    },\n    getRampPoint: '#getOffset',\n    setRampPoint: '#setOffset',\n    getColor: function () {\n      return this._color;\n    },\n    setColor: function () {\n      Color._setOwner(this._color, null);\n      this._color = Color._setOwner(Color.read(arguments, 0), this, 'setColor');\n      this._changed();\n    },\n    equals: function (stop) {\n      return stop === this || stop && this._class === stop._class && this._color.equals(stop._color) && this._offset == stop._offset || false;\n    }\n  });\n  var Style = Base.extend(new function () {\n    var itemDefaults = {\n        fillColor: null,\n        fillRule: 'nonzero',\n        strokeColor: null,\n        strokeWidth: 1,\n        strokeCap: 'butt',\n        strokeJoin: 'miter',\n        strokeScaling: true,\n        miterLimit: 10,\n        dashOffset: 0,\n        dashArray: [],\n        shadowColor: null,\n        shadowBlur: 0,\n        shadowOffset: new Point(),\n        selectedColor: null\n      },\n      groupDefaults = Base.set({}, itemDefaults, {\n        fontFamily: 'sans-serif',\n        fontWeight: 'normal',\n        fontSize: 12,\n        leading: null,\n        justification: 'left'\n      }),\n      textDefaults = Base.set({}, groupDefaults, {\n        fillColor: new Color()\n      }),\n      flags = {\n        strokeWidth: 193,\n        strokeCap: 193,\n        strokeJoin: 193,\n        strokeScaling: 201,\n        miterLimit: 193,\n        fontFamily: 9,\n        fontWeight: 9,\n        fontSize: 9,\n        font: 9,\n        leading: 9,\n        justification: 9\n      },\n      item = {\n        beans: true\n      },\n      fields = {\n        _class: 'Style',\n        beans: true,\n        initialize: function Style(style, _owner, _project) {\n          this._values = {};\n          this._owner = _owner;\n          this._project = _owner && _owner._project || _project || paper.project;\n          this._defaults = !_owner || _owner instanceof Group ? groupDefaults : _owner instanceof TextItem ? textDefaults : itemDefaults;\n          if (style) this.set(style);\n        }\n      };\n    Base.each(groupDefaults, function (value, key) {\n      var isColor = /Color$/.test(key),\n        isPoint = key === 'shadowOffset',\n        part = Base.capitalize(key),\n        flag = flags[key],\n        set = 'set' + part,\n        get = 'get' + part;\n      fields[set] = function (value) {\n        var owner = this._owner,\n          children = owner && owner._children,\n          applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath);\n        if (applyToChildren) {\n          for (var i = 0, l = children.length; i < l; i++) children[i]._style[set](value);\n        }\n        if ((key === 'selectedColor' || !applyToChildren) && key in this._defaults) {\n          var old = this._values[key];\n          if (old !== value) {\n            if (isColor) {\n              if (old) {\n                Color._setOwner(old, null);\n                old._canvasStyle = null;\n              }\n              if (value && value.constructor === Color) {\n                value = Color._setOwner(value, owner, applyToChildren && set);\n              }\n            }\n            this._values[key] = value;\n            if (owner) owner._changed(flag || 129);\n          }\n        }\n      };\n      fields[get] = function (_dontMerge) {\n        var owner = this._owner,\n          children = owner && owner._children,\n          applyToChildren = children && children.length > 0 && !(owner instanceof CompoundPath),\n          value;\n        if (applyToChildren && !_dontMerge) {\n          for (var i = 0, l = children.length; i < l; i++) {\n            var childValue = children[i]._style[get]();\n            if (!i) {\n              value = childValue;\n            } else if (!Base.equals(value, childValue)) {\n              return undefined;\n            }\n          }\n        } else if (key in this._defaults) {\n          var value = this._values[key];\n          if (value === undefined) {\n            value = this._defaults[key];\n            if (value && value.clone) {\n              value = value.clone();\n            }\n          } else {\n            var ctor = isColor ? Color : isPoint ? Point : null;\n            if (ctor && !(value && value.constructor === ctor)) {\n              this._values[key] = value = ctor.read([value], 0, {\n                readNull: true,\n                clone: true\n              });\n            }\n          }\n        }\n        if (value && isColor) {\n          value = Color._setOwner(value, owner, applyToChildren && set);\n        }\n        return value;\n      };\n      item[get] = function (_dontMerge) {\n        return this._style[get](_dontMerge);\n      };\n      item[set] = function (value) {\n        this._style[set](value);\n      };\n    });\n    Base.each({\n      Font: 'FontFamily',\n      WindingRule: 'FillRule'\n    }, function (value, key) {\n      var get = 'get' + key,\n        set = 'set' + key;\n      fields[get] = item[get] = '#get' + value;\n      fields[set] = item[set] = '#set' + value;\n    });\n    Item.inject(item);\n    return fields;\n  }(), {\n    set: function (style) {\n      var isStyle = style instanceof Style,\n        values = isStyle ? style._values : style;\n      if (values) {\n        for (var key in values) {\n          if (key in this._defaults) {\n            var value = values[key];\n            this[key] = value && isStyle && value.clone ? value.clone() : value;\n          }\n        }\n      }\n    },\n    equals: function (style) {\n      function compare(style1, style2, secondary) {\n        var values1 = style1._values,\n          values2 = style2._values,\n          defaults2 = style2._defaults;\n        for (var key in values1) {\n          var value1 = values1[key],\n            value2 = values2[key];\n          if (!(secondary && key in values2) && !Base.equals(value1, value2 === undefined ? defaults2[key] : value2)) return false;\n        }\n        return true;\n      }\n      return style === this || style && this._class === style._class && compare(this, style) && compare(style, this, true) || false;\n    },\n    _dispose: function () {\n      var color;\n      color = this.getFillColor();\n      if (color) color._canvasStyle = null;\n      color = this.getStrokeColor();\n      if (color) color._canvasStyle = null;\n      color = this.getShadowColor();\n      if (color) color._canvasStyle = null;\n    },\n    hasFill: function () {\n      var color = this.getFillColor();\n      return !!color && color.alpha > 0;\n    },\n    hasStroke: function () {\n      var color = this.getStrokeColor();\n      return !!color && color.alpha > 0 && this.getStrokeWidth() > 0;\n    },\n    hasShadow: function () {\n      var color = this.getShadowColor();\n      return !!color && color.alpha > 0 && (this.getShadowBlur() > 0 || !this.getShadowOffset().isZero());\n    },\n    getView: function () {\n      return this._project._view;\n    },\n    getFontStyle: function () {\n      var fontSize = this.getFontSize();\n      return this.getFontWeight() + ' ' + fontSize + (/[a-z]/i.test(fontSize + '') ? ' ' : 'px ') + this.getFontFamily();\n    },\n    getFont: '#getFontFamily',\n    setFont: '#setFontFamily',\n    getLeading: function getLeading() {\n      var leading = getLeading.base.call(this),\n        fontSize = this.getFontSize();\n      if (/pt|em|%|px/.test(fontSize)) fontSize = this.getView().getPixelSize(fontSize);\n      return leading != null ? leading : fontSize * 1.2;\n    }\n  });\n  var DomElement = new function () {\n    function handlePrefix(el, name, set, value) {\n      var prefixes = ['', 'webkit', 'moz', 'Moz', 'ms', 'o'],\n        suffix = name[0].toUpperCase() + name.substring(1);\n      for (var i = 0; i < 6; i++) {\n        var prefix = prefixes[i],\n          key = prefix ? prefix + suffix : name;\n        if (key in el) {\n          if (set) {\n            el[key] = value;\n          } else {\n            return el[key];\n          }\n          break;\n        }\n      }\n    }\n    return {\n      getStyles: function (el) {\n        var doc = el && el.nodeType !== 9 ? el.ownerDocument : el,\n          view = doc && doc.defaultView;\n        return view && view.getComputedStyle(el, '');\n      },\n      getBounds: function (el, viewport) {\n        var doc = el.ownerDocument,\n          body = doc.body,\n          html = doc.documentElement,\n          rect;\n        try {\n          rect = el.getBoundingClientRect();\n        } catch (e) {\n          rect = {\n            left: 0,\n            top: 0,\n            width: 0,\n            height: 0\n          };\n        }\n        var x = rect.left - (html.clientLeft || body.clientLeft || 0),\n          y = rect.top - (html.clientTop || body.clientTop || 0);\n        if (!viewport) {\n          var view = doc.defaultView;\n          x += view.pageXOffset || html.scrollLeft || body.scrollLeft;\n          y += view.pageYOffset || html.scrollTop || body.scrollTop;\n        }\n        return new Rectangle(x, y, rect.width, rect.height);\n      },\n      getViewportBounds: function (el) {\n        var doc = el.ownerDocument,\n          view = doc.defaultView,\n          html = doc.documentElement;\n        return new Rectangle(0, 0, view.innerWidth || html.clientWidth, view.innerHeight || html.clientHeight);\n      },\n      getOffset: function (el, viewport) {\n        return DomElement.getBounds(el, viewport).getPoint();\n      },\n      getSize: function (el) {\n        return DomElement.getBounds(el, true).getSize();\n      },\n      isInvisible: function (el) {\n        return DomElement.getSize(el).equals(new Size(0, 0));\n      },\n      isInView: function (el) {\n        return !DomElement.isInvisible(el) && DomElement.getViewportBounds(el).intersects(DomElement.getBounds(el, true));\n      },\n      isInserted: function (el) {\n        return document.body.contains(el);\n      },\n      getPrefixed: function (el, name) {\n        return el && handlePrefix(el, name);\n      },\n      setPrefixed: function (el, name, value) {\n        if (typeof name === 'object') {\n          for (var key in name) handlePrefix(el, key, true, name[key]);\n        } else {\n          handlePrefix(el, name, true, value);\n        }\n      }\n    };\n  }();\n  var DomEvent = {\n    add: function (el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n            parts = type.split(/[\\s,]+/g);\n          for (var i = 0, l = parts.length; i < l; i++) {\n            var name = parts[i];\n            var options = el === document && (name === 'touchstart' || name === 'touchmove') ? {\n              passive: false\n            } : false;\n            el.addEventListener(name, func, options);\n          }\n        }\n      }\n    },\n    remove: function (el, events) {\n      if (el) {\n        for (var type in events) {\n          var func = events[type],\n            parts = type.split(/[\\s,]+/g);\n          for (var i = 0, l = parts.length; i < l; i++) el.removeEventListener(parts[i], func, false);\n        }\n      }\n    },\n    getPoint: function (event) {\n      var pos = event.targetTouches ? event.targetTouches.length ? event.targetTouches[0] : event.changedTouches[0] : event;\n      return new Point(pos.pageX || pos.clientX + document.documentElement.scrollLeft, pos.pageY || pos.clientY + document.documentElement.scrollTop);\n    },\n    getTarget: function (event) {\n      return event.target || event.srcElement;\n    },\n    getRelatedTarget: function (event) {\n      return event.relatedTarget || event.toElement;\n    },\n    getOffset: function (event, target) {\n      return DomEvent.getPoint(event).subtract(DomElement.getOffset(target || DomEvent.getTarget(event)));\n    }\n  };\n  DomEvent.requestAnimationFrame = new function () {\n    var nativeRequest = DomElement.getPrefixed(window, 'requestAnimationFrame'),\n      requested = false,\n      callbacks = [],\n      timer;\n    function handleCallbacks() {\n      var functions = callbacks;\n      callbacks = [];\n      for (var i = 0, l = functions.length; i < l; i++) functions[i]();\n      requested = nativeRequest && callbacks.length;\n      if (requested) nativeRequest(handleCallbacks);\n    }\n    return function (callback) {\n      callbacks.push(callback);\n      if (nativeRequest) {\n        if (!requested) {\n          nativeRequest(handleCallbacks);\n          requested = true;\n        }\n      } else if (!timer) {\n        timer = setInterval(handleCallbacks, 1000 / 60);\n      }\n    };\n  }();\n  var View = Base.extend(Emitter, {\n    _class: 'View',\n    initialize: function View(project, element) {\n      function getSize(name) {\n        return element[name] || parseInt(element.getAttribute(name), 10);\n      }\n      function getCanvasSize() {\n        var size = DomElement.getSize(element);\n        return size.isNaN() || size.isZero() ? new Size(getSize('width'), getSize('height')) : size;\n      }\n      var size;\n      if (window && element) {\n        this._id = element.getAttribute('id');\n        if (this._id == null) element.setAttribute('id', this._id = 'paper-view-' + View._id++);\n        DomEvent.add(element, this._viewEvents);\n        var none = 'none';\n        DomElement.setPrefixed(element.style, {\n          userDrag: none,\n          userSelect: none,\n          touchCallout: none,\n          contentZooming: none,\n          tapHighlightColor: 'rgba(0,0,0,0)'\n        });\n        if (PaperScope.hasAttribute(element, 'resize')) {\n          var that = this;\n          DomEvent.add(window, this._windowEvents = {\n            resize: function () {\n              that.setViewSize(getCanvasSize());\n            }\n          });\n        }\n        size = getCanvasSize();\n        if (PaperScope.hasAttribute(element, 'stats') && typeof Stats !== 'undefined') {\n          this._stats = new Stats();\n          var stats = this._stats.domElement,\n            style = stats.style,\n            offset = DomElement.getOffset(element);\n          style.position = 'absolute';\n          style.left = offset.x + 'px';\n          style.top = offset.y + 'px';\n          document.body.appendChild(stats);\n        }\n      } else {\n        size = new Size(element);\n        element = null;\n      }\n      this._project = project;\n      this._scope = project._scope;\n      this._element = element;\n      if (!this._pixelRatio) this._pixelRatio = window && window.devicePixelRatio || 1;\n      this._setElementSize(size.width, size.height);\n      this._viewSize = size;\n      View._views.push(this);\n      View._viewsById[this._id] = this;\n      (this._matrix = new Matrix())._owner = this;\n      if (!View._focused) View._focused = this;\n      this._frameItems = {};\n      this._frameItemCount = 0;\n      this._itemEvents = {\n        native: {},\n        virtual: {}\n      };\n      this._autoUpdate = !paper.agent.node;\n      this._needsUpdate = false;\n    },\n    remove: function () {\n      if (!this._project) return false;\n      if (View._focused === this) View._focused = null;\n      View._views.splice(View._views.indexOf(this), 1);\n      delete View._viewsById[this._id];\n      var project = this._project;\n      if (project._view === this) project._view = null;\n      DomEvent.remove(this._element, this._viewEvents);\n      DomEvent.remove(window, this._windowEvents);\n      this._element = this._project = null;\n      this.off('frame');\n      this._animate = false;\n      this._frameItems = {};\n      return true;\n    },\n    _events: Base.each(Item._itemHandlers.concat(['onResize', 'onKeyDown', 'onKeyUp']), function (name) {\n      this[name] = {};\n    }, {\n      onFrame: {\n        install: function () {\n          this.play();\n        },\n        uninstall: function () {\n          this.pause();\n        }\n      }\n    }),\n    _animate: false,\n    _time: 0,\n    _count: 0,\n    getAutoUpdate: function () {\n      return this._autoUpdate;\n    },\n    setAutoUpdate: function (autoUpdate) {\n      this._autoUpdate = autoUpdate;\n      if (autoUpdate) this.requestUpdate();\n    },\n    update: function () {},\n    draw: function () {\n      this.update();\n    },\n    requestUpdate: function () {\n      if (!this._requested) {\n        var that = this;\n        DomEvent.requestAnimationFrame(function () {\n          that._requested = false;\n          if (that._animate) {\n            that.requestUpdate();\n            var element = that._element;\n            if ((!DomElement.getPrefixed(document, 'hidden') || PaperScope.getAttribute(element, 'keepalive') === 'true') && DomElement.isInView(element)) {\n              that._handleFrame();\n            }\n          }\n          if (that._autoUpdate) that.update();\n        });\n        this._requested = true;\n      }\n    },\n    play: function () {\n      this._animate = true;\n      this.requestUpdate();\n    },\n    pause: function () {\n      this._animate = false;\n    },\n    _handleFrame: function () {\n      paper = this._scope;\n      var now = Date.now() / 1000,\n        delta = this._last ? now - this._last : 0;\n      this._last = now;\n      this.emit('frame', new Base({\n        delta: delta,\n        time: this._time += delta,\n        count: this._count++\n      }));\n      if (this._stats) this._stats.update();\n    },\n    _animateItem: function (item, animate) {\n      var items = this._frameItems;\n      if (animate) {\n        items[item._id] = {\n          item: item,\n          time: 0,\n          count: 0\n        };\n        if (++this._frameItemCount === 1) this.on('frame', this._handleFrameItems);\n      } else {\n        delete items[item._id];\n        if (--this._frameItemCount === 0) {\n          this.off('frame', this._handleFrameItems);\n        }\n      }\n    },\n    _handleFrameItems: function (event) {\n      for (var i in this._frameItems) {\n        var entry = this._frameItems[i];\n        entry.item.emit('frame', new Base(event, {\n          time: entry.time += event.delta,\n          count: entry.count++\n        }));\n      }\n    },\n    _changed: function () {\n      this._project._changed(4097);\n      this._bounds = this._decomposed = undefined;\n    },\n    getElement: function () {\n      return this._element;\n    },\n    getPixelRatio: function () {\n      return this._pixelRatio;\n    },\n    getResolution: function () {\n      return this._pixelRatio * 72;\n    },\n    getViewSize: function () {\n      var size = this._viewSize;\n      return new LinkedSize(size.width, size.height, this, 'setViewSize');\n    },\n    setViewSize: function () {\n      var size = Size.read(arguments),\n        delta = size.subtract(this._viewSize);\n      if (delta.isZero()) return;\n      this._setElementSize(size.width, size.height);\n      this._viewSize.set(size);\n      this._changed();\n      this.emit('resize', {\n        size: size,\n        delta: delta\n      });\n      if (this._autoUpdate) {\n        this.update();\n      }\n    },\n    _setElementSize: function (width, height) {\n      var element = this._element;\n      if (element) {\n        if (element.width !== width) element.width = width;\n        if (element.height !== height) element.height = height;\n      }\n    },\n    getBounds: function () {\n      if (!this._bounds) this._bounds = this._matrix.inverted()._transformBounds(new Rectangle(new Point(), this._viewSize));\n      return this._bounds;\n    },\n    getSize: function () {\n      return this.getBounds().getSize();\n    },\n    isVisible: function () {\n      return DomElement.isInView(this._element);\n    },\n    isInserted: function () {\n      return DomElement.isInserted(this._element);\n    },\n    getPixelSize: function (size) {\n      var element = this._element,\n        pixels;\n      if (element) {\n        var parent = element.parentNode,\n          temp = document.createElement('div');\n        temp.style.fontSize = size;\n        parent.appendChild(temp);\n        pixels = parseFloat(DomElement.getStyles(temp).fontSize);\n        parent.removeChild(temp);\n      } else {\n        pixels = parseFloat(pixels);\n      }\n      return pixels;\n    },\n    getTextWidth: function (font, lines) {\n      return 0;\n    }\n  }, Base.each(['rotate', 'scale', 'shear', 'skew'], function (key) {\n    var rotate = key === 'rotate';\n    this[key] = function () {\n      var args = arguments,\n        value = (rotate ? Base : Point).read(args),\n        center = Point.read(args, 0, {\n          readNull: true\n        });\n      return this.transform(new Matrix()[key](value, center || this.getCenter(true)));\n    };\n  }, {\n    _decompose: function () {\n      return this._decomposed || (this._decomposed = this._matrix.decompose());\n    },\n    translate: function () {\n      var mx = new Matrix();\n      return this.transform(mx.translate.apply(mx, arguments));\n    },\n    getCenter: function () {\n      return this.getBounds().getCenter();\n    },\n    setCenter: function () {\n      var center = Point.read(arguments);\n      this.translate(this.getCenter().subtract(center));\n    },\n    getZoom: function () {\n      var scaling = this._decompose().scaling;\n      return (scaling.x + scaling.y) / 2;\n    },\n    setZoom: function (zoom) {\n      this.transform(new Matrix().scale(zoom / this.getZoom(), this.getCenter()));\n    },\n    getRotation: function () {\n      return this._decompose().rotation;\n    },\n    setRotation: function (rotation) {\n      var current = this.getRotation();\n      if (current != null && rotation != null) {\n        this.rotate(rotation - current);\n      }\n    },\n    getScaling: function () {\n      var scaling = this._decompose().scaling;\n      return new LinkedPoint(scaling.x, scaling.y, this, 'setScaling');\n    },\n    setScaling: function () {\n      var current = this.getScaling(),\n        scaling = Point.read(arguments, 0, {\n          clone: true,\n          readNull: true\n        });\n      if (current && scaling) {\n        this.scale(scaling.x / current.x, scaling.y / current.y);\n      }\n    },\n    getMatrix: function () {\n      return this._matrix;\n    },\n    setMatrix: function () {\n      var matrix = this._matrix;\n      matrix.set.apply(matrix, arguments);\n    },\n    transform: function (matrix) {\n      this._matrix.append(matrix);\n    },\n    scrollBy: function () {\n      this.translate(Point.read(arguments).negate());\n    }\n  }), {\n    projectToView: function () {\n      return this._matrix._transformPoint(Point.read(arguments));\n    },\n    viewToProject: function () {\n      return this._matrix._inverseTransform(Point.read(arguments));\n    },\n    getEventPoint: function (event) {\n      return this.viewToProject(DomEvent.getOffset(event, this._element));\n    }\n  }, {\n    statics: {\n      _views: [],\n      _viewsById: {},\n      _id: 0,\n      create: function (project, element) {\n        if (document && typeof element === 'string') element = document.getElementById(element);\n        var ctor = window ? CanvasView : View;\n        return new ctor(project, element);\n      }\n    }\n  }, new function () {\n    if (!window) return;\n    var prevFocus,\n      tempFocus,\n      dragging = false,\n      mouseDown = false;\n    function getView(event) {\n      var target = DomEvent.getTarget(event);\n      return target.getAttribute && View._viewsById[target.getAttribute('id')];\n    }\n    function updateFocus() {\n      var view = View._focused;\n      if (!view || !view.isVisible()) {\n        for (var i = 0, l = View._views.length; i < l; i++) {\n          if ((view = View._views[i]).isVisible()) {\n            View._focused = tempFocus = view;\n            break;\n          }\n        }\n      }\n    }\n    function handleMouseMove(view, event, point) {\n      view._handleMouseEvent('mousemove', event, point);\n    }\n    var navigator = window.navigator,\n      mousedown,\n      mousemove,\n      mouseup;\n    if (navigator.pointerEnabled || navigator.msPointerEnabled) {\n      mousedown = 'pointerdown MSPointerDown';\n      mousemove = 'pointermove MSPointerMove';\n      mouseup = 'pointerup pointercancel MSPointerUp MSPointerCancel';\n    } else {\n      mousedown = 'touchstart';\n      mousemove = 'touchmove';\n      mouseup = 'touchend touchcancel';\n      if (!('ontouchstart' in window && navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i))) {\n        mousedown += ' mousedown';\n        mousemove += ' mousemove';\n        mouseup += ' mouseup';\n      }\n    }\n    var viewEvents = {},\n      docEvents = {\n        mouseout: function (event) {\n          var view = View._focused,\n            target = DomEvent.getRelatedTarget(event);\n          if (view && (!target || target.nodeName === 'HTML')) {\n            var offset = DomEvent.getOffset(event, view._element),\n              x = offset.x,\n              abs = Math.abs,\n              ax = abs(x),\n              max = 1 << 25,\n              diff = ax - max;\n            offset.x = abs(diff) < ax ? diff * (x < 0 ? -1 : 1) : x;\n            handleMouseMove(view, event, view.viewToProject(offset));\n          }\n        },\n        scroll: updateFocus\n      };\n    viewEvents[mousedown] = function (event) {\n      var view = View._focused = getView(event);\n      if (!dragging) {\n        dragging = true;\n        view._handleMouseEvent('mousedown', event);\n      }\n    };\n    docEvents[mousemove] = function (event) {\n      var view = View._focused;\n      if (!mouseDown) {\n        var target = getView(event);\n        if (target) {\n          if (view !== target) {\n            if (view) handleMouseMove(view, event);\n            if (!prevFocus) prevFocus = view;\n            view = View._focused = tempFocus = target;\n          }\n        } else if (tempFocus && tempFocus === view) {\n          if (prevFocus && !prevFocus.isInserted()) prevFocus = null;\n          view = View._focused = prevFocus;\n          prevFocus = null;\n          updateFocus();\n        }\n      }\n      if (view) handleMouseMove(view, event);\n    };\n    docEvents[mousedown] = function () {\n      mouseDown = true;\n    };\n    docEvents[mouseup] = function (event) {\n      var view = View._focused;\n      if (view && dragging) view._handleMouseEvent('mouseup', event);\n      mouseDown = dragging = false;\n    };\n    DomEvent.add(document, docEvents);\n    DomEvent.add(window, {\n      load: updateFocus\n    });\n    var called = false,\n      prevented = false,\n      fallbacks = {\n        doubleclick: 'click',\n        mousedrag: 'mousemove'\n      },\n      wasInView = false,\n      overView,\n      downPoint,\n      lastPoint,\n      downItem,\n      overItem,\n      dragItem,\n      clickItem,\n      clickTime,\n      dblClick;\n    function emitMouseEvent(obj, target, type, event, point, prevPoint, stopItem) {\n      var stopped = false,\n        mouseEvent;\n      function emit(obj, type) {\n        if (obj.responds(type)) {\n          if (!mouseEvent) {\n            mouseEvent = new MouseEvent(type, event, point, target || obj, prevPoint ? point.subtract(prevPoint) : null);\n          }\n          if (obj.emit(type, mouseEvent)) {\n            called = true;\n            if (mouseEvent.prevented) prevented = true;\n            if (mouseEvent.stopped) return stopped = true;\n          }\n        } else {\n          var fallback = fallbacks[type];\n          if (fallback) return emit(obj, fallback);\n        }\n      }\n      while (obj && obj !== stopItem) {\n        if (emit(obj, type)) break;\n        obj = obj._parent;\n      }\n      return stopped;\n    }\n    function emitMouseEvents(view, hitItem, type, event, point, prevPoint) {\n      view._project.removeOn(type);\n      prevented = called = false;\n      return dragItem && emitMouseEvent(dragItem, null, type, event, point, prevPoint) || hitItem && hitItem !== dragItem && !hitItem.isDescendant(dragItem) && emitMouseEvent(hitItem, null, type === 'mousedrag' ? 'mousemove' : type, event, point, prevPoint, dragItem) || emitMouseEvent(view, dragItem || hitItem || view, type, event, point, prevPoint);\n    }\n    var itemEventsMap = {\n      mousedown: {\n        mousedown: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mouseup: {\n        mouseup: 1,\n        mousedrag: 1,\n        click: 1,\n        doubleclick: 1\n      },\n      mousemove: {\n        mousedrag: 1,\n        mousemove: 1,\n        mouseenter: 1,\n        mouseleave: 1\n      }\n    };\n    return {\n      _viewEvents: viewEvents,\n      _handleMouseEvent: function (type, event, point) {\n        var itemEvents = this._itemEvents,\n          hitItems = itemEvents.native[type],\n          nativeMove = type === 'mousemove',\n          tool = this._scope.tool,\n          view = this;\n        function responds(type) {\n          return itemEvents.virtual[type] || view.responds(type) || tool && tool.responds(type);\n        }\n        if (nativeMove && dragging && responds('mousedrag')) type = 'mousedrag';\n        if (!point) point = this.getEventPoint(event);\n        var inView = this.getBounds().contains(point),\n          hit = hitItems && inView && view._project.hitTest(point, {\n            tolerance: 0,\n            fill: true,\n            stroke: true\n          }),\n          hitItem = hit && hit.item || null,\n          handle = false,\n          mouse = {};\n        mouse[type.substr(5)] = true;\n        if (hitItems && hitItem !== overItem) {\n          if (overItem) {\n            emitMouseEvent(overItem, null, 'mouseleave', event, point);\n          }\n          if (hitItem) {\n            emitMouseEvent(hitItem, null, 'mouseenter', event, point);\n          }\n          overItem = hitItem;\n        }\n        if (wasInView ^ inView) {\n          emitMouseEvent(this, null, inView ? 'mouseenter' : 'mouseleave', event, point);\n          overView = inView ? this : null;\n          handle = true;\n        }\n        if ((inView || mouse.drag) && !point.equals(lastPoint)) {\n          emitMouseEvents(this, hitItem, nativeMove ? type : 'mousemove', event, point, lastPoint);\n          handle = true;\n        }\n        wasInView = inView;\n        if (mouse.down && inView || mouse.up && downPoint) {\n          emitMouseEvents(this, hitItem, type, event, point, downPoint);\n          if (mouse.down) {\n            dblClick = hitItem === clickItem && Date.now() - clickTime < 300;\n            downItem = clickItem = hitItem;\n            if (!prevented && hitItem) {\n              var item = hitItem;\n              while (item && !item.responds('mousedrag')) item = item._parent;\n              if (item) dragItem = hitItem;\n            }\n            downPoint = point;\n          } else if (mouse.up) {\n            if (!prevented && hitItem === downItem) {\n              clickTime = Date.now();\n              emitMouseEvents(this, hitItem, dblClick ? 'doubleclick' : 'click', event, point, downPoint);\n              dblClick = false;\n            }\n            downItem = dragItem = null;\n          }\n          wasInView = false;\n          handle = true;\n        }\n        lastPoint = point;\n        if (handle && tool) {\n          called = tool._handleMouseEvent(type, event, point, mouse) || called;\n        }\n        if (event.cancelable !== false && (called && !mouse.move || mouse.down && responds('mouseup'))) {\n          event.preventDefault();\n        }\n      },\n      _handleKeyEvent: function (type, event, key, character) {\n        var scope = this._scope,\n          tool = scope.tool,\n          keyEvent;\n        function emit(obj) {\n          if (obj.responds(type)) {\n            paper = scope;\n            obj.emit(type, keyEvent = keyEvent || new KeyEvent(type, event, key, character));\n          }\n        }\n        if (this.isVisible()) {\n          emit(this);\n          if (tool && tool.responds(type)) emit(tool);\n        }\n      },\n      _countItemEvent: function (type, sign) {\n        var itemEvents = this._itemEvents,\n          native = itemEvents.native,\n          virtual = itemEvents.virtual;\n        for (var key in itemEventsMap) {\n          native[key] = (native[key] || 0) + (itemEventsMap[key][type] || 0) * sign;\n        }\n        virtual[type] = (virtual[type] || 0) + sign;\n      },\n      statics: {\n        updateFocus: updateFocus,\n        _resetState: function () {\n          dragging = mouseDown = called = wasInView = false;\n          prevFocus = tempFocus = overView = downPoint = lastPoint = downItem = overItem = dragItem = clickItem = clickTime = dblClick = null;\n        }\n      }\n    };\n  }());\n  var CanvasView = View.extend({\n    _class: 'CanvasView',\n    initialize: function CanvasView(project, canvas) {\n      if (!(canvas instanceof window.HTMLCanvasElement)) {\n        var size = Size.read(arguments, 1);\n        if (size.isZero()) throw new Error('Cannot create CanvasView with the provided argument: ' + Base.slice(arguments, 1));\n        canvas = CanvasProvider.getCanvas(size);\n      }\n      var ctx = this._context = canvas.getContext('2d');\n      ctx.save();\n      this._pixelRatio = 1;\n      if (!/^off|false$/.test(PaperScope.getAttribute(canvas, 'hidpi'))) {\n        var deviceRatio = window.devicePixelRatio || 1,\n          backingStoreRatio = DomElement.getPrefixed(ctx, 'backingStorePixelRatio') || 1;\n        this._pixelRatio = deviceRatio / backingStoreRatio;\n      }\n      View.call(this, project, canvas);\n      this._needsUpdate = true;\n    },\n    remove: function remove() {\n      this._context.restore();\n      return remove.base.call(this);\n    },\n    _setElementSize: function _setElementSize(width, height) {\n      var pixelRatio = this._pixelRatio;\n      _setElementSize.base.call(this, width * pixelRatio, height * pixelRatio);\n      if (pixelRatio !== 1) {\n        var element = this._element,\n          ctx = this._context;\n        if (!PaperScope.hasAttribute(element, 'resize')) {\n          var style = element.style;\n          style.width = width + 'px';\n          style.height = height + 'px';\n        }\n        ctx.restore();\n        ctx.save();\n        ctx.scale(pixelRatio, pixelRatio);\n      }\n    },\n    getContext: function () {\n      return this._context;\n    },\n    getPixelSize: function getPixelSize(size) {\n      var agent = paper.agent,\n        pixels;\n      if (agent && agent.firefox) {\n        pixels = getPixelSize.base.call(this, size);\n      } else {\n        var ctx = this._context,\n          prevFont = ctx.font;\n        ctx.font = size + ' serif';\n        pixels = parseFloat(ctx.font);\n        ctx.font = prevFont;\n      }\n      return pixels;\n    },\n    getTextWidth: function (font, lines) {\n      var ctx = this._context,\n        prevFont = ctx.font,\n        width = 0;\n      ctx.font = font;\n      for (var i = 0, l = lines.length; i < l; i++) width = Math.max(width, ctx.measureText(lines[i]).width);\n      ctx.font = prevFont;\n      return width;\n    },\n    update: function () {\n      if (!this._needsUpdate) return false;\n      var project = this._project,\n        ctx = this._context,\n        size = this._viewSize;\n      ctx.clearRect(0, 0, size.width + 1, size.height + 1);\n      if (project) project.draw(ctx, this._matrix, this._pixelRatio);\n      this._needsUpdate = false;\n      return true;\n    }\n  });\n  var Event = Base.extend({\n    _class: 'Event',\n    initialize: function Event(event) {\n      this.event = event;\n      this.type = event && event.type;\n    },\n    prevented: false,\n    stopped: false,\n    preventDefault: function () {\n      this.prevented = true;\n      this.event.preventDefault();\n    },\n    stopPropagation: function () {\n      this.stopped = true;\n      this.event.stopPropagation();\n    },\n    stop: function () {\n      this.stopPropagation();\n      this.preventDefault();\n    },\n    getTimeStamp: function () {\n      return this.event.timeStamp;\n    },\n    getModifiers: function () {\n      return Key.modifiers;\n    }\n  });\n  var KeyEvent = Event.extend({\n    _class: 'KeyEvent',\n    initialize: function KeyEvent(type, event, key, character) {\n      this.type = type;\n      this.event = event;\n      this.key = key;\n      this.character = character;\n    },\n    toString: function () {\n      return \"{ type: '\" + this.type + \"', key: '\" + this.key + \"', character: '\" + this.character + \"', modifiers: \" + this.getModifiers() + \" }\";\n    }\n  });\n  var Key = new function () {\n    var keyLookup = {\n        '\\t': 'tab',\n        ' ': 'space',\n        '\\b': 'backspace',\n        '\\x7f': 'delete',\n        'Spacebar': 'space',\n        'Del': 'delete',\n        'Win': 'meta',\n        'Esc': 'escape'\n      },\n      charLookup = {\n        'tab': '\\t',\n        'space': ' ',\n        'enter': '\\r'\n      },\n      keyMap = {},\n      charMap = {},\n      metaFixMap,\n      downKey,\n      modifiers = new Base({\n        shift: false,\n        control: false,\n        alt: false,\n        meta: false,\n        capsLock: false,\n        space: false\n      }).inject({\n        option: {\n          get: function () {\n            return this.alt;\n          }\n        },\n        command: {\n          get: function () {\n            var agent = paper && paper.agent;\n            return agent && agent.mac ? this.meta : this.control;\n          }\n        }\n      });\n    function getKey(event) {\n      var key = event.key || event.keyIdentifier;\n      key = /^U\\+/.test(key) ? String.fromCharCode(parseInt(key.substr(2), 16)) : /^Arrow[A-Z]/.test(key) ? key.substr(5) : key === 'Unidentified' || key === undefined ? String.fromCharCode(event.keyCode) : key;\n      return keyLookup[key] || (key.length > 1 ? Base.hyphenate(key) : key.toLowerCase());\n    }\n    function handleKey(down, key, character, event) {\n      var type = down ? 'keydown' : 'keyup',\n        view = View._focused,\n        name;\n      keyMap[key] = down;\n      if (down) {\n        charMap[key] = character;\n      } else {\n        delete charMap[key];\n      }\n      if (key.length > 1 && (name = Base.camelize(key)) in modifiers) {\n        modifiers[name] = down;\n        var agent = paper && paper.agent;\n        if (name === 'meta' && agent && agent.mac) {\n          if (down) {\n            metaFixMap = {};\n          } else {\n            for (var k in metaFixMap) {\n              if (k in charMap) handleKey(false, k, metaFixMap[k], event);\n            }\n            metaFixMap = null;\n          }\n        }\n      } else if (down && metaFixMap) {\n        metaFixMap[key] = character;\n      }\n      if (view) {\n        view._handleKeyEvent(down ? 'keydown' : 'keyup', event, key, character);\n      }\n    }\n    DomEvent.add(document, {\n      keydown: function (event) {\n        var key = getKey(event),\n          agent = paper && paper.agent;\n        if (key.length > 1 || agent && agent.chrome && (event.altKey || agent.mac && event.metaKey || !agent.mac && event.ctrlKey)) {\n          handleKey(true, key, charLookup[key] || (key.length > 1 ? '' : key), event);\n        } else {\n          downKey = key;\n        }\n      },\n      keypress: function (event) {\n        if (downKey) {\n          var key = getKey(event),\n            code = event.charCode,\n            character = code >= 32 ? String.fromCharCode(code) : key.length > 1 ? '' : key;\n          if (key !== downKey) {\n            key = character.toLowerCase();\n          }\n          handleKey(true, key, character, event);\n          downKey = null;\n        }\n      },\n      keyup: function (event) {\n        var key = getKey(event);\n        if (key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    DomEvent.add(window, {\n      blur: function (event) {\n        for (var key in charMap) handleKey(false, key, charMap[key], event);\n      }\n    });\n    return {\n      modifiers: modifiers,\n      isDown: function (key) {\n        return !!keyMap[key];\n      }\n    };\n  }();\n  var MouseEvent = Event.extend({\n    _class: 'MouseEvent',\n    initialize: function MouseEvent(type, event, point, target, delta) {\n      this.type = type;\n      this.event = event;\n      this.point = point;\n      this.target = target;\n      this.delta = delta;\n    },\n    toString: function () {\n      return \"{ type: '\" + this.type + \"', point: \" + this.point + ', target: ' + this.target + (this.delta ? ', delta: ' + this.delta : '') + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var ToolEvent = Event.extend({\n    _class: 'ToolEvent',\n    _item: null,\n    initialize: function ToolEvent(tool, type, event) {\n      this.tool = tool;\n      this.type = type;\n      this.event = event;\n    },\n    _choosePoint: function (point, toolPoint) {\n      return point ? point : toolPoint ? toolPoint.clone() : null;\n    },\n    getPoint: function () {\n      return this._choosePoint(this._point, this.tool._point);\n    },\n    setPoint: function (point) {\n      this._point = point;\n    },\n    getLastPoint: function () {\n      return this._choosePoint(this._lastPoint, this.tool._lastPoint);\n    },\n    setLastPoint: function (lastPoint) {\n      this._lastPoint = lastPoint;\n    },\n    getDownPoint: function () {\n      return this._choosePoint(this._downPoint, this.tool._downPoint);\n    },\n    setDownPoint: function (downPoint) {\n      this._downPoint = downPoint;\n    },\n    getMiddlePoint: function () {\n      if (!this._middlePoint && this.tool._lastPoint) {\n        return this.tool._point.add(this.tool._lastPoint).divide(2);\n      }\n      return this._middlePoint;\n    },\n    setMiddlePoint: function (middlePoint) {\n      this._middlePoint = middlePoint;\n    },\n    getDelta: function () {\n      return !this._delta && this.tool._lastPoint ? this.tool._point.subtract(this.tool._lastPoint) : this._delta;\n    },\n    setDelta: function (delta) {\n      this._delta = delta;\n    },\n    getCount: function () {\n      return this.tool[/^mouse(down|up)$/.test(this.type) ? '_downCount' : '_moveCount'];\n    },\n    setCount: function (count) {\n      this.tool[/^mouse(down|up)$/.test(this.type) ? 'downCount' : 'count'] = count;\n    },\n    getItem: function () {\n      if (!this._item) {\n        var result = this.tool._scope.project.hitTest(this.getPoint());\n        if (result) {\n          var item = result.item,\n            parent = item._parent;\n          while (/^(Group|CompoundPath)$/.test(parent._class)) {\n            item = parent;\n            parent = parent._parent;\n          }\n          this._item = item;\n        }\n      }\n      return this._item;\n    },\n    setItem: function (item) {\n      this._item = item;\n    },\n    toString: function () {\n      return '{ type: ' + this.type + ', point: ' + this.getPoint() + ', count: ' + this.getCount() + ', modifiers: ' + this.getModifiers() + ' }';\n    }\n  });\n  var Tool = PaperScopeItem.extend({\n    _class: 'Tool',\n    _list: 'tools',\n    _reference: 'tool',\n    _events: ['onMouseDown', 'onMouseUp', 'onMouseDrag', 'onMouseMove', 'onActivate', 'onDeactivate', 'onEditOptions', 'onKeyDown', 'onKeyUp'],\n    initialize: function Tool(props) {\n      PaperScopeItem.call(this);\n      this._moveCount = -1;\n      this._downCount = -1;\n      this.set(props);\n    },\n    getMinDistance: function () {\n      return this._minDistance;\n    },\n    setMinDistance: function (minDistance) {\n      this._minDistance = minDistance;\n      if (minDistance != null && this._maxDistance != null && minDistance > this._maxDistance) {\n        this._maxDistance = minDistance;\n      }\n    },\n    getMaxDistance: function () {\n      return this._maxDistance;\n    },\n    setMaxDistance: function (maxDistance) {\n      this._maxDistance = maxDistance;\n      if (this._minDistance != null && maxDistance != null && maxDistance < this._minDistance) {\n        this._minDistance = maxDistance;\n      }\n    },\n    getFixedDistance: function () {\n      return this._minDistance == this._maxDistance ? this._minDistance : null;\n    },\n    setFixedDistance: function (distance) {\n      this._minDistance = this._maxDistance = distance;\n    },\n    _handleMouseEvent: function (type, event, point, mouse) {\n      paper = this._scope;\n      if (mouse.drag && !this.responds(type)) type = 'mousemove';\n      var move = mouse.move || mouse.drag,\n        responds = this.responds(type),\n        minDistance = this.minDistance,\n        maxDistance = this.maxDistance,\n        called = false,\n        tool = this;\n      function update(minDistance, maxDistance) {\n        var pt = point,\n          toolPoint = move ? tool._point : tool._downPoint || pt;\n        if (move) {\n          if (tool._moveCount >= 0 && pt.equals(toolPoint)) {\n            return false;\n          }\n          if (toolPoint && (minDistance != null || maxDistance != null)) {\n            var vector = pt.subtract(toolPoint),\n              distance = vector.getLength();\n            if (distance < (minDistance || 0)) return false;\n            if (maxDistance) {\n              pt = toolPoint.add(vector.normalize(Math.min(distance, maxDistance)));\n            }\n          }\n          tool._moveCount++;\n        }\n        tool._point = pt;\n        tool._lastPoint = toolPoint || pt;\n        if (mouse.down) {\n          tool._moveCount = -1;\n          tool._downPoint = pt;\n          tool._downCount++;\n        }\n        return true;\n      }\n      function emit() {\n        if (responds) {\n          called = tool.emit(type, new ToolEvent(tool, type, event)) || called;\n        }\n      }\n      if (mouse.down) {\n        update();\n        emit();\n      } else if (mouse.up) {\n        update(null, maxDistance);\n        emit();\n      } else if (responds) {\n        while (update(minDistance, maxDistance)) emit();\n      }\n      return called;\n    }\n  });\n  var Tween = Base.extend(Emitter, {\n    _class: 'Tween',\n    statics: {\n      easings: new Base({\n        linear: function (t) {\n          return t;\n        },\n        easeInQuad: function (t) {\n          return t * t;\n        },\n        easeOutQuad: function (t) {\n          return t * (2 - t);\n        },\n        easeInOutQuad: function (t) {\n          return t < 0.5 ? 2 * t * t : -1 + 2 * (2 - t) * t;\n        },\n        easeInCubic: function (t) {\n          return t * t * t;\n        },\n        easeOutCubic: function (t) {\n          return --t * t * t + 1;\n        },\n        easeInOutCubic: function (t) {\n          return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n        },\n        easeInQuart: function (t) {\n          return t * t * t * t;\n        },\n        easeOutQuart: function (t) {\n          return 1 - --t * t * t * t;\n        },\n        easeInOutQuart: function (t) {\n          return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n        },\n        easeInQuint: function (t) {\n          return t * t * t * t * t;\n        },\n        easeOutQuint: function (t) {\n          return 1 + --t * t * t * t * t;\n        },\n        easeInOutQuint: function (t) {\n          return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n        }\n      })\n    },\n    initialize: function Tween(object, from, to, duration, easing, start) {\n      this.object = object;\n      var type = typeof easing;\n      var isFunction = type === 'function';\n      this.type = isFunction ? type : type === 'string' ? easing : 'linear';\n      this.easing = isFunction ? easing : Tween.easings[this.type];\n      this.duration = duration;\n      this.running = false;\n      this._then = null;\n      this._startTime = null;\n      var state = from || to;\n      this._keys = state ? Object.keys(state) : [];\n      this._parsedKeys = this._parseKeys(this._keys);\n      this._from = state && this._getState(from);\n      this._to = state && this._getState(to);\n      if (start !== false) {\n        this.start();\n      }\n    },\n    then: function (then) {\n      this._then = then;\n      return this;\n    },\n    start: function () {\n      this._startTime = null;\n      this.running = true;\n      return this;\n    },\n    stop: function () {\n      this.running = false;\n      return this;\n    },\n    update: function (progress) {\n      if (this.running) {\n        if (progress >= 1) {\n          progress = 1;\n          this.running = false;\n        }\n        var factor = this.easing(progress),\n          keys = this._keys,\n          getValue = function (value) {\n            return typeof value === 'function' ? value(factor, progress) : value;\n          };\n        for (var i = 0, l = keys && keys.length; i < l; i++) {\n          var key = keys[i],\n            from = getValue(this._from[key]),\n            to = getValue(this._to[key]),\n            value = from && to && from.__add && to.__add ? to.__subtract(from).__multiply(factor).__add(from) : (to - from) * factor + from;\n          this._setProperty(this._parsedKeys[key], value);\n        }\n        if (this.responds('update')) {\n          this.emit('update', new Base({\n            progress: progress,\n            factor: factor\n          }));\n        }\n        if (!this.running && this._then) {\n          this._then(this.object);\n        }\n      }\n      return this;\n    },\n    _events: {\n      onUpdate: {}\n    },\n    _handleFrame: function (time) {\n      var startTime = this._startTime,\n        progress = startTime ? (time - startTime) / this.duration : 0;\n      if (!startTime) {\n        this._startTime = time;\n      }\n      this.update(progress);\n    },\n    _getState: function (state) {\n      var keys = this._keys,\n        result = {};\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n          path = this._parsedKeys[key],\n          current = this._getProperty(path),\n          value;\n        if (state) {\n          var resolved = this._resolveValue(current, state[key]);\n          this._setProperty(path, resolved);\n          value = this._getProperty(path);\n          value = value && value.clone ? value.clone() : value;\n          this._setProperty(path, current);\n        } else {\n          value = current && current.clone ? current.clone() : current;\n        }\n        result[key] = value;\n      }\n      return result;\n    },\n    _resolveValue: function (current, value) {\n      if (value) {\n        if (Array.isArray(value) && value.length === 2) {\n          var operator = value[0];\n          return operator && operator.match && operator.match(/^[+\\-\\*\\/]=/) ? this._calculate(current, operator[0], value[1]) : value;\n        } else if (typeof value === 'string') {\n          var match = value.match(/^[+\\-*/]=(.*)/);\n          if (match) {\n            var parsed = JSON.parse(match[1].replace(/(['\"])?([a-zA-Z0-9_]+)(['\"])?:/g, '\"$2\": '));\n            return this._calculate(current, value[0], parsed);\n          }\n        }\n      }\n      return value;\n    },\n    _calculate: function (left, operator, right) {\n      return paper.PaperScript.calculateBinary(left, operator, right);\n    },\n    _parseKeys: function (keys) {\n      var parsed = {};\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var key = keys[i],\n          path = key.replace(/\\.([^.]*)/g, '/$1').replace(/\\[['\"]?([^'\"\\]]*)['\"]?\\]/g, '/$1');\n        parsed[key] = path.split('/');\n      }\n      return parsed;\n    },\n    _getProperty: function (path, offset) {\n      var obj = this.object;\n      for (var i = 0, l = path.length - (offset || 0); i < l && obj; i++) {\n        obj = obj[path[i]];\n      }\n      return obj;\n    },\n    _setProperty: function (path, value) {\n      var dest = this._getProperty(path, 1);\n      if (dest) {\n        dest[path[path.length - 1]] = value;\n      }\n    }\n  });\n  var Http = {\n    request: function (options) {\n      var xhr = new self.XMLHttpRequest();\n      xhr.open((options.method || 'get').toUpperCase(), options.url, Base.pick(options.async, true));\n      if (options.mimeType) xhr.overrideMimeType(options.mimeType);\n      xhr.onload = function () {\n        var status = xhr.status;\n        if (status === 0 || status === 200) {\n          if (options.onLoad) {\n            options.onLoad.call(xhr, xhr.responseText);\n          }\n        } else {\n          xhr.onerror();\n        }\n      };\n      xhr.onerror = function () {\n        var status = xhr.status,\n          message = 'Could not load \"' + options.url + '\" (Status: ' + status + ')';\n        if (options.onError) {\n          options.onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      };\n      return xhr.send(null);\n    }\n  };\n  var CanvasProvider = Base.exports.CanvasProvider = {\n    canvases: [],\n    getCanvas: function (width, height, options) {\n      if (!window) return null;\n      var canvas,\n        clear = true;\n      if (typeof width === 'object') {\n        height = width.height;\n        width = width.width;\n      }\n      if (this.canvases.length) {\n        canvas = this.canvases.pop();\n      } else {\n        canvas = document.createElement('canvas');\n        clear = false;\n      }\n      var ctx = canvas.getContext('2d', options || {});\n      if (!ctx) {\n        throw new Error('Canvas ' + canvas + ' is unable to provide a 2D context.');\n      }\n      if (canvas.width === width && canvas.height === height) {\n        if (clear) ctx.clearRect(0, 0, width + 1, height + 1);\n      } else {\n        canvas.width = width;\n        canvas.height = height;\n      }\n      ctx.save();\n      return canvas;\n    },\n    getContext: function (width, height, options) {\n      var canvas = this.getCanvas(width, height, options);\n      return canvas ? canvas.getContext('2d', options || {}) : null;\n    },\n    release: function (obj) {\n      var canvas = obj && obj.canvas ? obj.canvas : obj;\n      if (canvas && canvas.getContext) {\n        canvas.getContext('2d').restore();\n        this.canvases.push(canvas);\n      }\n    }\n  };\n  var BlendMode = new function () {\n    var min = Math.min,\n      max = Math.max,\n      abs = Math.abs,\n      sr,\n      sg,\n      sb,\n      sa,\n      br,\n      bg,\n      bb,\n      ba,\n      dr,\n      dg,\n      db;\n    function getLum(r, g, b) {\n      return 0.2989 * r + 0.587 * g + 0.114 * b;\n    }\n    function setLum(r, g, b, l) {\n      var d = l - getLum(r, g, b);\n      dr = r + d;\n      dg = g + d;\n      db = b + d;\n      var l = getLum(dr, dg, db),\n        mn = min(dr, dg, db),\n        mx = max(dr, dg, db);\n      if (mn < 0) {\n        var lmn = l - mn;\n        dr = l + (dr - l) * l / lmn;\n        dg = l + (dg - l) * l / lmn;\n        db = l + (db - l) * l / lmn;\n      }\n      if (mx > 255) {\n        var ln = 255 - l,\n          mxl = mx - l;\n        dr = l + (dr - l) * ln / mxl;\n        dg = l + (dg - l) * ln / mxl;\n        db = l + (db - l) * ln / mxl;\n      }\n    }\n    function getSat(r, g, b) {\n      return max(r, g, b) - min(r, g, b);\n    }\n    function setSat(r, g, b, s) {\n      var col = [r, g, b],\n        mx = max(r, g, b),\n        mn = min(r, g, b),\n        md;\n      mn = mn === r ? 0 : mn === g ? 1 : 2;\n      mx = mx === r ? 0 : mx === g ? 1 : 2;\n      md = min(mn, mx) === 0 ? max(mn, mx) === 1 ? 2 : 1 : 0;\n      if (col[mx] > col[mn]) {\n        col[md] = (col[md] - col[mn]) * s / (col[mx] - col[mn]);\n        col[mx] = s;\n      } else {\n        col[md] = col[mx] = 0;\n      }\n      col[mn] = 0;\n      dr = col[0];\n      dg = col[1];\n      db = col[2];\n    }\n    var modes = {\n      multiply: function () {\n        dr = br * sr / 255;\n        dg = bg * sg / 255;\n        db = bb * sb / 255;\n      },\n      screen: function () {\n        dr = br + sr - br * sr / 255;\n        dg = bg + sg - bg * sg / 255;\n        db = bb + sb - bb * sb / 255;\n      },\n      overlay: function () {\n        dr = br < 128 ? 2 * br * sr / 255 : 255 - 2 * (255 - br) * (255 - sr) / 255;\n        dg = bg < 128 ? 2 * bg * sg / 255 : 255 - 2 * (255 - bg) * (255 - sg) / 255;\n        db = bb < 128 ? 2 * bb * sb / 255 : 255 - 2 * (255 - bb) * (255 - sb) / 255;\n      },\n      'soft-light': function () {\n        var t = sr * br / 255;\n        dr = t + br * (255 - (255 - br) * (255 - sr) / 255 - t) / 255;\n        t = sg * bg / 255;\n        dg = t + bg * (255 - (255 - bg) * (255 - sg) / 255 - t) / 255;\n        t = sb * bb / 255;\n        db = t + bb * (255 - (255 - bb) * (255 - sb) / 255 - t) / 255;\n      },\n      'hard-light': function () {\n        dr = sr < 128 ? 2 * sr * br / 255 : 255 - 2 * (255 - sr) * (255 - br) / 255;\n        dg = sg < 128 ? 2 * sg * bg / 255 : 255 - 2 * (255 - sg) * (255 - bg) / 255;\n        db = sb < 128 ? 2 * sb * bb / 255 : 255 - 2 * (255 - sb) * (255 - bb) / 255;\n      },\n      'color-dodge': function () {\n        dr = br === 0 ? 0 : sr === 255 ? 255 : min(255, 255 * br / (255 - sr));\n        dg = bg === 0 ? 0 : sg === 255 ? 255 : min(255, 255 * bg / (255 - sg));\n        db = bb === 0 ? 0 : sb === 255 ? 255 : min(255, 255 * bb / (255 - sb));\n      },\n      'color-burn': function () {\n        dr = br === 255 ? 255 : sr === 0 ? 0 : max(0, 255 - (255 - br) * 255 / sr);\n        dg = bg === 255 ? 255 : sg === 0 ? 0 : max(0, 255 - (255 - bg) * 255 / sg);\n        db = bb === 255 ? 255 : sb === 0 ? 0 : max(0, 255 - (255 - bb) * 255 / sb);\n      },\n      darken: function () {\n        dr = br < sr ? br : sr;\n        dg = bg < sg ? bg : sg;\n        db = bb < sb ? bb : sb;\n      },\n      lighten: function () {\n        dr = br > sr ? br : sr;\n        dg = bg > sg ? bg : sg;\n        db = bb > sb ? bb : sb;\n      },\n      difference: function () {\n        dr = br - sr;\n        if (dr < 0) dr = -dr;\n        dg = bg - sg;\n        if (dg < 0) dg = -dg;\n        db = bb - sb;\n        if (db < 0) db = -db;\n      },\n      exclusion: function () {\n        dr = br + sr * (255 - br - br) / 255;\n        dg = bg + sg * (255 - bg - bg) / 255;\n        db = bb + sb * (255 - bb - bb) / 255;\n      },\n      hue: function () {\n        setSat(sr, sg, sb, getSat(br, bg, bb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      saturation: function () {\n        setSat(br, bg, bb, getSat(sr, sg, sb));\n        setLum(dr, dg, db, getLum(br, bg, bb));\n      },\n      luminosity: function () {\n        setLum(br, bg, bb, getLum(sr, sg, sb));\n      },\n      color: function () {\n        setLum(sr, sg, sb, getLum(br, bg, bb));\n      },\n      add: function () {\n        dr = min(br + sr, 255);\n        dg = min(bg + sg, 255);\n        db = min(bb + sb, 255);\n      },\n      subtract: function () {\n        dr = max(br - sr, 0);\n        dg = max(bg - sg, 0);\n        db = max(bb - sb, 0);\n      },\n      average: function () {\n        dr = (br + sr) / 2;\n        dg = (bg + sg) / 2;\n        db = (bb + sb) / 2;\n      },\n      negation: function () {\n        dr = 255 - abs(255 - sr - br);\n        dg = 255 - abs(255 - sg - bg);\n        db = 255 - abs(255 - sb - bb);\n      }\n    };\n    var nativeModes = this.nativeModes = Base.each(['source-over', 'source-in', 'source-out', 'source-atop', 'destination-over', 'destination-in', 'destination-out', 'destination-atop', 'lighter', 'darker', 'copy', 'xor'], function (mode) {\n      this[mode] = true;\n    }, {});\n    var ctx = CanvasProvider.getContext(1, 1, {\n      willReadFrequently: true\n    });\n    if (ctx) {\n      Base.each(modes, function (func, mode) {\n        var darken = mode === 'darken',\n          ok = false;\n        ctx.save();\n        try {\n          ctx.fillStyle = darken ? '#300' : '#a00';\n          ctx.fillRect(0, 0, 1, 1);\n          ctx.globalCompositeOperation = mode;\n          if (ctx.globalCompositeOperation === mode) {\n            ctx.fillStyle = darken ? '#a00' : '#300';\n            ctx.fillRect(0, 0, 1, 1);\n            ok = ctx.getImageData(0, 0, 1, 1).data[0] !== darken ? 170 : 51;\n          }\n        } catch (e) {}\n        ctx.restore();\n        nativeModes[mode] = ok;\n      });\n      CanvasProvider.release(ctx);\n    }\n    this.process = function (mode, srcContext, dstContext, alpha, offset) {\n      var srcCanvas = srcContext.canvas,\n        normal = mode === 'normal';\n      if (normal || nativeModes[mode]) {\n        dstContext.save();\n        dstContext.setTransform(1, 0, 0, 1, 0, 0);\n        dstContext.globalAlpha = alpha;\n        if (!normal) dstContext.globalCompositeOperation = mode;\n        dstContext.drawImage(srcCanvas, offset.x, offset.y);\n        dstContext.restore();\n      } else {\n        var process = modes[mode];\n        if (!process) return;\n        var dstData = dstContext.getImageData(offset.x, offset.y, srcCanvas.width, srcCanvas.height),\n          dst = dstData.data,\n          src = srcContext.getImageData(0, 0, srcCanvas.width, srcCanvas.height).data;\n        for (var i = 0, l = dst.length; i < l; i += 4) {\n          sr = src[i];\n          br = dst[i];\n          sg = src[i + 1];\n          bg = dst[i + 1];\n          sb = src[i + 2];\n          bb = dst[i + 2];\n          sa = src[i + 3];\n          ba = dst[i + 3];\n          process();\n          var a1 = sa * alpha / 255,\n            a2 = 1 - a1;\n          dst[i] = a1 * dr + a2 * br;\n          dst[i + 1] = a1 * dg + a2 * bg;\n          dst[i + 2] = a1 * db + a2 * bb;\n          dst[i + 3] = sa * alpha + a2 * ba;\n        }\n        dstContext.putImageData(dstData, offset.x, offset.y);\n      }\n    };\n  }();\n  var SvgElement = new function () {\n    var svg = 'http://www.w3.org/2000/svg',\n      xmlns = 'http://www.w3.org/2000/xmlns',\n      xlink = 'http://www.w3.org/1999/xlink',\n      attributeNamespace = {\n        href: xlink,\n        xlink: xmlns,\n        xmlns: xmlns + '/',\n        'xmlns:xlink': xmlns + '/'\n      };\n    function create(tag, attributes, formatter) {\n      return set(document.createElementNS(svg, tag), attributes, formatter);\n    }\n    function get(node, name) {\n      var namespace = attributeNamespace[name],\n        value = namespace ? node.getAttributeNS(namespace, name) : node.getAttribute(name);\n      return value === 'null' ? null : value;\n    }\n    function set(node, attributes, formatter) {\n      for (var name in attributes) {\n        var value = attributes[name],\n          namespace = attributeNamespace[name];\n        if (typeof value === 'number' && formatter) value = formatter.number(value);\n        if (namespace) {\n          node.setAttributeNS(namespace, name, value);\n        } else {\n          node.setAttribute(name, value);\n        }\n      }\n      return node;\n    }\n    return {\n      svg: svg,\n      xmlns: xmlns,\n      xlink: xlink,\n      create: create,\n      get: get,\n      set: set\n    };\n  }();\n  var SvgStyles = Base.each({\n    fillColor: ['fill', 'color'],\n    fillRule: ['fill-rule', 'string'],\n    strokeColor: ['stroke', 'color'],\n    strokeWidth: ['stroke-width', 'number'],\n    strokeCap: ['stroke-linecap', 'string'],\n    strokeJoin: ['stroke-linejoin', 'string'],\n    strokeScaling: ['vector-effect', 'lookup', {\n      true: 'none',\n      false: 'non-scaling-stroke'\n    }, function (item, value) {\n      return !value && (item instanceof PathItem || item instanceof Shape || item instanceof TextItem);\n    }],\n    miterLimit: ['stroke-miterlimit', 'number'],\n    dashArray: ['stroke-dasharray', 'array'],\n    dashOffset: ['stroke-dashoffset', 'number'],\n    fontFamily: ['font-family', 'string'],\n    fontWeight: ['font-weight', 'string'],\n    fontSize: ['font-size', 'number'],\n    justification: ['text-anchor', 'lookup', {\n      left: 'start',\n      center: 'middle',\n      right: 'end'\n    }],\n    opacity: ['opacity', 'number'],\n    blendMode: ['mix-blend-mode', 'style']\n  }, function (entry, key) {\n    var part = Base.capitalize(key),\n      lookup = entry[2];\n    this[key] = {\n      type: entry[1],\n      property: key,\n      attribute: entry[0],\n      toSVG: lookup,\n      fromSVG: lookup && Base.each(lookup, function (value, name) {\n        this[value] = name;\n      }, {}),\n      exportFilter: entry[3],\n      get: 'get' + part,\n      set: 'set' + part\n    };\n  }, {});\n  new function () {\n    var formatter;\n    function getTransform(matrix, coordinates, center) {\n      var attrs = new Base(),\n        trans = matrix.getTranslation();\n      if (coordinates) {\n        var point;\n        if (matrix.isInvertible()) {\n          matrix = matrix._shiftless();\n          point = matrix._inverseTransform(trans);\n          trans = null;\n        } else {\n          point = new Point();\n        }\n        attrs[center ? 'cx' : 'x'] = point.x;\n        attrs[center ? 'cy' : 'y'] = point.y;\n      }\n      if (!matrix.isIdentity()) {\n        var decomposed = matrix.decompose();\n        if (decomposed) {\n          var parts = [],\n            angle = decomposed.rotation,\n            scale = decomposed.scaling,\n            skew = decomposed.skewing;\n          if (trans && !trans.isZero()) parts.push('translate(' + formatter.point(trans) + ')');\n          if (angle) parts.push('rotate(' + formatter.number(angle) + ')');\n          if (!Numerical.isZero(scale.x - 1) || !Numerical.isZero(scale.y - 1)) parts.push('scale(' + formatter.point(scale) + ')');\n          if (skew.x) parts.push('skewX(' + formatter.number(skew.x) + ')');\n          if (skew.y) parts.push('skewY(' + formatter.number(skew.y) + ')');\n          attrs.transform = parts.join(' ');\n        } else {\n          attrs.transform = 'matrix(' + matrix.getValues().join(',') + ')';\n        }\n      }\n      return attrs;\n    }\n    function exportGroup(item, options) {\n      var attrs = getTransform(item._matrix),\n        children = item._children;\n      var node = SvgElement.create('g', attrs, formatter);\n      for (var i = 0, l = children.length; i < l; i++) {\n        var child = children[i];\n        var childNode = exportSVG(child, options);\n        if (childNode) {\n          if (child.isClipMask()) {\n            var clip = SvgElement.create('clipPath');\n            clip.appendChild(childNode);\n            setDefinition(child, clip, 'clip');\n            SvgElement.set(node, {\n              'clip-path': 'url(#' + clip.id + ')'\n            });\n          } else {\n            node.appendChild(childNode);\n          }\n        }\n      }\n      return node;\n    }\n    function exportRaster(item, options) {\n      var attrs = getTransform(item._matrix, true),\n        size = item.getSize(),\n        image = item.getImage();\n      attrs.x -= size.width / 2;\n      attrs.y -= size.height / 2;\n      attrs.width = size.width;\n      attrs.height = size.height;\n      attrs.href = options.embedImages == false && image && image.src || item.toDataURL();\n      return SvgElement.create('image', attrs, formatter);\n    }\n    function exportPath(item, options) {\n      var matchShapes = options.matchShapes;\n      if (matchShapes) {\n        var shape = item.toShape(false);\n        if (shape) return exportShape(shape, options);\n      }\n      var segments = item._segments,\n        length = segments.length,\n        type,\n        attrs = getTransform(item._matrix);\n      if (matchShapes && length >= 2 && !item.hasHandles()) {\n        if (length > 2) {\n          type = item._closed ? 'polygon' : 'polyline';\n          var parts = [];\n          for (var i = 0; i < length; i++) {\n            parts.push(formatter.point(segments[i]._point));\n          }\n          attrs.points = parts.join(' ');\n        } else {\n          type = 'line';\n          var start = segments[0]._point,\n            end = segments[1]._point;\n          attrs.set({\n            x1: start.x,\n            y1: start.y,\n            x2: end.x,\n            y2: end.y\n          });\n        }\n      } else {\n        type = 'path';\n        attrs.d = item.getPathData(null, options.precision);\n      }\n      return SvgElement.create(type, attrs, formatter);\n    }\n    function exportShape(item) {\n      var type = item._type,\n        radius = item._radius,\n        attrs = getTransform(item._matrix, true, type !== 'rectangle');\n      if (type === 'rectangle') {\n        type = 'rect';\n        var size = item._size,\n          width = size.width,\n          height = size.height;\n        attrs.x -= width / 2;\n        attrs.y -= height / 2;\n        attrs.width = width;\n        attrs.height = height;\n        if (radius.isZero()) radius = null;\n      }\n      if (radius) {\n        if (type === 'circle') {\n          attrs.r = radius;\n        } else {\n          attrs.rx = radius.width;\n          attrs.ry = radius.height;\n        }\n      }\n      return SvgElement.create(type, attrs, formatter);\n    }\n    function exportCompoundPath(item, options) {\n      var attrs = getTransform(item._matrix);\n      var data = item.getPathData(null, options.precision);\n      if (data) attrs.d = data;\n      return SvgElement.create('path', attrs, formatter);\n    }\n    function exportSymbolItem(item, options) {\n      var attrs = getTransform(item._matrix, true),\n        definition = item._definition,\n        node = getDefinition(definition, 'symbol'),\n        definitionItem = definition._item,\n        bounds = definitionItem.getStrokeBounds();\n      if (!node) {\n        node = SvgElement.create('symbol', {\n          viewBox: formatter.rectangle(bounds)\n        });\n        node.appendChild(exportSVG(definitionItem, options));\n        setDefinition(definition, node, 'symbol');\n      }\n      attrs.href = '#' + node.id;\n      attrs.x += bounds.x;\n      attrs.y += bounds.y;\n      attrs.width = bounds.width;\n      attrs.height = bounds.height;\n      attrs.overflow = 'visible';\n      return SvgElement.create('use', attrs, formatter);\n    }\n    function exportGradient(color) {\n      var gradientNode = getDefinition(color, 'color');\n      if (!gradientNode) {\n        var gradient = color.getGradient(),\n          radial = gradient._radial,\n          origin = color.getOrigin(),\n          destination = color.getDestination(),\n          attrs;\n        if (radial) {\n          attrs = {\n            cx: origin.x,\n            cy: origin.y,\n            r: origin.getDistance(destination)\n          };\n          var highlight = color.getHighlight();\n          if (highlight) {\n            attrs.fx = highlight.x;\n            attrs.fy = highlight.y;\n          }\n        } else {\n          attrs = {\n            x1: origin.x,\n            y1: origin.y,\n            x2: destination.x,\n            y2: destination.y\n          };\n        }\n        attrs.gradientUnits = 'userSpaceOnUse';\n        gradientNode = SvgElement.create((radial ? 'radial' : 'linear') + 'Gradient', attrs, formatter);\n        var stops = gradient._stops;\n        for (var i = 0, l = stops.length; i < l; i++) {\n          var stop = stops[i],\n            stopColor = stop._color,\n            alpha = stopColor.getAlpha(),\n            offset = stop._offset;\n          attrs = {\n            offset: offset == null ? i / (l - 1) : offset\n          };\n          if (stopColor) attrs['stop-color'] = stopColor.toCSS(true);\n          if (alpha < 1) attrs['stop-opacity'] = alpha;\n          gradientNode.appendChild(SvgElement.create('stop', attrs, formatter));\n        }\n        setDefinition(color, gradientNode, 'color');\n      }\n      return 'url(#' + gradientNode.id + ')';\n    }\n    function exportText(item) {\n      var node = SvgElement.create('text', getTransform(item._matrix, true), formatter);\n      node.textContent = item._content;\n      return node;\n    }\n    var exporters = {\n      Group: exportGroup,\n      Layer: exportGroup,\n      Raster: exportRaster,\n      Path: exportPath,\n      Shape: exportShape,\n      CompoundPath: exportCompoundPath,\n      SymbolItem: exportSymbolItem,\n      PointText: exportText\n    };\n    function applyStyle(item, node, isRoot) {\n      var attrs = {},\n        parent = !isRoot && item.getParent(),\n        style = [];\n      if (item._name != null) attrs.id = item._name;\n      Base.each(SvgStyles, function (entry) {\n        var get = entry.get,\n          type = entry.type,\n          value = item[get]();\n        if (entry.exportFilter ? entry.exportFilter(item, value) : !parent || !Base.equals(parent[get](), value)) {\n          if (type === 'color' && value != null) {\n            var alpha = value.getAlpha();\n            if (alpha < 1) attrs[entry.attribute + '-opacity'] = alpha;\n          }\n          if (type === 'style') {\n            style.push(entry.attribute + ': ' + value);\n          } else {\n            attrs[entry.attribute] = value == null ? 'none' : type === 'color' ? value.gradient ? exportGradient(value, item) : value.toCSS(true) : type === 'array' ? value.join(',') : type === 'lookup' ? entry.toSVG[value] : value;\n          }\n        }\n      });\n      if (style.length) attrs.style = style.join(';');\n      if (attrs.opacity === 1) delete attrs.opacity;\n      if (!item._visible) attrs.visibility = 'hidden';\n      return SvgElement.set(node, attrs, formatter);\n    }\n    var definitions;\n    function getDefinition(item, type) {\n      if (!definitions) definitions = {\n        ids: {},\n        svgs: {}\n      };\n      return item && definitions.svgs[type + '-' + (item._id || item.__id || (item.__id = UID.get('svg')))];\n    }\n    function setDefinition(item, node, type) {\n      if (!definitions) getDefinition();\n      var typeId = definitions.ids[type] = (definitions.ids[type] || 0) + 1;\n      node.id = type + '-' + typeId;\n      definitions.svgs[type + '-' + (item._id || item.__id)] = node;\n    }\n    function exportDefinitions(node, options) {\n      var svg = node,\n        defs = null;\n      if (definitions) {\n        svg = node.nodeName.toLowerCase() === 'svg' && node;\n        for (var i in definitions.svgs) {\n          if (!defs) {\n            if (!svg) {\n              svg = SvgElement.create('svg');\n              svg.appendChild(node);\n            }\n            defs = svg.insertBefore(SvgElement.create('defs'), svg.firstChild);\n          }\n          defs.appendChild(definitions.svgs[i]);\n        }\n        definitions = null;\n      }\n      return options.asString ? new self.XMLSerializer().serializeToString(svg) : svg;\n    }\n    function exportSVG(item, options, isRoot) {\n      var exporter = exporters[item._class],\n        node = exporter && exporter(item, options);\n      if (node) {\n        var onExport = options.onExport;\n        if (onExport) node = onExport(item, node, options) || node;\n        var data = JSON.stringify(item._data);\n        if (data && data !== '{}' && data !== 'null') node.setAttribute('data-paper-data', data);\n      }\n      return node && applyStyle(item, node, isRoot);\n    }\n    function setOptions(options) {\n      if (!options) options = {};\n      formatter = new Formatter(options.precision);\n      return options;\n    }\n    Item.inject({\n      exportSVG: function (options) {\n        options = setOptions(options);\n        return exportDefinitions(exportSVG(this, options, true), options);\n      }\n    });\n    Project.inject({\n      exportSVG: function (options) {\n        options = setOptions(options);\n        var children = this._children,\n          view = this.getView(),\n          bounds = Base.pick(options.bounds, 'view'),\n          mx = options.matrix || bounds === 'view' && view._matrix,\n          matrix = mx && Matrix.read([mx]),\n          rect = bounds === 'view' ? new Rectangle([0, 0], view.getViewSize()) : bounds === 'content' ? Item._getBounds(children, matrix, {\n            stroke: true\n          }).rect : Rectangle.read([bounds], 0, {\n            readNull: true\n          }),\n          attrs = {\n            version: '1.1',\n            xmlns: SvgElement.svg,\n            'xmlns:xlink': SvgElement.xlink\n          };\n        if (rect) {\n          attrs.width = rect.width;\n          attrs.height = rect.height;\n          if (rect.x || rect.x === 0 || rect.y || rect.y === 0) attrs.viewBox = formatter.rectangle(rect);\n        }\n        var node = SvgElement.create('svg', attrs, formatter),\n          parent = node;\n        if (matrix && !matrix.isIdentity()) {\n          parent = node.appendChild(SvgElement.create('g', getTransform(matrix), formatter));\n        }\n        for (var i = 0, l = children.length; i < l; i++) {\n          parent.appendChild(exportSVG(children[i], options, true));\n        }\n        return exportDefinitions(node, options);\n      }\n    });\n  }();\n  new function () {\n    var definitions = {},\n      rootSize;\n    function getValue(node, name, isString, allowNull, allowPercent, defaultValue) {\n      var value = SvgElement.get(node, name) || defaultValue,\n        res = value == null ? allowNull ? null : isString ? '' : 0 : isString ? value : parseFloat(value);\n      return /%\\s*$/.test(value) ? res / 100 * (allowPercent ? 1 : rootSize[/x|^width/.test(name) ? 'width' : 'height']) : res;\n    }\n    function getPoint(node, x, y, allowNull, allowPercent, defaultX, defaultY) {\n      x = getValue(node, x || 'x', false, allowNull, allowPercent, defaultX);\n      y = getValue(node, y || 'y', false, allowNull, allowPercent, defaultY);\n      return allowNull && (x == null || y == null) ? null : new Point(x, y);\n    }\n    function getSize(node, w, h, allowNull, allowPercent) {\n      w = getValue(node, w || 'width', false, allowNull, allowPercent);\n      h = getValue(node, h || 'height', false, allowNull, allowPercent);\n      return allowNull && (w == null || h == null) ? null : new Size(w, h);\n    }\n    function convertValue(value, type, lookup) {\n      return value === 'none' ? null : type === 'number' ? parseFloat(value) : type === 'array' ? value ? value.split(/[\\s,]+/g).map(parseFloat) : [] : type === 'color' ? getDefinition(value) || value : type === 'lookup' ? lookup[value] : value;\n    }\n    function importGroup(node, type, options, isRoot) {\n      var nodes = node.childNodes,\n        isClip = type === 'clippath',\n        isDefs = type === 'defs',\n        item = new Group(),\n        project = item._project,\n        currentStyle = project._currentStyle,\n        children = [];\n      if (!isClip && !isDefs) {\n        item = applyAttributes(item, node, isRoot);\n        project._currentStyle = item._style.clone();\n      }\n      if (isRoot) {\n        var defs = node.querySelectorAll('defs');\n        for (var i = 0, l = defs.length; i < l; i++) {\n          importNode(defs[i], options, false);\n        }\n      }\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        var childNode = nodes[i],\n          child;\n        if (childNode.nodeType === 1 && !/^defs$/i.test(childNode.nodeName) && (child = importNode(childNode, options, false)) && !(child instanceof SymbolDefinition)) children.push(child);\n      }\n      item.addChildren(children);\n      if (isClip) item = applyAttributes(item.reduce(), node, isRoot);\n      project._currentStyle = currentStyle;\n      if (isClip || isDefs) {\n        item.remove();\n        item = null;\n      }\n      return item;\n    }\n    function importPoly(node, type) {\n      var coords = node.getAttribute('points').match(/[+-]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][+-]?\\d+)?/g),\n        points = [];\n      for (var i = 0, l = coords.length; i < l; i += 2) points.push(new Point(parseFloat(coords[i]), parseFloat(coords[i + 1])));\n      var path = new Path(points);\n      if (type === 'polygon') path.closePath();\n      return path;\n    }\n    function importPath(node) {\n      return PathItem.create(node.getAttribute('d'));\n    }\n    function importGradient(node, type) {\n      var id = (getValue(node, 'href', true) || '').substring(1),\n        radial = type === 'radialgradient',\n        gradient;\n      if (id) {\n        gradient = definitions[id].getGradient();\n        if (gradient._radial ^ radial) {\n          gradient = gradient.clone();\n          gradient._radial = radial;\n        }\n      } else {\n        var nodes = node.childNodes,\n          stops = [];\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) stops.push(applyAttributes(new GradientStop(), child));\n        }\n        gradient = new Gradient(stops, radial);\n      }\n      var origin,\n        destination,\n        highlight,\n        scaleToBounds = getValue(node, 'gradientUnits', true) !== 'userSpaceOnUse';\n      if (radial) {\n        origin = getPoint(node, 'cx', 'cy', false, scaleToBounds, '50%', '50%');\n        destination = origin.add(getValue(node, 'r', false, false, scaleToBounds, '50%'), 0);\n        highlight = getPoint(node, 'fx', 'fy', true, scaleToBounds);\n      } else {\n        origin = getPoint(node, 'x1', 'y1', false, scaleToBounds, '0%', '0%');\n        destination = getPoint(node, 'x2', 'y2', false, scaleToBounds, '100%', '0%');\n      }\n      var color = applyAttributes(new Color(gradient, origin, destination, highlight), node);\n      color._scaleToBounds = scaleToBounds;\n      return null;\n    }\n    var importers = {\n      '#document': function (node, type, options, isRoot) {\n        var nodes = node.childNodes;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          var child = nodes[i];\n          if (child.nodeType === 1) return importNode(child, options, isRoot);\n        }\n      },\n      g: importGroup,\n      svg: importGroup,\n      clippath: importGroup,\n      polygon: importPoly,\n      polyline: importPoly,\n      path: importPath,\n      lineargradient: importGradient,\n      radialgradient: importGradient,\n      image: function (node) {\n        var raster = new Raster(getValue(node, 'href', true));\n        raster.on('load', function () {\n          var size = getSize(node);\n          this.setSize(size);\n          var center = getPoint(node).add(size.divide(2));\n          this._matrix.append(new Matrix().translate(center));\n        });\n        return raster;\n      },\n      symbol: function (node, type, options, isRoot) {\n        return new SymbolDefinition(importGroup(node, type, options, isRoot), true);\n      },\n      defs: importGroup,\n      use: function (node) {\n        var id = (getValue(node, 'href', true) || '').substring(1),\n          definition = definitions[id],\n          point = getPoint(node);\n        return definition ? definition instanceof SymbolDefinition ? definition.place(point) : definition.clone().translate(point) : null;\n      },\n      circle: function (node) {\n        return new Shape.Circle(getPoint(node, 'cx', 'cy'), getValue(node, 'r'));\n      },\n      ellipse: function (node) {\n        return new Shape.Ellipse({\n          center: getPoint(node, 'cx', 'cy'),\n          radius: getSize(node, 'rx', 'ry')\n        });\n      },\n      rect: function (node) {\n        return new Shape.Rectangle(new Rectangle(getPoint(node), getSize(node)), getSize(node, 'rx', 'ry'));\n      },\n      line: function (node) {\n        return new Path.Line(getPoint(node, 'x1', 'y1'), getPoint(node, 'x2', 'y2'));\n      },\n      text: function (node) {\n        var text = new PointText(getPoint(node).add(getPoint(node, 'dx', 'dy')));\n        text.setContent(node.textContent.trim() || '');\n        return text;\n      },\n      switch: importGroup\n    };\n    function applyTransform(item, value, name, node) {\n      if (item.transform) {\n        var transforms = (node.getAttribute(name) || '').split(/\\)\\s*/g),\n          matrix = new Matrix();\n        for (var i = 0, l = transforms.length; i < l; i++) {\n          var transform = transforms[i];\n          if (!transform) break;\n          var parts = transform.split(/\\(\\s*/),\n            command = parts[0],\n            v = parts[1].split(/[\\s,]+/g);\n          for (var j = 0, m = v.length; j < m; j++) v[j] = parseFloat(v[j]);\n          switch (command) {\n            case 'matrix':\n              matrix.append(new Matrix(v[0], v[1], v[2], v[3], v[4], v[5]));\n              break;\n            case 'rotate':\n              matrix.rotate(v[0], v[1] || 0, v[2] || 0);\n              break;\n            case 'translate':\n              matrix.translate(v[0], v[1] || 0);\n              break;\n            case 'scale':\n              matrix.scale(v);\n              break;\n            case 'skewX':\n              matrix.skew(v[0], 0);\n              break;\n            case 'skewY':\n              matrix.skew(0, v[0]);\n              break;\n          }\n        }\n        item.transform(matrix);\n      }\n    }\n    function applyOpacity(item, value, name) {\n      var key = name === 'fill-opacity' ? 'getFillColor' : 'getStrokeColor',\n        color = item[key] && item[key]();\n      if (color) color.setAlpha(parseFloat(value));\n    }\n    var attributes = Base.set(Base.each(SvgStyles, function (entry) {\n      this[entry.attribute] = function (item, value) {\n        if (item[entry.set]) {\n          item[entry.set](convertValue(value, entry.type, entry.fromSVG));\n          if (entry.type === 'color') {\n            var color = item[entry.get]();\n            if (color) {\n              if (color._scaleToBounds) {\n                var bounds = item.getBounds();\n                color.transform(new Matrix().translate(bounds.getPoint()).scale(bounds.getSize()));\n              }\n            }\n          }\n        }\n      };\n    }, {}), {\n      id: function (item, value) {\n        definitions[value] = item;\n        if (item.setName) item.setName(value);\n      },\n      'clip-path': function (item, value) {\n        var clip = getDefinition(value);\n        if (clip) {\n          clip = clip.clone();\n          clip.setClipMask(true);\n          if (item instanceof Group) {\n            item.insertChild(0, clip);\n          } else {\n            return new Group(clip, item);\n          }\n        }\n      },\n      gradientTransform: applyTransform,\n      transform: applyTransform,\n      'fill-opacity': applyOpacity,\n      'stroke-opacity': applyOpacity,\n      visibility: function (item, value) {\n        if (item.setVisible) item.setVisible(value === 'visible');\n      },\n      display: function (item, value) {\n        if (item.setVisible) item.setVisible(value !== null);\n      },\n      'stop-color': function (item, value) {\n        if (item.setColor) item.setColor(value);\n      },\n      'stop-opacity': function (item, value) {\n        if (item._color) item._color.setAlpha(parseFloat(value));\n      },\n      offset: function (item, value) {\n        if (item.setOffset) {\n          var percent = value.match(/(.*)%$/);\n          item.setOffset(percent ? percent[1] / 100 : parseFloat(value));\n        }\n      },\n      viewBox: function (item, value, name, node, styles) {\n        var rect = new Rectangle(convertValue(value, 'array')),\n          size = getSize(node, null, null, true),\n          group,\n          matrix;\n        if (item instanceof Group) {\n          var scale = size ? size.divide(rect.getSize()) : 1,\n            matrix = new Matrix().scale(scale).translate(rect.getPoint().negate());\n          group = item;\n        } else if (item instanceof SymbolDefinition) {\n          if (size) rect.setSize(size);\n          group = item._item;\n        }\n        if (group) {\n          if (getAttribute(node, 'overflow', styles) !== 'visible') {\n            var clip = new Shape.Rectangle(rect);\n            clip.setClipMask(true);\n            group.addChild(clip);\n          }\n          if (matrix) group.transform(matrix);\n        }\n      }\n    });\n    function getAttribute(node, name, styles) {\n      var attr = node.attributes[name],\n        value = attr && attr.value;\n      if (!value && node.style) {\n        var style = Base.camelize(name);\n        value = node.style[style];\n        if (!value && styles.node[style] !== styles.parent[style]) value = styles.node[style];\n      }\n      return !value ? undefined : value === 'none' ? null : value;\n    }\n    function applyAttributes(item, node, isRoot) {\n      var parent = node.parentNode,\n        styles = {\n          node: DomElement.getStyles(node) || {},\n          parent: !isRoot && !/^defs$/i.test(parent.tagName) && DomElement.getStyles(parent) || {}\n        };\n      Base.each(attributes, function (apply, name) {\n        var value = getAttribute(node, name, styles);\n        item = value !== undefined && apply(item, value, name, node, styles) || item;\n      });\n      return item;\n    }\n    function getDefinition(value) {\n      var match = value && value.match(/\\((?:[\"'#]*)([^\"')]+)/),\n        name = match && match[1],\n        res = name && definitions[window ? name.replace(window.location.href.split('#')[0] + '#', '') : name];\n      if (res && res._scaleToBounds) {\n        res = res.clone();\n        res._scaleToBounds = true;\n      }\n      return res;\n    }\n    function importNode(node, options, isRoot) {\n      var type = node.nodeName.toLowerCase(),\n        isElement = type !== '#document',\n        body = document.body,\n        container,\n        parent,\n        next;\n      if (isRoot && isElement) {\n        rootSize = paper.getView().getSize();\n        rootSize = getSize(node, null, null, true) || rootSize;\n        container = SvgElement.create('svg', {\n          style: 'stroke-width: 1px; stroke-miterlimit: 10'\n        });\n        parent = node.parentNode;\n        next = node.nextSibling;\n        container.appendChild(node);\n        body.appendChild(container);\n      }\n      var settings = paper.settings,\n        applyMatrix = settings.applyMatrix,\n        insertItems = settings.insertItems;\n      settings.applyMatrix = false;\n      settings.insertItems = false;\n      var importer = importers[type],\n        item = importer && importer(node, type, options, isRoot) || null;\n      settings.insertItems = insertItems;\n      settings.applyMatrix = applyMatrix;\n      if (item) {\n        if (isElement && !(item instanceof Group)) item = applyAttributes(item, node, isRoot);\n        var onImport = options.onImport,\n          data = isElement && node.getAttribute('data-paper-data');\n        if (onImport) item = onImport(node, item, options) || item;\n        if (options.expandShapes && item instanceof Shape) {\n          item.remove();\n          item = item.toPath();\n        }\n        if (data) item._data = JSON.parse(data);\n      }\n      if (container) {\n        body.removeChild(container);\n        if (parent) {\n          if (next) {\n            parent.insertBefore(node, next);\n          } else {\n            parent.appendChild(node);\n          }\n        }\n      }\n      if (isRoot) {\n        definitions = {};\n        if (item && Base.pick(options.applyMatrix, applyMatrix)) item.matrix.apply(true, true);\n      }\n      return item;\n    }\n    function importSVG(source, options, owner) {\n      if (!source) return null;\n      options = typeof options === 'function' ? {\n        onLoad: options\n      } : options || {};\n      var scope = paper,\n        item = null;\n      function onLoad(svg) {\n        try {\n          var node = typeof svg === 'object' ? svg : new self.DOMParser().parseFromString(svg.trim(), 'image/svg+xml');\n          if (!node.nodeName) {\n            node = null;\n            throw new Error('Unsupported SVG source: ' + source);\n          }\n          paper = scope;\n          item = importNode(node, options, true);\n          if (!options || options.insert !== false) {\n            owner._insertItem(undefined, item);\n          }\n          var onLoad = options.onLoad;\n          if (onLoad) onLoad(item, svg);\n        } catch (e) {\n          onError(e);\n        }\n      }\n      function onError(message, status) {\n        var onError = options.onError;\n        if (onError) {\n          onError(message, status);\n        } else {\n          throw new Error(message);\n        }\n      }\n      if (typeof source === 'string' && !/^[\\s\\S]*</.test(source)) {\n        var node = document.getElementById(source);\n        if (node) {\n          onLoad(node);\n        } else {\n          Http.request({\n            url: source,\n            async: true,\n            onLoad: onLoad,\n            onError: onError\n          });\n        }\n      } else if (typeof File !== 'undefined' && source instanceof File) {\n        var reader = new FileReader();\n        reader.onload = function () {\n          onLoad(reader.result);\n        };\n        reader.onerror = function () {\n          onError(reader.error);\n        };\n        return reader.readAsText(source);\n      } else {\n        onLoad(source);\n      }\n      return item;\n    }\n    Item.inject({\n      importSVG: function (node, options) {\n        return importSVG(node, options, this);\n      }\n    });\n    Project.inject({\n      importSVG: function (node, options) {\n        this.activate();\n        return importSVG(node, options, this);\n      }\n    });\n  }();\n  var paper = new (PaperScope.inject(Base.exports, {\n    Base: Base,\n    Numerical: Numerical,\n    Key: Key,\n    DomEvent: DomEvent,\n    DomElement: DomElement,\n    document: document,\n    window: window,\n    Symbol: SymbolDefinition,\n    PlacedSymbol: SymbolItem\n  }))();\n  if (paper.agent.node) {\n    require('./node/extend.js')(paper);\n  }\n  if (typeof define === 'function' && define.amd) {\n    define('paper', paper);\n  } else if (typeof module === 'object' && module) {\n    module.exports = paper;\n  }\n  return paper;\n}.call(this, typeof self === 'object' ? self : null);"],"names":["self","undefined","window","document","Base","hidden","array","slice","create","Object","describe","getOwnPropertyDescriptor","define","defineProperty","forEach","iter","bind","i","l","this","length","call","forIn","hasOwnProperty","set","assign","dst","arguments","src","key","each","obj","desc","value","inject","dest","enumerable","beans","preserve","beansNames","field","name","val","get","substring","bean","isFunc","res","prev","base","match","toLowerCase","isPlainObject","writable","configurable","test","part","statics","prototype","extend","ctor","proto","initialize","apply","clone","constructor","pick","a","b","list","begin","end","module","exports","toString","_id","_class","_name","type","push","Formatter","instance","number","join","getClassName","importJSON","json","exportJSON","options","toJSON","serialize","props","exclude","filter","_prioritize","equals","obj1","obj2","Array","isArray","keys","read","start","amount","peek","__index","readIndex","_readIndex","readNull","__read","filtered","__filtered","remain","readList","entry","readNamed","getNamed","hasValue","source","getSource","__unfiltered","readSupported","that","__source","arg","hasNamed","prioritize","processed","handleKey","isPlainValue","asString","compact","dictionary","isRoot","formatter","precision","definitions","references","add","item","id","ref","unshift","_serialize","_compactSerialize","deserialize","_data","_setDictionary","_isRoot","isFirst","hasDictionary","isDictionary","args","JSON","stringify","target","parse","useTarget","Item","Layer","insert","concat","INSERT","items","itemsLength","startLength","splice","index","remove","append","_index","removed","capitalize","str","replace","toUpperCase","camelize","chr","hyphenate","Emitter","on","func","types","_eventTypes","handlers","_callbacks","indexOf","install","off","uninstall","once","handler","emit","event","setTarget","currentTarget","stop","responds","attach","detach","fire","_installEvents","events","_events","isString","PaperScope","paper","settings","applyMatrix","insertItems","handleSize","hitTolerance","project","projects","tools","_scopes","support","ctx","CanvasProvider","getContext","nativeDash","nativeBlendModes","BlendMode","nativeModes","release","agent","user","navigator","userAgent","os","exec","platform","browser","n","v1","v2","rv","chrome","v","version","versionNumber","parseFloat","trident","jsdom","webkit","atom","getView","_view","getPaper","execute","code","scope","setup","element","Project","createCanvas","width","height","getCanvas","activate","clear","handleAttribute","el","attr","getAttribute","hasAttribute","PaperScopeItem","_scope","_list","_reference","isActive","CollisionDetection","findItemBoundsCollisions","items1","items2","tolerance","getBounds","bounds","rect","left","top","right","bottom","bounds1","bounds2","findBoundsCollisions","findCurveBoundsCollisions","curves1","curves2","bothAxis","curves","min","Math","max","hor","ver","boundsA","boundsB","sweepVertical","onlySweepAxisCollisions","allBounds","lengthA","lengthAll","binarySearch","indices","coord","lo","hi","mid","pri0","pri1","sec0","sec1","allIndicesByPri0","sort","i1","i2","activeIndicesByPri1","allCollisions","curIndex","curBounds","origIndex","isCurrentA","isCurrentB","curCollisions","pruneCount","j","activeIndex","curSec1","curSec0","activeBounds","isActiveA","isActiveB","collisions","multiplier","pow","round","pair","val1","val2","separator","point","x","y","size","rectangle","Numerical","abscissas","weights","abs","sqrt","log2","log","LOG2E","EPSILON","MACHINE_EPSILON","clamp","getDiscriminant","c","split","D","E","ad","bd","cd","p","q","getNormalizationFactor","norm","CURVETIME_EPSILON","GEOMETRIC_EPSILON","TRIGONOMETRIC_EPSILON","ANGULAR_EPSILON","KAPPA","isZero","isMachineZero","integrate","f","w","A","B","m","sum","Ax","findRoot","df","fx","dx","nx","solveQuadratic","roots","x1","x2","Infinity","Q","R","count","boundless","minB","maxB","isFinite","solveCubic","d","b1","c2","qd","evaluate","x0","tmp","t","r","s","td","rd","UID","_pools","pool","Point","arg0","arg1","reading","hasY","_set","setAngle","angle","getLength","setLength","_angle","cos","sin","scale","getAngle","getAngleInRadians","PI","setAngleInRadians","getAngleInDegrees","setAngleInDegrees","div","NaN","dot","acos","atan2","getQuadrant","getDirectedAngle","cross","getDistance","normalize","current","rotate","center","subtract","transform","matrix","_transformPoint","multiply","divide","modulo","negate","isInside","Rectangle","contains","isClose","isCollinear","isColinear","isOrthogonal","isNaN","isInQuadrant","point1","point2","random","y1","y2","op","LinkedPoint","owner","setter","_x","_y","_owner","_setter","_dontNotify","getX","setX","getY","setY","isSelected","_selection","_getSelection","setSelected","selected","_changeSelection","Size","hasHeight","size1","size2","LinkedSize","_width","_height","getWidth","setWidth","getHeight","setHeight","arg2","arg3","from","to","frm","next","rt","getPoint","_dontLink","setPoint","getSize","_fw","_fh","setSize","sx","_sx","sy","_sy","h","getLeft","setLeft","getTop","setTop","getRight","setRight","getBottom","setBottom","getCenterX","setCenterX","getCenterY","setCenterY","getCenter","setCenter","getArea","isEmpty","_containsRectangle","_containsPoint","intersects","epsilon","intersect","unite","include","expand","parts","xFirst","LinkedRectangle","internal","Matrix","ok","_a","_b","_c","_d","_tx","_ty","reset","Error","tx","ty","_changed","getValues","_applyMatrix","mx","recursively","_setApplyMatrix","isIdentity","translate","shear","skew","toRadians","tan","a1","c1","d1","a2","b2","d2","tx2","ty2","prepend","tx1","ty1","appended","prepended","invert","det","inverted","concatenate","preConcatenate","chain","_shiftless","_orNullIfIdentity","isInvertible","isSingular","_transformCoordinates","_transformCorners","coords","_transformBounds","inverseTransform","_inverseTransform","decompose","degrees","asin","translation","getTranslation","rotation","scaling","skewing","getScaling","getRotation","applyToContext","prop","Line","arg4","asVector","_px","_py","_vx","_vy","getVector","line","isInfinite","getSide","getSignedDistance","p1x","p1y","v1x","v1y","p2x","p2y","v2x","v2y","dy","u1","u2","uMin","uMax","px","py","vx","vy","ccw","_children","_namedChildren","_activeLayer","_currentStyle","Style","View","_selectionItems","_selectionCount","_updateVersion","flags","view","_needsUpdate","_requested","_autoUpdate","requestUpdate","changes","_changes","changesById","_changesById","children","getCurrentStyle","setCurrentStyle","style","getIndex","getOptions","getLayers","getActiveLayer","getSymbolDefinitions","ids","getItems","class","SymbolItem","definition","_definition","getSymbols","getSelectedItems","selectionItems","selection","isInserted","_updateSelection","selectAll","setFullySelected","deselectAll","addLayer","layer","insertLayer","_remove","_setProject","setName","_insertItem","_created","NO_INSERT","insertChild","_getItems","getItem","removeOn","sets","_removeSets","mousedrag","other","draw","pixelRatio","save","param","offset","viewMatrix","matrices","updateMatrix","restore","strokeWidth","_drawSelection","_serializeFields","_canApplyMatrix","_canScaleStroke","_pivot","_visible","_blendMode","_opacity","_locked","_guide","_clipMask","_selectBounds","_selectChildren","pivot","visible","blendMode","opacity","locked","guide","clipMask","data","_countItemEvent","onFrame","_animateItem","onLoad","onError","_itemHandlers","_initialize","hasProps","_matrix","_parent","_style","parent","fields","fontSize","Group","_defaults","symbol","_symbol","cacheParent","_project","_bounds","_position","_decomposed","_globalMatrix","_clearBoundsCache","getId","getName","_removeNamed","_getOwner","namedChildren","getStyle","setStyle","getSelection","setSelection","flag","isFullySelected","isClipMask","setClipMask","setFillColor","setStrokeColor","getData","setData","getPosition","position","_getPositionFromBounds","setPosition","getPivot","setPivot","getStrokeBounds","stroke","getHandleBounds","handle","getInternalBounds","hasMatrix","opts","_boundsOptions","getStrokeScaling","cacheItem","_getCachedBounds","setBounds","_backup","_getBounds","_updateBoundsCache","_getBoundsCacheKey","noInternal","cacheKey","cached","nonscaling","hasStroke","_getStrokeMatrix","_item","getViewMatrix","_boundsCache","cache","_decompose","decomposed","setRotation","setScaling","getMatrix","setMatrix","getGlobalMatrix","_dontClone","parents","getApplyMatrix","setApplyMatrix","getTransformContent","setTransformContent","getProject","installEvents","getLayer","getParent","setParent","addChild","getChildren","setChildren","removeChildren","addChildren","getFirstChild","getLastChild","getNextSibling","getPreviousSibling","_equals","copy","deep","copyAttributes","copyContent","insertAbove","orig","excludeMatrix","rasterize","resolution","raster","Raster","getResolution","topLeft","getTopLeft","floor","bottomRight","getBottomRight","ceil","boundsSize","rasterSize","_contains","_asPathItem","Path","getIntersections","hitTest","_hitTest","HitResult","hitTestAll","all","hitTestChildren","_exclude","child","_hitTestChildren","parentViewMatrix","guides","tolerancePadding","_tolerancePadding","_getStrokePadding","checkSelf","hit","checkPoint","pt","checkPosition","checkCenter","checkBounds","points","_hitTestSelf","fill","hasFill","matches","compare","matchObject","firstOnly","overlapping","inside","recursive","path","childMatrix","insertChildren","inserted","notifySelf","_insertAt","insertBelow","sendToBack","bringToFront","appendTop","appendBottom","moveAbove","moveBelow","addTo","copyTo","reduce","namedArray","notifyParent","_dispose","replaceWith","reverseChildren","reverse","numChildren","isEditable","hasShadow","_getOrder","getList","list1","list2","hasChildren","isAbove","isBelow","isParent","isChild","isDescendant","isAncestor","isSibling","isGroupedWith","_applyRecursively","transformMatrix","fillColor","getFillColor","strokeColor","getStrokeColor","_transformContent","decomp","applyRecursively","globalToLocal","localToGlobal","parentToLocal","localToParent","fitBounds","itemRatio","rectRatio","newBounds","_setStyles","fillStyle","toCanvasStyle","strokeStyle","lineWidth","getStrokeWidth","strokeJoin","getStrokeJoin","strokeCap","getStrokeCap","miterLimit","getMiterLimit","lineJoin","lineCap","dashArray","getDashArray","dashOffset","getDashOffset","setLineDash","lineDashOffset","mozDash","mozDashOffset","blur","getShadowBlur","getShadowOffset","shadowColor","getShadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","parentStrokeMatrix","globalMatrix","mainCtx","itemOffset","prevOffset","normalBlend","nativeBlend","direct","dontStart","clip","_canComposite","pop","strokeMatrix","clipItem","globalAlpha","globalCompositeOperation","setTransform","_draw","dontFinish","getFillRule","process","_isUpdated","updateVersion","CompoundPath","updated","itemSelected","boundsSelected","positionSelected","_drawSelected","color","getSelectedColor","half","pos","beginPath","arc","deltas","delta","moveTo","lineTo","closePath","fillRect","hash","tween","easing","duration","Tween","_handleFrame","time","running","tweenTo","tweenFrom","_clipItem","_getClipItem","isClipped","setClipped","clipped","Shape","radius","_type","_size","_radius","setType","setRadius","getType","getShape","setShape","getRadius","rad","toPath","toShape","dontPaint","untransformed","isCircle","rx","ry","kappa","cx","cy","bezierCurveTo","getCornerCenter","halfSize","dir","corner","quadrant","isOnEllipseStroke","padding","vector","hitStroke","hitFill","strokeRadius","strokePadding","outer","inner","createShape","Circle","Ellipse","ellipse","_readEllipse","crossOrigin","_smoothing","image","object","getElementById","naturalHeight","setImage","setSource","_loaded","_image","canvas","_canvas","_setImage","copyCanvas","drawImage","_crossOrigin","_clear","getElement","getLoaded","u","getPpi","getImage","Event","setTimeout","DomEvent","load","error","complete","naturalWidth","_context","e","setCanvas","_change","setContext","context","toDataURL","Image","getCrossOrigin","setCrossOrigin","getSmoothing","setSmoothing","smoothing","getSubCanvas","getSubRaster","getAverageColor","PathItem","_sampleContext","clearRect","sampleSize","pixels","getImageData","channels","total","alpha","Color","getPixel","setPixel","components","_convert","_alpha","imageData","createImageData","putImageData","setImageData","disabled","DomElement","setPrefixed","setDefinition","SymbolDefinition","getDefinition","getSymbol","setSymbol","dontCenter","setItem","_dontCenter","place","values","segments","handles","ends","Segment","arg5","handleIn","handleOut","SegmentPoint","_point","hasHandles","_handleIn","_handleOut","_path","curve","_curves","_closed","getHandleIn","setHandleIn","getHandleOut","setHandleOut","isSmooth","clearHandles","oldSelection","getPath","getCurve","_segments","getCurves","getLocation","CurveLocation","_segment1","getNext","smooth","_first","_last","factor","getPrevious","p0","p1","p2","k","d1_a","d1_2a","d2_a","d2_2a","N","isLast","reversed","removeSegment","segment","interpolate","handleIn1","handleIn2","handleOut2","handleOut1","change","Curve","arg6","arg7","seg1","seg2","handle1","handle2","segment1","segment2","_segment2","getPoint1","getHandle1","getHandle2","getPoint2","_length","classify","setPoint1","setPoint2","setHandle1","setHandle2","getSegment1","getSegment2","getPoints","getLine","getPart","getPartLength","divideAt","location","divideAtTime","getTimeAt","_setHandles","subdivide","setHandles","splitAt","splitAtTime","getLocationAtTime","isTime","straight","h1","h2","y0","x3","y3","x4","y4","x5","y5","x6","y6","x7","y7","x8","y8","x9","y9","getMonoCurves","io","o0","o1","o2","o3","isStraight","v0","v3","getTimeOf","p3","geomEpsilon","getNearestTime","minDist","minT","refine","dist","step","flip","isFlatEnough","flatness","ux","uy","_addBounds","minPad","maxPad","s1","s2","isLinear","third","hasLength","isHorizontal","getTangentAtTime","isVertical","getLocationAt","_isTime","getParameterAt","getTimesWithTangent","tangent","getOffsetAtTime","getLocationOf","getOffsetOf","loc","getOffset","getParameterOf","getNearestLocation","getNearestPoint","methods","_evaluateMethods","getLengthIntegrand","ax","bx","ay","by","getIterations","normalized","tMin","tMax","len","d3","serpentine","t1","t2","hasRoots","t1Ok","t2Ok","f1","f2","ds","forward","rangeLength","diff","guess","getTangent","getWeightedTangent","getNormal","getWeightedNormal","getCurvature","getPeaks","addLocation","locations","overlap","excludeStart","excludeEnd","loc1","loc2","_intersection","addCurveIntersections","recursion","calls","tMinClip","tMaxClip","q0x","q0y","q3x","q3y","dMin","dMax","dp0","dp1","dp2","dp3","hull","dq0","dq1","dq2","dq3","dist1","dist2","distRatio","getConvexHull","clipConvexHull","tMinNew","tMaxNew","uDiff","hullTop","hullBottom","clipConvexHullPart","threshold","qx","qy","getCurveLineIntersections","addCurveLineIntersections","addLineIntersection","getCurveIntersections","overlaps","getOverlaps","straight1","straight2","before","getSelfIntersection","info","getSquaredLineLength","straightBoth","l1","l2","pairs","matrix1","matrix2","_returnFirst","length1","length2","values1","values2","boundsCollisions","index1","curve1","collisions1","index2","curve2","den","times","t0","_overlap","_distance","_setCurve","_time","getPointAtTime","_next","_previous","_setPath","_version","_curve","_segment","_setSegment","getSegment","getTime","trySegment","_offset","_curveOffset","getParameter","getCurveOffset","getIntersection","getLastSegment","_ignoreOther","isTouching","inter","isCrossing","t1Inside","t2Inside","c4","c3","offsets","addOffsets","isInRange","getPointAt","v4","a3","a4","hasOverlap","merge","search","found","path1","path2","expanded","compound","pathData","first","isClockwise","setClockwise","clockwise","setPathData","previous","control","relative","getCoord","command","lower","move","cubicCurveTo","quadraticCurveTo","arcTo","winding","_getWinding","onPath","windingL","windingR","getCrossings","minLoc","isPath","itemsFrom","itemsTo","setClosed","paths1","paths2","matched","boundsOverlaps","pathBoundsOverlaps","closed","setSegments","_segmentSelection","_area","getSegments","fullySelected","last","_add","getFirstSegment","_countCurves","getFirstCurve","getLastCurve","isClosed","getPathData","_precision","curX","curY","prevX","prevY","inX","inY","outX","outY","addSegment","skipLine","segs","_adjustCurves","insertSegment","addSegments","insertSegments","removeSegments","_includeCurves","area","_selectSegments","newSelection","last1","last2","first2","first1","simplify","flatten","PathFlattener","PathFitter","fit","_default","loop","asymmetric","paddingLeft","paddingRight","knots","n_1","rf","hx","hy","topCenter","seg3","seg4","isArc","pt1","pt2","shape","pos2","end2","pos1","end1","start2","cap","numSegments","hitCurves","isCloseEnough","checkSegmentPoint","seg","anchor","checkSegmentPoints","addToArea","checkSegmentStroke","isJoin","_addBevelJoin","_addSquareCap","getOffsetsWithTangent","curveStart","curveTimes","drawSegments","drawSegment","dashLength","flattener","drawPart","pX","pY","miniSize","miniHalf","drawHandle","hX","hY","drawHandles","getCurrentSegment","moveBy","curveTo","through","extent","middle","large","rxSq","rySq","xSq","ySq","throughSide","centerSide","ext","inc","z","out","_in","lineBy","curveBy","parameter","cubicCurveBy","quadraticCurveBy","arcBy","method","prevCoords","processSegment","joinBounds","addPoint","addRound","addJoin","addCap","phi","isArea","normal1","getNormalAtTime","normal2","normal","joinPadding","joinRadius","SQRT2","paddingX","paddingY","xn","xx","yn","yx","ellipseSegments","createPath","createEllipse","bl","getBottomLeft","tl","tr","getTopRight","br","RoundRectangle","Oval","Arc","RegularPolygon","sides","three","Star","radius1","radius2","paths","getCurrentPath","check","operators","getPaths","preparePath","resolve","resolveCrossings","reorient","createResult","result","filterIntersection","traceBoolean","operation","trace","splitBoolean","_path1","_path2","operator","crossings","divideLocations","collectPaths","_overlapsOnly","curvesValues","curveCollisions","curveCollisionsMap","propagateWinding","_winding","tracePaths","reorientPaths","added","addPath","linkIntersections","clearCurveHandles","lookup","container","sorted","entry1","containerWinding","getInteriorPoint","entry2","clearLater","renormalizeLocs","prevCurve","prevTime","results","clearCurves","clearLookup","origTime","newCurve","getWinding","dontFlip","vPrev","vClose","curvesList","ia","pv","pa","po","qualityEpsilon","paL","paR","pathWindingL","pathWindingR","onAnyPath","quality","addWinding","a0","windingPrev","a3Prev","handleCurve","monoCurves","totalLength","curveLength","operand","SQRT1_2","wind","pathWinding","starts","isValid","_visited","isStart","visitPath","getCrossingSegments","collectStarts","collect","nextInter","inter1","inter2","over1","over2","branch","visited","valid","finished","branches","shift","hasOverlaps","hasCrossings","intersections","nonZero","intercepts","mv","mo0","mo3","maxRecursion","ignoreStraight","minSpan","addCurve","computeParts","halves","tMid","_get","fitCubic","tan1","tan2","uPrime","chordLengthParameterize","maxError","parametersInOrder","generateBezier","findMaxError","reparameterize","tanCenter","C","X","b0","b3","alpha1","alpha2","detC0C1","detC0X","c0","segLength","eps","degree","maxDist","TextItem","content","_content","_lines","setContent","getContent","getCharacterStyle","setCharacterStyle","getParagraphStyle","setParagraphStyle","PointText","lines","leading","getLeading","font","getFontStyle","textAlign","getJustification","fillText","strokeText","numLines","justification","getTextWidth","colorCtx","gray","rgb","hsb","hsl","gradient","componentParsers","namedColors","transparent","hsbIndices","converters","g","achromatic","t3s","t3","properties","parser","_components","Gradient","_removeOwner","_addOwner","_properties","argType","converted","string","parseInt","trim","isHSL","component","unit","turn","grad","willReadFrequently","fromCSS","parsers","stops","radial","getComponents","_canvasStyle","converter","convert","getAlpha","setAlpha","hasAlpha","col","isGradient","toCSS","hex","canvasGradient","_stops","origin","destination","highlight","inverse","_radial","createRadialGradient","createLinearGradient","addColorStop","_color","_types","_setOwner","components1","components2","setStops","setRadial","_owners","getStops","GradientStop","getRadial","stops1","stops2","rampPoint","setColor","setOffset","getRampPoint","setRampPoint","getColor","itemDefaults","fillRule","strokeScaling","shadowOffset","selectedColor","groupDefaults","fontFamily","fontWeight","textDefaults","_values","isColor","isPoint","applyToChildren","old","_dontMerge","childValue","Font","WindingRule","isStyle","style1","style2","secondary","defaults2","value1","value2","getFontSize","getFontWeight","getFontFamily","getFont","setFont","getPixelSize","handlePrefix","prefixes","suffix","prefix","getStyles","doc","nodeType","ownerDocument","defaultView","getComputedStyle","viewport","body","html","documentElement","getBoundingClientRect","clientLeft","clientTop","pageXOffset","scrollLeft","pageYOffset","scrollTop","getViewportBounds","innerWidth","clientWidth","innerHeight","clientHeight","isInvisible","isInView","getPrefixed","passive","addEventListener","removeEventListener","targetTouches","changedTouches","pageX","clientX","pageY","clientY","getTarget","srcElement","getRelatedTarget","relatedTarget","toElement","requestAnimationFrame","timer","nativeRequest","requested","callbacks","handleCallbacks","functions","callback","setInterval","getCanvasSize","setAttribute","_viewEvents","none","userDrag","userSelect","touchCallout","contentZooming","tapHighlightColor","_windowEvents","resize","setViewSize","Stats","_stats","stats","domElement","appendChild","_element","_pixelRatio","devicePixelRatio","_setElementSize","_viewSize","_views","_viewsById","_focused","_frameItems","_frameItemCount","_itemEvents","native","virtual","node","_animate","play","pause","_count","getAutoUpdate","setAutoUpdate","autoUpdate","update","now","Date","animate","_handleFrameItems","getPixelRatio","getViewSize","isVisible","parentNode","temp","createElement","removeChild","getZoom","setZoom","zoom","scrollBy","projectToView","viewToProject","getEventPoint","CanvasView","prevFocus","tempFocus","mousedown","mousemove","mouseup","dragging","mouseDown","pointerEnabled","msPointerEnabled","viewEvents","docEvents","mouseout","nodeName","handleMouseMove","scroll","updateFocus","_handleMouseEvent","downPoint","lastPoint","downItem","overItem","dragItem","clickItem","clickTime","dblClick","called","prevented","fallbacks","doubleclick","wasInView","itemEventsMap","click","mouseenter","mouseleave","itemEvents","hitItems","nativeMove","tool","inView","hitItem","mouse","substr","emitMouseEvent","drag","emitMouseEvents","down","up","cancelable","preventDefault","_handleKeyEvent","character","keyEvent","KeyEvent","sign","_resetState","prevPoint","stopItem","mouseEvent","stopped","MouseEvent","fallback","HTMLCanvasElement","deviceRatio","backingStoreRatio","firefox","prevFont","measureText","stopPropagation","getTimeStamp","timeStamp","getModifiers","Key","modifiers","metaFixMap","downKey","keyLookup","charLookup","keyMap","charMap","alt","meta","capsLock","space","option","mac","getKey","keyIdentifier","String","fromCharCode","keyCode","keydown","altKey","metaKey","ctrlKey","keypress","charCode","keyup","isDown","ToolEvent","_choosePoint","toolPoint","getLastPoint","_lastPoint","setLastPoint","getDownPoint","_downPoint","setDownPoint","getMiddlePoint","_middlePoint","setMiddlePoint","middlePoint","getDelta","_delta","setDelta","getCount","setCount","_moveCount","_downCount","getMinDistance","_minDistance","setMinDistance","minDistance","_maxDistance","getMaxDistance","setMaxDistance","maxDistance","getFixedDistance","setFixedDistance","distance","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","isFunction","_then","_startTime","state","_keys","_parsedKeys","_parseKeys","_from","_getState","_to","then","progress","getValue","__add","__subtract","__multiply","_setProperty","onUpdate","startTime","_getProperty","resolved","_resolveValue","_calculate","parsed","PaperScript","calculateBinary","Http","xhr","XMLHttpRequest","open","url","async","mimeType","overrideMimeType","onload","status","responseText","onerror","message","send","canvases","sr","sg","sb","sa","bg","bb","ba","dr","dg","db","getLum","setLum","mn","lmn","ln","mxl","getSat","setSat","md","modes","screen","overlay","darken","lighten","difference","exclusion","hue","saturation","luminosity","average","negation","mode","srcContext","dstContext","srcCanvas","dstData","SvgElement","svg","xmlns","xlink","attributeNamespace","href","attributes","namespace","setAttributeNS","tag","createElementNS","getAttributeNS","SvgStyles","true","false","property","attribute","toSVG","fromSVG","exportFilter","getTransform","coordinates","attrs","trans","exportGroup","childNode","exportSVG","exportShape","exporters","embedImages","matchShapes","definitionItem","viewBox","overflow","textContent","applyStyle","gradientNode","getGradient","getOrigin","getDestination","getHighlight","fy","gradientUnits","stopColor","exportGradient","visibility","svgs","__id","typeId","exportDefinitions","defs","insertBefore","firstChild","XMLSerializer","serializeToString","exporter","onExport","setOptions","rootSize","allowNull","allowPercent","defaultValue","defaultX","defaultY","convertValue","map","importGroup","nodes","childNodes","isClip","isDefs","currentStyle","applyAttributes","querySelectorAll","importNode","importPoly","importGradient","scaleToBounds","_scaleToBounds","importers","clippath","polygon","polyline","lineargradient","radialgradient","use","circle","text","switch","applyTransform","transforms","applyOpacity","gradientTransform","setVisible","display","percent","styles","group","tagName","isElement","nextSibling","importer","onImport","expandShapes","importSVG","DOMParser","parseFromString","File","reader","FileReader","readAsText","Symbol","PlacedSymbol"],"sourceRoot":""}